(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const i of o)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function t(o){const i={};return o.integrity&&(i.integrity=o.integrity),o.referrerPolicy&&(i.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?i.credentials="include":o.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(o){if(o.ep)return;o.ep=!0;const i=t(o);fetch(o.href,i)}})();function XC(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var ZC={exports:{}},Eu={},eS={exports:{}},ie={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nl=Symbol.for("react.element"),xA=Symbol.for("react.portal"),OA=Symbol.for("react.fragment"),MA=Symbol.for("react.strict_mode"),_A=Symbol.for("react.profiler"),PA=Symbol.for("react.provider"),DA=Symbol.for("react.context"),LA=Symbol.for("react.forward_ref"),UA=Symbol.for("react.suspense"),FA=Symbol.for("react.memo"),HA=Symbol.for("react.lazy"),Mg=Symbol.iterator;function BA(n){return n===null||typeof n!="object"?null:(n=Mg&&n[Mg]||n["@@iterator"],typeof n=="function"?n:null)}var tS={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},nS=Object.assign,rS={};function Is(n,e,t){this.props=n,this.context=e,this.refs=rS,this.updater=t||tS}Is.prototype.isReactComponent={};Is.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Is.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function oS(){}oS.prototype=Is.prototype;function fp(n,e,t){this.props=n,this.context=e,this.refs=rS,this.updater=t||tS}var pp=fp.prototype=new oS;pp.constructor=fp;nS(pp,Is.prototype);pp.isPureReactComponent=!0;var _g=Array.isArray,iS=Object.prototype.hasOwnProperty,mp={current:null},sS={key:!0,ref:!0,__self:!0,__source:!0};function aS(n,e,t){var r,o={},i=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)iS.call(e,r)&&!sS.hasOwnProperty(r)&&(o[r]=e[r]);var a=arguments.length-2;if(a===1)o.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];o.children=l}if(n&&n.defaultProps)for(r in a=n.defaultProps,a)o[r]===void 0&&(o[r]=a[r]);return{$$typeof:nl,type:n,key:i,ref:s,props:o,_owner:mp.current}}function zA(n,e){return{$$typeof:nl,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function gp(n){return typeof n=="object"&&n!==null&&n.$$typeof===nl}function KA(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var Pg=/\/+/g;function Ed(n,e){return typeof n=="object"&&n!==null&&n.key!=null?KA(""+n.key):e.toString(36)}function tc(n,e,t,r,o){var i=typeof n;(i==="undefined"||i==="boolean")&&(n=null);var s=!1;if(n===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(n.$$typeof){case nl:case xA:s=!0}}if(s)return s=n,o=o(s),n=r===""?"."+Ed(s,0):r,_g(o)?(t="",n!=null&&(t=n.replace(Pg,"$&/")+"/"),tc(o,e,t,"",function(c){return c})):o!=null&&(gp(o)&&(o=zA(o,t+(!o.key||s&&s.key===o.key?"":(""+o.key).replace(Pg,"$&/")+"/")+n)),e.push(o)),1;if(s=0,r=r===""?".":r+":",_g(n))for(var a=0;a<n.length;a++){i=n[a];var l=r+Ed(i,a);s+=tc(i,e,t,l,o)}else if(l=BA(n),typeof l=="function")for(n=l.call(n),a=0;!(i=n.next()).done;)i=i.value,l=r+Ed(i,a++),s+=tc(i,e,t,l,o);else if(i==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function Sl(n,e,t){if(n==null)return n;var r=[],o=0;return tc(n,r,"","",function(i){return e.call(t,i,o++)}),r}function jA(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var zt={current:null},nc={transition:null},$A={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:nc,ReactCurrentOwner:mp};function lS(){throw Error("act(...) is not supported in production builds of React.")}ie.Children={map:Sl,forEach:function(n,e,t){Sl(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Sl(n,function(){e++}),e},toArray:function(n){return Sl(n,function(e){return e})||[]},only:function(n){if(!gp(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};ie.Component=Is;ie.Fragment=OA;ie.Profiler=_A;ie.PureComponent=fp;ie.StrictMode=MA;ie.Suspense=UA;ie.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=$A;ie.act=lS;ie.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var r=nS({},n.props),o=n.key,i=n.ref,s=n._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=mp.current),e.key!==void 0&&(o=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)iS.call(e,l)&&!sS.hasOwnProperty(l)&&(r[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)r.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:nl,type:n.type,key:o,ref:i,props:r,_owner:s}};ie.createContext=function(n){return n={$$typeof:DA,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:PA,_context:n},n.Consumer=n};ie.createElement=aS;ie.createFactory=function(n){var e=aS.bind(null,n);return e.type=n,e};ie.createRef=function(){return{current:null}};ie.forwardRef=function(n){return{$$typeof:LA,render:n}};ie.isValidElement=gp;ie.lazy=function(n){return{$$typeof:HA,_payload:{_status:-1,_result:n},_init:jA}};ie.memo=function(n,e){return{$$typeof:FA,type:n,compare:e===void 0?null:e}};ie.startTransition=function(n){var e=nc.transition;nc.transition={};try{n()}finally{nc.transition=e}};ie.unstable_act=lS;ie.useCallback=function(n,e){return zt.current.useCallback(n,e)};ie.useContext=function(n){return zt.current.useContext(n)};ie.useDebugValue=function(){};ie.useDeferredValue=function(n){return zt.current.useDeferredValue(n)};ie.useEffect=function(n,e){return zt.current.useEffect(n,e)};ie.useId=function(){return zt.current.useId()};ie.useImperativeHandle=function(n,e,t){return zt.current.useImperativeHandle(n,e,t)};ie.useInsertionEffect=function(n,e){return zt.current.useInsertionEffect(n,e)};ie.useLayoutEffect=function(n,e){return zt.current.useLayoutEffect(n,e)};ie.useMemo=function(n,e){return zt.current.useMemo(n,e)};ie.useReducer=function(n,e,t){return zt.current.useReducer(n,e,t)};ie.useRef=function(n){return zt.current.useRef(n)};ie.useState=function(n){return zt.current.useState(n)};ie.useSyncExternalStore=function(n,e,t){return zt.current.useSyncExternalStore(n,e,t)};ie.useTransition=function(){return zt.current.useTransition()};ie.version="18.3.1";eS.exports=ie;var S=eS.exports;const re=XC(S);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var VA=S,WA=Symbol.for("react.element"),qA=Symbol.for("react.fragment"),GA=Object.prototype.hasOwnProperty,QA=VA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,YA={key:!0,ref:!0,__self:!0,__source:!0};function cS(n,e,t){var r,o={},i=null,s=null;t!==void 0&&(i=""+t),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)GA.call(e,r)&&!YA.hasOwnProperty(r)&&(o[r]=e[r]);if(n&&n.defaultProps)for(r in e=n.defaultProps,e)o[r]===void 0&&(o[r]=e[r]);return{$$typeof:WA,type:n,key:i,ref:s,props:o,_owner:QA.current}}Eu.Fragment=qA;Eu.jsx=cS;Eu.jsxs=cS;ZC.exports=Eu;var k=ZC.exports,uS={exports:{}},Cn={},dS={exports:{}},hS={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(D,$){var G=D.length;D.push($);e:for(;0<G;){var fe=G-1>>>1,oe=D[fe];if(0<o(oe,$))D[fe]=$,D[G]=oe,G=fe;else break e}}function t(D){return D.length===0?null:D[0]}function r(D){if(D.length===0)return null;var $=D[0],G=D.pop();if(G!==$){D[0]=G;e:for(var fe=0,oe=D.length,Qe=oe>>>1;fe<Qe;){var Be=2*(fe+1)-1,ee=D[Be],V=Be+1,Y=D[V];if(0>o(ee,G))V<oe&&0>o(Y,ee)?(D[fe]=Y,D[V]=G,fe=V):(D[fe]=ee,D[Be]=G,fe=Be);else if(V<oe&&0>o(Y,G))D[fe]=Y,D[V]=G,fe=V;else break e}}return $}function o(D,$){var G=D.sortIndex-$.sortIndex;return G!==0?G:D.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;n.unstable_now=function(){return i.now()}}else{var s=Date,a=s.now();n.unstable_now=function(){return s.now()-a}}var l=[],c=[],u=1,d=null,h=3,f=!1,p=!1,m=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function C(D){for(var $=t(c);$!==null;){if($.callback===null)r(c);else if($.startTime<=D)r(c),$.sortIndex=$.expirationTime,e(l,$);else break;$=t(c)}}function w(D){if(m=!1,C(D),!p)if(t(l)!==null)p=!0,en(I);else{var $=t(c);$!==null&&Ue(w,$.startTime-D)}}function I(D,$){p=!1,m&&(m=!1,g(E),E=-1),f=!0;var G=h;try{for(C($),d=t(l);d!==null&&(!(d.expirationTime>$)||D&&!W());){var fe=d.callback;if(typeof fe=="function"){d.callback=null,h=d.priorityLevel;var oe=fe(d.expirationTime<=$);$=n.unstable_now(),typeof oe=="function"?d.callback=oe:d===t(l)&&r(l),C($)}else r(l);d=t(l)}if(d!==null)var Qe=!0;else{var Be=t(c);Be!==null&&Ue(w,Be.startTime-$),Qe=!1}return Qe}finally{d=null,h=G,f=!1}}var A=!1,R=null,E=-1,_=5,O=-1;function W(){return!(n.unstable_now()-O<_)}function ce(){if(R!==null){var D=n.unstable_now();O=D;var $=!0;try{$=R(!0,D)}finally{$?ue():(A=!1,R=null)}}else A=!1}var ue;if(typeof y=="function")ue=function(){y(ce)};else if(typeof MessageChannel<"u"){var ve=new MessageChannel,ht=ve.port2;ve.port1.onmessage=ce,ue=function(){ht.postMessage(null)}}else ue=function(){v(ce,0)};function en(D){R=D,A||(A=!0,ue())}function Ue(D,$){E=v(function(){D(n.unstable_now())},$)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(D){D.callback=null},n.unstable_continueExecution=function(){p||f||(p=!0,en(I))},n.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_=0<D?Math.floor(1e3/D):5},n.unstable_getCurrentPriorityLevel=function(){return h},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(D){switch(h){case 1:case 2:case 3:var $=3;break;default:$=h}var G=h;h=$;try{return D()}finally{h=G}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(D,$){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var G=h;h=D;try{return $()}finally{h=G}},n.unstable_scheduleCallback=function(D,$,G){var fe=n.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?fe+G:fe):G=fe,D){case 1:var oe=-1;break;case 2:oe=250;break;case 5:oe=1073741823;break;case 4:oe=1e4;break;default:oe=5e3}return oe=G+oe,D={id:u++,callback:$,priorityLevel:D,startTime:G,expirationTime:oe,sortIndex:-1},G>fe?(D.sortIndex=G,e(c,D),t(l)===null&&D===t(c)&&(m?(g(E),E=-1):m=!0,Ue(w,G-fe))):(D.sortIndex=oe,e(l,D),p||f||(p=!0,en(I))),D},n.unstable_shouldYield=W,n.unstable_wrapCallback=function(D){var $=h;return function(){var G=h;h=$;try{return D.apply(this,arguments)}finally{h=G}}}})(hS);dS.exports=hS;var JA=dS.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var XA=S,vn=JA;function M(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fS=new Set,ka={};function gi(n,e){as(n,e),as(n+"Capture",e)}function as(n,e){for(ka[n]=e,n=0;n<e.length;n++)fS.add(e[n])}var Or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bh=Object.prototype.hasOwnProperty,ZA=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Dg={},Lg={};function e0(n){return bh.call(Lg,n)?!0:bh.call(Dg,n)?!1:ZA.test(n)?Lg[n]=!0:(Dg[n]=!0,!1)}function t0(n,e,t,r){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function n0(n,e,t,r){if(e===null||typeof e>"u"||t0(n,e,t,r))return!0;if(r)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Kt(n,e,t,r,o,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=o,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var St={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){St[n]=new Kt(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];St[e]=new Kt(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){St[n]=new Kt(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){St[n]=new Kt(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){St[n]=new Kt(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){St[n]=new Kt(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){St[n]=new Kt(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){St[n]=new Kt(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){St[n]=new Kt(n,5,!1,n.toLowerCase(),null,!1,!1)});var yp=/[\-:]([a-z])/g;function vp(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(yp,vp);St[e]=new Kt(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(yp,vp);St[e]=new Kt(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(yp,vp);St[e]=new Kt(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){St[n]=new Kt(n,1,!1,n.toLowerCase(),null,!1,!1)});St.xlinkHref=new Kt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){St[n]=new Kt(n,1,!1,n.toLowerCase(),null,!0,!0)});function Cp(n,e,t,r){var o=St.hasOwnProperty(e)?St[e]:null;(o!==null?o.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(n0(e,t,o,r)&&(t=null),r||o===null?e0(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):o.mustUseProperty?n[o.propertyName]=t===null?o.type===3?!1:"":t:(e=o.attributeName,r=o.attributeNamespace,t===null?n.removeAttribute(e):(o=o.type,t=o===3||o===4&&t===!0?"":""+t,r?n.setAttributeNS(r,e,t):n.setAttribute(e,t))))}var Fr=XA.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wl=Symbol.for("react.element"),Mi=Symbol.for("react.portal"),_i=Symbol.for("react.fragment"),Sp=Symbol.for("react.strict_mode"),Rh=Symbol.for("react.profiler"),pS=Symbol.for("react.provider"),mS=Symbol.for("react.context"),wp=Symbol.for("react.forward_ref"),Nh=Symbol.for("react.suspense"),xh=Symbol.for("react.suspense_list"),Tp=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),gS=Symbol.for("react.offscreen"),Ug=Symbol.iterator;function Fs(n){return n===null||typeof n!="object"?null:(n=Ug&&n[Ug]||n["@@iterator"],typeof n=="function"?n:null)}var Le=Object.assign,kd;function qs(n){if(kd===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);kd=e&&e[1]||""}return`
`+kd+n}var Id=!1;function Ad(n,e){if(!n||Id)return"";Id=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){r=c}n.call(e.prototype)}else{try{throw Error()}catch(c){r=c}n()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var o=c.stack.split(`
`),i=r.stack.split(`
`),s=o.length-1,a=i.length-1;1<=s&&0<=a&&o[s]!==i[a];)a--;for(;1<=s&&0<=a;s--,a--)if(o[s]!==i[a]){if(s!==1||a!==1)do if(s--,a--,0>a||o[s]!==i[a]){var l=`
`+o[s].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=s&&0<=a);break}}}finally{Id=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?qs(n):""}function r0(n){switch(n.tag){case 5:return qs(n.type);case 16:return qs("Lazy");case 13:return qs("Suspense");case 19:return qs("SuspenseList");case 0:case 2:case 15:return n=Ad(n.type,!1),n;case 11:return n=Ad(n.type.render,!1),n;case 1:return n=Ad(n.type,!0),n;default:return""}}function Oh(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case _i:return"Fragment";case Mi:return"Portal";case Rh:return"Profiler";case Sp:return"StrictMode";case Nh:return"Suspense";case xh:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case mS:return(n.displayName||"Context")+".Consumer";case pS:return(n._context.displayName||"Context")+".Provider";case wp:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case Tp:return e=n.displayName||null,e!==null?e:Oh(n.type)||"Memo";case Gr:e=n._payload,n=n._init;try{return Oh(n(e))}catch{}}return null}function o0(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Oh(e);case 8:return e===Sp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Io(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function yS(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function i0(n){var e=yS(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),r=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var o=t.get,i=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return o.call(this)},set:function(s){r=""+s,i.call(this,s)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Tl(n){n._valueTracker||(n._valueTracker=i0(n))}function vS(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),r="";return n&&(r=yS(n)?n.checked?"true":"false":n.value),n=r,n!==t?(e.setValue(n),!0):!1}function Cc(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function Mh(n,e){var t=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function Fg(n,e){var t=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;t=Io(e.value!=null?e.value:t),n._wrapperState={initialChecked:r,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function CS(n,e){e=e.checked,e!=null&&Cp(n,"checked",e,!1)}function _h(n,e){CS(n,e);var t=Io(e.value),r=e.type;if(t!=null)r==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(r==="submit"||r==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?Ph(n,e.type,t):e.hasOwnProperty("defaultValue")&&Ph(n,e.type,Io(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function Hg(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function Ph(n,e,t){(e!=="number"||Cc(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Gs=Array.isArray;function Qi(n,e,t,r){if(n=n.options,e){e={};for(var o=0;o<t.length;o++)e["$"+t[o]]=!0;for(t=0;t<n.length;t++)o=e.hasOwnProperty("$"+n[t].value),n[t].selected!==o&&(n[t].selected=o),o&&r&&(n[t].defaultSelected=!0)}else{for(t=""+Io(t),e=null,o=0;o<n.length;o++){if(n[o].value===t){n[o].selected=!0,r&&(n[o].defaultSelected=!0);return}e!==null||n[o].disabled||(e=n[o])}e!==null&&(e.selected=!0)}}function Dh(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(M(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function Bg(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(M(92));if(Gs(t)){if(1<t.length)throw Error(M(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:Io(t)}}function SS(n,e){var t=Io(e.value),r=Io(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),r!=null&&(n.defaultValue=""+r)}function zg(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function wS(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Lh(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?wS(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var El,TS=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,r,o){MSApp.execUnsafeLocalFunction(function(){return n(e,t,r,o)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(El=El||document.createElement("div"),El.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=El.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Ia(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},s0=["Webkit","ms","Moz","O"];Object.keys(ta).forEach(function(n){s0.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),ta[e]=ta[n]})});function ES(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||ta.hasOwnProperty(n)&&ta[n]?(""+e).trim():e+"px"}function kS(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var r=t.indexOf("--")===0,o=ES(t,e[t],r);t==="float"&&(t="cssFloat"),r?n.setProperty(t,o):n[t]=o}}var a0=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Uh(n,e){if(e){if(a0[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(M(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(M(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(M(61))}if(e.style!=null&&typeof e.style!="object")throw Error(M(62))}}function Fh(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hh=null;function Ep(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var Bh=null,Yi=null,Ji=null;function Kg(n){if(n=il(n)){if(typeof Bh!="function")throw Error(M(280));var e=n.stateNode;e&&(e=Ru(e),Bh(n.stateNode,n.type,e))}}function IS(n){Yi?Ji?Ji.push(n):Ji=[n]:Yi=n}function AS(){if(Yi){var n=Yi,e=Ji;if(Ji=Yi=null,Kg(n),e)for(n=0;n<e.length;n++)Kg(e[n])}}function bS(n,e){return n(e)}function RS(){}var bd=!1;function NS(n,e,t){if(bd)return n(e,t);bd=!0;try{return bS(n,e,t)}finally{bd=!1,(Yi!==null||Ji!==null)&&(RS(),AS())}}function Aa(n,e){var t=n.stateNode;if(t===null)return null;var r=Ru(t);if(r===null)return null;t=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(n=n.type,r=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!r;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(M(231,e,typeof t));return t}var zh=!1;if(Or)try{var Hs={};Object.defineProperty(Hs,"passive",{get:function(){zh=!0}}),window.addEventListener("test",Hs,Hs),window.removeEventListener("test",Hs,Hs)}catch{zh=!1}function l0(n,e,t,r,o,i,s,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var na=!1,Sc=null,wc=!1,Kh=null,c0={onError:function(n){na=!0,Sc=n}};function u0(n,e,t,r,o,i,s,a,l){na=!1,Sc=null,l0.apply(c0,arguments)}function d0(n,e,t,r,o,i,s,a,l){if(u0.apply(this,arguments),na){if(na){var c=Sc;na=!1,Sc=null}else throw Error(M(198));wc||(wc=!0,Kh=c)}}function yi(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function xS(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function jg(n){if(yi(n)!==n)throw Error(M(188))}function h0(n){var e=n.alternate;if(!e){if(e=yi(n),e===null)throw Error(M(188));return e!==n?null:n}for(var t=n,r=e;;){var o=t.return;if(o===null)break;var i=o.alternate;if(i===null){if(r=o.return,r!==null){t=r;continue}break}if(o.child===i.child){for(i=o.child;i;){if(i===t)return jg(o),n;if(i===r)return jg(o),e;i=i.sibling}throw Error(M(188))}if(t.return!==r.return)t=o,r=i;else{for(var s=!1,a=o.child;a;){if(a===t){s=!0,t=o,r=i;break}if(a===r){s=!0,r=o,t=i;break}a=a.sibling}if(!s){for(a=i.child;a;){if(a===t){s=!0,t=i,r=o;break}if(a===r){s=!0,r=i,t=o;break}a=a.sibling}if(!s)throw Error(M(189))}}if(t.alternate!==r)throw Error(M(190))}if(t.tag!==3)throw Error(M(188));return t.stateNode.current===t?n:e}function OS(n){return n=h0(n),n!==null?MS(n):null}function MS(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=MS(n);if(e!==null)return e;n=n.sibling}return null}var _S=vn.unstable_scheduleCallback,$g=vn.unstable_cancelCallback,f0=vn.unstable_shouldYield,p0=vn.unstable_requestPaint,Ke=vn.unstable_now,m0=vn.unstable_getCurrentPriorityLevel,kp=vn.unstable_ImmediatePriority,PS=vn.unstable_UserBlockingPriority,Tc=vn.unstable_NormalPriority,g0=vn.unstable_LowPriority,DS=vn.unstable_IdlePriority,ku=null,cr=null;function y0(n){if(cr&&typeof cr.onCommitFiberRoot=="function")try{cr.onCommitFiberRoot(ku,n,void 0,(n.current.flags&128)===128)}catch{}}var zn=Math.clz32?Math.clz32:S0,v0=Math.log,C0=Math.LN2;function S0(n){return n>>>=0,n===0?32:31-(v0(n)/C0|0)|0}var kl=64,Il=4194304;function Qs(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Ec(n,e){var t=n.pendingLanes;if(t===0)return 0;var r=0,o=n.suspendedLanes,i=n.pingedLanes,s=t&268435455;if(s!==0){var a=s&~o;a!==0?r=Qs(a):(i&=s,i!==0&&(r=Qs(i)))}else s=t&~o,s!==0?r=Qs(s):i!==0&&(r=Qs(i));if(r===0)return 0;if(e!==0&&e!==r&&!(e&o)&&(o=r&-r,i=e&-e,o>=i||o===16&&(i&4194240)!==0))return e;if(r&4&&(r|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=r;0<e;)t=31-zn(e),o=1<<t,r|=n[t],e&=~o;return r}function w0(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function T0(n,e){for(var t=n.suspendedLanes,r=n.pingedLanes,o=n.expirationTimes,i=n.pendingLanes;0<i;){var s=31-zn(i),a=1<<s,l=o[s];l===-1?(!(a&t)||a&r)&&(o[s]=w0(a,e)):l<=e&&(n.expiredLanes|=a),i&=~a}}function jh(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function LS(){var n=kl;return kl<<=1,!(kl&4194240)&&(kl=64),n}function Rd(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function rl(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-zn(e),n[e]=t}function E0(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var r=n.eventTimes;for(n=n.expirationTimes;0<t;){var o=31-zn(t),i=1<<o;e[o]=0,r[o]=-1,n[o]=-1,t&=~i}}function Ip(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var r=31-zn(t),o=1<<r;o&e|n[r]&e&&(n[r]|=e),t&=~o}}var ge=0;function US(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var FS,Ap,HS,BS,zS,$h=!1,Al=[],co=null,uo=null,ho=null,ba=new Map,Ra=new Map,Zr=[],k0="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Vg(n,e){switch(n){case"focusin":case"focusout":co=null;break;case"dragenter":case"dragleave":uo=null;break;case"mouseover":case"mouseout":ho=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ra.delete(e.pointerId)}}function Bs(n,e,t,r,o,i){return n===null||n.nativeEvent!==i?(n={blockedOn:e,domEventName:t,eventSystemFlags:r,nativeEvent:i,targetContainers:[o]},e!==null&&(e=il(e),e!==null&&Ap(e)),n):(n.eventSystemFlags|=r,e=n.targetContainers,o!==null&&e.indexOf(o)===-1&&e.push(o),n)}function I0(n,e,t,r,o){switch(e){case"focusin":return co=Bs(co,n,e,t,r,o),!0;case"dragenter":return uo=Bs(uo,n,e,t,r,o),!0;case"mouseover":return ho=Bs(ho,n,e,t,r,o),!0;case"pointerover":var i=o.pointerId;return ba.set(i,Bs(ba.get(i)||null,n,e,t,r,o)),!0;case"gotpointercapture":return i=o.pointerId,Ra.set(i,Bs(Ra.get(i)||null,n,e,t,r,o)),!0}return!1}function KS(n){var e=zo(n.target);if(e!==null){var t=yi(e);if(t!==null){if(e=t.tag,e===13){if(e=xS(t),e!==null){n.blockedOn=e,zS(n.priority,function(){HS(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function rc(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=Vh(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var r=new t.constructor(t.type,t);Hh=r,t.target.dispatchEvent(r),Hh=null}else return e=il(t),e!==null&&Ap(e),n.blockedOn=t,!1;e.shift()}return!0}function Wg(n,e,t){rc(n)&&t.delete(e)}function A0(){$h=!1,co!==null&&rc(co)&&(co=null),uo!==null&&rc(uo)&&(uo=null),ho!==null&&rc(ho)&&(ho=null),ba.forEach(Wg),Ra.forEach(Wg)}function zs(n,e){n.blockedOn===e&&(n.blockedOn=null,$h||($h=!0,vn.unstable_scheduleCallback(vn.unstable_NormalPriority,A0)))}function Na(n){function e(o){return zs(o,n)}if(0<Al.length){zs(Al[0],n);for(var t=1;t<Al.length;t++){var r=Al[t];r.blockedOn===n&&(r.blockedOn=null)}}for(co!==null&&zs(co,n),uo!==null&&zs(uo,n),ho!==null&&zs(ho,n),ba.forEach(e),Ra.forEach(e),t=0;t<Zr.length;t++)r=Zr[t],r.blockedOn===n&&(r.blockedOn=null);for(;0<Zr.length&&(t=Zr[0],t.blockedOn===null);)KS(t),t.blockedOn===null&&Zr.shift()}var Xi=Fr.ReactCurrentBatchConfig,kc=!0;function b0(n,e,t,r){var o=ge,i=Xi.transition;Xi.transition=null;try{ge=1,bp(n,e,t,r)}finally{ge=o,Xi.transition=i}}function R0(n,e,t,r){var o=ge,i=Xi.transition;Xi.transition=null;try{ge=4,bp(n,e,t,r)}finally{ge=o,Xi.transition=i}}function bp(n,e,t,r){if(kc){var o=Vh(n,e,t,r);if(o===null)Fd(n,e,r,Ic,t),Vg(n,r);else if(I0(o,n,e,t,r))r.stopPropagation();else if(Vg(n,r),e&4&&-1<k0.indexOf(n)){for(;o!==null;){var i=il(o);if(i!==null&&FS(i),i=Vh(n,e,t,r),i===null&&Fd(n,e,r,Ic,t),i===o)break;o=i}o!==null&&r.stopPropagation()}else Fd(n,e,r,null,t)}}var Ic=null;function Vh(n,e,t,r){if(Ic=null,n=Ep(r),n=zo(n),n!==null)if(e=yi(n),e===null)n=null;else if(t=e.tag,t===13){if(n=xS(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Ic=n,null}function jS(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(m0()){case kp:return 1;case PS:return 4;case Tc:case g0:return 16;case DS:return 536870912;default:return 16}default:return 16}}var no=null,Rp=null,oc=null;function $S(){if(oc)return oc;var n,e=Rp,t=e.length,r,o="value"in no?no.value:no.textContent,i=o.length;for(n=0;n<t&&e[n]===o[n];n++);var s=t-n;for(r=1;r<=s&&e[t-r]===o[i-r];r++);return oc=o.slice(n,1<r?1-r:void 0)}function ic(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function bl(){return!0}function qg(){return!1}function Sn(n){function e(t,r,o,i,s){this._reactName=t,this._targetInst=o,this.type=r,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?bl:qg,this.isPropagationStopped=qg,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=bl)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=bl)},persist:function(){},isPersistent:bl}),e}var As={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Np=Sn(As),ol=Le({},As,{view:0,detail:0}),N0=Sn(ol),Nd,xd,Ks,Iu=Le({},ol,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:xp,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==Ks&&(Ks&&n.type==="mousemove"?(Nd=n.screenX-Ks.screenX,xd=n.screenY-Ks.screenY):xd=Nd=0,Ks=n),Nd)},movementY:function(n){return"movementY"in n?n.movementY:xd}}),Gg=Sn(Iu),x0=Le({},Iu,{dataTransfer:0}),O0=Sn(x0),M0=Le({},ol,{relatedTarget:0}),Od=Sn(M0),_0=Le({},As,{animationName:0,elapsedTime:0,pseudoElement:0}),P0=Sn(_0),D0=Le({},As,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),L0=Sn(D0),U0=Le({},As,{data:0}),Qg=Sn(U0),F0={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},H0={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},B0={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function z0(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=B0[n])?!!e[n]:!1}function xp(){return z0}var K0=Le({},ol,{key:function(n){if(n.key){var e=F0[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=ic(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?H0[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:xp,charCode:function(n){return n.type==="keypress"?ic(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?ic(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),j0=Sn(K0),$0=Le({},Iu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Yg=Sn($0),V0=Le({},ol,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:xp}),W0=Sn(V0),q0=Le({},As,{propertyName:0,elapsedTime:0,pseudoElement:0}),G0=Sn(q0),Q0=Le({},Iu,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),Y0=Sn(Q0),J0=[9,13,27,32],Op=Or&&"CompositionEvent"in window,ra=null;Or&&"documentMode"in document&&(ra=document.documentMode);var X0=Or&&"TextEvent"in window&&!ra,VS=Or&&(!Op||ra&&8<ra&&11>=ra),Jg=" ",Xg=!1;function WS(n,e){switch(n){case"keyup":return J0.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function qS(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var Pi=!1;function Z0(n,e){switch(n){case"compositionend":return qS(e);case"keypress":return e.which!==32?null:(Xg=!0,Jg);case"textInput":return n=e.data,n===Jg&&Xg?null:n;default:return null}}function eb(n,e){if(Pi)return n==="compositionend"||!Op&&WS(n,e)?(n=$S(),oc=Rp=no=null,Pi=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return VS&&e.locale!=="ko"?null:e.data;default:return null}}var tb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Zg(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!tb[n.type]:e==="textarea"}function GS(n,e,t,r){IS(r),e=Ac(e,"onChange"),0<e.length&&(t=new Np("onChange","change",null,t,r),n.push({event:t,listeners:e}))}var oa=null,xa=null;function nb(n){iw(n,0)}function Au(n){var e=Ui(n);if(vS(e))return n}function rb(n,e){if(n==="change")return e}var QS=!1;if(Or){var Md;if(Or){var _d="oninput"in document;if(!_d){var ey=document.createElement("div");ey.setAttribute("oninput","return;"),_d=typeof ey.oninput=="function"}Md=_d}else Md=!1;QS=Md&&(!document.documentMode||9<document.documentMode)}function ty(){oa&&(oa.detachEvent("onpropertychange",YS),xa=oa=null)}function YS(n){if(n.propertyName==="value"&&Au(xa)){var e=[];GS(e,xa,n,Ep(n)),NS(nb,e)}}function ob(n,e,t){n==="focusin"?(ty(),oa=e,xa=t,oa.attachEvent("onpropertychange",YS)):n==="focusout"&&ty()}function ib(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Au(xa)}function sb(n,e){if(n==="click")return Au(e)}function ab(n,e){if(n==="input"||n==="change")return Au(e)}function lb(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Vn=typeof Object.is=="function"?Object.is:lb;function Oa(n,e){if(Vn(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),r=Object.keys(e);if(t.length!==r.length)return!1;for(r=0;r<t.length;r++){var o=t[r];if(!bh.call(e,o)||!Vn(n[o],e[o]))return!1}return!0}function ny(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function ry(n,e){var t=ny(n);n=0;for(var r;t;){if(t.nodeType===3){if(r=n+t.textContent.length,n<=e&&r>=e)return{node:t,offset:e-n};n=r}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=ny(t)}}function JS(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?JS(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function XS(){for(var n=window,e=Cc();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Cc(n.document)}return e}function Mp(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function cb(n){var e=XS(),t=n.focusedElem,r=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&JS(t.ownerDocument.documentElement,t)){if(r!==null&&Mp(t)){if(e=r.start,n=r.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var o=t.textContent.length,i=Math.min(r.start,o);r=r.end===void 0?i:Math.min(r.end,o),!n.extend&&i>r&&(o=r,r=i,i=o),o=ry(t,i);var s=ry(t,r);o&&s&&(n.rangeCount!==1||n.anchorNode!==o.node||n.anchorOffset!==o.offset||n.focusNode!==s.node||n.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(o.node,o.offset),n.removeAllRanges(),i>r?(n.addRange(e),n.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var ub=Or&&"documentMode"in document&&11>=document.documentMode,Di=null,Wh=null,ia=null,qh=!1;function oy(n,e,t){var r=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;qh||Di==null||Di!==Cc(r)||(r=Di,"selectionStart"in r&&Mp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ia&&Oa(ia,r)||(ia=r,r=Ac(Wh,"onSelect"),0<r.length&&(e=new Np("onSelect","select",null,e,t),n.push({event:e,listeners:r}),e.target=Di)))}function Rl(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var Li={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},Pd={},ZS={};Or&&(ZS=document.createElement("div").style,"AnimationEvent"in window||(delete Li.animationend.animation,delete Li.animationiteration.animation,delete Li.animationstart.animation),"TransitionEvent"in window||delete Li.transitionend.transition);function bu(n){if(Pd[n])return Pd[n];if(!Li[n])return n;var e=Li[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in ZS)return Pd[n]=e[t];return n}var ew=bu("animationend"),tw=bu("animationiteration"),nw=bu("animationstart"),rw=bu("transitionend"),ow=new Map,iy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function xo(n,e){ow.set(n,e),gi(e,[n])}for(var Dd=0;Dd<iy.length;Dd++){var Ld=iy[Dd],db=Ld.toLowerCase(),hb=Ld[0].toUpperCase()+Ld.slice(1);xo(db,"on"+hb)}xo(ew,"onAnimationEnd");xo(tw,"onAnimationIteration");xo(nw,"onAnimationStart");xo("dblclick","onDoubleClick");xo("focusin","onFocus");xo("focusout","onBlur");xo(rw,"onTransitionEnd");as("onMouseEnter",["mouseout","mouseover"]);as("onMouseLeave",["mouseout","mouseover"]);as("onPointerEnter",["pointerout","pointerover"]);as("onPointerLeave",["pointerout","pointerover"]);gi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));gi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));gi("onBeforeInput",["compositionend","keypress","textInput","paste"]);gi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));gi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fb=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ys));function sy(n,e,t){var r=n.type||"unknown-event";n.currentTarget=t,d0(r,e,void 0,n),n.currentTarget=null}function iw(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var r=n[t],o=r.event;r=r.listeners;e:{var i=void 0;if(e)for(var s=r.length-1;0<=s;s--){var a=r[s],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==i&&o.isPropagationStopped())break e;sy(o,a,c),i=l}else for(s=0;s<r.length;s++){if(a=r[s],l=a.instance,c=a.currentTarget,a=a.listener,l!==i&&o.isPropagationStopped())break e;sy(o,a,c),i=l}}}if(wc)throw n=Kh,wc=!1,Kh=null,n}function Ie(n,e){var t=e[Xh];t===void 0&&(t=e[Xh]=new Set);var r=n+"__bubble";t.has(r)||(sw(e,n,2,!1),t.add(r))}function Ud(n,e,t){var r=0;e&&(r|=4),sw(t,n,r,e)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function Ma(n){if(!n[Nl]){n[Nl]=!0,fS.forEach(function(t){t!=="selectionchange"&&(fb.has(t)||Ud(t,!1,n),Ud(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Nl]||(e[Nl]=!0,Ud("selectionchange",!1,e))}}function sw(n,e,t,r){switch(jS(e)){case 1:var o=b0;break;case 4:o=R0;break;default:o=bp}t=o.bind(null,e,t,n),o=void 0,!zh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(o=!0),r?o!==void 0?n.addEventListener(e,t,{capture:!0,passive:o}):n.addEventListener(e,t,!0):o!==void 0?n.addEventListener(e,t,{passive:o}):n.addEventListener(e,t,!1)}function Fd(n,e,t,r,o){var i=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var a=r.stateNode.containerInfo;if(a===o||a.nodeType===8&&a.parentNode===o)break;if(s===4)for(s=r.return;s!==null;){var l=s.tag;if((l===3||l===4)&&(l=s.stateNode.containerInfo,l===o||l.nodeType===8&&l.parentNode===o))return;s=s.return}for(;a!==null;){if(s=zo(a),s===null)return;if(l=s.tag,l===5||l===6){r=i=s;continue e}a=a.parentNode}}r=r.return}NS(function(){var c=i,u=Ep(t),d=[];e:{var h=ow.get(n);if(h!==void 0){var f=Np,p=n;switch(n){case"keypress":if(ic(t)===0)break e;case"keydown":case"keyup":f=j0;break;case"focusin":p="focus",f=Od;break;case"focusout":p="blur",f=Od;break;case"beforeblur":case"afterblur":f=Od;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Gg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=O0;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=W0;break;case ew:case tw:case nw:f=P0;break;case rw:f=G0;break;case"scroll":f=N0;break;case"wheel":f=Y0;break;case"copy":case"cut":case"paste":f=L0;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Yg}var m=(e&4)!==0,v=!m&&n==="scroll",g=m?h!==null?h+"Capture":null:h;m=[];for(var y=c,C;y!==null;){C=y;var w=C.stateNode;if(C.tag===5&&w!==null&&(C=w,g!==null&&(w=Aa(y,g),w!=null&&m.push(_a(y,w,C)))),v)break;y=y.return}0<m.length&&(h=new f(h,p,null,t,u),d.push({event:h,listeners:m}))}}if(!(e&7)){e:{if(h=n==="mouseover"||n==="pointerover",f=n==="mouseout"||n==="pointerout",h&&t!==Hh&&(p=t.relatedTarget||t.fromElement)&&(zo(p)||p[Mr]))break e;if((f||h)&&(h=u.window===u?u:(h=u.ownerDocument)?h.defaultView||h.parentWindow:window,f?(p=t.relatedTarget||t.toElement,f=c,p=p?zo(p):null,p!==null&&(v=yi(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=c),f!==p)){if(m=Gg,w="onMouseLeave",g="onMouseEnter",y="mouse",(n==="pointerout"||n==="pointerover")&&(m=Yg,w="onPointerLeave",g="onPointerEnter",y="pointer"),v=f==null?h:Ui(f),C=p==null?h:Ui(p),h=new m(w,y+"leave",f,t,u),h.target=v,h.relatedTarget=C,w=null,zo(u)===c&&(m=new m(g,y+"enter",p,t,u),m.target=C,m.relatedTarget=v,w=m),v=w,f&&p)t:{for(m=f,g=p,y=0,C=m;C;C=Ei(C))y++;for(C=0,w=g;w;w=Ei(w))C++;for(;0<y-C;)m=Ei(m),y--;for(;0<C-y;)g=Ei(g),C--;for(;y--;){if(m===g||g!==null&&m===g.alternate)break t;m=Ei(m),g=Ei(g)}m=null}else m=null;f!==null&&ay(d,h,f,m,!1),p!==null&&v!==null&&ay(d,v,p,m,!0)}}e:{if(h=c?Ui(c):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var I=rb;else if(Zg(h))if(QS)I=ab;else{I=ib;var A=ob}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(I=sb);if(I&&(I=I(n,c))){GS(d,I,t,u);break e}A&&A(n,h,c),n==="focusout"&&(A=h._wrapperState)&&A.controlled&&h.type==="number"&&Ph(h,"number",h.value)}switch(A=c?Ui(c):window,n){case"focusin":(Zg(A)||A.contentEditable==="true")&&(Di=A,Wh=c,ia=null);break;case"focusout":ia=Wh=Di=null;break;case"mousedown":qh=!0;break;case"contextmenu":case"mouseup":case"dragend":qh=!1,oy(d,t,u);break;case"selectionchange":if(ub)break;case"keydown":case"keyup":oy(d,t,u)}var R;if(Op)e:{switch(n){case"compositionstart":var E="onCompositionStart";break e;case"compositionend":E="onCompositionEnd";break e;case"compositionupdate":E="onCompositionUpdate";break e}E=void 0}else Pi?WS(n,t)&&(E="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(E="onCompositionStart");E&&(VS&&t.locale!=="ko"&&(Pi||E!=="onCompositionStart"?E==="onCompositionEnd"&&Pi&&(R=$S()):(no=u,Rp="value"in no?no.value:no.textContent,Pi=!0)),A=Ac(c,E),0<A.length&&(E=new Qg(E,n,null,t,u),d.push({event:E,listeners:A}),R?E.data=R:(R=qS(t),R!==null&&(E.data=R)))),(R=X0?Z0(n,t):eb(n,t))&&(c=Ac(c,"onBeforeInput"),0<c.length&&(u=new Qg("onBeforeInput","beforeinput",null,t,u),d.push({event:u,listeners:c}),u.data=R))}iw(d,e)})}function _a(n,e,t){return{instance:n,listener:e,currentTarget:t}}function Ac(n,e){for(var t=e+"Capture",r=[];n!==null;){var o=n,i=o.stateNode;o.tag===5&&i!==null&&(o=i,i=Aa(n,t),i!=null&&r.unshift(_a(n,i,o)),i=Aa(n,e),i!=null&&r.push(_a(n,i,o))),n=n.return}return r}function Ei(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function ay(n,e,t,r,o){for(var i=e._reactName,s=[];t!==null&&t!==r;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===r)break;a.tag===5&&c!==null&&(a=c,o?(l=Aa(t,i),l!=null&&s.unshift(_a(t,l,a))):o||(l=Aa(t,i),l!=null&&s.push(_a(t,l,a)))),t=t.return}s.length!==0&&n.push({event:e,listeners:s})}var pb=/\r\n?/g,mb=/\u0000|\uFFFD/g;function ly(n){return(typeof n=="string"?n:""+n).replace(pb,`
`).replace(mb,"")}function xl(n,e,t){if(e=ly(e),ly(n)!==e&&t)throw Error(M(425))}function bc(){}var Gh=null,Qh=null;function Yh(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Jh=typeof setTimeout=="function"?setTimeout:void 0,gb=typeof clearTimeout=="function"?clearTimeout:void 0,cy=typeof Promise=="function"?Promise:void 0,yb=typeof queueMicrotask=="function"?queueMicrotask:typeof cy<"u"?function(n){return cy.resolve(null).then(n).catch(vb)}:Jh;function vb(n){setTimeout(function(){throw n})}function Hd(n,e){var t=e,r=0;do{var o=t.nextSibling;if(n.removeChild(t),o&&o.nodeType===8)if(t=o.data,t==="/$"){if(r===0){n.removeChild(o),Na(e);return}r--}else t!=="$"&&t!=="$?"&&t!=="$!"||r++;t=o}while(t);Na(e)}function fo(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function uy(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var bs=Math.random().toString(36).slice(2),or="__reactFiber$"+bs,Pa="__reactProps$"+bs,Mr="__reactContainer$"+bs,Xh="__reactEvents$"+bs,Cb="__reactListeners$"+bs,Sb="__reactHandles$"+bs;function zo(n){var e=n[or];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Mr]||t[or]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=uy(n);n!==null;){if(t=n[or])return t;n=uy(n)}return e}n=t,t=n.parentNode}return null}function il(n){return n=n[or]||n[Mr],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function Ui(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(M(33))}function Ru(n){return n[Pa]||null}var Zh=[],Fi=-1;function Oo(n){return{current:n}}function be(n){0>Fi||(n.current=Zh[Fi],Zh[Fi]=null,Fi--)}function Te(n,e){Fi++,Zh[Fi]=n.current,n.current=e}var Ao={},xt=Oo(Ao),Qt=Oo(!1),ti=Ao;function ls(n,e){var t=n.type.contextTypes;if(!t)return Ao;var r=n.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var o={},i;for(i in t)o[i]=e[i];return r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=o),o}function Yt(n){return n=n.childContextTypes,n!=null}function Rc(){be(Qt),be(xt)}function dy(n,e,t){if(xt.current!==Ao)throw Error(M(168));Te(xt,e),Te(Qt,t)}function aw(n,e,t){var r=n.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return t;r=r.getChildContext();for(var o in r)if(!(o in e))throw Error(M(108,o0(n)||"Unknown",o));return Le({},t,r)}function Nc(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Ao,ti=xt.current,Te(xt,n),Te(Qt,Qt.current),!0}function hy(n,e,t){var r=n.stateNode;if(!r)throw Error(M(169));t?(n=aw(n,e,ti),r.__reactInternalMemoizedMergedChildContext=n,be(Qt),be(xt),Te(xt,n)):be(Qt),Te(Qt,t)}var wr=null,Nu=!1,Bd=!1;function lw(n){wr===null?wr=[n]:wr.push(n)}function wb(n){Nu=!0,lw(n)}function Mo(){if(!Bd&&wr!==null){Bd=!0;var n=0,e=ge;try{var t=wr;for(ge=1;n<t.length;n++){var r=t[n];do r=r(!0);while(r!==null)}wr=null,Nu=!1}catch(o){throw wr!==null&&(wr=wr.slice(n+1)),_S(kp,Mo),o}finally{ge=e,Bd=!1}}return null}var Hi=[],Bi=0,xc=null,Oc=0,kn=[],In=0,ni=null,Tr=1,Er="";function Uo(n,e){Hi[Bi++]=Oc,Hi[Bi++]=xc,xc=n,Oc=e}function cw(n,e,t){kn[In++]=Tr,kn[In++]=Er,kn[In++]=ni,ni=n;var r=Tr;n=Er;var o=32-zn(r)-1;r&=~(1<<o),t+=1;var i=32-zn(e)+o;if(30<i){var s=o-o%5;i=(r&(1<<s)-1).toString(32),r>>=s,o-=s,Tr=1<<32-zn(e)+o|t<<o|r,Er=i+n}else Tr=1<<i|t<<o|r,Er=n}function _p(n){n.return!==null&&(Uo(n,1),cw(n,1,0))}function Pp(n){for(;n===xc;)xc=Hi[--Bi],Hi[Bi]=null,Oc=Hi[--Bi],Hi[Bi]=null;for(;n===ni;)ni=kn[--In],kn[In]=null,Er=kn[--In],kn[In]=null,Tr=kn[--In],kn[In]=null}var gn=null,fn=null,Oe=!1,Hn=null;function uw(n,e){var t=bn(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function fy(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,gn=n,fn=fo(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,gn=n,fn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=ni!==null?{id:Tr,overflow:Er}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=bn(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,gn=n,fn=null,!0):!1;default:return!1}}function ef(n){return(n.mode&1)!==0&&(n.flags&128)===0}function tf(n){if(Oe){var e=fn;if(e){var t=e;if(!fy(n,e)){if(ef(n))throw Error(M(418));e=fo(t.nextSibling);var r=gn;e&&fy(n,e)?uw(r,t):(n.flags=n.flags&-4097|2,Oe=!1,gn=n)}}else{if(ef(n))throw Error(M(418));n.flags=n.flags&-4097|2,Oe=!1,gn=n}}}function py(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;gn=n}function Ol(n){if(n!==gn)return!1;if(!Oe)return py(n),Oe=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!Yh(n.type,n.memoizedProps)),e&&(e=fn)){if(ef(n))throw dw(),Error(M(418));for(;e;)uw(n,e),e=fo(e.nextSibling)}if(py(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(M(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){fn=fo(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}fn=null}}else fn=gn?fo(n.stateNode.nextSibling):null;return!0}function dw(){for(var n=fn;n;)n=fo(n.nextSibling)}function cs(){fn=gn=null,Oe=!1}function Dp(n){Hn===null?Hn=[n]:Hn.push(n)}var Tb=Fr.ReactCurrentBatchConfig;function js(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(M(309));var r=t.stateNode}if(!r)throw Error(M(147,n));var o=r,i=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var a=o.refs;s===null?delete a[i]:a[i]=s},e._stringRef=i,e)}if(typeof n!="string")throw Error(M(284));if(!t._owner)throw Error(M(290,n))}return n}function Ml(n,e){throw n=Object.prototype.toString.call(e),Error(M(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function my(n){var e=n._init;return e(n._payload)}function hw(n){function e(g,y){if(n){var C=g.deletions;C===null?(g.deletions=[y],g.flags|=16):C.push(y)}}function t(g,y){if(!n)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function r(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function o(g,y){return g=yo(g,y),g.index=0,g.sibling=null,g}function i(g,y,C){return g.index=C,n?(C=g.alternate,C!==null?(C=C.index,C<y?(g.flags|=2,y):C):(g.flags|=2,y)):(g.flags|=1048576,y)}function s(g){return n&&g.alternate===null&&(g.flags|=2),g}function a(g,y,C,w){return y===null||y.tag!==6?(y=qd(C,g.mode,w),y.return=g,y):(y=o(y,C),y.return=g,y)}function l(g,y,C,w){var I=C.type;return I===_i?u(g,y,C.props.children,w,C.key):y!==null&&(y.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Gr&&my(I)===y.type)?(w=o(y,C.props),w.ref=js(g,y,C),w.return=g,w):(w=hc(C.type,C.key,C.props,null,g.mode,w),w.ref=js(g,y,C),w.return=g,w)}function c(g,y,C,w){return y===null||y.tag!==4||y.stateNode.containerInfo!==C.containerInfo||y.stateNode.implementation!==C.implementation?(y=Gd(C,g.mode,w),y.return=g,y):(y=o(y,C.children||[]),y.return=g,y)}function u(g,y,C,w,I){return y===null||y.tag!==7?(y=Qo(C,g.mode,w,I),y.return=g,y):(y=o(y,C),y.return=g,y)}function d(g,y,C){if(typeof y=="string"&&y!==""||typeof y=="number")return y=qd(""+y,g.mode,C),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case wl:return C=hc(y.type,y.key,y.props,null,g.mode,C),C.ref=js(g,null,y),C.return=g,C;case Mi:return y=Gd(y,g.mode,C),y.return=g,y;case Gr:var w=y._init;return d(g,w(y._payload),C)}if(Gs(y)||Fs(y))return y=Qo(y,g.mode,C,null),y.return=g,y;Ml(g,y)}return null}function h(g,y,C,w){var I=y!==null?y.key:null;if(typeof C=="string"&&C!==""||typeof C=="number")return I!==null?null:a(g,y,""+C,w);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case wl:return C.key===I?l(g,y,C,w):null;case Mi:return C.key===I?c(g,y,C,w):null;case Gr:return I=C._init,h(g,y,I(C._payload),w)}if(Gs(C)||Fs(C))return I!==null?null:u(g,y,C,w,null);Ml(g,C)}return null}function f(g,y,C,w,I){if(typeof w=="string"&&w!==""||typeof w=="number")return g=g.get(C)||null,a(y,g,""+w,I);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case wl:return g=g.get(w.key===null?C:w.key)||null,l(y,g,w,I);case Mi:return g=g.get(w.key===null?C:w.key)||null,c(y,g,w,I);case Gr:var A=w._init;return f(g,y,C,A(w._payload),I)}if(Gs(w)||Fs(w))return g=g.get(C)||null,u(y,g,w,I,null);Ml(y,w)}return null}function p(g,y,C,w){for(var I=null,A=null,R=y,E=y=0,_=null;R!==null&&E<C.length;E++){R.index>E?(_=R,R=null):_=R.sibling;var O=h(g,R,C[E],w);if(O===null){R===null&&(R=_);break}n&&R&&O.alternate===null&&e(g,R),y=i(O,y,E),A===null?I=O:A.sibling=O,A=O,R=_}if(E===C.length)return t(g,R),Oe&&Uo(g,E),I;if(R===null){for(;E<C.length;E++)R=d(g,C[E],w),R!==null&&(y=i(R,y,E),A===null?I=R:A.sibling=R,A=R);return Oe&&Uo(g,E),I}for(R=r(g,R);E<C.length;E++)_=f(R,g,E,C[E],w),_!==null&&(n&&_.alternate!==null&&R.delete(_.key===null?E:_.key),y=i(_,y,E),A===null?I=_:A.sibling=_,A=_);return n&&R.forEach(function(W){return e(g,W)}),Oe&&Uo(g,E),I}function m(g,y,C,w){var I=Fs(C);if(typeof I!="function")throw Error(M(150));if(C=I.call(C),C==null)throw Error(M(151));for(var A=I=null,R=y,E=y=0,_=null,O=C.next();R!==null&&!O.done;E++,O=C.next()){R.index>E?(_=R,R=null):_=R.sibling;var W=h(g,R,O.value,w);if(W===null){R===null&&(R=_);break}n&&R&&W.alternate===null&&e(g,R),y=i(W,y,E),A===null?I=W:A.sibling=W,A=W,R=_}if(O.done)return t(g,R),Oe&&Uo(g,E),I;if(R===null){for(;!O.done;E++,O=C.next())O=d(g,O.value,w),O!==null&&(y=i(O,y,E),A===null?I=O:A.sibling=O,A=O);return Oe&&Uo(g,E),I}for(R=r(g,R);!O.done;E++,O=C.next())O=f(R,g,E,O.value,w),O!==null&&(n&&O.alternate!==null&&R.delete(O.key===null?E:O.key),y=i(O,y,E),A===null?I=O:A.sibling=O,A=O);return n&&R.forEach(function(ce){return e(g,ce)}),Oe&&Uo(g,E),I}function v(g,y,C,w){if(typeof C=="object"&&C!==null&&C.type===_i&&C.key===null&&(C=C.props.children),typeof C=="object"&&C!==null){switch(C.$$typeof){case wl:e:{for(var I=C.key,A=y;A!==null;){if(A.key===I){if(I=C.type,I===_i){if(A.tag===7){t(g,A.sibling),y=o(A,C.props.children),y.return=g,g=y;break e}}else if(A.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Gr&&my(I)===A.type){t(g,A.sibling),y=o(A,C.props),y.ref=js(g,A,C),y.return=g,g=y;break e}t(g,A);break}else e(g,A);A=A.sibling}C.type===_i?(y=Qo(C.props.children,g.mode,w,C.key),y.return=g,g=y):(w=hc(C.type,C.key,C.props,null,g.mode,w),w.ref=js(g,y,C),w.return=g,g=w)}return s(g);case Mi:e:{for(A=C.key;y!==null;){if(y.key===A)if(y.tag===4&&y.stateNode.containerInfo===C.containerInfo&&y.stateNode.implementation===C.implementation){t(g,y.sibling),y=o(y,C.children||[]),y.return=g,g=y;break e}else{t(g,y);break}else e(g,y);y=y.sibling}y=Gd(C,g.mode,w),y.return=g,g=y}return s(g);case Gr:return A=C._init,v(g,y,A(C._payload),w)}if(Gs(C))return p(g,y,C,w);if(Fs(C))return m(g,y,C,w);Ml(g,C)}return typeof C=="string"&&C!==""||typeof C=="number"?(C=""+C,y!==null&&y.tag===6?(t(g,y.sibling),y=o(y,C),y.return=g,g=y):(t(g,y),y=qd(C,g.mode,w),y.return=g,g=y),s(g)):t(g,y)}return v}var us=hw(!0),fw=hw(!1),Mc=Oo(null),_c=null,zi=null,Lp=null;function Up(){Lp=zi=_c=null}function Fp(n){var e=Mc.current;be(Mc),n._currentValue=e}function nf(n,e,t){for(;n!==null;){var r=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),n===t)break;n=n.return}}function Zi(n,e){_c=n,Lp=zi=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Gt=!0),n.firstContext=null)}function On(n){var e=n._currentValue;if(Lp!==n)if(n={context:n,memoizedValue:e,next:null},zi===null){if(_c===null)throw Error(M(308));zi=n,_c.dependencies={lanes:0,firstContext:n}}else zi=zi.next=n;return e}var Ko=null;function Hp(n){Ko===null?Ko=[n]:Ko.push(n)}function pw(n,e,t,r){var o=e.interleaved;return o===null?(t.next=t,Hp(e)):(t.next=o.next,o.next=t),e.interleaved=t,_r(n,r)}function _r(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Qr=!1;function Bp(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function mw(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function br(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function po(n,e,t){var r=n.updateQueue;if(r===null)return null;if(r=r.shared,le&2){var o=r.pending;return o===null?e.next=e:(e.next=o.next,o.next=e),r.pending=e,_r(n,t)}return o=r.interleaved,o===null?(e.next=e,Hp(r)):(e.next=o.next,o.next=e),r.interleaved=e,_r(n,t)}function sc(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Ip(n,t)}}function gy(n,e){var t=n.updateQueue,r=n.alternate;if(r!==null&&(r=r.updateQueue,t===r)){var o=null,i=null;if(t=t.firstBaseUpdate,t!==null){do{var s={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};i===null?o=i=s:i=i.next=s,t=t.next}while(t!==null);i===null?o=i=e:i=i.next=e}else o=i=e;t={baseState:r.baseState,firstBaseUpdate:o,lastBaseUpdate:i,shared:r.shared,effects:r.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function Pc(n,e,t,r){var o=n.updateQueue;Qr=!1;var i=o.firstBaseUpdate,s=o.lastBaseUpdate,a=o.shared.pending;if(a!==null){o.shared.pending=null;var l=a,c=l.next;l.next=null,s===null?i=c:s.next=c,s=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==s&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(i!==null){var d=o.baseState;s=0,u=c=l=null,a=i;do{var h=a.lane,f=a.eventTime;if((r&h)===h){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=n,m=a;switch(h=e,f=t,m.tag){case 1:if(p=m.payload,typeof p=="function"){d=p.call(f,d,h);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=m.payload,h=typeof p=="function"?p.call(f,d,h):p,h==null)break e;d=Le({},d,h);break e;case 2:Qr=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,h=o.effects,h===null?o.effects=[a]:h.push(a))}else f={eventTime:f,lane:h,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=f,l=d):u=u.next=f,s|=h;if(a=a.next,a===null){if(a=o.shared.pending,a===null)break;h=a,a=h.next,h.next=null,o.lastBaseUpdate=h,o.shared.pending=null}}while(!0);if(u===null&&(l=d),o.baseState=l,o.firstBaseUpdate=c,o.lastBaseUpdate=u,e=o.shared.interleaved,e!==null){o=e;do s|=o.lane,o=o.next;while(o!==e)}else i===null&&(o.shared.lanes=0);oi|=s,n.lanes=s,n.memoizedState=d}}function yy(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var r=n[e],o=r.callback;if(o!==null){if(r.callback=null,r=t,typeof o!="function")throw Error(M(191,o));o.call(r)}}}var sl={},ur=Oo(sl),Da=Oo(sl),La=Oo(sl);function jo(n){if(n===sl)throw Error(M(174));return n}function zp(n,e){switch(Te(La,e),Te(Da,n),Te(ur,sl),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Lh(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=Lh(e,n)}be(ur),Te(ur,e)}function ds(){be(ur),be(Da),be(La)}function gw(n){jo(La.current);var e=jo(ur.current),t=Lh(e,n.type);e!==t&&(Te(Da,n),Te(ur,t))}function Kp(n){Da.current===n&&(be(ur),be(Da))}var Pe=Oo(0);function Dc(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var zd=[];function jp(){for(var n=0;n<zd.length;n++)zd[n]._workInProgressVersionPrimary=null;zd.length=0}var ac=Fr.ReactCurrentDispatcher,Kd=Fr.ReactCurrentBatchConfig,ri=0,De=null,Xe=null,ot=null,Lc=!1,sa=!1,Ua=0,Eb=0;function Et(){throw Error(M(321))}function $p(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Vn(n[t],e[t]))return!1;return!0}function Vp(n,e,t,r,o,i){if(ri=i,De=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ac.current=n===null||n.memoizedState===null?bb:Rb,n=t(r,o),sa){i=0;do{if(sa=!1,Ua=0,25<=i)throw Error(M(301));i+=1,ot=Xe=null,e.updateQueue=null,ac.current=Nb,n=t(r,o)}while(sa)}if(ac.current=Uc,e=Xe!==null&&Xe.next!==null,ri=0,ot=Xe=De=null,Lc=!1,e)throw Error(M(300));return n}function Wp(){var n=Ua!==0;return Ua=0,n}function tr(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?De.memoizedState=ot=n:ot=ot.next=n,ot}function Mn(){if(Xe===null){var n=De.alternate;n=n!==null?n.memoizedState:null}else n=Xe.next;var e=ot===null?De.memoizedState:ot.next;if(e!==null)ot=e,Xe=n;else{if(n===null)throw Error(M(310));Xe=n,n={memoizedState:Xe.memoizedState,baseState:Xe.baseState,baseQueue:Xe.baseQueue,queue:Xe.queue,next:null},ot===null?De.memoizedState=ot=n:ot=ot.next=n}return ot}function Fa(n,e){return typeof e=="function"?e(n):e}function jd(n){var e=Mn(),t=e.queue;if(t===null)throw Error(M(311));t.lastRenderedReducer=n;var r=Xe,o=r.baseQueue,i=t.pending;if(i!==null){if(o!==null){var s=o.next;o.next=i.next,i.next=s}r.baseQueue=o=i,t.pending=null}if(o!==null){i=o.next,r=r.baseState;var a=s=null,l=null,c=i;do{var u=c.lane;if((ri&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:n(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=d,s=r):l=l.next=d,De.lanes|=u,oi|=u}c=c.next}while(c!==null&&c!==i);l===null?s=r:l.next=a,Vn(r,e.memoizedState)||(Gt=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=l,t.lastRenderedState=r}if(n=t.interleaved,n!==null){o=n;do i=o.lane,De.lanes|=i,oi|=i,o=o.next;while(o!==n)}else o===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function $d(n){var e=Mn(),t=e.queue;if(t===null)throw Error(M(311));t.lastRenderedReducer=n;var r=t.dispatch,o=t.pending,i=e.memoizedState;if(o!==null){t.pending=null;var s=o=o.next;do i=n(i,s.action),s=s.next;while(s!==o);Vn(i,e.memoizedState)||(Gt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),t.lastRenderedState=i}return[i,r]}function yw(){}function vw(n,e){var t=De,r=Mn(),o=e(),i=!Vn(r.memoizedState,o);if(i&&(r.memoizedState=o,Gt=!0),r=r.queue,qp(ww.bind(null,t,r,n),[n]),r.getSnapshot!==e||i||ot!==null&&ot.memoizedState.tag&1){if(t.flags|=2048,Ha(9,Sw.bind(null,t,r,o,e),void 0,null),lt===null)throw Error(M(349));ri&30||Cw(t,e,o)}return o}function Cw(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function Sw(n,e,t,r){e.value=t,e.getSnapshot=r,Tw(e)&&Ew(n)}function ww(n,e,t){return t(function(){Tw(e)&&Ew(n)})}function Tw(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Vn(n,t)}catch{return!0}}function Ew(n){var e=_r(n,1);e!==null&&Kn(e,n,1,-1)}function vy(n){var e=tr();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Fa,lastRenderedState:n},e.queue=n,n=n.dispatch=Ab.bind(null,De,n),[e.memoizedState,n]}function Ha(n,e,t,r){return n={tag:n,create:e,destroy:t,deps:r,next:null},e=De.updateQueue,e===null?(e={lastEffect:null,stores:null},De.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(r=t.next,t.next=n,n.next=r,e.lastEffect=n)),n}function kw(){return Mn().memoizedState}function lc(n,e,t,r){var o=tr();De.flags|=n,o.memoizedState=Ha(1|e,t,void 0,r===void 0?null:r)}function xu(n,e,t,r){var o=Mn();r=r===void 0?null:r;var i=void 0;if(Xe!==null){var s=Xe.memoizedState;if(i=s.destroy,r!==null&&$p(r,s.deps)){o.memoizedState=Ha(e,t,i,r);return}}De.flags|=n,o.memoizedState=Ha(1|e,t,i,r)}function Cy(n,e){return lc(8390656,8,n,e)}function qp(n,e){return xu(2048,8,n,e)}function Iw(n,e){return xu(4,2,n,e)}function Aw(n,e){return xu(4,4,n,e)}function bw(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function Rw(n,e,t){return t=t!=null?t.concat([n]):null,xu(4,4,bw.bind(null,e,n),t)}function Gp(){}function Nw(n,e){var t=Mn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&$p(e,r[1])?r[0]:(t.memoizedState=[n,e],n)}function xw(n,e){var t=Mn();e=e===void 0?null:e;var r=t.memoizedState;return r!==null&&e!==null&&$p(e,r[1])?r[0]:(n=n(),t.memoizedState=[n,e],n)}function Ow(n,e,t){return ri&21?(Vn(t,e)||(t=LS(),De.lanes|=t,oi|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Gt=!0),n.memoizedState=t)}function kb(n,e){var t=ge;ge=t!==0&&4>t?t:4,n(!0);var r=Kd.transition;Kd.transition={};try{n(!1),e()}finally{ge=t,Kd.transition=r}}function Mw(){return Mn().memoizedState}function Ib(n,e,t){var r=go(n);if(t={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null},_w(n))Pw(e,t);else if(t=pw(n,e,t,r),t!==null){var o=Lt();Kn(t,n,r,o),Dw(t,e,r)}}function Ab(n,e,t){var r=go(n),o={lane:r,action:t,hasEagerState:!1,eagerState:null,next:null};if(_w(n))Pw(e,o);else{var i=n.alternate;if(n.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,a=i(s,t);if(o.hasEagerState=!0,o.eagerState=a,Vn(a,s)){var l=e.interleaved;l===null?(o.next=o,Hp(e)):(o.next=l.next,l.next=o),e.interleaved=o;return}}catch{}finally{}t=pw(n,e,o,r),t!==null&&(o=Lt(),Kn(t,n,r,o),Dw(t,e,r))}}function _w(n){var e=n.alternate;return n===De||e!==null&&e===De}function Pw(n,e){sa=Lc=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function Dw(n,e,t){if(t&4194240){var r=e.lanes;r&=n.pendingLanes,t|=r,e.lanes=t,Ip(n,t)}}var Uc={readContext:On,useCallback:Et,useContext:Et,useEffect:Et,useImperativeHandle:Et,useInsertionEffect:Et,useLayoutEffect:Et,useMemo:Et,useReducer:Et,useRef:Et,useState:Et,useDebugValue:Et,useDeferredValue:Et,useTransition:Et,useMutableSource:Et,useSyncExternalStore:Et,useId:Et,unstable_isNewReconciler:!1},bb={readContext:On,useCallback:function(n,e){return tr().memoizedState=[n,e===void 0?null:e],n},useContext:On,useEffect:Cy,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,lc(4194308,4,bw.bind(null,e,n),t)},useLayoutEffect:function(n,e){return lc(4194308,4,n,e)},useInsertionEffect:function(n,e){return lc(4,2,n,e)},useMemo:function(n,e){var t=tr();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var r=tr();return e=t!==void 0?t(e):e,r.memoizedState=r.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},r.queue=n,n=n.dispatch=Ib.bind(null,De,n),[r.memoizedState,n]},useRef:function(n){var e=tr();return n={current:n},e.memoizedState=n},useState:vy,useDebugValue:Gp,useDeferredValue:function(n){return tr().memoizedState=n},useTransition:function(){var n=vy(!1),e=n[0];return n=kb.bind(null,n[1]),tr().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var r=De,o=tr();if(Oe){if(t===void 0)throw Error(M(407));t=t()}else{if(t=e(),lt===null)throw Error(M(349));ri&30||Cw(r,e,t)}o.memoizedState=t;var i={value:t,getSnapshot:e};return o.queue=i,Cy(ww.bind(null,r,i,n),[n]),r.flags|=2048,Ha(9,Sw.bind(null,r,i,t,e),void 0,null),t},useId:function(){var n=tr(),e=lt.identifierPrefix;if(Oe){var t=Er,r=Tr;t=(r&~(1<<32-zn(r)-1)).toString(32)+t,e=":"+e+"R"+t,t=Ua++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=Eb++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},Rb={readContext:On,useCallback:Nw,useContext:On,useEffect:qp,useImperativeHandle:Rw,useInsertionEffect:Iw,useLayoutEffect:Aw,useMemo:xw,useReducer:jd,useRef:kw,useState:function(){return jd(Fa)},useDebugValue:Gp,useDeferredValue:function(n){var e=Mn();return Ow(e,Xe.memoizedState,n)},useTransition:function(){var n=jd(Fa)[0],e=Mn().memoizedState;return[n,e]},useMutableSource:yw,useSyncExternalStore:vw,useId:Mw,unstable_isNewReconciler:!1},Nb={readContext:On,useCallback:Nw,useContext:On,useEffect:qp,useImperativeHandle:Rw,useInsertionEffect:Iw,useLayoutEffect:Aw,useMemo:xw,useReducer:$d,useRef:kw,useState:function(){return $d(Fa)},useDebugValue:Gp,useDeferredValue:function(n){var e=Mn();return Xe===null?e.memoizedState=n:Ow(e,Xe.memoizedState,n)},useTransition:function(){var n=$d(Fa)[0],e=Mn().memoizedState;return[n,e]},useMutableSource:yw,useSyncExternalStore:vw,useId:Mw,unstable_isNewReconciler:!1};function Ln(n,e){if(n&&n.defaultProps){e=Le({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function rf(n,e,t,r){e=n.memoizedState,t=t(r,e),t=t==null?e:Le({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Ou={isMounted:function(n){return(n=n._reactInternals)?yi(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var r=Lt(),o=go(n),i=br(r,o);i.payload=e,t!=null&&(i.callback=t),e=po(n,i,o),e!==null&&(Kn(e,n,o,r),sc(e,n,o))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var r=Lt(),o=go(n),i=br(r,o);i.tag=1,i.payload=e,t!=null&&(i.callback=t),e=po(n,i,o),e!==null&&(Kn(e,n,o,r),sc(e,n,o))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Lt(),r=go(n),o=br(t,r);o.tag=2,e!=null&&(o.callback=e),e=po(n,o,r),e!==null&&(Kn(e,n,r,t),sc(e,n,r))}};function Sy(n,e,t,r,o,i,s){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(r,i,s):e.prototype&&e.prototype.isPureReactComponent?!Oa(t,r)||!Oa(o,i):!0}function Lw(n,e,t){var r=!1,o=Ao,i=e.contextType;return typeof i=="object"&&i!==null?i=On(i):(o=Yt(e)?ti:xt.current,r=e.contextTypes,i=(r=r!=null)?ls(n,o):Ao),e=new e(t,i),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Ou,n.stateNode=e,e._reactInternals=n,r&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=o,n.__reactInternalMemoizedMaskedChildContext=i),e}function wy(n,e,t,r){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,r),e.state!==n&&Ou.enqueueReplaceState(e,e.state,null)}function of(n,e,t,r){var o=n.stateNode;o.props=t,o.state=n.memoizedState,o.refs={},Bp(n);var i=e.contextType;typeof i=="object"&&i!==null?o.context=On(i):(i=Yt(e)?ti:xt.current,o.context=ls(n,i)),o.state=n.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(rf(n,e,i,t),o.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof o.getSnapshotBeforeUpdate=="function"||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(e=o.state,typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount(),e!==o.state&&Ou.enqueueReplaceState(o,o.state,null),Pc(n,t,o,r),o.state=n.memoizedState),typeof o.componentDidMount=="function"&&(n.flags|=4194308)}function hs(n,e){try{var t="",r=e;do t+=r0(r),r=r.return;while(r);var o=t}catch(i){o=`
Error generating stack: `+i.message+`
`+i.stack}return{value:n,source:e,stack:o,digest:null}}function Vd(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function sf(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var xb=typeof WeakMap=="function"?WeakMap:Map;function Uw(n,e,t){t=br(-1,t),t.tag=3,t.payload={element:null};var r=e.value;return t.callback=function(){Hc||(Hc=!0,gf=r),sf(n,e)},t}function Fw(n,e,t){t=br(-1,t),t.tag=3;var r=n.type.getDerivedStateFromError;if(typeof r=="function"){var o=e.value;t.payload=function(){return r(o)},t.callback=function(){sf(n,e)}}var i=n.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(t.callback=function(){sf(n,e),typeof r!="function"&&(mo===null?mo=new Set([this]):mo.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),t}function Ty(n,e,t){var r=n.pingCache;if(r===null){r=n.pingCache=new xb;var o=new Set;r.set(e,o)}else o=r.get(e),o===void 0&&(o=new Set,r.set(e,o));o.has(t)||(o.add(t),n=$b.bind(null,n,e,t),e.then(n,n))}function Ey(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function ky(n,e,t,r,o){return n.mode&1?(n.flags|=65536,n.lanes=o,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=br(-1,1),e.tag=2,po(t,e,1))),t.lanes|=1),n)}var Ob=Fr.ReactCurrentOwner,Gt=!1;function Pt(n,e,t,r){e.child=n===null?fw(e,null,t,r):us(e,n.child,t,r)}function Iy(n,e,t,r,o){t=t.render;var i=e.ref;return Zi(e,o),r=Vp(n,e,t,r,i,o),t=Wp(),n!==null&&!Gt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,Pr(n,e,o)):(Oe&&t&&_p(e),e.flags|=1,Pt(n,e,r,o),e.child)}function Ay(n,e,t,r,o){if(n===null){var i=t.type;return typeof i=="function"&&!nm(i)&&i.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=i,Hw(n,e,i,r,o)):(n=hc(t.type,null,r,e,e.mode,o),n.ref=e.ref,n.return=e,e.child=n)}if(i=n.child,!(n.lanes&o)){var s=i.memoizedProps;if(t=t.compare,t=t!==null?t:Oa,t(s,r)&&n.ref===e.ref)return Pr(n,e,o)}return e.flags|=1,n=yo(i,r),n.ref=e.ref,n.return=e,e.child=n}function Hw(n,e,t,r,o){if(n!==null){var i=n.memoizedProps;if(Oa(i,r)&&n.ref===e.ref)if(Gt=!1,e.pendingProps=r=i,(n.lanes&o)!==0)n.flags&131072&&(Gt=!0);else return e.lanes=n.lanes,Pr(n,e,o)}return af(n,e,t,r,o)}function Bw(n,e,t){var r=e.pendingProps,o=r.children,i=n!==null?n.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Te(ji,an),an|=t;else{if(!(t&1073741824))return n=i!==null?i.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Te(ji,an),an|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=i!==null?i.baseLanes:t,Te(ji,an),an|=r}else i!==null?(r=i.baseLanes|t,e.memoizedState=null):r=t,Te(ji,an),an|=r;return Pt(n,e,o,t),e.child}function zw(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function af(n,e,t,r,o){var i=Yt(t)?ti:xt.current;return i=ls(e,i),Zi(e,o),t=Vp(n,e,t,r,i,o),r=Wp(),n!==null&&!Gt?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~o,Pr(n,e,o)):(Oe&&r&&_p(e),e.flags|=1,Pt(n,e,t,o),e.child)}function by(n,e,t,r,o){if(Yt(t)){var i=!0;Nc(e)}else i=!1;if(Zi(e,o),e.stateNode===null)cc(n,e),Lw(e,t,r),of(e,t,r,o),r=!0;else if(n===null){var s=e.stateNode,a=e.memoizedProps;s.props=a;var l=s.context,c=t.contextType;typeof c=="object"&&c!==null?c=On(c):(c=Yt(t)?ti:xt.current,c=ls(e,c));var u=t.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==r||l!==c)&&wy(e,s,r,c),Qr=!1;var h=e.memoizedState;s.state=h,Pc(e,r,s,o),l=e.memoizedState,a!==r||h!==l||Qt.current||Qr?(typeof u=="function"&&(rf(e,t,u,r),l=e.memoizedState),(a=Qr||Sy(e,t,a,r,h,l,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=l),s.props=r,s.state=l,s.context=c,r=a):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,mw(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:Ln(e.type,a),s.props=c,d=e.pendingProps,h=s.context,l=t.contextType,typeof l=="object"&&l!==null?l=On(l):(l=Yt(t)?ti:xt.current,l=ls(e,l));var f=t.getDerivedStateFromProps;(u=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(a!==d||h!==l)&&wy(e,s,r,l),Qr=!1,h=e.memoizedState,s.state=h,Pc(e,r,s,o);var p=e.memoizedState;a!==d||h!==p||Qt.current||Qr?(typeof f=="function"&&(rf(e,t,f,r),p=e.memoizedState),(c=Qr||Sy(e,t,c,r,h,p,l)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,l),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,l)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=l,r=c):(typeof s.componentDidUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&h===n.memoizedState||(e.flags|=1024),r=!1)}return lf(n,e,t,r,i,o)}function lf(n,e,t,r,o,i){zw(n,e);var s=(e.flags&128)!==0;if(!r&&!s)return o&&hy(e,t,!1),Pr(n,e,i);r=e.stateNode,Ob.current=e;var a=s&&typeof t.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,n!==null&&s?(e.child=us(e,n.child,null,i),e.child=us(e,null,a,i)):Pt(n,e,a,i),e.memoizedState=r.state,o&&hy(e,t,!0),e.child}function Kw(n){var e=n.stateNode;e.pendingContext?dy(n,e.pendingContext,e.pendingContext!==e.context):e.context&&dy(n,e.context,!1),zp(n,e.containerInfo)}function Ry(n,e,t,r,o){return cs(),Dp(o),e.flags|=256,Pt(n,e,t,r),e.child}var cf={dehydrated:null,treeContext:null,retryLane:0};function uf(n){return{baseLanes:n,cachePool:null,transitions:null}}function jw(n,e,t){var r=e.pendingProps,o=Pe.current,i=!1,s=(e.flags&128)!==0,a;if((a=s)||(a=n!==null&&n.memoizedState===null?!1:(o&2)!==0),a?(i=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(o|=1),Te(Pe,o&1),n===null)return tf(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,n=r.fallback,i?(r=e.mode,i=e.child,s={mode:"hidden",children:s},!(r&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=Pu(s,r,0,null),n=Qo(n,r,t,null),i.return=e,n.return=e,i.sibling=n,e.child=i,e.child.memoizedState=uf(t),e.memoizedState=cf,n):Qp(e,s));if(o=n.memoizedState,o!==null&&(a=o.dehydrated,a!==null))return Mb(n,e,s,r,a,o,t);if(i){i=r.fallback,s=e.mode,o=n.child,a=o.sibling;var l={mode:"hidden",children:r.children};return!(s&1)&&e.child!==o?(r=e.child,r.childLanes=0,r.pendingProps=l,e.deletions=null):(r=yo(o,l),r.subtreeFlags=o.subtreeFlags&14680064),a!==null?i=yo(a,i):(i=Qo(i,s,t,null),i.flags|=2),i.return=e,r.return=e,r.sibling=i,e.child=r,r=i,i=e.child,s=n.child.memoizedState,s=s===null?uf(t):{baseLanes:s.baseLanes|t,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=n.childLanes&~t,e.memoizedState=cf,r}return i=n.child,n=i.sibling,r=yo(i,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=t),r.return=e,r.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=r,e.memoizedState=null,r}function Qp(n,e){return e=Pu({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function _l(n,e,t,r){return r!==null&&Dp(r),us(e,n.child,null,t),n=Qp(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function Mb(n,e,t,r,o,i,s){if(t)return e.flags&256?(e.flags&=-257,r=Vd(Error(M(422))),_l(n,e,s,r)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(i=r.fallback,o=e.mode,r=Pu({mode:"visible",children:r.children},o,0,null),i=Qo(i,o,s,null),i.flags|=2,r.return=e,i.return=e,r.sibling=i,e.child=r,e.mode&1&&us(e,n.child,null,s),e.child.memoizedState=uf(s),e.memoizedState=cf,i);if(!(e.mode&1))return _l(n,e,s,null);if(o.data==="$!"){if(r=o.nextSibling&&o.nextSibling.dataset,r)var a=r.dgst;return r=a,i=Error(M(419)),r=Vd(i,r,void 0),_l(n,e,s,r)}if(a=(s&n.childLanes)!==0,Gt||a){if(r=lt,r!==null){switch(s&-s){case 4:o=2;break;case 16:o=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:o=32;break;case 536870912:o=268435456;break;default:o=0}o=o&(r.suspendedLanes|s)?0:o,o!==0&&o!==i.retryLane&&(i.retryLane=o,_r(n,o),Kn(r,n,o,-1))}return tm(),r=Vd(Error(M(421))),_l(n,e,s,r)}return o.data==="$?"?(e.flags|=128,e.child=n.child,e=Vb.bind(null,n),o._reactRetry=e,null):(n=i.treeContext,fn=fo(o.nextSibling),gn=e,Oe=!0,Hn=null,n!==null&&(kn[In++]=Tr,kn[In++]=Er,kn[In++]=ni,Tr=n.id,Er=n.overflow,ni=e),e=Qp(e,r.children),e.flags|=4096,e)}function Ny(n,e,t){n.lanes|=e;var r=n.alternate;r!==null&&(r.lanes|=e),nf(n.return,e,t)}function Wd(n,e,t,r,o){var i=n.memoizedState;i===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:t,tailMode:o}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=r,i.tail=t,i.tailMode=o)}function $w(n,e,t){var r=e.pendingProps,o=r.revealOrder,i=r.tail;if(Pt(n,e,r.children,t),r=Pe.current,r&2)r=r&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&Ny(n,t,e);else if(n.tag===19)Ny(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}r&=1}if(Te(Pe,r),!(e.mode&1))e.memoizedState=null;else switch(o){case"forwards":for(t=e.child,o=null;t!==null;)n=t.alternate,n!==null&&Dc(n)===null&&(o=t),t=t.sibling;t=o,t===null?(o=e.child,e.child=null):(o=t.sibling,t.sibling=null),Wd(e,!1,o,t,i);break;case"backwards":for(t=null,o=e.child,e.child=null;o!==null;){if(n=o.alternate,n!==null&&Dc(n)===null){e.child=o;break}n=o.sibling,o.sibling=t,t=o,o=n}Wd(e,!0,t,null,i);break;case"together":Wd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function cc(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Pr(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),oi|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(M(153));if(e.child!==null){for(n=e.child,t=yo(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=yo(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function _b(n,e,t){switch(e.tag){case 3:Kw(e),cs();break;case 5:gw(e);break;case 1:Yt(e.type)&&Nc(e);break;case 4:zp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,o=e.memoizedProps.value;Te(Mc,r._currentValue),r._currentValue=o;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Te(Pe,Pe.current&1),e.flags|=128,null):t&e.child.childLanes?jw(n,e,t):(Te(Pe,Pe.current&1),n=Pr(n,e,t),n!==null?n.sibling:null);Te(Pe,Pe.current&1);break;case 19:if(r=(t&e.childLanes)!==0,n.flags&128){if(r)return $w(n,e,t);e.flags|=128}if(o=e.memoizedState,o!==null&&(o.rendering=null,o.tail=null,o.lastEffect=null),Te(Pe,Pe.current),r)break;return null;case 22:case 23:return e.lanes=0,Bw(n,e,t)}return Pr(n,e,t)}var Vw,df,Ww,qw;Vw=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};df=function(){};Ww=function(n,e,t,r){var o=n.memoizedProps;if(o!==r){n=e.stateNode,jo(ur.current);var i=null;switch(t){case"input":o=Mh(n,o),r=Mh(n,r),i=[];break;case"select":o=Le({},o,{value:void 0}),r=Le({},r,{value:void 0}),i=[];break;case"textarea":o=Dh(n,o),r=Dh(n,r),i=[];break;default:typeof o.onClick!="function"&&typeof r.onClick=="function"&&(n.onclick=bc)}Uh(t,r);var s;t=null;for(c in o)if(!r.hasOwnProperty(c)&&o.hasOwnProperty(c)&&o[c]!=null)if(c==="style"){var a=o[c];for(s in a)a.hasOwnProperty(s)&&(t||(t={}),t[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(ka.hasOwnProperty(c)?i||(i=[]):(i=i||[]).push(c,null));for(c in r){var l=r[c];if(a=o!=null?o[c]:void 0,r.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(s in a)!a.hasOwnProperty(s)||l&&l.hasOwnProperty(s)||(t||(t={}),t[s]="");for(s in l)l.hasOwnProperty(s)&&a[s]!==l[s]&&(t||(t={}),t[s]=l[s])}else t||(i||(i=[]),i.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(i=i||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(i=i||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(ka.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Ie("scroll",n),i||a===l||(i=[])):(i=i||[]).push(c,l))}t&&(i=i||[]).push("style",t);var c=i;(e.updateQueue=c)&&(e.flags|=4)}};qw=function(n,e,t,r){t!==r&&(e.flags|=4)};function $s(n,e){if(!Oe)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:r.sibling=null}}function kt(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,r=0;if(e)for(var o=n.child;o!==null;)t|=o.lanes|o.childLanes,r|=o.subtreeFlags&14680064,r|=o.flags&14680064,o.return=n,o=o.sibling;else for(o=n.child;o!==null;)t|=o.lanes|o.childLanes,r|=o.subtreeFlags,r|=o.flags,o.return=n,o=o.sibling;return n.subtreeFlags|=r,n.childLanes=t,e}function Pb(n,e,t){var r=e.pendingProps;switch(Pp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return kt(e),null;case 1:return Yt(e.type)&&Rc(),kt(e),null;case 3:return r=e.stateNode,ds(),be(Qt),be(xt),jp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(n===null||n.child===null)&&(Ol(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Hn!==null&&(Cf(Hn),Hn=null))),df(n,e),kt(e),null;case 5:Kp(e);var o=jo(La.current);if(t=e.type,n!==null&&e.stateNode!=null)Ww(n,e,t,r,o),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(M(166));return kt(e),null}if(n=jo(ur.current),Ol(e)){r=e.stateNode,t=e.type;var i=e.memoizedProps;switch(r[or]=e,r[Pa]=i,n=(e.mode&1)!==0,t){case"dialog":Ie("cancel",r),Ie("close",r);break;case"iframe":case"object":case"embed":Ie("load",r);break;case"video":case"audio":for(o=0;o<Ys.length;o++)Ie(Ys[o],r);break;case"source":Ie("error",r);break;case"img":case"image":case"link":Ie("error",r),Ie("load",r);break;case"details":Ie("toggle",r);break;case"input":Fg(r,i),Ie("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Ie("invalid",r);break;case"textarea":Bg(r,i),Ie("invalid",r)}Uh(t,i),o=null;for(var s in i)if(i.hasOwnProperty(s)){var a=i[s];s==="children"?typeof a=="string"?r.textContent!==a&&(i.suppressHydrationWarning!==!0&&xl(r.textContent,a,n),o=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(i.suppressHydrationWarning!==!0&&xl(r.textContent,a,n),o=["children",""+a]):ka.hasOwnProperty(s)&&a!=null&&s==="onScroll"&&Ie("scroll",r)}switch(t){case"input":Tl(r),Hg(r,i,!0);break;case"textarea":Tl(r),zg(r);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(r.onclick=bc)}r=o,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=o.nodeType===9?o:o.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=wS(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=s.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof r.is=="string"?n=s.createElement(t,{is:r.is}):(n=s.createElement(t),t==="select"&&(s=n,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):n=s.createElementNS(n,t),n[or]=e,n[Pa]=r,Vw(n,e,!1,!1),e.stateNode=n;e:{switch(s=Fh(t,r),t){case"dialog":Ie("cancel",n),Ie("close",n),o=r;break;case"iframe":case"object":case"embed":Ie("load",n),o=r;break;case"video":case"audio":for(o=0;o<Ys.length;o++)Ie(Ys[o],n);o=r;break;case"source":Ie("error",n),o=r;break;case"img":case"image":case"link":Ie("error",n),Ie("load",n),o=r;break;case"details":Ie("toggle",n),o=r;break;case"input":Fg(n,r),o=Mh(n,r),Ie("invalid",n);break;case"option":o=r;break;case"select":n._wrapperState={wasMultiple:!!r.multiple},o=Le({},r,{value:void 0}),Ie("invalid",n);break;case"textarea":Bg(n,r),o=Dh(n,r),Ie("invalid",n);break;default:o=r}Uh(t,o),a=o;for(i in a)if(a.hasOwnProperty(i)){var l=a[i];i==="style"?kS(n,l):i==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&TS(n,l)):i==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Ia(n,l):typeof l=="number"&&Ia(n,""+l):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(ka.hasOwnProperty(i)?l!=null&&i==="onScroll"&&Ie("scroll",n):l!=null&&Cp(n,i,l,s))}switch(t){case"input":Tl(n),Hg(n,r,!1);break;case"textarea":Tl(n),zg(n);break;case"option":r.value!=null&&n.setAttribute("value",""+Io(r.value));break;case"select":n.multiple=!!r.multiple,i=r.value,i!=null?Qi(n,!!r.multiple,i,!1):r.defaultValue!=null&&Qi(n,!!r.multiple,r.defaultValue,!0);break;default:typeof o.onClick=="function"&&(n.onclick=bc)}switch(t){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return kt(e),null;case 6:if(n&&e.stateNode!=null)qw(n,e,n.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(M(166));if(t=jo(La.current),jo(ur.current),Ol(e)){if(r=e.stateNode,t=e.memoizedProps,r[or]=e,(i=r.nodeValue!==t)&&(n=gn,n!==null))switch(n.tag){case 3:xl(r.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&xl(r.nodeValue,t,(n.mode&1)!==0)}i&&(e.flags|=4)}else r=(t.nodeType===9?t:t.ownerDocument).createTextNode(r),r[or]=e,e.stateNode=r}return kt(e),null;case 13:if(be(Pe),r=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(Oe&&fn!==null&&e.mode&1&&!(e.flags&128))dw(),cs(),e.flags|=98560,i=!1;else if(i=Ol(e),r!==null&&r.dehydrated!==null){if(n===null){if(!i)throw Error(M(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(M(317));i[or]=e}else cs(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;kt(e),i=!1}else Hn!==null&&(Cf(Hn),Hn=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(r=r!==null,r!==(n!==null&&n.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(n===null||Pe.current&1?et===0&&(et=3):tm())),e.updateQueue!==null&&(e.flags|=4),kt(e),null);case 4:return ds(),df(n,e),n===null&&Ma(e.stateNode.containerInfo),kt(e),null;case 10:return Fp(e.type._context),kt(e),null;case 17:return Yt(e.type)&&Rc(),kt(e),null;case 19:if(be(Pe),i=e.memoizedState,i===null)return kt(e),null;if(r=(e.flags&128)!==0,s=i.rendering,s===null)if(r)$s(i,!1);else{if(et!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(s=Dc(n),s!==null){for(e.flags|=128,$s(i,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=t,t=e.child;t!==null;)i=t,n=r,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=n,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,n=s.dependencies,i.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Te(Pe,Pe.current&1|2),e.child}n=n.sibling}i.tail!==null&&Ke()>fs&&(e.flags|=128,r=!0,$s(i,!1),e.lanes=4194304)}else{if(!r)if(n=Dc(s),n!==null){if(e.flags|=128,r=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),$s(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!Oe)return kt(e),null}else 2*Ke()-i.renderingStartTime>fs&&t!==1073741824&&(e.flags|=128,r=!0,$s(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(t=i.last,t!==null?t.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ke(),e.sibling=null,t=Pe.current,Te(Pe,r?t&1|2:t&1),e):(kt(e),null);case 22:case 23:return em(),r=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(kt(e),e.subtreeFlags&6&&(e.flags|=8192)):kt(e),null;case 24:return null;case 25:return null}throw Error(M(156,e.tag))}function Db(n,e){switch(Pp(e),e.tag){case 1:return Yt(e.type)&&Rc(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ds(),be(Qt),be(xt),jp(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return Kp(e),null;case 13:if(be(Pe),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(M(340));cs()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return be(Pe),null;case 4:return ds(),null;case 10:return Fp(e.type._context),null;case 22:case 23:return em(),null;case 24:return null;default:return null}}var Pl=!1,bt=!1,Lb=typeof WeakSet=="function"?WeakSet:Set,U=null;function Ki(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(r){Fe(n,e,r)}else t.current=null}function hf(n,e,t){try{t()}catch(r){Fe(n,e,r)}}var xy=!1;function Ub(n,e){if(Gh=kc,n=XS(),Mp(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var r=t.getSelection&&t.getSelection();if(r&&r.rangeCount!==0){t=r.anchorNode;var o=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{t.nodeType,i.nodeType}catch{t=null;break e}var s=0,a=-1,l=-1,c=0,u=0,d=n,h=null;t:for(;;){for(var f;d!==t||o!==0&&d.nodeType!==3||(a=s+o),d!==i||r!==0&&d.nodeType!==3||(l=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(f=d.firstChild)!==null;)h=d,d=f;for(;;){if(d===n)break t;if(h===t&&++c===o&&(a=s),h===i&&++u===r&&(l=s),(f=d.nextSibling)!==null)break;d=h,h=d.parentNode}d=f}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Qh={focusedElem:n,selectionRange:t},kc=!1,U=e;U!==null;)if(e=U,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,U=n;else for(;U!==null;){e=U;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var m=p.memoizedProps,v=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?m:Ln(e.type,m),v);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var C=e.stateNode.containerInfo;C.nodeType===1?C.textContent="":C.nodeType===9&&C.documentElement&&C.removeChild(C.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(M(163))}}catch(w){Fe(e,e.return,w)}if(n=e.sibling,n!==null){n.return=e.return,U=n;break}U=e.return}return p=xy,xy=!1,p}function aa(n,e,t){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var o=r=r.next;do{if((o.tag&n)===n){var i=o.destroy;o.destroy=void 0,i!==void 0&&hf(e,t,i)}o=o.next}while(o!==r)}}function Mu(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var r=t.create;t.destroy=r()}t=t.next}while(t!==e)}}function ff(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function Gw(n){var e=n.alternate;e!==null&&(n.alternate=null,Gw(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[or],delete e[Pa],delete e[Xh],delete e[Cb],delete e[Sb])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function Qw(n){return n.tag===5||n.tag===3||n.tag===4}function Oy(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||Qw(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function pf(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=bc));else if(r!==4&&(n=n.child,n!==null))for(pf(n,e,t),n=n.sibling;n!==null;)pf(n,e,t),n=n.sibling}function mf(n,e,t){var r=n.tag;if(r===5||r===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(r!==4&&(n=n.child,n!==null))for(mf(n,e,t),n=n.sibling;n!==null;)mf(n,e,t),n=n.sibling}var mt=null,Un=!1;function $r(n,e,t){for(t=t.child;t!==null;)Yw(n,e,t),t=t.sibling}function Yw(n,e,t){if(cr&&typeof cr.onCommitFiberUnmount=="function")try{cr.onCommitFiberUnmount(ku,t)}catch{}switch(t.tag){case 5:bt||Ki(t,e);case 6:var r=mt,o=Un;mt=null,$r(n,e,t),mt=r,Un=o,mt!==null&&(Un?(n=mt,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):mt.removeChild(t.stateNode));break;case 18:mt!==null&&(Un?(n=mt,t=t.stateNode,n.nodeType===8?Hd(n.parentNode,t):n.nodeType===1&&Hd(n,t),Na(n)):Hd(mt,t.stateNode));break;case 4:r=mt,o=Un,mt=t.stateNode.containerInfo,Un=!0,$r(n,e,t),mt=r,Un=o;break;case 0:case 11:case 14:case 15:if(!bt&&(r=t.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){o=r=r.next;do{var i=o,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&hf(t,e,s),o=o.next}while(o!==r)}$r(n,e,t);break;case 1:if(!bt&&(Ki(t,e),r=t.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=t.memoizedProps,r.state=t.memoizedState,r.componentWillUnmount()}catch(a){Fe(t,e,a)}$r(n,e,t);break;case 21:$r(n,e,t);break;case 22:t.mode&1?(bt=(r=bt)||t.memoizedState!==null,$r(n,e,t),bt=r):$r(n,e,t);break;default:$r(n,e,t)}}function My(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new Lb),e.forEach(function(r){var o=Wb.bind(null,n,r);t.has(r)||(t.add(r),r.then(o,o))})}}function Dn(n,e){var t=e.deletions;if(t!==null)for(var r=0;r<t.length;r++){var o=t[r];try{var i=n,s=e,a=s;e:for(;a!==null;){switch(a.tag){case 5:mt=a.stateNode,Un=!1;break e;case 3:mt=a.stateNode.containerInfo,Un=!0;break e;case 4:mt=a.stateNode.containerInfo,Un=!0;break e}a=a.return}if(mt===null)throw Error(M(160));Yw(i,s,o),mt=null,Un=!1;var l=o.alternate;l!==null&&(l.return=null),o.return=null}catch(c){Fe(o,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Jw(e,n),e=e.sibling}function Jw(n,e){var t=n.alternate,r=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(Dn(e,n),Zn(n),r&4){try{aa(3,n,n.return),Mu(3,n)}catch(m){Fe(n,n.return,m)}try{aa(5,n,n.return)}catch(m){Fe(n,n.return,m)}}break;case 1:Dn(e,n),Zn(n),r&512&&t!==null&&Ki(t,t.return);break;case 5:if(Dn(e,n),Zn(n),r&512&&t!==null&&Ki(t,t.return),n.flags&32){var o=n.stateNode;try{Ia(o,"")}catch(m){Fe(n,n.return,m)}}if(r&4&&(o=n.stateNode,o!=null)){var i=n.memoizedProps,s=t!==null?t.memoizedProps:i,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&i.type==="radio"&&i.name!=null&&CS(o,i),Fh(a,s);var c=Fh(a,i);for(s=0;s<l.length;s+=2){var u=l[s],d=l[s+1];u==="style"?kS(o,d):u==="dangerouslySetInnerHTML"?TS(o,d):u==="children"?Ia(o,d):Cp(o,u,d,c)}switch(a){case"input":_h(o,i);break;case"textarea":SS(o,i);break;case"select":var h=o._wrapperState.wasMultiple;o._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?Qi(o,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?Qi(o,!!i.multiple,i.defaultValue,!0):Qi(o,!!i.multiple,i.multiple?[]:"",!1))}o[Pa]=i}catch(m){Fe(n,n.return,m)}}break;case 6:if(Dn(e,n),Zn(n),r&4){if(n.stateNode===null)throw Error(M(162));o=n.stateNode,i=n.memoizedProps;try{o.nodeValue=i}catch(m){Fe(n,n.return,m)}}break;case 3:if(Dn(e,n),Zn(n),r&4&&t!==null&&t.memoizedState.isDehydrated)try{Na(e.containerInfo)}catch(m){Fe(n,n.return,m)}break;case 4:Dn(e,n),Zn(n);break;case 13:Dn(e,n),Zn(n),o=n.child,o.flags&8192&&(i=o.memoizedState!==null,o.stateNode.isHidden=i,!i||o.alternate!==null&&o.alternate.memoizedState!==null||(Xp=Ke())),r&4&&My(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(bt=(c=bt)||u,Dn(e,n),bt=c):Dn(e,n),Zn(n),r&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(U=n,u=n.child;u!==null;){for(d=U=u;U!==null;){switch(h=U,f=h.child,h.tag){case 0:case 11:case 14:case 15:aa(4,h,h.return);break;case 1:Ki(h,h.return);var p=h.stateNode;if(typeof p.componentWillUnmount=="function"){r=h,t=h.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(m){Fe(r,t,m)}}break;case 5:Ki(h,h.return);break;case 22:if(h.memoizedState!==null){Py(d);continue}}f!==null?(f.return=h,U=f):Py(d)}u=u.sibling}e:for(u=null,d=n;;){if(d.tag===5){if(u===null){u=d;try{o=d.stateNode,c?(i=o.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(a=d.stateNode,l=d.memoizedProps.style,s=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=ES("display",s))}catch(m){Fe(n,n.return,m)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(m){Fe(n,n.return,m)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===n)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===n)break e;for(;d.sibling===null;){if(d.return===null||d.return===n)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Dn(e,n),Zn(n),r&4&&My(n);break;case 21:break;default:Dn(e,n),Zn(n)}}function Zn(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(Qw(t)){var r=t;break e}t=t.return}throw Error(M(160))}switch(r.tag){case 5:var o=r.stateNode;r.flags&32&&(Ia(o,""),r.flags&=-33);var i=Oy(n);mf(n,i,o);break;case 3:case 4:var s=r.stateNode.containerInfo,a=Oy(n);pf(n,a,s);break;default:throw Error(M(161))}}catch(l){Fe(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function Fb(n,e,t){U=n,Xw(n)}function Xw(n,e,t){for(var r=(n.mode&1)!==0;U!==null;){var o=U,i=o.child;if(o.tag===22&&r){var s=o.memoizedState!==null||Pl;if(!s){var a=o.alternate,l=a!==null&&a.memoizedState!==null||bt;a=Pl;var c=bt;if(Pl=s,(bt=l)&&!c)for(U=o;U!==null;)s=U,l=s.child,s.tag===22&&s.memoizedState!==null?Dy(o):l!==null?(l.return=s,U=l):Dy(o);for(;i!==null;)U=i,Xw(i),i=i.sibling;U=o,Pl=a,bt=c}_y(n)}else o.subtreeFlags&8772&&i!==null?(i.return=o,U=i):_y(n)}}function _y(n){for(;U!==null;){var e=U;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||Mu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!bt)if(t===null)r.componentDidMount();else{var o=e.elementType===e.type?t.memoizedProps:Ln(e.type,t.memoizedProps);r.componentDidUpdate(o,t.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&yy(e,i,r);break;case 3:var s=e.updateQueue;if(s!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}yy(e,s,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Na(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(M(163))}bt||e.flags&512&&ff(e)}catch(h){Fe(e,e.return,h)}}if(e===n){U=null;break}if(t=e.sibling,t!==null){t.return=e.return,U=t;break}U=e.return}}function Py(n){for(;U!==null;){var e=U;if(e===n){U=null;break}var t=e.sibling;if(t!==null){t.return=e.return,U=t;break}U=e.return}}function Dy(n){for(;U!==null;){var e=U;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Mu(4,e)}catch(l){Fe(e,t,l)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var o=e.return;try{r.componentDidMount()}catch(l){Fe(e,o,l)}}var i=e.return;try{ff(e)}catch(l){Fe(e,i,l)}break;case 5:var s=e.return;try{ff(e)}catch(l){Fe(e,s,l)}}}catch(l){Fe(e,e.return,l)}if(e===n){U=null;break}var a=e.sibling;if(a!==null){a.return=e.return,U=a;break}U=e.return}}var Hb=Math.ceil,Fc=Fr.ReactCurrentDispatcher,Yp=Fr.ReactCurrentOwner,Nn=Fr.ReactCurrentBatchConfig,le=0,lt=null,qe=null,Ct=0,an=0,ji=Oo(0),et=0,Ba=null,oi=0,_u=0,Jp=0,la=null,Wt=null,Xp=0,fs=1/0,vr=null,Hc=!1,gf=null,mo=null,Dl=!1,ro=null,Bc=0,ca=0,yf=null,uc=-1,dc=0;function Lt(){return le&6?Ke():uc!==-1?uc:uc=Ke()}function go(n){return n.mode&1?le&2&&Ct!==0?Ct&-Ct:Tb.transition!==null?(dc===0&&(dc=LS()),dc):(n=ge,n!==0||(n=window.event,n=n===void 0?16:jS(n.type)),n):1}function Kn(n,e,t,r){if(50<ca)throw ca=0,yf=null,Error(M(185));rl(n,t,r),(!(le&2)||n!==lt)&&(n===lt&&(!(le&2)&&(_u|=t),et===4&&eo(n,Ct)),Jt(n,r),t===1&&le===0&&!(e.mode&1)&&(fs=Ke()+500,Nu&&Mo()))}function Jt(n,e){var t=n.callbackNode;T0(n,e);var r=Ec(n,n===lt?Ct:0);if(r===0)t!==null&&$g(t),n.callbackNode=null,n.callbackPriority=0;else if(e=r&-r,n.callbackPriority!==e){if(t!=null&&$g(t),e===1)n.tag===0?wb(Ly.bind(null,n)):lw(Ly.bind(null,n)),yb(function(){!(le&6)&&Mo()}),t=null;else{switch(US(r)){case 1:t=kp;break;case 4:t=PS;break;case 16:t=Tc;break;case 536870912:t=DS;break;default:t=Tc}t=sT(t,Zw.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function Zw(n,e){if(uc=-1,dc=0,le&6)throw Error(M(327));var t=n.callbackNode;if(es()&&n.callbackNode!==t)return null;var r=Ec(n,n===lt?Ct:0);if(r===0)return null;if(r&30||r&n.expiredLanes||e)e=zc(n,r);else{e=r;var o=le;le|=2;var i=tT();(lt!==n||Ct!==e)&&(vr=null,fs=Ke()+500,Go(n,e));do try{Kb();break}catch(a){eT(n,a)}while(!0);Up(),Fc.current=i,le=o,qe!==null?e=0:(lt=null,Ct=0,e=et)}if(e!==0){if(e===2&&(o=jh(n),o!==0&&(r=o,e=vf(n,o))),e===1)throw t=Ba,Go(n,0),eo(n,r),Jt(n,Ke()),t;if(e===6)eo(n,r);else{if(o=n.current.alternate,!(r&30)&&!Bb(o)&&(e=zc(n,r),e===2&&(i=jh(n),i!==0&&(r=i,e=vf(n,i))),e===1))throw t=Ba,Go(n,0),eo(n,r),Jt(n,Ke()),t;switch(n.finishedWork=o,n.finishedLanes=r,e){case 0:case 1:throw Error(M(345));case 2:Fo(n,Wt,vr);break;case 3:if(eo(n,r),(r&130023424)===r&&(e=Xp+500-Ke(),10<e)){if(Ec(n,0)!==0)break;if(o=n.suspendedLanes,(o&r)!==r){Lt(),n.pingedLanes|=n.suspendedLanes&o;break}n.timeoutHandle=Jh(Fo.bind(null,n,Wt,vr),e);break}Fo(n,Wt,vr);break;case 4:if(eo(n,r),(r&4194240)===r)break;for(e=n.eventTimes,o=-1;0<r;){var s=31-zn(r);i=1<<s,s=e[s],s>o&&(o=s),r&=~i}if(r=o,r=Ke()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Hb(r/1960))-r,10<r){n.timeoutHandle=Jh(Fo.bind(null,n,Wt,vr),r);break}Fo(n,Wt,vr);break;case 5:Fo(n,Wt,vr);break;default:throw Error(M(329))}}}return Jt(n,Ke()),n.callbackNode===t?Zw.bind(null,n):null}function vf(n,e){var t=la;return n.current.memoizedState.isDehydrated&&(Go(n,e).flags|=256),n=zc(n,e),n!==2&&(e=Wt,Wt=t,e!==null&&Cf(e)),n}function Cf(n){Wt===null?Wt=n:Wt.push.apply(Wt,n)}function Bb(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var r=0;r<t.length;r++){var o=t[r],i=o.getSnapshot;o=o.value;try{if(!Vn(i(),o))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function eo(n,e){for(e&=~Jp,e&=~_u,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-zn(e),r=1<<t;n[t]=-1,e&=~r}}function Ly(n){if(le&6)throw Error(M(327));es();var e=Ec(n,0);if(!(e&1))return Jt(n,Ke()),null;var t=zc(n,e);if(n.tag!==0&&t===2){var r=jh(n);r!==0&&(e=r,t=vf(n,r))}if(t===1)throw t=Ba,Go(n,0),eo(n,e),Jt(n,Ke()),t;if(t===6)throw Error(M(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,Fo(n,Wt,vr),Jt(n,Ke()),null}function Zp(n,e){var t=le;le|=1;try{return n(e)}finally{le=t,le===0&&(fs=Ke()+500,Nu&&Mo())}}function ii(n){ro!==null&&ro.tag===0&&!(le&6)&&es();var e=le;le|=1;var t=Nn.transition,r=ge;try{if(Nn.transition=null,ge=1,n)return n()}finally{ge=r,Nn.transition=t,le=e,!(le&6)&&Mo()}}function em(){an=ji.current,be(ji)}function Go(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,gb(t)),qe!==null)for(t=qe.return;t!==null;){var r=t;switch(Pp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Rc();break;case 3:ds(),be(Qt),be(xt),jp();break;case 5:Kp(r);break;case 4:ds();break;case 13:be(Pe);break;case 19:be(Pe);break;case 10:Fp(r.type._context);break;case 22:case 23:em()}t=t.return}if(lt=n,qe=n=yo(n.current,null),Ct=an=e,et=0,Ba=null,Jp=_u=oi=0,Wt=la=null,Ko!==null){for(e=0;e<Ko.length;e++)if(t=Ko[e],r=t.interleaved,r!==null){t.interleaved=null;var o=r.next,i=t.pending;if(i!==null){var s=i.next;i.next=o,r.next=s}t.pending=r}Ko=null}return n}function eT(n,e){do{var t=qe;try{if(Up(),ac.current=Uc,Lc){for(var r=De.memoizedState;r!==null;){var o=r.queue;o!==null&&(o.pending=null),r=r.next}Lc=!1}if(ri=0,ot=Xe=De=null,sa=!1,Ua=0,Yp.current=null,t===null||t.return===null){et=1,Ba=e,qe=null;break}e:{var i=n,s=t.return,a=t,l=e;if(e=Ct,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var h=u.alternate;h?(u.updateQueue=h.updateQueue,u.memoizedState=h.memoizedState,u.lanes=h.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Ey(s);if(f!==null){f.flags&=-257,ky(f,s,a,i,e),f.mode&1&&Ty(i,c,e),e=f,l=c;var p=e.updateQueue;if(p===null){var m=new Set;m.add(l),e.updateQueue=m}else p.add(l);break e}else{if(!(e&1)){Ty(i,c,e),tm();break e}l=Error(M(426))}}else if(Oe&&a.mode&1){var v=Ey(s);if(v!==null){!(v.flags&65536)&&(v.flags|=256),ky(v,s,a,i,e),Dp(hs(l,a));break e}}i=l=hs(l,a),et!==4&&(et=2),la===null?la=[i]:la.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Uw(i,l,e);gy(i,g);break e;case 1:a=l;var y=i.type,C=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(mo===null||!mo.has(C)))){i.flags|=65536,e&=-e,i.lanes|=e;var w=Fw(i,a,e);gy(i,w);break e}}i=i.return}while(i!==null)}rT(t)}catch(I){e=I,qe===t&&t!==null&&(qe=t=t.return);continue}break}while(!0)}function tT(){var n=Fc.current;return Fc.current=Uc,n===null?Uc:n}function tm(){(et===0||et===3||et===2)&&(et=4),lt===null||!(oi&268435455)&&!(_u&268435455)||eo(lt,Ct)}function zc(n,e){var t=le;le|=2;var r=tT();(lt!==n||Ct!==e)&&(vr=null,Go(n,e));do try{zb();break}catch(o){eT(n,o)}while(!0);if(Up(),le=t,Fc.current=r,qe!==null)throw Error(M(261));return lt=null,Ct=0,et}function zb(){for(;qe!==null;)nT(qe)}function Kb(){for(;qe!==null&&!f0();)nT(qe)}function nT(n){var e=iT(n.alternate,n,an);n.memoizedProps=n.pendingProps,e===null?rT(n):qe=e,Yp.current=null}function rT(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=Db(t,e),t!==null){t.flags&=32767,qe=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{et=6,qe=null;return}}else if(t=Pb(t,e,an),t!==null){qe=t;return}if(e=e.sibling,e!==null){qe=e;return}qe=e=n}while(e!==null);et===0&&(et=5)}function Fo(n,e,t){var r=ge,o=Nn.transition;try{Nn.transition=null,ge=1,jb(n,e,t,r)}finally{Nn.transition=o,ge=r}return null}function jb(n,e,t,r){do es();while(ro!==null);if(le&6)throw Error(M(327));t=n.finishedWork;var o=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(M(177));n.callbackNode=null,n.callbackPriority=0;var i=t.lanes|t.childLanes;if(E0(n,i),n===lt&&(qe=lt=null,Ct=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Dl||(Dl=!0,sT(Tc,function(){return es(),null})),i=(t.flags&15990)!==0,t.subtreeFlags&15990||i){i=Nn.transition,Nn.transition=null;var s=ge;ge=1;var a=le;le|=4,Yp.current=null,Ub(n,t),Jw(t,n),cb(Qh),kc=!!Gh,Qh=Gh=null,n.current=t,Fb(t),p0(),le=a,ge=s,Nn.transition=i}else n.current=t;if(Dl&&(Dl=!1,ro=n,Bc=o),i=n.pendingLanes,i===0&&(mo=null),y0(t.stateNode),Jt(n,Ke()),e!==null)for(r=n.onRecoverableError,t=0;t<e.length;t++)o=e[t],r(o.value,{componentStack:o.stack,digest:o.digest});if(Hc)throw Hc=!1,n=gf,gf=null,n;return Bc&1&&n.tag!==0&&es(),i=n.pendingLanes,i&1?n===yf?ca++:(ca=0,yf=n):ca=0,Mo(),null}function es(){if(ro!==null){var n=US(Bc),e=Nn.transition,t=ge;try{if(Nn.transition=null,ge=16>n?16:n,ro===null)var r=!1;else{if(n=ro,ro=null,Bc=0,le&6)throw Error(M(331));var o=le;for(le|=4,U=n.current;U!==null;){var i=U,s=i.child;if(U.flags&16){var a=i.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(U=c;U!==null;){var u=U;switch(u.tag){case 0:case 11:case 15:aa(8,u,i)}var d=u.child;if(d!==null)d.return=u,U=d;else for(;U!==null;){u=U;var h=u.sibling,f=u.return;if(Gw(u),u===c){U=null;break}if(h!==null){h.return=f,U=h;break}U=f}}}var p=i.alternate;if(p!==null){var m=p.child;if(m!==null){p.child=null;do{var v=m.sibling;m.sibling=null,m=v}while(m!==null)}}U=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,U=s;else e:for(;U!==null;){if(i=U,i.flags&2048)switch(i.tag){case 0:case 11:case 15:aa(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,U=g;break e}U=i.return}}var y=n.current;for(U=y;U!==null;){s=U;var C=s.child;if(s.subtreeFlags&2064&&C!==null)C.return=s,U=C;else e:for(s=y;U!==null;){if(a=U,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:Mu(9,a)}}catch(I){Fe(a,a.return,I)}if(a===s){U=null;break e}var w=a.sibling;if(w!==null){w.return=a.return,U=w;break e}U=a.return}}if(le=o,Mo(),cr&&typeof cr.onPostCommitFiberRoot=="function")try{cr.onPostCommitFiberRoot(ku,n)}catch{}r=!0}return r}finally{ge=t,Nn.transition=e}}return!1}function Uy(n,e,t){e=hs(t,e),e=Uw(n,e,1),n=po(n,e,1),e=Lt(),n!==null&&(rl(n,1,e),Jt(n,e))}function Fe(n,e,t){if(n.tag===3)Uy(n,n,t);else for(;e!==null;){if(e.tag===3){Uy(e,n,t);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(mo===null||!mo.has(r))){n=hs(t,n),n=Fw(e,n,1),e=po(e,n,1),n=Lt(),e!==null&&(rl(e,1,n),Jt(e,n));break}}e=e.return}}function $b(n,e,t){var r=n.pingCache;r!==null&&r.delete(e),e=Lt(),n.pingedLanes|=n.suspendedLanes&t,lt===n&&(Ct&t)===t&&(et===4||et===3&&(Ct&130023424)===Ct&&500>Ke()-Xp?Go(n,0):Jp|=t),Jt(n,e)}function oT(n,e){e===0&&(n.mode&1?(e=Il,Il<<=1,!(Il&130023424)&&(Il=4194304)):e=1);var t=Lt();n=_r(n,e),n!==null&&(rl(n,e,t),Jt(n,t))}function Vb(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),oT(n,t)}function Wb(n,e){var t=0;switch(n.tag){case 13:var r=n.stateNode,o=n.memoizedState;o!==null&&(t=o.retryLane);break;case 19:r=n.stateNode;break;default:throw Error(M(314))}r!==null&&r.delete(e),oT(n,t)}var iT;iT=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Qt.current)Gt=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Gt=!1,_b(n,e,t);Gt=!!(n.flags&131072)}else Gt=!1,Oe&&e.flags&1048576&&cw(e,Oc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;cc(n,e),n=e.pendingProps;var o=ls(e,xt.current);Zi(e,t),o=Vp(null,e,r,n,o,t);var i=Wp();return e.flags|=1,typeof o=="object"&&o!==null&&typeof o.render=="function"&&o.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Yt(r)?(i=!0,Nc(e)):i=!1,e.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,Bp(e),o.updater=Ou,e.stateNode=o,o._reactInternals=e,of(e,r,n,t),e=lf(null,e,r,!0,i,t)):(e.tag=0,Oe&&i&&_p(e),Pt(null,e,o,t),e=e.child),e;case 16:r=e.elementType;e:{switch(cc(n,e),n=e.pendingProps,o=r._init,r=o(r._payload),e.type=r,o=e.tag=Gb(r),n=Ln(r,n),o){case 0:e=af(null,e,r,n,t);break e;case 1:e=by(null,e,r,n,t);break e;case 11:e=Iy(null,e,r,n,t);break e;case 14:e=Ay(null,e,r,Ln(r.type,n),t);break e}throw Error(M(306,r,""))}return e;case 0:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ln(r,o),af(n,e,r,o,t);case 1:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ln(r,o),by(n,e,r,o,t);case 3:e:{if(Kw(e),n===null)throw Error(M(387));r=e.pendingProps,i=e.memoizedState,o=i.element,mw(n,e),Pc(e,r,null,t);var s=e.memoizedState;if(r=s.element,i.isDehydrated)if(i={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){o=hs(Error(M(423)),e),e=Ry(n,e,r,t,o);break e}else if(r!==o){o=hs(Error(M(424)),e),e=Ry(n,e,r,t,o);break e}else for(fn=fo(e.stateNode.containerInfo.firstChild),gn=e,Oe=!0,Hn=null,t=fw(e,null,r,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(cs(),r===o){e=Pr(n,e,t);break e}Pt(n,e,r,t)}e=e.child}return e;case 5:return gw(e),n===null&&tf(e),r=e.type,o=e.pendingProps,i=n!==null?n.memoizedProps:null,s=o.children,Yh(r,o)?s=null:i!==null&&Yh(r,i)&&(e.flags|=32),zw(n,e),Pt(n,e,s,t),e.child;case 6:return n===null&&tf(e),null;case 13:return jw(n,e,t);case 4:return zp(e,e.stateNode.containerInfo),r=e.pendingProps,n===null?e.child=us(e,null,r,t):Pt(n,e,r,t),e.child;case 11:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ln(r,o),Iy(n,e,r,o,t);case 7:return Pt(n,e,e.pendingProps,t),e.child;case 8:return Pt(n,e,e.pendingProps.children,t),e.child;case 12:return Pt(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(r=e.type._context,o=e.pendingProps,i=e.memoizedProps,s=o.value,Te(Mc,r._currentValue),r._currentValue=s,i!==null)if(Vn(i.value,s)){if(i.children===o.children&&!Qt.current){e=Pr(n,e,t);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var a=i.dependencies;if(a!==null){s=i.child;for(var l=a.firstContext;l!==null;){if(l.context===r){if(i.tag===1){l=br(-1,t&-t),l.tag=2;var c=i.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}i.lanes|=t,l=i.alternate,l!==null&&(l.lanes|=t),nf(i.return,t,e),a.lanes|=t;break}l=l.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(M(341));s.lanes|=t,a=s.alternate,a!==null&&(a.lanes|=t),nf(s,t,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}Pt(n,e,o.children,t),e=e.child}return e;case 9:return o=e.type,r=e.pendingProps.children,Zi(e,t),o=On(o),r=r(o),e.flags|=1,Pt(n,e,r,t),e.child;case 14:return r=e.type,o=Ln(r,e.pendingProps),o=Ln(r.type,o),Ay(n,e,r,o,t);case 15:return Hw(n,e,e.type,e.pendingProps,t);case 17:return r=e.type,o=e.pendingProps,o=e.elementType===r?o:Ln(r,o),cc(n,e),e.tag=1,Yt(r)?(n=!0,Nc(e)):n=!1,Zi(e,t),Lw(e,r,o),of(e,r,o,t),lf(null,e,r,!0,n,t);case 19:return $w(n,e,t);case 22:return Bw(n,e,t)}throw Error(M(156,e.tag))};function sT(n,e){return _S(n,e)}function qb(n,e,t,r){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(n,e,t,r){return new qb(n,e,t,r)}function nm(n){return n=n.prototype,!(!n||!n.isReactComponent)}function Gb(n){if(typeof n=="function")return nm(n)?1:0;if(n!=null){if(n=n.$$typeof,n===wp)return 11;if(n===Tp)return 14}return 2}function yo(n,e){var t=n.alternate;return t===null?(t=bn(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function hc(n,e,t,r,o,i){var s=2;if(r=n,typeof n=="function")nm(n)&&(s=1);else if(typeof n=="string")s=5;else e:switch(n){case _i:return Qo(t.children,o,i,e);case Sp:s=8,o|=8;break;case Rh:return n=bn(12,t,e,o|2),n.elementType=Rh,n.lanes=i,n;case Nh:return n=bn(13,t,e,o),n.elementType=Nh,n.lanes=i,n;case xh:return n=bn(19,t,e,o),n.elementType=xh,n.lanes=i,n;case gS:return Pu(t,o,i,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case pS:s=10;break e;case mS:s=9;break e;case wp:s=11;break e;case Tp:s=14;break e;case Gr:s=16,r=null;break e}throw Error(M(130,n==null?n:typeof n,""))}return e=bn(s,t,e,o),e.elementType=n,e.type=r,e.lanes=i,e}function Qo(n,e,t,r){return n=bn(7,n,r,e),n.lanes=t,n}function Pu(n,e,t,r){return n=bn(22,n,r,e),n.elementType=gS,n.lanes=t,n.stateNode={isHidden:!1},n}function qd(n,e,t){return n=bn(6,n,null,e),n.lanes=t,n}function Gd(n,e,t){return e=bn(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function Qb(n,e,t,r,o){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Rd(0),this.expirationTimes=Rd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Rd(0),this.identifierPrefix=r,this.onRecoverableError=o,this.mutableSourceEagerHydrationData=null}function rm(n,e,t,r,o,i,s,a,l){return n=new Qb(n,e,t,a,l),e===1?(e=1,i===!0&&(e|=8)):e=0,i=bn(3,null,null,e),n.current=i,i.stateNode=n,i.memoizedState={element:r,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bp(i),n}function Yb(n,e,t){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Mi,key:r==null?null:""+r,children:n,containerInfo:e,implementation:t}}function aT(n){if(!n)return Ao;n=n._reactInternals;e:{if(yi(n)!==n||n.tag!==1)throw Error(M(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Yt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(M(171))}if(n.tag===1){var t=n.type;if(Yt(t))return aw(n,t,e)}return e}function lT(n,e,t,r,o,i,s,a,l){return n=rm(t,r,!0,n,o,i,s,a,l),n.context=aT(null),t=n.current,r=Lt(),o=go(t),i=br(r,o),i.callback=e??null,po(t,i,o),n.current.lanes=o,rl(n,o,r),Jt(n,r),n}function Du(n,e,t,r){var o=e.current,i=Lt(),s=go(o);return t=aT(t),e.context===null?e.context=t:e.pendingContext=t,e=br(i,s),e.payload={element:n},r=r===void 0?null:r,r!==null&&(e.callback=r),n=po(o,e,s),n!==null&&(Kn(n,o,s,i),sc(n,o,s)),s}function Kc(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function Fy(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function om(n,e){Fy(n,e),(n=n.alternate)&&Fy(n,e)}function Jb(){return null}var cT=typeof reportError=="function"?reportError:function(n){console.error(n)};function im(n){this._internalRoot=n}Lu.prototype.render=im.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(M(409));Du(n,e,null,null)};Lu.prototype.unmount=im.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ii(function(){Du(null,n,null,null)}),e[Mr]=null}};function Lu(n){this._internalRoot=n}Lu.prototype.unstable_scheduleHydration=function(n){if(n){var e=BS();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Zr.length&&e!==0&&e<Zr[t].priority;t++);Zr.splice(t,0,n),t===0&&KS(n)}};function sm(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function Uu(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function Hy(){}function Xb(n,e,t,r,o){if(o){if(typeof r=="function"){var i=r;r=function(){var c=Kc(s);i.call(c)}}var s=lT(e,r,n,0,null,!1,!1,"",Hy);return n._reactRootContainer=s,n[Mr]=s.current,Ma(n.nodeType===8?n.parentNode:n),ii(),s}for(;o=n.lastChild;)n.removeChild(o);if(typeof r=="function"){var a=r;r=function(){var c=Kc(l);a.call(c)}}var l=rm(n,0,!1,null,null,!1,!1,"",Hy);return n._reactRootContainer=l,n[Mr]=l.current,Ma(n.nodeType===8?n.parentNode:n),ii(function(){Du(e,l,t,r)}),l}function Fu(n,e,t,r,o){var i=t._reactRootContainer;if(i){var s=i;if(typeof o=="function"){var a=o;o=function(){var l=Kc(s);a.call(l)}}Du(e,s,n,o)}else s=Xb(t,e,n,o,r);return Kc(s)}FS=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Qs(e.pendingLanes);t!==0&&(Ip(e,t|1),Jt(e,Ke()),!(le&6)&&(fs=Ke()+500,Mo()))}break;case 13:ii(function(){var r=_r(n,1);if(r!==null){var o=Lt();Kn(r,n,1,o)}}),om(n,1)}};Ap=function(n){if(n.tag===13){var e=_r(n,134217728);if(e!==null){var t=Lt();Kn(e,n,134217728,t)}om(n,134217728)}};HS=function(n){if(n.tag===13){var e=go(n),t=_r(n,e);if(t!==null){var r=Lt();Kn(t,n,e,r)}om(n,e)}};BS=function(){return ge};zS=function(n,e){var t=ge;try{return ge=n,e()}finally{ge=t}};Bh=function(n,e,t){switch(e){case"input":if(_h(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var r=t[e];if(r!==n&&r.form===n.form){var o=Ru(r);if(!o)throw Error(M(90));vS(r),_h(r,o)}}}break;case"textarea":SS(n,t);break;case"select":e=t.value,e!=null&&Qi(n,!!t.multiple,e,!1)}};bS=Zp;RS=ii;var Zb={usingClientEntryPoint:!1,Events:[il,Ui,Ru,IS,AS,Zp]},Vs={findFiberByHostInstance:zo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eR={bundleType:Vs.bundleType,version:Vs.version,rendererPackageName:Vs.rendererPackageName,rendererConfig:Vs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Fr.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=OS(n),n===null?null:n.stateNode},findFiberByHostInstance:Vs.findFiberByHostInstance||Jb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ll=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ll.isDisabled&&Ll.supportsFiber)try{ku=Ll.inject(eR),cr=Ll}catch{}}Cn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Zb;Cn.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sm(e))throw Error(M(200));return Yb(n,e,null,t)};Cn.createRoot=function(n,e){if(!sm(n))throw Error(M(299));var t=!1,r="",o=cT;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(o=e.onRecoverableError)),e=rm(n,1,!1,null,null,t,!1,r,o),n[Mr]=e.current,Ma(n.nodeType===8?n.parentNode:n),new im(e)};Cn.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(M(188)):(n=Object.keys(n).join(","),Error(M(268,n)));return n=OS(e),n=n===null?null:n.stateNode,n};Cn.flushSync=function(n){return ii(n)};Cn.hydrate=function(n,e,t){if(!Uu(e))throw Error(M(200));return Fu(null,n,e,!0,t)};Cn.hydrateRoot=function(n,e,t){if(!sm(n))throw Error(M(405));var r=t!=null&&t.hydratedSources||null,o=!1,i="",s=cT;if(t!=null&&(t.unstable_strictMode===!0&&(o=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),e=lT(e,null,n,1,t??null,o,!1,i,s),n[Mr]=e.current,Ma(n),r)for(n=0;n<r.length;n++)t=r[n],o=t._getVersion,o=o(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,o]:e.mutableSourceEagerHydrationData.push(t,o);return new Lu(e)};Cn.render=function(n,e,t){if(!Uu(e))throw Error(M(200));return Fu(null,n,e,!1,t)};Cn.unmountComponentAtNode=function(n){if(!Uu(n))throw Error(M(40));return n._reactRootContainer?(ii(function(){Fu(null,null,n,!1,function(){n._reactRootContainer=null,n[Mr]=null})}),!0):!1};Cn.unstable_batchedUpdates=Zp;Cn.unstable_renderSubtreeIntoContainer=function(n,e,t,r){if(!Uu(t))throw Error(M(200));if(n==null||n._reactInternals===void 0)throw Error(M(38));return Fu(n,e,t,!1,r)};Cn.version="18.3.1-next-f1338f8080-20240426";function uT(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(uT)}catch(n){console.error(n)}}uT(),uS.exports=Cn;var oo=uS.exports;const tR=XC(oo);var dT,By=oo;dT=By.createRoot,By.hydrateRoot;/*! @azure/msal-common v14.16.0 2024-11-05 */const b={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ul={CLIENT_ERROR_RANGE_START:400,CLIENT_ERROR_RANGE_END:499,SERVER_ERROR_RANGE_START:500,SERVER_ERROR_RANGE_END:599},Rs=[b.OPENID_SCOPE,b.PROFILE_SCOPE,b.OFFLINE_ACCESS_SCOPE],zy=[...Rs,b.EMAIL_SCOPE],Dt={CONTENT_TYPE:"Content-Type",CONTENT_LENGTH:"Content-Length",RETRY_AFTER:"Retry-After",CCS_HEADER:"X-AnchorMailbox",WWWAuthenticate:"WWW-Authenticate",AuthenticationInfo:"Authentication-Info",X_MS_REQUEST_ID:"x-ms-request-id",X_MS_HTTP_VERSION:"x-ms-httpver"},nt={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},vo={COMMON:"common",ORGANIZATIONS:"organizations",CONSUMERS:"consumers"},Fl={ACCESS_TOKEN:"access_token",XMS_CC:"xms_cc"},st={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},Ky={PLAIN:"plain",S256:"S256"},al={QUERY:"query",FRAGMENT:"fragment"},nR={...al},hT={AUTHORIZATION_CODE_GRANT:"authorization_code",REFRESH_TOKEN_GRANT:"refresh_token"},Hl={MSSTS_ACCOUNT_TYPE:"MSSTS",ADFS_ACCOUNT_TYPE:"ADFS",GENERIC_ACCOUNT_TYPE:"Generic"},Rt={CACHE_KEY_SEPARATOR:"-",CLIENT_INFO_SEPARATOR:"."},Q={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},am="appmetadata",rR="client_info",ua="1",jc={CACHE_KEY:"authority-metadata",REFRESH_TIME_SECONDS:3600*24},on={CONFIG:"config",CACHE:"cache",NETWORK:"network",HARDCODED_VALUES:"hardcoded_values"},pt={SCHEMA_VERSION:5,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},ye={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"},da={DEFAULT_THROTTLE_TIME_SECONDS:60,DEFAULT_MAX_THROTTLE_TIME_SECONDS:3600,THROTTLING_PREFIX:"throttling",X_MS_LIB_CAPABILITY_VALUE:"retry-after, h429"},jy={INVALID_GRANT_ERROR:"invalid_grant",CLIENT_MISMATCH_ERROR:"client_mismatch"},$y={username:"username",password:"password"},Bl={httpSuccess:200,httpBadRequest:400},ki={FAILED_AUTO_DETECTION:"1",INTERNAL_CACHE:"2",ENVIRONMENT_VARIABLE:"3",IMDS:"4"},Qd={CONFIGURED_NO_AUTO_DETECTION:"2",AUTO_DETECTION_REQUESTED_SUCCESSFUL:"4",AUTO_DETECTION_REQUESTED_FAILED:"5"},Wr={NOT_APPLICABLE:"0",FORCE_REFRESH_OR_CLAIMS:"1",NO_CACHED_ACCESS_TOKEN:"2",CACHED_ACCESS_TOKEN_EXPIRED:"3",PROACTIVELY_REFRESHED:"4"},oR={Pop:"pop"},iR=300;/*! @azure/msal-common v14.16.0 2024-11-05 */const lm="unexpected_error",sR="post_request_failed";/*! @azure/msal-common v14.16.0 2024-11-05 */const Vy={[lm]:"Unexpected error in authentication.",[sR]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Me extends Error{constructor(e,t,r){const o=t?`${e}: ${t}`:e;super(o),Object.setPrototypeOf(this,Me.prototype),this.errorCode=e||b.EMPTY_STRING,this.errorMessage=t||b.EMPTY_STRING,this.subError=r||b.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function fT(n,e){return new Me(n,e?`${Vy[n]} ${e}`:Vy[n])}/*! @azure/msal-common v14.16.0 2024-11-05 */const cm="client_info_decoding_error",pT="client_info_empty_error",um="token_parsing_error",mT="null_or_empty_token",Cr="endpoints_resolution_error",gT="network_error",yT="openid_config_error",vT="hash_not_deserialized",ps="invalid_state",CT="state_mismatch",$c="state_not_found",ST="nonce_mismatch",dm="auth_time_not_found",wT="max_age_transpired",aR="multiple_matching_tokens",lR="multiple_matching_accounts",TT="multiple_matching_appMetadata",ET="request_cannot_be_made",kT="cannot_remove_empty_scope",IT="cannot_append_scopeset",Sf="empty_input_scopeset",cR="device_code_polling_cancelled",uR="device_code_expired",dR="device_code_unknown_error",hm="no_account_in_silent_request",AT="invalid_cache_record",fm="invalid_cache_environment",wf="no_account_found",Tf="no_crypto_object",Ef="unexpected_credential_type",hR="invalid_assertion",fR="invalid_client_credential",kr="token_refresh_required",pR="user_timeout_reached",bT="token_claims_cnf_required_for_signedjwt",RT="authorization_code_missing_from_server_response",NT="binding_key_not_removed",xT="end_session_endpoint_not_supported",pm="key_id_missing",mR="no_network_connectivity",gR="user_canceled",yR="missing_tenant_id_error",te="method_not_implemented",vR="nested_app_auth_bridge_disabled";/*! @azure/msal-common v14.16.0 2024-11-05 */const Wy={[cm]:"The client info could not be parsed/decoded correctly",[pT]:"The client info was empty",[um]:"Token cannot be parsed",[mT]:"The token is null or empty",[Cr]:"Endpoints cannot be resolved",[gT]:"Network request failed",[yT]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[vT]:"The hash parameters could not be deserialized",[ps]:"State was not the expected format",[CT]:"State mismatch error",[$c]:"State not found",[ST]:"Nonce mismatch error",[dm]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[wT]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[aR]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[lR]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[TT]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[ET]:"Token request cannot be made without authorization code or refresh token.",[kT]:"Cannot remove null or empty scope from ScopeSet",[IT]:"Cannot append ScopeSet",[Sf]:"Empty input ScopeSet cannot be processed",[cR]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[uR]:"Device code is expired.",[dR]:"Device code stopped polling for unknown reasons.",[hm]:"Please pass an account object, silent flow is not supported without account information",[AT]:"Cache record object was null or undefined.",[fm]:"Invalid environment when attempting to create cache entry",[wf]:"No account found in cache for given key.",[Tf]:"No crypto object detected.",[Ef]:"Unexpected credential type.",[hR]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[fR]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[kr]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[pR]:"User defined timeout for device code polling reached",[bT]:"Cannot generate a POP jwt if the token_claims are not populated",[RT]:"Server response does not contain an authorization code to proceed",[NT]:"Could not remove the credential's binding key from storage.",[xT]:"The provided authority does not support logout",[pm]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[mR]:"No network connectivity. Check your internet connection.",[gR]:"User cancelled the flow.",[yR]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[te]:"This method has not been implemented",[vR]:"The nested app auth bridge is disabled"};class Hu extends Me{constructor(e,t){super(e,t?`${Wy[e]}: ${t}`:Wy[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Hu.prototype)}}function x(n,e){return new Hu(n,e)}/*! @azure/msal-common v14.16.0 2024-11-05 */const Vc={createNewGuid:()=>{throw x(te)},base64Decode:()=>{throw x(te)},base64Encode:()=>{throw x(te)},base64UrlEncode:()=>{throw x(te)},encodeKid:()=>{throw x(te)},async getPublicKeyThumbprint(){throw x(te)},async removeTokenBindingKey(){throw x(te)},async clearKeystore(){throw x(te)},async signJwt(){throw x(te)},async hashString(){throw x(te)}};/*! @azure/msal-common v14.16.0 2024-11-05 */var xe;(function(n){n[n.Error=0]="Error",n[n.Warning=1]="Warning",n[n.Info=2]="Info",n[n.Verbose=3]="Verbose",n[n.Trace=4]="Trace"})(xe||(xe={}));class Dr{constructor(e,t,r){this.level=xe.Info;const o=()=>{},i=e||Dr.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||o,this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level=typeof i.logLevel=="number"?i.logLevel:xe.Info,this.correlationId=i.correlationId||b.EMPTY_STRING,this.packageName=t||b.EMPTY_STRING,this.packageVersion=r||b.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xe.Info}}clone(e,t,r){return new Dr({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,t)}logMessage(e,t){if(t.logLevel>this.level||!this.piiLoggingEnabled&&t.containsPii)return;const i=`${`[${new Date().toUTCString()}] : [${t.correlationId||this.correlationId||""}]`} : ${this.packageName}@${this.packageVersion} : ${xe[t.logLevel]} - ${e}`;this.executeCallback(t.logLevel,i,t.containsPii||!1)}executeCallback(e,t,r){this.localCallback&&this.localCallback(e,t,r)}error(e,t){this.logMessage(e,{logLevel:xe.Error,containsPii:!1,correlationId:t||b.EMPTY_STRING})}errorPii(e,t){this.logMessage(e,{logLevel:xe.Error,containsPii:!0,correlationId:t||b.EMPTY_STRING})}warning(e,t){this.logMessage(e,{logLevel:xe.Warning,containsPii:!1,correlationId:t||b.EMPTY_STRING})}warningPii(e,t){this.logMessage(e,{logLevel:xe.Warning,containsPii:!0,correlationId:t||b.EMPTY_STRING})}info(e,t){this.logMessage(e,{logLevel:xe.Info,containsPii:!1,correlationId:t||b.EMPTY_STRING})}infoPii(e,t){this.logMessage(e,{logLevel:xe.Info,containsPii:!0,correlationId:t||b.EMPTY_STRING})}verbose(e,t){this.logMessage(e,{logLevel:xe.Verbose,containsPii:!1,correlationId:t||b.EMPTY_STRING})}verbosePii(e,t){this.logMessage(e,{logLevel:xe.Verbose,containsPii:!0,correlationId:t||b.EMPTY_STRING})}trace(e,t){this.logMessage(e,{logLevel:xe.Trace,containsPii:!1,correlationId:t||b.EMPTY_STRING})}tracePii(e,t){this.logMessage(e,{logLevel:xe.Trace,containsPii:!0,correlationId:t||b.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}/*! @azure/msal-common v14.16.0 2024-11-05 */const OT="@azure/msal-common",mm="14.16.0";/*! @azure/msal-common v14.16.0 2024-11-05 */const gm={None:"none"};/*! @azure/msal-common v14.16.0 2024-11-05 */function vi(n,e){const t=CR(n);try{const r=e(t);return JSON.parse(r)}catch{throw x(um)}}function CR(n){if(!n)throw x(mT);const t=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(n);if(!t||t.length<4)throw x(um);return t[2]}function MT(n,e){if(e===0||Date.now()-3e5>n+e)throw x(wT)}/*! @azure/msal-common v14.16.0 2024-11-05 */function hr(){return Math.round(new Date().getTime()/1e3)}function kf(n,e){const t=Number(n)||0;return hr()+e>t}function SR(n){return Number(n)>hr()}/*! @azure/msal-common v14.16.0 2024-11-05 */function $i(n){return[wR(n),TR(n),ER(n),kR(n),IR(n)].join(Rt.CACHE_KEY_SEPARATOR).toLowerCase()}function Bu(n,e,t,r,o){return{credentialType:Q.ID_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t,realm:o}}function zu(n,e,t,r,o,i,s,a,l,c,u,d,h,f,p){var v,g;const m={homeAccountId:n,credentialType:Q.ACCESS_TOKEN,secret:t,cachedAt:hr().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:u||ye.BEARER};if(d&&(m.userAssertionHash=d),c&&(m.refreshOn=c.toString()),f&&(m.requestedClaims=f,m.requestedClaimsHash=p),((v=m.tokenType)==null?void 0:v.toLowerCase())!==ye.BEARER.toLowerCase())switch(m.credentialType=Q.ACCESS_TOKEN_WITH_AUTH_SCHEME,m.tokenType){case ye.POP:const y=vi(t,l);if(!((g=y==null?void 0:y.cnf)!=null&&g.kid))throw x(bT);m.keyId=y.cnf.kid;break;case ye.SSH:m.keyId=h}return m}function _T(n,e,t,r,o,i,s){const a={credentialType:Q.REFRESH_TOKEN,homeAccountId:n,environment:e,clientId:r,secret:t};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function ym(n){return n.hasOwnProperty("homeAccountId")&&n.hasOwnProperty("environment")&&n.hasOwnProperty("credentialType")&&n.hasOwnProperty("clientId")&&n.hasOwnProperty("secret")}function qy(n){return n?ym(n)&&n.hasOwnProperty("realm")&&n.hasOwnProperty("target")&&(n.credentialType===Q.ACCESS_TOKEN||n.credentialType===Q.ACCESS_TOKEN_WITH_AUTH_SCHEME):!1}function Gy(n){return n?ym(n)&&n.hasOwnProperty("realm")&&n.credentialType===Q.ID_TOKEN:!1}function Qy(n){return n?ym(n)&&n.credentialType===Q.REFRESH_TOKEN:!1}function wR(n){return[n.homeAccountId,n.environment].join(Rt.CACHE_KEY_SEPARATOR).toLowerCase()}function TR(n){const e=n.credentialType===Q.REFRESH_TOKEN&&n.familyId||n.clientId;return[n.credentialType,e,n.realm||""].join(Rt.CACHE_KEY_SEPARATOR).toLowerCase()}function ER(n){return(n.target||"").toLowerCase()}function kR(n){return(n.requestedClaimsHash||"").toLowerCase()}function IR(n){return n.tokenType&&n.tokenType.toLowerCase()!==ye.BEARER.toLowerCase()?n.tokenType.toLowerCase():""}function AR(n,e){const t=n.indexOf(pt.CACHE_KEY)===0;let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),t&&r}function bR(n,e){let t=!1;n&&(t=n.indexOf(da.THROTTLING_PREFIX)===0);let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),t&&r}function RR({environment:n,clientId:e}){return[am,n,e].join(Rt.CACHE_KEY_SEPARATOR).toLowerCase()}function NR(n,e){return e?n.indexOf(am)===0&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment"):!1}function xR(n,e){return e?n.indexOf(jc.CACHE_KEY)===0&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri"):!1}function Yy(){return hr()+jc.REFRESH_TIME_SECONDS}function zl(n,e,t){n.authorization_endpoint=e.authorization_endpoint,n.token_endpoint=e.token_endpoint,n.end_session_endpoint=e.end_session_endpoint,n.issuer=e.issuer,n.endpointsFromNetwork=t,n.jwks_uri=e.jwks_uri}function Yd(n,e,t){n.aliases=e.aliases,n.preferred_cache=e.preferred_cache,n.preferred_network=e.preferred_network,n.aliasesFromNetwork=t}function Jy(n){return n.expiresAt<=hr()}/*! @azure/msal-common v14.16.0 2024-11-05 */const PT="redirect_uri_empty",OR="claims_request_parsing_error",DT="authority_uri_insecure",Js="url_parse_error",LT="empty_url_error",UT="empty_input_scopes_error",FT="invalid_prompt_value",vm="invalid_claims",HT="token_request_empty",BT="logout_request_empty",zT="invalid_code_challenge_method",Cm="pkce_params_missing",Sm="invalid_cloud_discovery_metadata",KT="invalid_authority_metadata",jT="untrusted_authority",Ku="missing_ssh_jwk",$T="missing_ssh_kid",MR="missing_nonce_authentication_header",_R="invalid_authentication_header",VT="cannot_set_OIDCOptions",WT="cannot_allow_native_broker",qT="authority_mismatch";/*! @azure/msal-common v14.16.0 2024-11-05 */const PR={[PT]:"A redirect URI is required for all calls, and none has been set.",[OR]:"Could not parse the given claims request object.",[DT]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[Js]:"URL could not be parsed into appropriate segments.",[LT]:"URL was empty or null.",[UT]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[FT]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[vm]:"Given claims parameter must be a stringified JSON object.",[HT]:"Token request was empty and not found in cache.",[BT]:"The logout request was null or undefined.",[zT]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[Cm]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Sm]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[KT]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[jT]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Ku]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[$T]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[MR]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[_R]:"Invalid authentication header provided",[VT]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[WT]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[qT]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class wm extends Me{constructor(e){super(e,PR[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,wm.prototype)}}function Se(n){return new wm(n)}/*! @azure/msal-common v14.16.0 2024-11-05 */class jn{static isEmptyObj(e){if(e)try{const t=JSON.parse(e);return Object.keys(t).length===0}catch{}return!0}static startsWith(e,t){return e.indexOf(t)===0}static endsWith(e,t){return e.length>=t.length&&e.lastIndexOf(t)===e.length-t.length}static queryStringToObject(e){const t={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(t[o(s)]=o(a))}}),t}static trimArrayEntries(e){return e.map(t=>t.trim())}static removeEmptyStringsFromArray(e){return e.filter(t=>!!t)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,t){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(t)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class je{constructor(e){const t=e?jn.trimArrayEntries([...e]):[],r=t?jn.removeEmptyStringsFromArray(t):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||b.EMPTY_STRING).split(" ");return new je(r)}static createSearchScopes(e){const t=new je(e);return t.containsOnlyOIDCScopes()?t.removeScope(b.OFFLINE_ACCESS_SCOPE):t.removeOIDCScopes(),t}validateInputScopes(e){if(!e||e.length<1)throw Se(UT)}containsScope(e){const t=this.printScopesLowerCase().split(" "),r=new je(t);return e?r.scopes.has(e.toLowerCase()):!1}containsScopeSet(e){return!e||e.scopes.size<=0?!1:this.scopes.size>=e.scopes.size&&e.asArray().every(t=>this.containsScope(t))}containsOnlyOIDCScopes(){let e=0;return zy.forEach(t=>{this.containsScope(t)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(t=>this.appendScope(t))}catch{throw x(IT)}}removeScope(e){if(!e)throw x(kT);this.scopes.delete(e.trim())}removeOIDCScopes(){zy.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw x(Sf);const t=new Set;return e.scopes.forEach(r=>t.add(r.toLowerCase())),this.scopes.forEach(r=>t.add(r.toLowerCase())),t}intersectingScopeSets(e){if(!e)throw x(Sf);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const t=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return t.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(t=>e.push(t)),e}printScopes(){return this.scopes?this.asArray().join(" "):b.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}/*! @azure/msal-common v14.16.0 2024-11-05 */function Wc(n,e){if(!n)throw x(pT);try{const t=e(n);return JSON.parse(t)}catch{throw x(cm)}}function Vi(n){if(!n)throw x(cm);const e=n.split(Rt.CLIENT_INFO_SEPARATOR,2);return{uid:e[0],utid:e.length<2?b.EMPTY_STRING:e[1]}}/*! @azure/msal-common v14.16.0 2024-11-05 */function qc(n,e){return!!n&&!!e&&n===e.split(".")[1]}function Tm(n,e,t,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:l,acr:c}=r,u=s||l||c||"";return{tenantId:u,localAccountId:o||i||"",name:a,isHomeTenant:qc(u,n)}}else return{tenantId:t,localAccountId:e,isHomeTenant:qc(t,n)}}function Em(n,e,t,r){let o=n;if(e){const{isHomeTenant:i,...s}=e;o={...n,...s}}if(t){const{isHomeTenant:i,...s}=Tm(n.homeAccountId,n.localAccountId,n.tenantId,t);return o={...o,...s,idTokenClaims:t,idToken:r},o}return o}/*! @azure/msal-common v14.16.0 2024-11-05 */const Fn={Default:0,Adfs:1,Dsts:2,Ciam:3};/*! @azure/msal-common v14.16.0 2024-11-05 */function GT(n){return n&&(n.tid||n.tfp||n.acr)||null}/*! @azure/msal-common v14.16.0 2024-11-05 */const Rr={AAD:"AAD",OIDC:"OIDC"};/*! @azure/msal-common v14.16.0 2024-11-05 */class tt{generateAccountId(){return[this.homeAccountId,this.environment].join(Rt.CACHE_KEY_SEPARATOR).toLowerCase()}generateAccountKey(){return tt.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const t=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",t||e.tenantId||""].join(Rt.CACHE_KEY_SEPARATOR).toLowerCase()}static createAccount(e,t,r){var c,u,d,h,f,p;const o=new tt;t.authorityType===Fn.Adfs?o.authorityType=Hl.ADFS_ACCOUNT_TYPE:t.protocolMode===Rr.AAD?o.authorityType=Hl.MSSTS_ACCOUNT_TYPE:o.authorityType=Hl.GENERIC_ACCOUNT_TYPE;let i;e.clientInfo&&r&&(i=Wc(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||t&&t.getPreferredCache();if(!s)throw x(fm);o.environment=s,o.realm=(i==null?void 0:i.utid)||GT(e.idTokenClaims)||"",o.localAccountId=(i==null?void 0:i.uid)||((c=e.idTokenClaims)==null?void 0:c.oid)||((u=e.idTokenClaims)==null?void 0:u.sub)||"";const a=((d=e.idTokenClaims)==null?void 0:d.preferred_username)||((h=e.idTokenClaims)==null?void 0:h.upn),l=(f=e.idTokenClaims)!=null&&f.emails?e.idTokenClaims.emails[0]:null;if(o.username=a||l||"",o.name=((p=e.idTokenClaims)==null?void 0:p.name)||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const m=Tm(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[m]}return o}static createFromAccountInfo(e,t,r){var i;const o=new tt;return o.authorityType=e.authorityType||Hl.GENERIC_ACCOUNT_TYPE,o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=t,o.msGraphHost=r,o.tenantProfiles=Array.from(((i=e.tenantProfiles)==null?void 0:i.values())||[]),o}static generateHomeAccountId(e,t,r,o,i){if(!(t===Fn.Adfs||t===Fn.Dsts)){if(e)try{const s=Wc(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return(i==null?void 0:i.sub)||""}static isAccountEntity(e){return e?e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType"):!1}static accountInfoIsEqual(e,t,r){if(!e||!t)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=t.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===t.homeAccountId&&e.localAccountId===t.localAccountId&&e.username===t.username&&e.tenantId===t.tenantId&&e.environment===t.environment&&e.nativeAccountId===t.nativeAccountId&&o}}/*! @azure/msal-common v14.16.0 2024-11-05 */function QT(n){return n.startsWith("#/")?n.substring(2):n.startsWith("#")||n.startsWith("?")?n.substring(1):n}function Gc(n){if(!n||n.indexOf("=")<0)return null;try{const e=QT(n),t=Object.fromEntries(new URLSearchParams(e));if(t.code||t.error||t.error_description||t.state)return t}catch{throw x(vT)}return null}/*! @azure/msal-common v14.16.0 2024-11-05 */class ae{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw Se(LT);e.includes("#")||(this._urlString=ae.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let t=e.toLowerCase();return jn.endsWith(t,"?")?t=t.slice(0,-1):jn.endsWith(t,"?/")&&(t=t.slice(0,-2)),jn.endsWith(t,"/")||(t+="/"),t}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw Se(Js)}if(!e.HostNameAndPort||!e.PathSegments)throw Se(Js);if(!e.Protocol||e.Protocol.toLowerCase()!=="https:")throw Se(DT)}static appendQueryString(e,t){return t?e.indexOf("?")<0?`${e}?${t}`:`${e}&${t}`:e}static removeHashFromUrl(e){return ae.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const t=this.getUrlComponents(),r=t.PathSegments;return e&&r.length!==0&&(r[0]===vo.COMMON||r[0]===vo.ORGANIZATIONS)&&(r[0]=e),ae.constructAuthorityUriFromObject(t)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),t=this.urlString.match(e);if(!t)throw Se(Js);const r={Protocol:t[1],HostNameAndPort:t[4],AbsolutePath:t[5],QueryString:t[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const t=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(t);if(!r)throw Se(Js);return r[2]}static getAbsoluteUrl(e,t){if(e[0]===b.FORWARD_SLASH){const o=new ae(t).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new ae(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Gc(e)}}/*! @azure/msal-common v14.16.0 2024-11-05 */const YT={endpointMetadata:{"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},instanceDiscoveryMetadata:{metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]}},Xy=YT.endpointMetadata,km=YT.instanceDiscoveryMetadata,JT=new Set;km.metadata.forEach(n=>{n.aliases.forEach(e=>{JT.add(e)})});function DR(n,e){var o;let t;const r=n.canonicalAuthority;if(r){const i=new ae(r).getUrlComponents().HostNameAndPort;t=Zy(i,(o=n.cloudDiscoveryMetadata)==null?void 0:o.metadata,on.CONFIG,e)||Zy(i,km.metadata,on.HARDCODED_VALUES,e)||n.knownAuthorities}return t||[]}function Zy(n,e,t,r){if(r==null||r.trace(`getAliasesFromMetadata called with source: ${t}`),n&&e){const o=Qc(e,n);if(o)return r==null||r.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${t}, returning aliases`),o.aliases;r==null||r.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${t}`)}return null}function LR(n){return Qc(km.metadata,n)}function Qc(n,e){for(let t=0;t<n.length;t++){const r=n[t];if(r.aliases.includes(e))return r}return null}/*! @azure/msal-common v14.16.0 2024-11-05 */const XT="cache_quota_exceeded",Im="cache_error_unknown";/*! @azure/msal-common v14.16.0 2024-11-05 */const Jd={[XT]:"Exceeded cache storage capacity.",[Im]:"Unexpected error occurred when using cache storage."};class ts extends Error{constructor(e,t){const r=t||(Jd[e]?Jd[e]:Jd[Im]);super(`${e}: ${r}`),Object.setPrototypeOf(this,ts.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}/*! @azure/msal-common v14.16.0 2024-11-05 */class ms{constructor(e,t,r,o){this.clientId=e,this.cryptoImpl=t,this.commonLogger=r.clone(OT,mm),this.staticAuthorityOptions=o}getAllAccounts(e){return this.buildTenantProfiles(this.getAccountsFilteredBy(e||{}),e)}getAccountInfoFilteredBy(e){const t=this.getAllAccounts(e);return t.length>1?t.sort(o=>o.idTokenClaims?-1:1)[0]:t.length===1?t[0]:null}getBaseAccountInfo(e){const t=this.getAccountsFilteredBy(e);return t.length>0?t[0].getAccountInfo():null}buildTenantProfiles(e,t){return e.flatMap(r=>this.getTenantProfilesFromAccountEntity(r,t==null?void 0:t.tenantId,t))}getTenantedAccountInfoByFilter(e,t,r,o){let i=null,s;if(o&&!this.tenantProfileMatchesFilter(r,o))return null;const a=this.getIdToken(e,t,r.tenantId);return a&&(s=vi(a.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(s,o))?null:(i=Em(e,r,s,a==null?void 0:a.secret),i)}getTenantProfilesFromAccountEntity(e,t,r){const o=e.getAccountInfo();let i=o.tenantProfiles||new Map;const s=this.getTokenKeys();if(t){const l=i.get(t);if(l)i=new Map([[t,l]]);else return[]}const a=[];return i.forEach(l=>{const c=this.getTenantedAccountInfoByFilter(o,s,l,r);c&&a.push(c)}),a}tenantProfileMatchesFilter(e,t){return!(t.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,t.localAccountId)||t.name&&e.name!==t.name||t.isHomeTenant!==void 0&&e.isHomeTenant!==t.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,t){return!(t&&(t.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,t.localAccountId)||t.loginHint&&!this.matchLoginHintFromTokenClaims(e,t.loginHint)||t.username&&!this.matchUsername(e.preferred_username,t.username)||t.name&&!this.matchName(e,t.name)||t.sid&&!this.matchSid(e,t.sid)))}async saveCacheRecord(e,t,r){var o,i,s,a;if(!e)throw x(AT);try{e.account&&this.setAccount(e.account),e.idToken&&(t==null?void 0:t.idToken)!==!1&&this.setIdTokenCredential(e.idToken),e.accessToken&&(t==null?void 0:t.accessToken)!==!1&&await this.saveAccessToken(e.accessToken),e.refreshToken&&(t==null?void 0:t.refreshToken)!==!1&&this.setRefreshTokenCredential(e.refreshToken),e.appMetadata&&this.setAppMetadata(e.appMetadata)}catch(l){throw(o=this.commonLogger)==null||o.error("CacheManager.saveCacheRecord: failed"),l instanceof Error?((i=this.commonLogger)==null||i.errorPii(`CacheManager.saveCacheRecord: ${l.message}`,r),l.name==="QuotaExceededError"||l.name==="NS_ERROR_DOM_QUOTA_REACHED"||l.message.includes("exceeded the quota")?((s=this.commonLogger)==null||s.error("CacheManager.saveCacheRecord: exceeded storage quota",r),new ts(XT)):new ts(l.name,l.message)):((a=this.commonLogger)==null||a.errorPii(`CacheManager.saveCacheRecord: ${l}`,r),new ts(Im))}}async saveAccessToken(e){const t={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},r=this.getTokenKeys(),o=je.fromString(e.target),i=[];r.accessToken.forEach(s=>{if(!this.accessTokenKeyMatchesFilter(s,t,!1))return;const a=this.getAccessTokenCredential(s);a&&this.credentialMatchesFilter(a,t)&&je.fromString(a.target).intersectingScopeSets(o)&&i.push(this.removeAccessToken(s))}),await Promise.all(i),this.setAccessTokenCredential(e)}getAccountsFilteredBy(e){const t=this.getAccountKeys(),r=[];return t.forEach(o=>{var l;if(!this.isAccountKey(o,e.homeAccountId))return;const i=this.getAccount(o,this.commonLogger);if(!i||e.homeAccountId&&!this.matchHomeAccountId(i,e.homeAccountId)||e.username&&!this.matchUsername(i.username,e.username)||e.environment&&!this.matchEnvironment(i,e.environment)||e.realm&&!this.matchRealm(i,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(i,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(i,e.authorityType))return;const s={localAccountId:e==null?void 0:e.localAccountId,name:e==null?void 0:e.name},a=(l=i.tenantProfiles)==null?void 0:l.filter(c=>this.tenantProfileMatchesFilter(c,s));a&&a.length===0||r.push(i)}),r}isAccountKey(e,t,r){return!(e.split(Rt.CACHE_KEY_SEPARATOR).length<3||t&&!e.toLowerCase().includes(t.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split(Rt.CACHE_KEY_SEPARATOR).length<6)return!1;const t=e.toLowerCase();if(t.indexOf(Q.ID_TOKEN.toLowerCase())===-1&&t.indexOf(Q.ACCESS_TOKEN.toLowerCase())===-1&&t.indexOf(Q.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())===-1&&t.indexOf(Q.REFRESH_TOKEN.toLowerCase())===-1)return!1;if(t.indexOf(Q.REFRESH_TOKEN.toLowerCase())>-1){const r=`${Q.REFRESH_TOKEN}${Rt.CACHE_KEY_SEPARATOR}${this.clientId}${Rt.CACHE_KEY_SEPARATOR}`,o=`${Q.REFRESH_TOKEN}${Rt.CACHE_KEY_SEPARATOR}${ua}${Rt.CACHE_KEY_SEPARATOR}`;if(t.indexOf(r.toLowerCase())===-1&&t.indexOf(o.toLowerCase())===-1)return!1}else if(t.indexOf(this.clientId.toLowerCase())===-1)return!1;return!0}credentialMatchesFilter(e,t){return!(t.clientId&&!this.matchClientId(e,t.clientId)||t.userAssertionHash&&!this.matchUserAssertionHash(e,t.userAssertionHash)||typeof t.homeAccountId=="string"&&!this.matchHomeAccountId(e,t.homeAccountId)||t.environment&&!this.matchEnvironment(e,t.environment)||t.realm&&!this.matchRealm(e,t.realm)||t.credentialType&&!this.matchCredentialType(e,t.credentialType)||t.familyId&&!this.matchFamilyId(e,t.familyId)||t.target&&!this.matchTarget(e,t.target)||(t.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==t.requestedClaimsHash||e.credentialType===Q.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(t.tokenType&&!this.matchTokenType(e,t.tokenType)||t.tokenType===ye.SSH&&t.keyId&&!this.matchKeyId(e,t.keyId)))}getAppMetadataFilteredBy(e){const t=this.getKeys(),r={};return t.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const t=this.getAuthorityMetadataKeys();let r=null;return t.forEach(o=>{if(!this.isAuthorityMetadata(o)||o.indexOf(this.clientId)===-1)return;const i=this.getAuthorityMetadata(o);i&&i.aliases.indexOf(e)!==-1&&(r=i)}),r}async removeAllAccounts(){const e=this.getAccountKeys(),t=[];e.forEach(r=>{t.push(this.removeAccount(r))}),await Promise.all(t)}async removeAccount(e){const t=this.getAccount(e,this.commonLogger);t&&(await this.removeAccountContext(t),this.removeItem(e))}async removeAccountContext(e){const t=this.getTokenKeys(),r=e.generateAccountId(),o=[];t.idToken.forEach(i=>{i.indexOf(r)===0&&this.removeIdToken(i)}),t.accessToken.forEach(i=>{i.indexOf(r)===0&&o.push(this.removeAccessToken(i))}),t.refreshToken.forEach(i=>{i.indexOf(r)===0&&this.removeRefreshToken(i)}),await Promise.all(o)}updateOutdatedCachedAccount(e,t,r){var o;if(t&&t.isSingleTenant()){(o=this.commonLogger)==null||o.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const i=this.getAccountKeys().filter(u=>u.startsWith(t.homeAccountId)),s=[];i.forEach(u=>{const d=this.getCachedAccountEntity(u);d&&s.push(d)});const a=s.find(u=>qc(u.realm,u.homeAccountId))||s[0];a.tenantProfiles=s.map(u=>({tenantId:u.realm,localAccountId:u.localAccountId,name:u.name,isHomeTenant:qc(u.realm,u.homeAccountId)}));const l=ms.toObject(new tt,{...a}),c=l.generateAccountKey();return i.forEach(u=>{u!==c&&this.removeOutdatedAccount(e)}),this.setAccount(l),r==null||r.verbose("Updated an outdated account entity in the cache"),l}return t}async removeAccessToken(e){const t=this.getAccessTokenCredential(e);if(t){if(t.credentialType.toLowerCase()===Q.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()&&t.tokenType===ye.POP){const o=t.keyId;if(o)try{await this.cryptoImpl.removeTokenBindingKey(o)}catch{throw x(NT)}}return this.removeItem(e)}}removeAppMetadata(){return this.getKeys().forEach(t=>{this.isAppMetadata(t)&&this.removeItem(t)}),!0}readAccountFromCache(e){const t=tt.generateAccountCacheKey(e);return this.getAccount(t,this.commonLogger)}getIdToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const s={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Q.ID_TOKEN,clientId:this.clientId,realm:r},a=this.getIdTokensByFilter(s,t),l=a.size;if(l<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(l>1){let c=a;if(!r){const u=new Map;a.forEach((h,f)=>{h.realm===e.tenantId&&u.set(f,h)});const d=u.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(d===1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),u.values().next().value;c=u}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),c.forEach((u,d)=>{this.removeIdToken(d)}),o&&i&&o.addFields({multiMatchedID:a.size},i),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,t){const r=t&&t.idToken||this.getTokenKeys().idToken,o=new Map;return r.forEach(i=>{if(!this.idTokenKeyMatchesFilter(i,{clientId:this.clientId,...e}))return;const s=this.getIdTokenCredential(i);s&&this.credentialMatchesFilter(s,e)&&o.set(i,s)}),o}idTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}removeIdToken(e){this.removeItem(e)}removeRefreshToken(e){this.removeItem(e)}getAccessToken(e,t,r,o,i,s){this.commonLogger.trace("CacheManager - getAccessToken called");const a=je.createSearchScopes(t.scopes),l=t.authenticationScheme||ye.BEARER,c=l.toLowerCase()!==ye.BEARER.toLowerCase()?Q.ACCESS_TOKEN_WITH_AUTH_SCHEME:Q.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:a,tokenType:l,keyId:t.sshKid,requestedClaimsHash:t.requestedClaimsHash},d=r&&r.accessToken||this.getTokenKeys().accessToken,h=[];d.forEach(p=>{if(this.accessTokenKeyMatchesFilter(p,u,!0)){const m=this.getAccessTokenCredential(p);m&&this.credentialMatchesFilter(m,u)&&h.push(m)}});const f=h.length;return f<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):f>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),h.forEach(p=>{this.removeAccessToken($i(p))}),i&&s&&i.addFields({multiMatchedAT:h.length},s),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),h[0])}accessTokenKeyMatchesFilter(e,t,r){const o=e.toLowerCase();if(t.clientId&&o.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&o.indexOf(t.homeAccountId.toLowerCase())===-1||t.realm&&o.indexOf(t.realm.toLowerCase())===-1||t.requestedClaimsHash&&o.indexOf(t.requestedClaimsHash.toLowerCase())===-1)return!1;if(t.target){const i=t.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e){const t=this.getTokenKeys(),r=[];return t.accessToken.forEach(o=>{if(!this.accessTokenKeyMatchesFilter(o,e,!0))return;const i=this.getAccessTokenCredential(o);i&&this.credentialMatchesFilter(i,e)&&r.push(i)}),r}getRefreshToken(e,t,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const s=t?ua:void 0,a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:Q.REFRESH_TOKEN,clientId:this.clientId,familyId:s},l=r&&r.refreshToken||this.getTokenKeys().refreshToken,c=[];l.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const h=this.getRefreshTokenCredential(d);h&&this.credentialMatchesFilter(h,a)&&c.push(h)}});const u=c.length;return u<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(u>1&&o&&i&&o.addFields({multiMatchedRT:u},i),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),c[0])}refreshTokenKeyMatchesFilter(e,t){const r=e.toLowerCase();return!(t.familyId&&r.indexOf(t.familyId.toLowerCase())===-1||!t.familyId&&t.clientId&&r.indexOf(t.clientId.toLowerCase())===-1||t.homeAccountId&&r.indexOf(t.homeAccountId.toLowerCase())===-1)}readAppMetadataFromCache(e){const t={environment:e,clientId:this.clientId},r=this.getAppMetadataFilteredBy(t),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw x(TT);return o[0]}isAppMetadataFOCI(e){const t=this.readAppMetadataFromCache(e);return!!(t&&t.familyId===ua)}matchHomeAccountId(e,t){return typeof e.homeAccountId=="string"&&t===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,t){const r=e.oid||e.sub;return t===r}matchLocalAccountIdFromTenantProfile(e,t){return e.localAccountId===t}matchName(e,t){var r;return t.toLowerCase()===((r=e.name)==null?void 0:r.toLowerCase())}matchUsername(e,t){return!!(e&&typeof e=="string"&&(t==null?void 0:t.toLowerCase())===e.toLowerCase())}matchUserAssertionHash(e,t){return!!(e.userAssertionHash&&t===e.userAssertionHash)}matchEnvironment(e,t){if(this.staticAuthorityOptions){const o=DR(this.staticAuthorityOptions,this.commonLogger);if(o.includes(t)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(t);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,t){return e.credentialType&&t.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,t){return!!(e.clientId&&t===e.clientId)}matchFamilyId(e,t){return!!(e.familyId&&t===e.familyId)}matchRealm(e,t){var r;return((r=e.realm)==null?void 0:r.toLowerCase())===t.toLowerCase()}matchNativeAccountId(e,t){return!!(e.nativeAccountId&&t===e.nativeAccountId)}matchLoginHintFromTokenClaims(e,t){return e.login_hint===t||e.preferred_username===t||e.upn===t}matchSid(e,t){return e.sid===t}matchAuthorityType(e,t){return!!(e.authorityType&&t.toLowerCase()===e.authorityType.toLowerCase())}matchTarget(e,t){return e.credentialType!==Q.ACCESS_TOKEN&&e.credentialType!==Q.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target?!1:je.fromString(e.target).containsScopeSet(t)}matchTokenType(e,t){return!!(e.tokenType&&e.tokenType===t)}matchKeyId(e,t){return!!(e.keyId&&e.keyId===t)}isAppMetadata(e){return e.indexOf(am)!==-1}isAuthorityMetadata(e){return e.indexOf(jc.CACHE_KEY)!==-1}generateAuthorityMetadataCacheKey(e){return`${jc.CACHE_KEY}-${this.clientId}-${e}`}static toObject(e,t){for(const r in t)e[r]=t[r];return e}}class UR extends ms{setAccount(){throw x(te)}getAccount(){throw x(te)}getCachedAccountEntity(){throw x(te)}setIdTokenCredential(){throw x(te)}getIdTokenCredential(){throw x(te)}setAccessTokenCredential(){throw x(te)}getAccessTokenCredential(){throw x(te)}setRefreshTokenCredential(){throw x(te)}getRefreshTokenCredential(){throw x(te)}setAppMetadata(){throw x(te)}getAppMetadata(){throw x(te)}setServerTelemetry(){throw x(te)}getServerTelemetry(){throw x(te)}setAuthorityMetadata(){throw x(te)}getAuthorityMetadata(){throw x(te)}getAuthorityMetadataKeys(){throw x(te)}setThrottlingCache(){throw x(te)}getThrottlingCache(){throw x(te)}removeItem(){throw x(te)}getKeys(){throw x(te)}getAccountKeys(){throw x(te)}getTokenKeys(){throw x(te)}updateCredentialCacheKey(){throw x(te)}removeOutdatedAccount(){throw x(te)}}/*! @azure/msal-common v14.16.0 2024-11-05 */const ZT={tokenRenewalOffsetSeconds:iR,preventCorsPreflight:!1},FR={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xe.Info,correlationId:b.EMPTY_STRING},HR={claimsBasedCachingEnabled:!1},BR={async sendGetRequestAsync(){throw x(te)},async sendPostRequestAsync(){throw x(te)}},zR={sku:b.SKU,version:mm,cpu:b.EMPTY_STRING,os:b.EMPTY_STRING},KR={clientSecret:b.EMPTY_STRING,clientAssertion:void 0},jR={azureCloudInstance:gm.None,tenant:`${b.DEFAULT_COMMON_TENANT}`},$R={application:{appName:"",appVersion:""}};function VR({authOptions:n,systemOptions:e,loggerOptions:t,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:l,telemetry:c,serverTelemetryManager:u,persistencePlugin:d,serializableCache:h}){const f={...FR,...t};return{authOptions:WR(n),systemOptions:{...ZT,...e},loggerOptions:f,cacheOptions:{...HR,...r},storageInterface:o||new UR(n.clientId,Vc,new Dr(f)),networkInterface:i||BR,cryptoInterface:s||Vc,clientCredentials:a||KR,libraryInfo:{...zR,...l},telemetry:{...$R,...c},serverTelemetryManager:u||null,persistencePlugin:d||null,serializableCache:h||null}}function WR(n){return{clientCapabilities:[],azureCloudOptions:jR,skipAuthorityMetadataCache:!1,instanceAware:!1,...n}}function If(n){return n.authOptions.authority.options.protocolMode===Rr.OIDC}/*! @azure/msal-common v14.16.0 2024-11-05 */const pn={HOME_ACCOUNT_ID:"home_account_id",UPN:"UPN"};/*! @azure/msal-common v14.16.0 2024-11-05 */const si="client_id",eE="redirect_uri",ev="response_type",qR="response_mode",GR="grant_type",QR="claims",YR="scope",JR="refresh_token",XR="state",ZR="nonce",eN="prompt",tN="code",nN="code_challenge",rN="code_challenge_method",oN="code_verifier",iN="client-request-id",sN="x-client-SKU",aN="x-client-VER",lN="x-client-OS",cN="x-client-CPU",uN="x-client-current-telemetry",dN="x-client-last-telemetry",hN="x-ms-lib-capability",fN="x-app-name",pN="x-app-ver",mN="post_logout_redirect_uri",gN="id_token_hint",yN="device_code",vN="client_secret",CN="client_assertion",SN="client_assertion_type",tv="token_type",nv="req_cnf",wN="assertion",TN="requested_token_use",rv="return_spa_code",EN="nativebroker",kN="logout_hint",IN="sid",AN="login_hint",bN="domain_hint",RN="x-client-xtra-sku",Am="brk_client_id",Af="brk_redirect_uri";/*! @azure/msal-common v14.16.0 2024-11-05 */class bi{static validateRedirectUri(e){if(!e)throw Se(PT)}static validatePrompt(e){const t=[];for(const r in st)t.push(st[r]);if(t.indexOf(e)<0)throw Se(FT)}static validateClaims(e){try{JSON.parse(e)}catch{throw Se(vm)}}static validateCodeChallengeParams(e,t){if(!e||!t)throw Se(Cm);this.validateCodeChallengeMethod(t)}static validateCodeChallengeMethod(e){if([Ky.PLAIN,Ky.S256].indexOf(e)<0)throw Se(zT)}}/*! @azure/msal-common v14.16.0 2024-11-05 */function NN(n,e,t){if(!e)return;const r=n.get(si);r&&n.has(Am)&&(t==null||t.addFields({embeddedClientId:r,embeddedRedirectUri:n.get(eE)},e))}class ha{constructor(e,t){this.parameters=new Map,this.performanceClient=t,this.correlationId=e}addResponseTypeCode(){this.parameters.set(ev,encodeURIComponent(b.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(ev,encodeURIComponent(`${b.TOKEN_RESPONSE_TYPE} ${b.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set(qR,encodeURIComponent(e||nR.QUERY))}addNativeBroker(){this.parameters.set(EN,encodeURIComponent("1"))}addScopes(e,t=!0,r=Rs){t&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=t?[...e||[],...r]:e||[],i=new je(o);this.parameters.set(YR,encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(si,encodeURIComponent(e))}addRedirectUri(e){bi.validateRedirectUri(e),this.parameters.set(eE,encodeURIComponent(e))}addPostLogoutRedirectUri(e){bi.validateRedirectUri(e),this.parameters.set(mN,encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set(gN,encodeURIComponent(e))}addDomainHint(e){this.parameters.set(bN,encodeURIComponent(e))}addLoginHint(e){this.parameters.set(AN,encodeURIComponent(e))}addCcsUpn(e){this.parameters.set(Dt.CCS_HEADER,encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set(Dt.CCS_HEADER,encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set(IN,encodeURIComponent(e))}addClaims(e,t){const r=this.addClientCapabilitiesToClaims(e,t);bi.validateClaims(r),this.parameters.set(QR,encodeURIComponent(r))}addCorrelationId(e){this.parameters.set(iN,encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set(sN,e.sku),this.parameters.set(aN,e.version),e.os&&this.parameters.set(lN,e.os),e.cpu&&this.parameters.set(cN,e.cpu)}addApplicationTelemetry(e){e!=null&&e.appName&&this.parameters.set(fN,e.appName),e!=null&&e.appVersion&&this.parameters.set(pN,e.appVersion)}addPrompt(e){bi.validatePrompt(e),this.parameters.set(`${eN}`,encodeURIComponent(e))}addState(e){e&&this.parameters.set(XR,encodeURIComponent(e))}addNonce(e){this.parameters.set(ZR,encodeURIComponent(e))}addCodeChallengeParams(e,t){if(bi.validateCodeChallengeParams(e,t),e&&t)this.parameters.set(nN,encodeURIComponent(e)),this.parameters.set(rN,encodeURIComponent(t));else throw Se(Cm)}addAuthorizationCode(e){this.parameters.set(tN,encodeURIComponent(e))}addDeviceCode(e){this.parameters.set(yN,encodeURIComponent(e))}addRefreshToken(e){this.parameters.set(JR,encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set(oN,encodeURIComponent(e))}addClientSecret(e){this.parameters.set(vN,encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set(CN,encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set(SN,encodeURIComponent(e))}addOboAssertion(e){this.parameters.set(wN,encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set(TN,encodeURIComponent(e))}addGrantType(e){this.parameters.set(GR,encodeURIComponent(e))}addClientInfo(){this.parameters.set(rR,"1")}addExtraQueryParameters(e){Object.entries(e).forEach(([t,r])=>{!this.parameters.has(t)&&r&&this.parameters.set(t,r)})}addClientCapabilitiesToClaims(e,t){let r;if(!e)r={};else try{r=JSON.parse(e)}catch{throw Se(vm)}return t&&t.length>0&&(r.hasOwnProperty(Fl.ACCESS_TOKEN)||(r[Fl.ACCESS_TOKEN]={}),r[Fl.ACCESS_TOKEN][Fl.XMS_CC]={values:t}),JSON.stringify(r)}addUsername(e){this.parameters.set($y.username,encodeURIComponent(e))}addPassword(e){this.parameters.set($y.password,encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(tv,ye.POP),this.parameters.set(nv,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(tv,ye.SSH),this.parameters.set(nv,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set(uN,e.generateCurrentRequestHeaderValue()),this.parameters.set(dN,e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set(hN,da.X_MS_LIB_CAPABILITY_VALUE)}addLogoutHint(e){this.parameters.set(kN,encodeURIComponent(e))}addBrokerParameters(e){const t={};t[Am]=e.brokerClientId,t[Af]=e.brokerRedirectUri,this.addExtraQueryParameters(t)}createQueryString(){const e=new Array;return this.parameters.forEach((t,r)=>{e.push(`${r}=${t}`)}),NN(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}/*! @azure/msal-common v14.16.0 2024-11-05 */function xN(n){return n.hasOwnProperty("authorization_endpoint")&&n.hasOwnProperty("token_endpoint")&&n.hasOwnProperty("issuer")&&n.hasOwnProperty("jwks_uri")}/*! @azure/msal-common v14.16.0 2024-11-05 */function ON(n){return n.hasOwnProperty("tenant_discovery_endpoint")&&n.hasOwnProperty("metadata")}/*! @azure/msal-common v14.16.0 2024-11-05 */function MN(n){return n.hasOwnProperty("error")&&n.hasOwnProperty("error_description")}/*! @azure/msal-common v14.16.0 2024-11-05 */const T={AcquireTokenByCode:"acquireTokenByCode",AcquireTokenByRefreshToken:"acquireTokenByRefreshToken",AcquireTokenSilent:"acquireTokenSilent",AcquireTokenSilentAsync:"acquireTokenSilentAsync",AcquireTokenPopup:"acquireTokenPopup",AcquireTokenPreRedirect:"acquireTokenPreRedirect",AcquireTokenRedirect:"acquireTokenRedirect",CryptoOptsGetPublicKeyThumbprint:"cryptoOptsGetPublicKeyThumbprint",CryptoOptsSignJwt:"cryptoOptsSignJwt",SilentCacheClientAcquireToken:"silentCacheClientAcquireToken",SilentIframeClientAcquireToken:"silentIframeClientAcquireToken",AwaitConcurrentIframe:"awaitConcurrentIframe",SilentRefreshClientAcquireToken:"silentRefreshClientAcquireToken",SsoSilent:"ssoSilent",StandardInteractionClientGetDiscoveredAuthority:"standardInteractionClientGetDiscoveredAuthority",FetchAccountIdWithNativeBroker:"fetchAccountIdWithNativeBroker",NativeInteractionClientAcquireToken:"nativeInteractionClientAcquireToken",BaseClientCreateTokenRequestHeaders:"baseClientCreateTokenRequestHeaders",NetworkClientSendPostRequestAsync:"networkClientSendPostRequestAsync",RefreshTokenClientExecutePostToTokenEndpoint:"refreshTokenClientExecutePostToTokenEndpoint",AuthorizationCodeClientExecutePostToTokenEndpoint:"authorizationCodeClientExecutePostToTokenEndpoint",BrokerHandhshake:"brokerHandshake",AcquireTokenByRefreshTokenInBroker:"acquireTokenByRefreshTokenInBroker",AcquireTokenByBroker:"acquireTokenByBroker",RefreshTokenClientExecuteTokenRequest:"refreshTokenClientExecuteTokenRequest",RefreshTokenClientAcquireToken:"refreshTokenClientAcquireToken",RefreshTokenClientAcquireTokenWithCachedRefreshToken:"refreshTokenClientAcquireTokenWithCachedRefreshToken",RefreshTokenClientAcquireTokenByRefreshToken:"refreshTokenClientAcquireTokenByRefreshToken",RefreshTokenClientCreateTokenRequestBody:"refreshTokenClientCreateTokenRequestBody",AcquireTokenFromCache:"acquireTokenFromCache",SilentFlowClientAcquireCachedToken:"silentFlowClientAcquireCachedToken",SilentFlowClientGenerateResultFromCacheRecord:"silentFlowClientGenerateResultFromCacheRecord",AcquireTokenBySilentIframe:"acquireTokenBySilentIframe",InitializeBaseRequest:"initializeBaseRequest",InitializeSilentRequest:"initializeSilentRequest",InitializeClientApplication:"initializeClientApplication",SilentIframeClientTokenHelper:"silentIframeClientTokenHelper",SilentHandlerInitiateAuthRequest:"silentHandlerInitiateAuthRequest",SilentHandlerMonitorIframeForHash:"silentHandlerMonitorIframeForHash",SilentHandlerLoadFrame:"silentHandlerLoadFrame",SilentHandlerLoadFrameSync:"silentHandlerLoadFrameSync",StandardInteractionClientCreateAuthCodeClient:"standardInteractionClientCreateAuthCodeClient",StandardInteractionClientGetClientConfiguration:"standardInteractionClientGetClientConfiguration",StandardInteractionClientInitializeAuthorizationRequest:"standardInteractionClientInitializeAuthorizationRequest",StandardInteractionClientInitializeAuthorizationCodeRequest:"standardInteractionClientInitializeAuthorizationCodeRequest",GetAuthCodeUrl:"getAuthCodeUrl",HandleCodeResponseFromServer:"handleCodeResponseFromServer",HandleCodeResponse:"handleCodeResponse",UpdateTokenEndpointAuthority:"updateTokenEndpointAuthority",AuthClientAcquireToken:"authClientAcquireToken",AuthClientExecuteTokenRequest:"authClientExecuteTokenRequest",AuthClientCreateTokenRequestBody:"authClientCreateTokenRequestBody",AuthClientCreateQueryString:"authClientCreateQueryString",PopTokenGenerateCnf:"popTokenGenerateCnf",PopTokenGenerateKid:"popTokenGenerateKid",HandleServerTokenResponse:"handleServerTokenResponse",DeserializeResponse:"deserializeResponse",AuthorityFactoryCreateDiscoveredInstance:"authorityFactoryCreateDiscoveredInstance",AuthorityResolveEndpointsAsync:"authorityResolveEndpointsAsync",AuthorityResolveEndpointsFromLocalSources:"authorityResolveEndpointsFromLocalSources",AuthorityGetCloudDiscoveryMetadataFromNetwork:"authorityGetCloudDiscoveryMetadataFromNetwork",AuthorityUpdateCloudDiscoveryMetadata:"authorityUpdateCloudDiscoveryMetadata",AuthorityGetEndpointMetadataFromNetwork:"authorityGetEndpointMetadataFromNetwork",AuthorityUpdateEndpointMetadata:"authorityUpdateEndpointMetadata",AuthorityUpdateMetadataWithRegionalInformation:"authorityUpdateMetadataWithRegionalInformation",RegionDiscoveryDetectRegion:"regionDiscoveryDetectRegion",RegionDiscoveryGetRegionFromIMDS:"regionDiscoveryGetRegionFromIMDS",RegionDiscoveryGetCurrentVersion:"regionDiscoveryGetCurrentVersion",AcquireTokenByCodeAsync:"acquireTokenByCodeAsync",GetEndpointMetadataFromNetwork:"getEndpointMetadataFromNetwork",GetCloudDiscoveryMetadataFromNetworkMeasurement:"getCloudDiscoveryMetadataFromNetworkMeasurement",HandleRedirectPromiseMeasurement:"handleRedirectPromise",HandleNativeRedirectPromiseMeasurement:"handleNativeRedirectPromise",UpdateCloudDiscoveryMetadataMeasurement:"updateCloudDiscoveryMetadataMeasurement",UsernamePasswordClientAcquireToken:"usernamePasswordClientAcquireToken",NativeMessageHandlerHandshake:"nativeMessageHandlerHandshake",NativeGenerateAuthResult:"nativeGenerateAuthResult",RemoveHiddenIframe:"removeHiddenIframe",ClearTokensAndKeysWithClaims:"clearTokensAndKeysWithClaims",CacheManagerGetRefreshToken:"cacheManagerGetRefreshToken",GeneratePkceCodes:"generatePkceCodes",GenerateCodeVerifier:"generateCodeVerifier",GenerateCodeChallengeFromVerifier:"generateCodeChallengeFromVerifier",Sha256Digest:"sha256Digest",GetRandomValues:"getRandomValues"},_N={InProgress:1};/*! @azure/msal-common v14.16.0 2024-11-05 */const Ci=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r==null?void 0:r.startMeasurement(e,o);if(o){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},o)}try{const a=n(...i);return s==null||s.end({success:!0}),t.trace(`Returning result from ${e}`),a}catch(a){t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s==null||s.end({success:!1},a),a}},P=(n,e,t,r,o)=>(...i)=>{t.trace(`Executing function ${e}`);const s=r==null?void 0:r.startMeasurement(e,o);if(o){const a=e+"CallCount";r==null||r.incrementFields({[a]:1},o)}return r==null||r.setPreQueueTime(e,o),n(...i).then(a=>(t.trace(`Returning result from ${e}`),s==null||s.end({success:!0}),a)).catch(a=>{t.trace(`Error occurred in ${e}`);try{t.trace(JSON.stringify(a))}catch{t.trace("Unable to print error message.")}throw s==null||s.end({success:!1},a),a})};/*! @azure/msal-common v14.16.0 2024-11-05 */class ju{constructor(e,t,r,o){this.networkInterface=e,this.logger=t,this.performanceClient=r,this.correlationId=o}async detectRegion(e,t){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(T.RegionDiscoveryDetectRegion,this.correlationId);let r=e;if(r)t.region_source=ki.ENVIRONMENT_VARIABLE;else{const i=ju.IMDS_OPTIONS;try{const s=await P(this.getRegionFromIMDS.bind(this),T.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(b.IMDS_VERSION,i);if(s.status===Bl.httpSuccess&&(r=s.body,t.region_source=ki.IMDS),s.status===Bl.httpBadRequest){const a=await P(this.getCurrentVersion.bind(this),T.RegionDiscoveryGetCurrentVersion,this.logger,this.performanceClient,this.correlationId)(i);if(!a)return t.region_source=ki.FAILED_AUTO_DETECTION,null;const l=await P(this.getRegionFromIMDS.bind(this),T.RegionDiscoveryGetRegionFromIMDS,this.logger,this.performanceClient,this.correlationId)(a,i);l.status===Bl.httpSuccess&&(r=l.body,t.region_source=ki.IMDS)}}catch{return t.region_source=ki.FAILED_AUTO_DETECTION,null}}return r||(t.region_source=ki.FAILED_AUTO_DETECTION),r||null}async getRegionFromIMDS(e,t){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(T.RegionDiscoveryGetRegionFromIMDS,this.correlationId),this.networkInterface.sendGetRequestAsync(`${b.IMDS_ENDPOINT}?api-version=${e}&format=text`,t,b.IMDS_TIMEOUT)}async getCurrentVersion(e){var t;(t=this.performanceClient)==null||t.addQueueMeasurement(T.RegionDiscoveryGetCurrentVersion,this.correlationId);try{const r=await this.networkInterface.sendGetRequestAsync(`${b.IMDS_ENDPOINT}?format=json`,e);return r.status===Bl.httpBadRequest&&r.body&&r.body["newest-versions"]&&r.body["newest-versions"].length>0?r.body["newest-versions"][0]:null}catch{return null}}}ju.IMDS_OPTIONS={headers:{Metadata:"true"}};/*! @azure/msal-common v14.16.0 2024-11-05 */class At{constructor(e,t,r,o,i,s,a,l){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=t,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=l||!1,this.regionDiscovery=new ju(t,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(b.CIAM_AUTH_URL))return Fn.Ciam;const t=e.PathSegments;if(t.length)switch(t[0].toLowerCase()){case b.ADFS:return Fn.Adfs;case b.DSTS:return Fn.Dsts}return Fn.Default}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new ae(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw x(Cr)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw x(Cr)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw x(Cr)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw x(xT);return this.replacePath(this.metadata.end_session_endpoint)}else throw x(Cr)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw x(Cr)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw x(Cr)}canReplaceTenant(e){return e.PathSegments.length===1&&!At.reservedTenantDomains.has(e.PathSegments[0])&&this.getAuthorityType(e)===Fn.Default&&this.protocolMode===Rr.AAD}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let t=e;const o=new ae(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,l)=>{let c=i[l];if(l===0&&this.canReplaceTenant(o)){const u=new ae(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];c!==u&&(this.logger.verbose(`Replacing tenant domain name ${c} with id ${u}`),c=u)}a!==c&&(t=t.replace(`/${c}/`,`/${a}/`))}),this.replaceTenant(t)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||this.authorityType===Fn.Adfs||this.protocolMode!==Rr.AAD&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}async resolveEndpointsAsync(){var o,i;(o=this.performanceClient)==null||o.addQueueMeasurement(T.AuthorityResolveEndpointsAsync,this.correlationId);const e=this.getCurrentMetadataEntity(),t=await P(this.updateCloudDiscoveryMetadata.bind(this),T.AuthorityUpdateCloudDiscoveryMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.canonicalAuthority=this.canonicalAuthority.replace(this.hostnameAndPort,e.preferred_network);const r=await P(this.updateEndpointMetadata.bind(this),T.AuthorityUpdateEndpointMetadata,this.logger,this.performanceClient,this.correlationId)(e);this.updateCachedMetadata(e,t,{source:r}),(i=this.performanceClient)==null||i.addFields({cloudDiscoverySource:t,authorityEndpointSource:r},this.correlationId)}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:Yy(),jwks_uri:""}),e}updateCachedMetadata(e,t,r){t!==on.CACHE&&(r==null?void 0:r.source)!==on.CACHE&&(e.expiresAt=Yy(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}async updateEndpointMetadata(e){var o,i,s;(o=this.performanceClient)==null||o.addQueueMeasurement(T.AuthorityUpdateEndpointMetadata,this.correlationId);const t=this.updateEndpointMetadataFromLocalSources(e);if(t){if(t.source===on.HARDCODED_VALUES&&(i=this.authorityOptions.azureRegionConfiguration)!=null&&i.azureRegion&&t.metadata){const a=await P(this.updateMetadataWithRegionalInformation.bind(this),T.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(t.metadata);zl(e,a,!1),e.canonical_authority=this.canonicalAuthority}return t.source}let r=await P(this.getEndpointMetadataFromNetwork.bind(this),T.AuthorityGetEndpointMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return(s=this.authorityOptions.azureRegionConfiguration)!=null&&s.azureRegion&&(r=await P(this.updateMetadataWithRegionalInformation.bind(this),T.AuthorityUpdateMetadataWithRegionalInformation,this.logger,this.performanceClient,this.correlationId)(r)),zl(e,r,!0),on.NETWORK;throw x(yT,this.defaultOpenIdConfigurationEndpoint)}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const t=this.getEndpointMetadataFromConfig();if(t)return this.logger.verbose("Found endpoint metadata in authority configuration"),zl(e,t,!1),{source:on.CONFIG};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return zl(e,o,!1),{source:on.HARDCODED_VALUES,metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=Jy(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:on.CACHE}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new ae(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw Se(KT)}return null}async getEndpointMetadataFromNetwork(){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(T.AuthorityGetEndpointMetadataFromNetwork,this.correlationId);const e={},t=this.defaultOpenIdConfigurationEndpoint;this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${t}`);try{const o=await this.networkInterface.sendGetRequestAsync(t,e);return xN(o.body)?o.body:(this.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return this.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in Xy?Xy[this.hostnameAndPort]:null}async updateMetadataWithRegionalInformation(e){var r,o,i;(r=this.performanceClient)==null||r.addQueueMeasurement(T.AuthorityUpdateMetadataWithRegionalInformation,this.correlationId);const t=(o=this.authorityOptions.azureRegionConfiguration)==null?void 0:o.azureRegion;if(t){if(t!==b.AZURE_REGION_AUTO_DISCOVER_FLAG)return this.regionDiscoveryMetadata.region_outcome=Qd.CONFIGURED_NO_AUTO_DETECTION,this.regionDiscoveryMetadata.region_used=t,At.replaceWithRegionalInformation(e,t);const s=await P(this.regionDiscovery.detectRegion.bind(this.regionDiscovery),T.RegionDiscoveryDetectRegion,this.logger,this.performanceClient,this.correlationId)((i=this.authorityOptions.azureRegionConfiguration)==null?void 0:i.environmentRegion,this.regionDiscoveryMetadata);if(s)return this.regionDiscoveryMetadata.region_outcome=Qd.AUTO_DETECTION_REQUESTED_SUCCESSFUL,this.regionDiscoveryMetadata.region_used=s,At.replaceWithRegionalInformation(e,s);this.regionDiscoveryMetadata.region_outcome=Qd.AUTO_DETECTION_REQUESTED_FAILED}return e}async updateCloudDiscoveryMetadata(e){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(T.AuthorityUpdateCloudDiscoveryMetadata,this.correlationId);const t=this.updateCloudDiscoveryMetadataFromLocalSources(e);if(t)return t;const r=await P(this.getCloudDiscoveryMetadataFromNetwork.bind(this),T.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.logger,this.performanceClient,this.correlationId)();if(r)return Yd(e,r,!0),on.NETWORK;throw Se(jT)}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||b.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||b.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||b.NOT_APPLICABLE}`);const t=this.getCloudDiscoveryMetadataFromConfig();if(t)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),Yd(e,t,!1),on.CONFIG;if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=LR(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),Yd(e,o,!1),on.HARDCODED_VALUES;this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=Jy(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),on.CACHE):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(this.authorityType===Fn.Ciam)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),At.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const e=JSON.parse(this.authorityOptions.cloudDiscoveryMetadata),t=Qc(e.metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),t)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),t;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),Se(Sm)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),At.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}async getCloudDiscoveryMetadataFromNetwork(){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(T.AuthorityGetCloudDiscoveryMetadataFromNetwork,this.correlationId);const e=`${b.AAD_INSTANCE_DISCOVERY_ENDPT}${this.canonicalAuthority}oauth2/v2.0/authorize`,t={};let r=null;try{const i=await this.networkInterface.sendGetRequestAsync(e,t);let s,a;if(ON(i.body))s=i.body,a=s.metadata,this.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else if(MN(i.body)){if(this.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===b.INVALID_INSTANCE)return this.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),this.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),this.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}else return this.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;this.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),r=Qc(a,this.hostnameAndPort)}catch(i){if(i instanceof Me)this.logger.error(`There was a network error while attempting to get the cloud discovery instance metadata.
Error: ${i.errorCode}
Error Description: ${i.errorMessage}`);else{const s=i;this.logger.error(`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.
Error: ${s.name}
Error Description: ${s.message}`)}return null}return r||(this.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),this.logger.verbose("Creating custom Authority for custom domain scenario."),r=At.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)),r}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(t=>t&&ae.getDomainFromUrl(t).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,t){let r;if(t&&t.azureCloudInstance!==gm.None){const o=t.tenant?t.tenant:b.DEFAULT_COMMON_TENANT;r=`${t.azureCloudInstance}/${o}/`}return r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return b.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw x(Cr)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return JT.has(e)}static isPublicCloudAuthority(e){return b.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,t,r){const o=new ae(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${t}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${t}.${b.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=ae.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,t){const r={...e};return r.authorization_endpoint=At.buildRegionalAuthorityString(r.authorization_endpoint,t),r.token_endpoint=At.buildRegionalAuthorityString(r.token_endpoint,t),r.end_session_endpoint&&(r.end_session_endpoint=At.buildRegionalAuthorityString(r.end_session_endpoint,t)),r}static transformCIAMAuthority(e){let t=e;const o=new ae(e).getUrlComponents();if(o.PathSegments.length===0&&o.HostNameAndPort.endsWith(b.CIAM_AUTH_URL)){const i=o.HostNameAndPort.split(".")[0];t=`${t}${i}${b.AAD_TENANT_DOMAIN_SUFFIX}`}return t}}At.reservedTenantDomains=new Set(["{tenant}","{tenantid}",vo.COMMON,vo.CONSUMERS,vo.ORGANIZATIONS]);function PN(n){var o;const r=(o=new ae(n).getUrlComponents().PathSegments.slice(-1)[0])==null?void 0:o.toLowerCase();switch(r){case vo.COMMON:case vo.ORGANIZATIONS:case vo.CONSUMERS:return;default:return r}}function tE(n){return n.endsWith(b.FORWARD_SLASH)?n:`${n}${b.FORWARD_SLASH}`}function DN(n){const e=n.cloudDiscoveryMetadata;let t;if(e)try{t=JSON.parse(e)}catch{throw Se(Sm)}return{canonicalAuthority:n.authority?tE(n.authority):void 0,knownAuthorities:n.knownAuthorities,cloudDiscoveryMetadata:t}}/*! @azure/msal-common v14.16.0 2024-11-05 */async function nE(n,e,t,r,o,i,s){s==null||s.addQueueMeasurement(T.AuthorityFactoryCreateDiscoveredInstance,i);const a=At.transformCIAMAuthority(tE(n)),l=new At(a,e,t,r,o,i,s);try{return await P(l.resolveEndpointsAsync.bind(l),T.AuthorityResolveEndpointsAsync,o,s,i)(),l}catch{throw x(Cr)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class bo extends Me{constructor(e,t,r,o,i){super(e,t,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,bo.prototype)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class ir{static generateThrottlingStorageKey(e){return`${da.THROTTLING_PREFIX}.${JSON.stringify(e)}`}static preProcess(e,t){var i;const r=ir.generateThrottlingStorageKey(t),o=e.getThrottlingCache(r);if(o){if(o.throttleTime<Date.now()){e.removeItem(r);return}throw new bo(((i=o.errorCodes)==null?void 0:i.join(" "))||b.EMPTY_STRING,o.errorMessage,o.subError)}}static postProcess(e,t,r){if(ir.checkResponseStatus(r)||ir.checkResponseForRetryAfter(r)){const o={throttleTime:ir.calculateThrottleTime(parseInt(r.headers[Dt.RETRY_AFTER])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(ir.generateThrottlingStorageKey(t),o)}}static checkResponseStatus(e){return e.status===429||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return e.headers?e.headers.hasOwnProperty(Dt.RETRY_AFTER)&&(e.status<200||e.status>=300):!1}static calculateThrottleTime(e){const t=e<=0?0:e,r=Date.now()/1e3;return Math.floor(Math.min(r+(t||da.DEFAULT_THROTTLE_TIME_SECONDS),r+da.DEFAULT_MAX_THROTTLE_TIME_SECONDS)*1e3)}static removeThrottle(e,t,r,o){const i={clientId:t,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid},s=this.generateThrottlingStorageKey(i);e.removeItem(s)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class $u extends Me{constructor(e,t,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,$u.prototype),this.name="NetworkError",this.error=e,this.httpStatus=t,this.responseHeaders=r}}function ov(n,e,t){return new $u(n,e,t)}/*! @azure/msal-common v14.16.0 2024-11-05 */class bm{constructor(e,t){this.config=VR(e),this.logger=new Dr(this.config.loggerOptions,OT,mm),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=t}createTokenRequestHeaders(e){const t={};if(t[Dt.CONTENT_TYPE]=b.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case pn.HOME_ACCOUNT_ID:try{const r=Vi(e.credential);t[Dt.CCS_HEADER]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case pn.UPN:t[Dt.CCS_HEADER]=`UPN: ${e.credential}`;break}return t}async executePostToTokenEndpoint(e,t,r,o,i,s){var l;s&&((l=this.performanceClient)==null||l.addQueueMeasurement(s,i));const a=await this.sendPostRequest(o,e,{body:t,headers:r},i);return this.config.serverTelemetryManager&&a.status<500&&a.status!==429&&this.config.serverTelemetryManager.clearTelemetryCache(),a}async sendPostRequest(e,t,r,o){var s,a,l;ir.preProcess(this.cacheManager,e);let i;try{i=await P(this.networkClient.sendPostRequestAsync.bind(this.networkClient),T.NetworkClientSendPostRequestAsync,this.logger,this.performanceClient,o)(t,r);const c=i.headers||{};(a=this.performanceClient)==null||a.addFields({refreshTokenSize:((s=i.body.refresh_token)==null?void 0:s.length)||0,httpVerToken:c[Dt.X_MS_HTTP_VERSION]||"",requestId:c[Dt.X_MS_REQUEST_ID]||""},o)}catch(c){if(c instanceof $u){const u=c.responseHeaders;throw u&&((l=this.performanceClient)==null||l.addFields({httpVerToken:u[Dt.X_MS_HTTP_VERSION]||"",requestId:u[Dt.X_MS_REQUEST_ID]||"",contentTypeHeader:u[Dt.CONTENT_TYPE]||void 0,contentLengthHeader:u[Dt.CONTENT_LENGTH]||void 0,httpStatus:c.httpStatus},o)),c.error}throw c instanceof Me?c:x(gT)}return ir.postProcess(this.cacheManager,e,i),i}async updateAuthority(e,t){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(T.UpdateTokenEndpointAuthority,t);const r=`https://${e}/${this.authority.tenant}/`,o=await nE(r,this.networkClient,this.cacheManager,this.authority.options,this.logger,t,this.performanceClient);this.authority=o}createTokenQueryParameters(e){const t=new ha(e.correlationId,this.performanceClient);return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&t.addExtraQueryParameters(e.tokenQueryParameters),t.addCorrelationId(e.correlationId),t.createQueryString()}}/*! @azure/msal-common v14.16.0 2024-11-05 */const Yc="no_tokens_found",rE="native_account_unavailable",Rm="refresh_token_expired",LN="interaction_required",UN="consent_required",FN="login_required",Vu="bad_token";/*! @azure/msal-common v14.16.0 2024-11-05 */const iv=[LN,UN,FN,Vu],HN=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],BN={[Yc]:"No refresh token found in the cache. Please sign-in.",[rE]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[Rm]:"Refresh token has expired.",[Vu]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class Wn extends Me{constructor(e,t,r,o,i,s,a,l){super(e,t,r),Object.setPrototypeOf(this,Wn.prototype),this.timestamp=o||b.EMPTY_STRING,this.traceId=i||b.EMPTY_STRING,this.correlationId=s||b.EMPTY_STRING,this.claims=a||b.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=l}}function sv(n,e,t){const r=!!n&&iv.indexOf(n)>-1,o=!!t&&HN.indexOf(t)>-1,i=!!e&&iv.some(s=>e.indexOf(s)>-1);return r||i||o}function bf(n){return new Wn(n,BN[n])}/*! @azure/msal-common v14.16.0 2024-11-05 */class $n{static setRequestState(e,t,r){const o=$n.generateLibraryState(e,r);return t?`${o}${b.RESOURCE_DELIM}${t}`:o}static generateLibraryState(e,t){if(!e)throw x(Tf);const r={id:e.createNewGuid()};t&&(r.meta=t);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,t){if(!e)throw x(Tf);if(!t)throw x(ps);try{const r=t.split(b.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(b.RESOURCE_DELIM):b.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||b.EMPTY_STRING,libraryState:a}}catch{throw x(ps)}}}/*! @azure/msal-common v14.16.0 2024-11-05 */const zN={SW:"sw"};class gs{constructor(e,t){this.cryptoUtils=e,this.performanceClient=t}async generateCnf(e,t){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(T.PopTokenGenerateCnf,e.correlationId);const r=await P(this.generateKid.bind(this),T.PopTokenGenerateCnf,t,this.performanceClient,e.correlationId)(e),o=this.cryptoUtils.base64UrlEncode(JSON.stringify(r));return{kid:r.kid,reqCnfString:o}}async generateKid(e){var r;return(r=this.performanceClient)==null||r.addQueueMeasurement(T.PopTokenGenerateKid,e.correlationId),{kid:await this.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:zN.SW}}async signPopToken(e,t,r){return this.signPayload(e,t,r)}async signPayload(e,t,r,o){const{resourceRequestMethod:i,resourceRequestUri:s,shrClaims:a,shrNonce:l,shrOptions:c}=r,u=s?new ae(s):void 0,d=u==null?void 0:u.getUrlComponents();return this.cryptoUtils.signJwt({at:e,ts:hr(),m:i==null?void 0:i.toUpperCase(),u:d==null?void 0:d.HostNameAndPort,nonce:l||this.cryptoUtils.createNewGuid(),p:d==null?void 0:d.AbsolutePath,q:d!=null&&d.QueryString?[[],d.QueryString]:void 0,client_claims:a||void 0,...o},t,c,r.correlationId)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class KN{constructor(e,t){this.cache=e,this.hasChanged=t}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}/*! @azure/msal-common v14.16.0 2024-11-05 */function jN(n){var r,o;const e="code=",t=(r=n.error_uri)==null?void 0:r.lastIndexOf(e);return t&&t>=0?(o=n.error_uri)==null?void 0:o.substring(t+e.length):void 0}class ai{constructor(e,t,r,o,i,s,a){this.clientId=e,this.cacheStorage=t,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,t){if(!e.state||!t)throw e.state?x($c,"Cached State"):x($c,"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw x(ps,e.state)}try{o=decodeURIComponent(t)}catch{throw x(ps,e.state)}if(r!==o)throw x(CT);if(e.error||e.error_description||e.suberror){const i=jN(e);throw sv(e.error,e.error_description,e.suberror)?new Wn(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new bo(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,t){var r;if(e.error||e.error_description||e.suberror){const o=`Error(s): ${e.error_codes||b.NOT_AVAILABLE} - Timestamp: ${e.timestamp||b.NOT_AVAILABLE} - Description: ${e.error_description||b.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||b.NOT_AVAILABLE} - Trace ID: ${e.trace_id||b.NOT_AVAILABLE}`,i=(r=e.error_codes)!=null&&r.length?e.error_codes[0]:void 0,s=new bo(e.error,o,e.suberror,i,e.status);if(t&&e.status&&e.status>=Ul.SERVER_ERROR_RANGE_START&&e.status<=Ul.SERVER_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.
${s}`);return}else if(t&&e.status&&e.status>=Ul.CLIENT_ERROR_RANGE_START&&e.status<=Ul.CLIENT_ERROR_RANGE_END){this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.
${s}`);return}throw sv(e.error,e.error_description,e.suberror)?new Wn(e.error,e.error_description,e.suberror,e.timestamp||b.EMPTY_STRING,e.trace_id||b.EMPTY_STRING,e.correlation_id||b.EMPTY_STRING,e.claims||b.EMPTY_STRING,i):s}}async handleServerTokenResponse(e,t,r,o,i,s,a,l,c){var p;(p=this.performanceClient)==null||p.addQueueMeasurement(T.HandleServerTokenResponse,e.correlation_id);let u;if(e.id_token){if(u=vi(e.id_token||b.EMPTY_STRING,this.cryptoObj.base64Decode),i&&i.nonce&&u.nonce!==i.nonce)throw x(ST);if(o.maxAge||o.maxAge===0){const m=u.auth_time;if(!m)throw x(dm);MT(m,o.maxAge)}}this.homeAccountIdentifier=tt.generateHomeAccountId(e.client_info||b.EMPTY_STRING,t.authorityType,this.logger,this.cryptoObj,u);let d;i&&i.state&&(d=$n.parseRequestState(this.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const h=this.generateCacheRecord(e,t,r,o,u,s,i);let f;try{if(this.persistencePlugin&&this.serializableCache&&(this.logger.verbose("Persistence enabled, calling beforeCacheAccess"),f=new KN(this.serializableCache,!0),await this.persistencePlugin.beforeCacheAccess(f)),a&&!l&&h.account){const m=h.account.generateAccountKey();if(!this.cacheStorage.getAccount(m,this.logger))return this.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),await ai.generateAuthenticationResult(this.cryptoObj,t,h,!1,o,u,d,void 0,c)}await this.cacheStorage.saveCacheRecord(h,o.storeInCache,o.correlationId)}finally{this.persistencePlugin&&this.serializableCache&&f&&(this.logger.verbose("Persistence enabled, calling afterCacheAccess"),await this.persistencePlugin.afterCacheAccess(f))}return ai.generateAuthenticationResult(this.cryptoObj,t,h,!1,o,u,d,e,c)}generateCacheRecord(e,t,r,o,i,s,a){const l=t.getPreferredCache();if(!l)throw x(fm);const c=GT(i);let u,d;e.id_token&&i&&(u=Bu(this.homeAccountIdentifier,l,e.id_token,this.clientId,c||""),d=Nm(this.cacheStorage,t,this.homeAccountIdentifier,this.cryptoObj.base64Decode,i,e.client_info,l,c,a,void 0,this.logger));let h=null;if(e.access_token){const m=e.scope?je.fromString(e.scope):new je(o.scopes||[]),v=(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,g=(typeof e.ext_expires_in=="string"?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,y=(typeof e.refresh_in=="string"?parseInt(e.refresh_in,10):e.refresh_in)||void 0,C=r+v,w=C+g,I=y&&y>0?r+y:void 0;h=zu(this.homeAccountIdentifier,l,e.access_token,this.clientId,c||t.tenant||"",m.printScopes(),C,w,this.cryptoObj.base64Decode,I,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let f=null;if(e.refresh_token){let m;if(e.refresh_token_expires_in){const v=typeof e.refresh_token_expires_in=="string"?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in;m=r+v}f=_T(this.homeAccountIdentifier,l,e.refresh_token,this.clientId,e.foci,s,m)}let p=null;return e.foci&&(p={clientId:this.clientId,environment:l,familyId:e.foci}),{account:d,idToken:u,accessToken:h,refreshToken:f,appMetadata:p}}static async generateAuthenticationResult(e,t,r,o,i,s,a,l,c){var C,w,I,A,R;let u=b.EMPTY_STRING,d=[],h=null,f,p,m=b.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType===ye.POP&&!i.popKid){const E=new gs(e),{secret:_,keyId:O}=r.accessToken;if(!O)throw x(pm);u=await E.signPopToken(_,O,i)}else u=r.accessToken.secret;d=je.fromString(r.accessToken.target).asArray(),h=new Date(Number(r.accessToken.expiresOn)*1e3),f=new Date(Number(r.accessToken.extendedExpiresOn)*1e3),r.accessToken.refreshOn&&(p=new Date(Number(r.accessToken.refreshOn)*1e3))}r.appMetadata&&(m=r.appMetadata.familyId===ua?ua:"");const v=(s==null?void 0:s.oid)||(s==null?void 0:s.sub)||"",g=(s==null?void 0:s.tid)||"";l!=null&&l.spa_accountid&&r.account&&(r.account.nativeAccountId=l==null?void 0:l.spa_accountid);const y=r.account?Em(r.account.getAccountInfo(),void 0,s,(C=r.idToken)==null?void 0:C.secret):null;return{authority:t.canonicalAuthority,uniqueId:v,tenantId:g,scopes:d,account:y,idToken:((w=r==null?void 0:r.idToken)==null?void 0:w.secret)||"",idTokenClaims:s||{},accessToken:u,fromCache:o,expiresOn:h,extExpiresOn:f,refreshOn:p,correlationId:i.correlationId,requestId:c||b.EMPTY_STRING,familyId:m,tokenType:((I=r.accessToken)==null?void 0:I.tokenType)||b.EMPTY_STRING,state:a?a.userRequestState:b.EMPTY_STRING,cloudGraphHostName:((A=r.account)==null?void 0:A.cloudGraphHostName)||b.EMPTY_STRING,msGraphHost:((R=r.account)==null?void 0:R.msGraphHost)||b.EMPTY_STRING,code:l==null?void 0:l.spa_code,fromNativeBroker:!1}}}function Nm(n,e,t,r,o,i,s,a,l,c,u){u==null||u.verbose("setCachedAccount called");const h=n.getAccountKeys().find(g=>g.startsWith(t));let f=null;h&&(f=n.getAccount(h,u));const p=f||tt.createAccount({homeAccountId:t,idTokenClaims:o,clientInfo:i,environment:s,cloudGraphHostName:l==null?void 0:l.cloud_graph_host_name,msGraphHost:l==null?void 0:l.msgraph_host,nativeAccountId:c},e,r),m=p.tenantProfiles||[],v=a||p.realm;if(v&&!m.find(g=>g.tenantId===v)){const g=Tm(t,p.localAccountId,v,o);m.push(g)}return p.tenantProfiles=m,p}/*! @azure/msal-common v14.16.0 2024-11-05 */async function oE(n,e,t){return typeof n=="string"?n:n({clientId:e,tokenEndpoint:t})}/*! @azure/msal-common v14.16.0 2024-11-05 */class iE extends bm{constructor(e,t){var r;super(e,t),this.includeRedirectUri=!0,this.oidcDefaultScopes=(r=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:r.defaultScopes}async getAuthCodeUrl(e){var r;(r=this.performanceClient)==null||r.addQueueMeasurement(T.GetAuthCodeUrl,e.correlationId);const t=await P(this.createAuthCodeUrlQueryString.bind(this),T.AuthClientCreateQueryString,this.logger,this.performanceClient,e.correlationId)(e);return ae.appendQueryString(this.authority.authorizationEndpoint,t)}async acquireToken(e,t){var a,l;if((a=this.performanceClient)==null||a.addQueueMeasurement(T.AuthClientAcquireToken,e.correlationId),!e.code)throw x(ET);const r=hr(),o=await P(this.executeTokenRequest.bind(this),T.AuthClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(this.authority,e),i=(l=o.headers)==null?void 0:l[Dt.X_MS_REQUEST_ID],s=new ai(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin,this.performanceClient);return s.validateTokenResponse(o.body),P(s.handleServerTokenResponse.bind(s),T.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(o.body,this.authority,r,e,t,void 0,void 0,void 0,i)}handleFragmentResponse(e,t){if(new ai(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,t),!e.code)throw x(RT);return e}getLogoutUri(e){if(!e)throw Se(BT);const t=this.createLogoutUrlQueryString(e);return ae.appendQueryString(this.authority.endSessionEndpoint,t)}async executeTokenRequest(e,t){var c,u;(c=this.performanceClient)==null||c.addQueueMeasurement(T.AuthClientExecuteTokenRequest,t.correlationId);const r=this.createTokenQueryParameters(t),o=ae.appendQueryString(e.tokenEndpoint,r),i=await P(this.createTokenRequestBody.bind(this),T.AuthClientCreateTokenRequestBody,this.logger,this.performanceClient,t.correlationId)(t);let s;if(t.clientInfo)try{const d=Wc(t.clientInfo,this.cryptoUtils.base64Decode);s={credential:`${d.uid}${Rt.CLIENT_INFO_SEPARATOR}${d.utid}`,type:pn.HOME_ACCOUNT_ID}}catch(d){this.logger.verbose("Could not parse client info for CCS Header: "+d)}const a=this.createTokenRequestHeaders(s||t.ccsCredential),l={clientId:((u=t.tokenBodyParameters)==null?void 0:u.clientId)||this.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:t.scopes,claims:t.claims,authenticationScheme:t.authenticationScheme,resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,sshKid:t.sshKid};return P(this.executePostToTokenEndpoint.bind(this),T.AuthorizationCodeClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,t.correlationId)(o,i,a,l,t.correlationId,T.AuthorizationCodeClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var o,i;(o=this.performanceClient)==null||o.addQueueMeasurement(T.AuthClientCreateTokenRequestBody,e.correlationId);const t=new ha(e.correlationId,this.performanceClient);if(t.addClientId(e.embeddedClientId||((i=e.tokenBodyParameters)==null?void 0:i[si])||this.config.authOptions.clientId),this.includeRedirectUri?t.addRedirectUri(e.redirectUri):bi.validateRedirectUri(e.redirectUri),t.addScopes(e.scopes,!0,this.oidcDefaultScopes),t.addAuthorizationCode(e.code),t.addLibraryInfo(this.config.libraryInfo),t.addApplicationTelemetry(this.config.telemetry.application),t.addThrottling(),this.serverTelemetryManager&&!If(this.config)&&t.addServerTelemetry(this.serverTelemetryManager),e.codeVerifier&&t.addCodeVerifier(e.codeVerifier),this.config.clientCredentials.clientSecret&&t.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const s=this.config.clientCredentials.clientAssertion;t.addClientAssertion(await oE(s.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),t.addClientAssertionType(s.assertionType)}if(t.addGrantType(hT.AUTHORIZATION_CODE_GRANT),t.addClientInfo(),e.authenticationScheme===ye.POP){const s=new gs(this.cryptoUtils,this.performanceClient);let a;e.popKid?a=this.cryptoUtils.encodeKid(e.popKid):a=(await P(s.generateCnf.bind(s),T.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,t.addPopToken(a)}else if(e.authenticationScheme===ye.SSH)if(e.sshJwk)t.addSshJwk(e.sshJwk);else throw Se(Ku);(!jn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&t.addClaims(e.claims,this.config.authOptions.clientCapabilities);let r;if(e.clientInfo)try{const s=Wc(e.clientInfo,this.cryptoUtils.base64Decode);r={credential:`${s.uid}${Rt.CLIENT_INFO_SEPARATOR}${s.utid}`,type:pn.HOME_ACCOUNT_ID}}catch(s){this.logger.verbose("Could not parse client info for CCS Header: "+s)}else r=e.ccsCredential;if(this.config.systemOptions.preventCorsPreflight&&r)switch(r.type){case pn.HOME_ACCOUNT_ID:try{const s=Vi(r.credential);t.addCcsOid(s)}catch(s){this.logger.verbose("Could not parse home account ID for CCS Header: "+s)}break;case pn.UPN:t.addCcsUpn(r.credential);break}return e.embeddedClientId&&t.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&t.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[rv])&&t.addExtraQueryParameters({[rv]:"1"}),t.createQueryString()}async createAuthCodeUrlQueryString(e){var i,s;const t=e.correlationId||this.config.cryptoInterface.createNewGuid();(i=this.performanceClient)==null||i.addQueueMeasurement(T.AuthClientCreateQueryString,t);const r=new ha(t,this.performanceClient);r.addClientId(e.embeddedClientId||((s=e.extraQueryParameters)==null?void 0:s[si])||this.config.authOptions.clientId);const o=[...e.scopes||[],...e.extraScopesToConsent||[]];if(r.addScopes(o,!0,this.oidcDefaultScopes),r.addRedirectUri(e.redirectUri),r.addCorrelationId(t),r.addResponseMode(e.responseMode),r.addResponseTypeCode(),r.addLibraryInfo(this.config.libraryInfo),If(this.config)||r.addApplicationTelemetry(this.config.telemetry.application),r.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&r.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&r.addPrompt(e.prompt),e.domainHint&&r.addDomainHint(e.domainHint),e.prompt!==st.SELECT_ACCOUNT)if(e.sid&&e.prompt===st.NONE)this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),r.addSid(e.sid);else if(e.account){const a=this.extractAccountSid(e.account);let l=this.extractLoginHint(e.account);if(l&&e.domainHint&&(this.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),l=null),l){this.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),r.addLoginHint(l);try{const c=Vi(e.account.homeAccountId);r.addCcsOid(c)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(a&&e.prompt===st.NONE){this.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),r.addSid(a);try{const c=Vi(e.account.homeAccountId);r.addCcsOid(c)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint);else if(e.account.username){this.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),r.addLoginHint(e.account.username);try{const c=Vi(e.account.homeAccountId);r.addCcsOid(c)}catch{this.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(this.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),r.addLoginHint(e.loginHint),r.addCcsUpn(e.loginHint));else this.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&r.addNonce(e.nonce),e.state&&r.addState(e.state),(e.claims||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),e.embeddedClientId&&r.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),this.addExtraQueryParams(e,r),e.nativeBroker&&(r.addNativeBroker(),e.authenticationScheme===ye.POP)){const a=new gs(this.cryptoUtils);let l;e.popKid?l=this.cryptoUtils.encodeKid(e.popKid):l=(await P(a.generateCnf.bind(a),T.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(l)}return r.createQueryString()}createLogoutUrlQueryString(e){const t=new ha(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&t.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&t.addCorrelationId(e.correlationId),e.idTokenHint&&t.addIdTokenHint(e.idTokenHint),e.state&&t.addState(e.state),e.logoutHint&&t.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,t),t.createQueryString()}addExtraQueryParams(e,t){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&t.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){var t;return((t=e.idTokenClaims)==null?void 0:t.sid)||null}extractLoginHint(e){var t;return((t=e.idTokenClaims)==null?void 0:t.login_hint)||null}}/*! @azure/msal-common v14.16.0 2024-11-05 */const $N=300;class Rf extends bm{constructor(e,t){super(e,t)}async acquireToken(e){var s,a;(s=this.performanceClient)==null||s.addQueueMeasurement(T.RefreshTokenClientAcquireToken,e.correlationId);const t=hr(),r=await P(this.executeTokenRequest.bind(this),T.RefreshTokenClientExecuteTokenRequest,this.logger,this.performanceClient,e.correlationId)(e,this.authority),o=(a=r.headers)==null?void 0:a[Dt.X_MS_REQUEST_ID],i=new ai(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,this.config.serializableCache,this.config.persistencePlugin);return i.validateTokenResponse(r.body),P(i.handleServerTokenResponse.bind(i),T.HandleServerTokenResponse,this.logger,this.performanceClient,e.correlationId)(r.body,this.authority,t,e,void 0,void 0,!0,e.forceCache,o)}async acquireTokenByRefreshToken(e){var r;if(!e)throw Se(HT);if((r=this.performanceClient)==null||r.addQueueMeasurement(T.RefreshTokenClientAcquireTokenByRefreshToken,e.correlationId),!e.account)throw x(hm);if(this.cacheManager.isAppMetadataFOCI(e.account.environment))try{return await P(this.acquireTokenWithCachedRefreshToken.bind(this),T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!0)}catch(o){const i=o instanceof Wn&&o.errorCode===Yc,s=o instanceof bo&&o.errorCode===jy.INVALID_GRANT_ERROR&&o.subError===jy.CLIENT_MISMATCH_ERROR;if(i||s)return P(this.acquireTokenWithCachedRefreshToken.bind(this),T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1);throw o}return P(this.acquireTokenWithCachedRefreshToken.bind(this),T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,!1)}async acquireTokenWithCachedRefreshToken(e,t){var i;(i=this.performanceClient)==null||i.addQueueMeasurement(T.RefreshTokenClientAcquireTokenWithCachedRefreshToken,e.correlationId);const r=Ci(this.cacheManager.getRefreshToken.bind(this.cacheManager),T.CacheManagerGetRefreshToken,this.logger,this.performanceClient,e.correlationId)(e.account,t,void 0,this.performanceClient,e.correlationId);if(!r)throw bf(Yc);if(r.expiresOn&&kf(r.expiresOn,e.refreshTokenExpirationOffsetSeconds||$N))throw bf(Rm);const o={...e,refreshToken:r.secret,authenticationScheme:e.authenticationScheme||ye.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:pn.HOME_ACCOUNT_ID}};try{return await P(this.acquireToken.bind(this),T.RefreshTokenClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(o)}catch(s){if(s instanceof Wn&&s.subError===Vu){this.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const a=$i(r);this.cacheManager.removeRefreshToken(a)}throw s}}async executeTokenRequest(e,t){var l,c;(l=this.performanceClient)==null||l.addQueueMeasurement(T.RefreshTokenClientExecuteTokenRequest,e.correlationId);const r=this.createTokenQueryParameters(e),o=ae.appendQueryString(t.tokenEndpoint,r),i=await P(this.createTokenRequestBody.bind(this),T.RefreshTokenClientCreateTokenRequestBody,this.logger,this.performanceClient,e.correlationId)(e),s=this.createTokenRequestHeaders(e.ccsCredential),a={clientId:((c=e.tokenBodyParameters)==null?void 0:c.clientId)||this.config.authOptions.clientId,authority:t.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return P(this.executePostToTokenEndpoint.bind(this),T.RefreshTokenClientExecutePostToTokenEndpoint,this.logger,this.performanceClient,e.correlationId)(o,i,s,a,e.correlationId,T.RefreshTokenClientExecutePostToTokenEndpoint)}async createTokenRequestBody(e){var o,i,s;(o=this.performanceClient)==null||o.addQueueMeasurement(T.RefreshTokenClientCreateTokenRequestBody,e.correlationId);const t=e.correlationId,r=new ha(t,this.performanceClient);if(r.addClientId(e.embeddedClientId||((i=e.tokenBodyParameters)==null?void 0:i[si])||this.config.authOptions.clientId),e.redirectUri&&r.addRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,(s=this.config.authOptions.authority.options.OIDCOptions)==null?void 0:s.defaultScopes),r.addGrantType(hT.REFRESH_TOKEN_GRANT),r.addClientInfo(),r.addLibraryInfo(this.config.libraryInfo),r.addApplicationTelemetry(this.config.telemetry.application),r.addThrottling(),this.serverTelemetryManager&&!If(this.config)&&r.addServerTelemetry(this.serverTelemetryManager),r.addRefreshToken(e.refreshToken),this.config.clientCredentials.clientSecret&&r.addClientSecret(this.config.clientCredentials.clientSecret),this.config.clientCredentials.clientAssertion){const a=this.config.clientCredentials.clientAssertion;r.addClientAssertion(await oE(a.assertion,this.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(a.assertionType)}if(e.authenticationScheme===ye.POP){const a=new gs(this.cryptoUtils,this.performanceClient);let l;e.popKid?l=this.cryptoUtils.encodeKid(e.popKid):l=(await P(a.generateCnf.bind(a),T.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(e,this.logger)).reqCnfString,r.addPopToken(l)}else if(e.authenticationScheme===ye.SSH)if(e.sshJwk)r.addSshJwk(e.sshJwk);else throw Se(Ku);if((!jn.isEmptyObj(e.claims)||this.config.authOptions.clientCapabilities&&this.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,this.config.authOptions.clientCapabilities),this.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case pn.HOME_ACCOUNT_ID:try{const a=Vi(e.ccsCredential.credential);r.addCcsOid(a)}catch(a){this.logger.verbose("Could not parse home account ID for CCS Header: "+a)}break;case pn.UPN:r.addCcsUpn(e.ccsCredential.credential);break}return e.embeddedClientId&&r.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),r.createQueryString()}}/*! @azure/msal-common v14.16.0 2024-11-05 */class VN extends bm{constructor(e,t){super(e,t)}async acquireToken(e){var t;try{const[r,o]=await this.acquireCachedToken({...e,scopes:(t=e.scopes)!=null&&t.length?e.scopes:[...Rs]});return o===Wr.PROACTIVELY_REFRESHED&&(this.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new Rf(this.config,this.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),r}catch(r){if(r instanceof Hu&&r.errorCode===kr)return new Rf(this.config,this.performanceClient).acquireTokenByRefreshToken(e);throw r}}async acquireCachedToken(e){var l;(l=this.performanceClient)==null||l.addQueueMeasurement(T.SilentFlowClientAcquireCachedToken,e.correlationId);let t=Wr.NOT_APPLICABLE;if(e.forceRefresh||!this.config.cacheOptions.claimsBasedCachingEnabled&&!jn.isEmptyObj(e.claims))throw this.setCacheOutcome(Wr.FORCE_REFRESH_OR_CLAIMS,e.correlationId),x(kr);if(!e.account)throw x(hm);const r=e.account.tenantId||PN(e.authority),o=this.cacheManager.getTokenKeys(),i=this.cacheManager.getAccessToken(e.account,e,o,r,this.performanceClient,e.correlationId);if(i){if(SR(i.cachedAt)||kf(i.expiresOn,this.config.systemOptions.tokenRenewalOffsetSeconds))throw this.setCacheOutcome(Wr.CACHED_ACCESS_TOKEN_EXPIRED,e.correlationId),x(kr);i.refreshOn&&kf(i.refreshOn,0)&&(t=Wr.PROACTIVELY_REFRESHED)}else throw this.setCacheOutcome(Wr.NO_CACHED_ACCESS_TOKEN,e.correlationId),x(kr);const s=e.authority||this.authority.getPreferredCache(),a={account:this.cacheManager.readAccountFromCache(e.account),accessToken:i,idToken:this.cacheManager.getIdToken(e.account,o,r,this.performanceClient,e.correlationId),refreshToken:null,appMetadata:this.cacheManager.readAppMetadataFromCache(s)};return this.setCacheOutcome(t,e.correlationId),this.config.serverTelemetryManager&&this.config.serverTelemetryManager.incrementCacheHits(),[await P(this.generateResultFromCacheRecord.bind(this),T.SilentFlowClientGenerateResultFromCacheRecord,this.logger,this.performanceClient,e.correlationId)(a,e),t]}setCacheOutcome(e,t){var r,o;(r=this.serverTelemetryManager)==null||r.setCacheOutcome(e),(o=this.performanceClient)==null||o.addFields({cacheOutcome:e},t),e!==Wr.NOT_APPLICABLE&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}async generateResultFromCacheRecord(e,t){var o;(o=this.performanceClient)==null||o.addQueueMeasurement(T.SilentFlowClientGenerateResultFromCacheRecord,t.correlationId);let r;if(e.idToken&&(r=vi(e.idToken.secret,this.config.cryptoInterface.base64Decode)),t.maxAge||t.maxAge===0){const i=r==null?void 0:r.auth_time;if(!i)throw x(dm);MT(i,t.maxAge)}return ai.generateAuthenticationResult(this.cryptoUtils,this.authority,e,!0,t,r)}}/*! @azure/msal-common v14.16.0 2024-11-05 */const WN={sendGetRequestAsync:()=>Promise.reject(x(te)),sendPostRequestAsync:()=>Promise.reject(x(te))};/*! @azure/msal-common v14.16.0 2024-11-05 */const av=",",sE="|";function qN(n){const{skus:e,libraryName:t,libraryVersion:r,extensionName:o,extensionVersion:i}=n,s=new Map([[0,[t,r]],[2,[o,i]]]);let a=[];if(e!=null&&e.length){if(a=e.split(av),a.length<4)return e}else a=Array.from({length:4},()=>sE);return s.forEach((l,c)=>{var u,d;l.length===2&&((u=l[0])!=null&&u.length)&&((d=l[1])!=null&&d.length)&&GN({skuArr:a,index:c,skuName:l[0],skuVersion:l[1]})}),a.join(av)}function GN(n){const{skuArr:e,index:t,skuName:r,skuVersion:o}=n;t>=e.length||(e[t]=[r,o].join(sE))}class za{constructor(e,t){this.cacheOutcome=Wr.NOT_APPLICABLE,this.cacheManager=t,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||b.EMPTY_STRING,this.wrapperVer=e.wrapperVer||b.EMPTY_STRING,this.telemetryCacheKey=pt.CACHE_KEY+Rt.CACHE_KEY_SEPARATOR+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${pt.VALUE_SEPARATOR}${this.cacheOutcome}`,t=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r!=null&&r.length&&t.push(`broker_error=${r}`);const o=t.join(pt.VALUE_SEPARATOR),i=this.getRegionDiscoveryFields(),s=[e,i].join(pt.VALUE_SEPARATOR);return[pt.SCHEMA_VERSION,s,o].join(pt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),t=za.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*t).join(pt.VALUE_SEPARATOR),o=e.errors.slice(0,t).join(pt.VALUE_SEPARATOR),i=e.errors.length,s=t<i?pt.OVERFLOW_TRUE:pt.OVERFLOW_FALSE,a=[i,s].join(pt.VALUE_SEPARATOR);return[pt.SCHEMA_VERSION,e.cacheHits,r,o,a].join(pt.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const t=this.getLastRequests();t.errors.length>=pt.MAX_CACHED_ERRORS&&(t.failedRequests.shift(),t.failedRequests.shift(),t.errors.shift()),t.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?e instanceof Me?e.subError?t.errors.push(e.subError):e.errorCode?t.errors.push(e.errorCode):t.errors.push(e.toString()):t.errors.push(e.toString()):t.errors.push(pt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e),e.cacheHits}getLastRequests(){const e={failedRequests:[],errors:[],cacheHits:0};return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||e}clearTelemetryCache(){const e=this.getLastRequests(),t=za.maxErrorsToSend(e),r=e.errors.length;if(t===r)this.cacheManager.removeItem(this.telemetryCacheKey);else{const o={failedRequests:e.failedRequests.slice(t*2),errors:e.errors.slice(t),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o)}}static maxErrorsToSend(e){let t,r=0,o=0;const i=e.errors.length;for(t=0;t<i;t++){const s=e.failedRequests[2*t]||b.EMPTY_STRING,a=e.failedRequests[2*t+1]||b.EMPTY_STRING,l=e.errors[t]||b.EMPTY_STRING;if(o+=s.toString().length+a.toString().length+l.length+3,o<pt.MAX_LAST_HEADER_BYTES)r+=1;else break}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||b.EMPTY_STRING),e.push(this.regionSource||b.EMPTY_STRING),e.push(this.regionOutcome||b.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const t=this.getLastRequests();t.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,t)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e)}static makeExtraSkuString(e){return qN(e)}}/*! @azure/msal-common v14.16.0 2024-11-05 */const aE="missing_kid_error",lE="missing_alg_error";/*! @azure/msal-common v14.16.0 2024-11-05 */const QN={[aE]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[lE]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class xm extends Me{constructor(e,t){super(e,t),this.name="JoseHeaderError",Object.setPrototypeOf(this,xm.prototype)}}function lv(n){return new xm(n,QN[n])}/*! @azure/msal-common v14.16.0 2024-11-05 */class Om{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw lv(aE);if(!e.alg)throw lv(lE);const t=new Om({typ:e.typ||oR.Pop,kid:e.kid,alg:e.alg});return JSON.stringify(t)}}/*! @azure/msal-common v14.16.0 2024-11-05 */class cv{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class YN{generateId(){return"callback-id"}startMeasurement(e,t){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:_N.InProgress,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:t||""},measurement:new cv}}startPerformanceMeasurement(){return new cv}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const Mm="pkce_not_created",Nf="crypto_nonexistent",Wu="empty_navigate_uri",cE="hash_empty_error",_m="no_state_in_hash",uE="hash_does_not_contain_known_properties",dE="unable_to_parse_state",hE="state_interaction_type_mismatch",fE="interaction_in_progress",pE="popup_window_error",mE="empty_window_error",li="user_cancelled",JN="monitor_popup_timeout",gE="monitor_window_timeout",yE="redirect_in_iframe",vE="block_iframe_reload",CE="block_nested_popups",XN="iframe_closed_prematurely",qu="silent_logout_unsupported",SE="no_account_error",ZN="silent_prompt_value_error",wE="no_token_request_cache_error",TE="unable_to_parse_token_request_cache_error",Pm="no_cached_authority_error",ex="auth_request_not_set_error",tx="invalid_cache_type",Gu="non_browser_environment",Ri="database_not_open",Jc="no_network_connectivity",EE="post_request_failed",kE="get_request_failed",xf="failed_to_parse_response",IE="unable_to_load_token",Dm="crypto_key_not_found",AE="auth_code_required",bE="auth_code_or_nativeAccountId_required",RE="spa_code_and_nativeAccountId_present",Lm="database_unavailable",NE="unable_to_acquire_token_from_native_platform",xE="native_handshake_timeout",OE="native_extension_not_installed",ll="native_connection_not_established",ME="uninitialized_public_client_application",_E="native_prompt_not_supported",PE="invalid_base64_string",DE="invalid_pop_token_request",LE="failed_to_build_headers",UE="failed_to_parse_headers";/*! @azure/msal-browser v3.28.1 2025-01-14 */const gr="For more visit: aka.ms/msaljs/browser-errors",nx={[Mm]:"The PKCE code challenge and verifier could not be generated.",[Nf]:"The crypto object or function is not available.",[Wu]:"Navigation URI is empty. Please check stack trace for more info.",[cE]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${gr}`,[_m]:"Hash does not contain state. Please verify that the request originated from msal.",[uE]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${gr}`,[dE]:"Unable to parse state. Please verify that the request originated from msal.",[hE]:"Hash contains state but the interaction type does not match the caller.",[fE]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${gr}`,[pE]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[mE]:"window.open returned null or undefined window object.",[li]:"User cancelled the flow.",[JN]:`Token acquisition in popup failed due to timeout.  ${gr}`,[gE]:`Token acquisition in iframe failed due to timeout.  ${gr}`,[yE]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[vE]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${gr}`,[CE]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[XN]:"The iframe being monitored was closed prematurely.",[qu]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[SE]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[ZN]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[wE]:"No token request found in cache.",[TE]:"The cached token request could not be parsed.",[Pm]:"No cached authority found.",[ex]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[tx]:"Invalid cache type",[Gu]:"Login and token requests are not supported in non-browser environments.",[Ri]:"Database is not open!",[Jc]:"No network connectivity. Check your internet connection.",[EE]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[kE]:"Network request failed. Please check the network trace to determine root cause.",[xf]:"Failed to parse network response. Check network trace.",[IE]:"Error loading token to cache.",[Dm]:"Cryptographic Key or Keypair not found in browser storage.",[AE]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[bE]:"An authorization code or nativeAccountId must be provided to this flow.",[RE]:"Request cannot contain both spa code and native account id.",[Lm]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[NE]:`Unable to acquire token from native platform.  ${gr}`,[xE]:"Timed out while attempting to establish connection to browser extension",[OE]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[ll]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${gr}`,[ME]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${gr}`,[_E]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[PE]:"Invalid base64 encoded string.",[DE]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[LE]:"Failed to build request headers object.",[UE]:"Failed to parse response headers"};class cl extends Me{constructor(e,t){super(e,nx[e],t),Object.setPrototypeOf(this,cl.prototype),this.name="BrowserAuthError"}}function B(n,e){return new cl(n,e)}/*! @azure/msal-browser v3.28.1 2025-01-14 */const un={INVALID_GRANT_ERROR:"invalid_grant",POPUP_WIDTH:483,POPUP_HEIGHT:600,POPUP_NAME_PREFIX:"msal",DEFAULT_POLL_INTERVAL_MS:30,MSAL_SKU:"msal.js.browser"},Wi={CHANNEL_ID:"53ee284d-920a-4b59-9d30-a60315b26836",PREFERRED_EXTENSION_ID:"ppnbnpeolgkicgegkbkbjmhlideopiji",MATS_TELEMETRY:"MATS"},$o={HandshakeRequest:"Handshake",HandshakeResponse:"HandshakeResponse",GetToken:"GetToken",Response:"Response"},qt={LocalStorage:"localStorage",SessionStorage:"sessionStorage",MemoryStorage:"memoryStorage"},uv={GET:"GET",POST:"POST"},me={AUTHORITY:"authority",ACQUIRE_TOKEN_ACCOUNT:"acquireToken.account",SESSION_STATE:"session.state",REQUEST_STATE:"request.state",NONCE_IDTOKEN:"nonce.id_token",ORIGIN_URI:"request.origin",RENEW_STATUS:"token.renew.status",URL_HASH:"urlHash",REQUEST_PARAMS:"request.params",SCOPES:"scopes",INTERACTION_STATUS_KEY:"interaction.status",CCS_CREDENTIAL:"ccs.credential",CORRELATION_ID:"request.correlationId",NATIVE_REQUEST:"request.native",REDIRECT_CONTEXT:"request.redirect.context"},Vr={ACCOUNT_KEYS:"msal.account.keys",TOKEN_KEYS:"msal.token.keys"},Kl={WRAPPER_SKU:"wrapper.sku",WRAPPER_VER:"wrapper.version"},Ae={acquireTokenRedirect:861,acquireTokenPopup:862,ssoSilent:863,acquireTokenSilent_authCode:864,handleRedirectPromise:865,acquireTokenByCode:866,acquireTokenSilent_silentFlow:61,logout:961,logoutPopup:962};var j;(function(n){n.Redirect="redirect",n.Popup="popup",n.Silent="silent",n.None="none"})(j||(j={}));const rt={Startup:"startup",Login:"login",Logout:"logout",AcquireToken:"acquireToken",SsoSilent:"ssoSilent",HandleRedirect:"handleRedirect",None:"none"},dv={scopes:Rs},FE="jwk",rx={React:"@azure/msal-react"},Of="msal.db",ox=1,ix=`${Of}.keys`,sn={Default:0,AccessToken:1,AccessTokenAndRefreshToken:2,RefreshToken:3,RefreshTokenAndNetwork:4,Skip:5},sx=[sn.Default,sn.Skip,sn.RefreshTokenAndNetwork],ax="msal.browser.log.level",lx="msal.browser.log.pii";/*! @azure/msal-browser v3.28.1 2025-01-14 */function jl(n){return encodeURIComponent(Um(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Qu(n){return HE(n).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function Um(n){return HE(new TextEncoder().encode(n))}function HE(n){const e=Array.from(n,t=>String.fromCodePoint(t)).join("");return btoa(e)}/*! @azure/msal-browser v3.28.1 2025-01-14 */const cx="RSASSA-PKCS1-v1_5",BE="SHA-256",ux=2048,dx=new Uint8Array([1,0,1]),hv="0123456789abcdef",fv=new Uint32Array(1),hx="crypto_subtle_undefined",Fm={name:cx,hash:BE,modulusLength:ux,publicExponent:dx};function fx(n){if(!window)throw B(Gu);if(!window.crypto)throw B(Nf);if(!n&&!window.crypto.subtle)throw B(Nf,hx)}async function zE(n,e,t){e==null||e.addQueueMeasurement(T.Sha256Digest,t);const o=new TextEncoder().encode(n);return window.crypto.subtle.digest(BE,o)}function px(n){return window.crypto.getRandomValues(n)}function Xd(){return window.crypto.getRandomValues(fv),fv[0]}function Lr(){const n=Date.now(),e=Xd()*1024+(Xd()&1023),t=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=Xd();t[0]=n/2**40,t[1]=n/2**32,t[2]=n/2**24,t[3]=n/2**16,t[4]=n/2**8,t[5]=n,t[6]=112|r>>>8,t[7]=r,t[8]=128|o>>>24,t[9]=o>>>16,t[10]=o>>>8,t[11]=o,t[12]=i>>>24,t[13]=i>>>16,t[14]=i>>>8,t[15]=i;let s="";for(let a=0;a<t.length;a++)s+=hv.charAt(t[a]>>>4),s+=hv.charAt(t[a]&15),(a===3||a===5||a===7||a===9)&&(s+="-");return s}async function mx(n,e){return window.crypto.subtle.generateKey(Fm,n,e)}async function Zd(n){return window.crypto.subtle.exportKey(FE,n)}async function gx(n,e,t){return window.crypto.subtle.importKey(FE,n,Fm,e,t)}async function yx(n,e){return window.crypto.subtle.sign(Fm,n,e)}async function KE(n){const e=await zE(n),t=new Uint8Array(e);return Qu(t)}/*! @azure/msal-browser v3.28.1 2025-01-14 */const Yu="storage_not_supported",Je="stubbed_public_client_application_called",Hm="in_mem_redirect_unavailable";/*! @azure/msal-browser v3.28.1 2025-01-14 */const fc={[Yu]:"Given storage configuration option was not supported.",[Je]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Hm]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};fc[Yu],fc[Je],fc[Hm];class Bm extends Me{constructor(e,t){super(e,t),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,Bm.prototype)}}function Ve(n){return new Bm(n,fc[n])}/*! @azure/msal-browser v3.28.1 2025-01-14 */function vx(n){n.location.hash="",typeof n.history.replaceState=="function"&&n.history.replaceState(null,"",`${n.location.origin}${n.location.pathname}${n.location.search}`)}function Cx(n){const e=n.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}function zm(){return window.parent!==window}function Sx(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&typeof window.name=="string"&&window.name.indexOf(`${un.POPUP_NAME_PREFIX}.`)===0}function Ir(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function wx(){const e=new ae(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}function Tx(){if(ae.hashContainsKnownProperties(window.location.hash)&&zm())throw B(vE)}function Ex(n){if(zm()&&!n)throw B(yE)}function kx(){if(Sx())throw B(CE)}function jE(){if(typeof window>"u")throw B(Gu)}function $E(n){if(!n)throw B(ME)}function Km(n){jE(),Tx(),kx(),$E(n)}function pv(n,e){if(Km(n),Ex(e.system.allowRedirectInIframe),e.cache.cacheLocation===qt.MemoryStorage&&!e.cache.storeAuthStateInCookie)throw Ve(Hm)}function VE(n){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(n).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}function Ix(){return Lr()}/*! @azure/msal-browser v3.28.1 2025-01-14 */class Xc{navigateInternal(e,t){return Xc.defaultNavigateWindow(e,t)}navigateExternal(e,t){return Xc.defaultNavigateWindow(e,t)}static defaultNavigateWindow(e,t){return t.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},t.timeout)})}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class Ax{async sendGetRequestAsync(e,t){let r,o={},i=0;const s=mv(t);try{r=await fetch(e,{method:uv.GET,headers:s})}catch{throw B(window.navigator.onLine?kE:Jc)}o=gv(r.headers);try{return i=r.status,{headers:o,body:await r.json(),status:i}}catch{throw ov(B(xf),i,o)}}async sendPostRequestAsync(e,t){const r=t&&t.body||"",o=mv(t);let i,s=0,a={};try{i=await fetch(e,{method:uv.POST,headers:o,body:r})}catch{throw B(window.navigator.onLine?EE:Jc)}a=gv(i.headers);try{return s=i.status,{headers:a,body:await i.json(),status:s}}catch{throw ov(B(xf),s,a)}}}function mv(n){try{const e=new Headers;if(!(n&&n.headers))return e;const t=n.headers;return Object.entries(t).forEach(([r,o])=>{e.append(r,o)}),e}catch{throw B(LE)}}function gv(n){try{const e={};return n.forEach((t,r)=>{e[r]=t}),e}catch{throw B(UE)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const bx=6e4,Mf=1e4,Rx=3e4,Nx=2e3;function xx({auth:n,cache:e,system:t,telemetry:r},o){const i={clientId:b.EMPTY_STRING,authority:`${b.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:b.EMPTY_STRING,authorityMetadata:b.EMPTY_STRING,redirectUri:typeof window<"u"?Ir():"",postLogoutRedirectUri:b.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:Rr.AAD,OIDCOptions:{serverResponseType:al.FRAGMENT,defaultScopes:[b.OPENID_SCOPE,b.PROFILE_SCOPE,b.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:gm.None,tenant:b.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:qt.SessionStorage,temporaryCacheLocation:qt.SessionStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!!(e&&e.cacheLocation===qt.LocalStorage),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:xe.Info,piiLoggingEnabled:!1},c={...{...ZT,loggerOptions:a,networkClient:o?new Ax:WN,navigationClient:new Xc,loadFrameTimeout:0,windowHashTimeout:(t==null?void 0:t.loadFrameTimeout)||bx,iframeHashTimeout:(t==null?void 0:t.loadFrameTimeout)||Mf,navigateFrameWait:0,redirectNavigationTimeout:Rx,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:(t==null?void 0:t.nativeBrokerHandshakeTimeout)||Nx,pollIntervalMilliseconds:un.DEFAULT_POLL_INTERVAL_MS},...t,loggerOptions:(t==null?void 0:t.loggerOptions)||a},u={application:{appName:b.EMPTY_STRING,appVersion:b.EMPTY_STRING},client:new YN};if((n==null?void 0:n.protocolMode)!==Rr.OIDC&&(n!=null&&n.OIDCOptions)&&new Dr(c.loggerOptions).warning(JSON.stringify(Se(VT))),n!=null&&n.protocolMode&&n.protocolMode!==Rr.AAD&&(c!=null&&c.allowNativeBroker))throw Se(WT);return{auth:{...i,...n,OIDCOptions:{...i.OIDCOptions,...n==null?void 0:n.OIDCOptions}},cache:{...s,...e},system:c,telemetry:{...u,...r}}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const Ox="@azure/msal-browser",Ju="3.28.1";/*! @azure/msal-browser v3.28.1 2025-01-14 */class jm{static loggerCallback(e,t){switch(e){case xe.Error:console.error(t);return;case xe.Info:console.info(t);return;case xe.Verbose:console.debug(t);return;case xe.Warning:console.warn(t);return;default:console.log(t);return}}constructor(e){var l;this.browserEnvironment=typeof window<"u",this.config=xx(e,this.browserEnvironment);let t;try{t=window[qt.SessionStorage]}catch{}const r=t==null?void 0:t.getItem(ax),o=(l=t==null?void 0:t.getItem(lx))==null?void 0:l.toLowerCase(),i=o==="true"?!0:o==="false"?!1:void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(xe).includes(r)?xe[r]:void 0;a&&(s.loggerCallback=jm.loggerCallback,s.logLevel=a),i!==void 0&&(s.piiLoggingEnabled=i),this.logger=new Dr(s,Ox,Ju),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class ci extends jm{getModuleName(){return ci.MODULE_NAME}getId(){return ci.ID}async initialize(){return this.available=typeof window<"u",this.available}}ci.MODULE_NAME="";ci.ID="StandardOperatingContext";/*! @azure/msal-browser v3.28.1 2025-01-14 */function dr(n){return new TextDecoder().decode(Mx(n))}function Mx(n){let e=n.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw B(PE)}const t=atob(e);return Uint8Array.from(t,r=>r.codePointAt(0)||0)}/*! @azure/msal-browser v3.28.1 2025-01-14 */class _x{constructor(){this.dbName=Of,this.version=ox,this.tableName=ix,this.dbOpen=!1}async open(){return new Promise((e,t)=>{const r=window.indexedDB.open(this.dbName,this.version);r.addEventListener("upgradeneeded",o=>{o.target.result.createObjectStore(this.tableName)}),r.addEventListener("success",o=>{const i=o;this.db=i.target.result,this.dbOpen=!0,e()}),r.addEventListener("error",()=>t(B(Lm)))})}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}async validateDbIsOpen(){if(!this.dbOpen)return this.open()}async getItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(B(Ri));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).get(e);s.addEventListener("success",a=>{const l=a;this.closeConnection(),t(l.target.result)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async setItem(e,t){return await this.validateDbIsOpen(),new Promise((r,o)=>{if(!this.db)return o(B(Ri));const a=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).put(t,e);a.addEventListener("success",()=>{this.closeConnection(),r()}),a.addEventListener("error",l=>{this.closeConnection(),o(l)})})}async removeItem(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(B(Ri));const s=this.db.transaction([this.tableName],"readwrite").objectStore(this.tableName).delete(e);s.addEventListener("success",()=>{this.closeConnection(),t()}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async getKeys(){return await this.validateDbIsOpen(),new Promise((e,t)=>{if(!this.db)return t(B(Ri));const i=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).getAllKeys();i.addEventListener("success",s=>{const a=s;this.closeConnection(),e(a.target.result)}),i.addEventListener("error",s=>{this.closeConnection(),t(s)})})}async containsKey(e){return await this.validateDbIsOpen(),new Promise((t,r)=>{if(!this.db)return r(B(Ri));const s=this.db.transaction([this.tableName],"readonly").objectStore(this.tableName).count(e);s.addEventListener("success",a=>{const l=a;this.closeConnection(),t(l.target.result===1)}),s.addEventListener("error",a=>{this.closeConnection(),r(a)})})}async deleteDatabase(){return this.db&&this.dbOpen&&this.closeConnection(),new Promise((e,t)=>{const r=window.indexedDB.deleteDatabase(Of),o=setTimeout(()=>t(!1),200);r.addEventListener("success",()=>(clearTimeout(o),e(!0))),r.addEventListener("blocked",()=>(clearTimeout(o),e(!0))),r.addEventListener("error",()=>(clearTimeout(o),t(!1)))})}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class _f{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,t){this.cache.set(e,t)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((t,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class Px{constructor(e){this.inMemoryCache=new _f,this.indexedDBCache=new _x,this.logger=e}handleDatabaseAccessError(e){if(e instanceof cl&&e.errorCode===Lm)this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.");else throw e}async getItem(e){const t=this.inMemoryCache.getItem(e);if(!t)try{return this.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.getItem(e)}catch(r){this.handleDatabaseAccessError(r)}return t}async setItem(e,t){this.inMemoryCache.setItem(e,t);try{await this.indexedDBCache.setItem(e,t)}catch(r){this.handleDatabaseAccessError(r)}}async removeItem(e){this.inMemoryCache.removeItem(e);try{await this.indexedDBCache.removeItem(e)}catch(t){this.handleDatabaseAccessError(t)}}async getKeys(){const e=this.inMemoryCache.getKeys();if(e.length===0)try{return this.logger.verbose("In-memory cache is empty, now querying persistent storage."),await this.indexedDBCache.getKeys()}catch(t){this.handleDatabaseAccessError(t)}return e}async containsKey(e){const t=this.inMemoryCache.containsKey(e);if(!t)try{return this.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),await this.indexedDBCache.containsKey(e)}catch(r){this.handleDatabaseAccessError(r)}return t}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}async clearPersistent(){try{this.logger.verbose("Deleting persistent keystore");const e=await this.indexedDBCache.deleteDatabase();return e&&this.logger.verbose("Persistent keystore deleted"),e}catch(e){return this.handleDatabaseAccessError(e),!1}}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class ys{constructor(e,t,r){this.logger=e,fx(r??!1),this.cache=new Px(this.logger),this.performanceClient=t}createNewGuid(){return Lr()}base64Encode(e){return Um(e)}base64Decode(e){return dr(e)}base64UrlEncode(e){return jl(e)}encodeKid(e){return this.base64UrlEncode(JSON.stringify({kid:e}))}async getPublicKeyThumbprint(e){var u;const t=(u=this.performanceClient)==null?void 0:u.startMeasurement(T.CryptoOptsGetPublicKeyThumbprint,e.correlationId),r=await mx(ys.EXTRACTABLE,ys.POP_KEY_USAGES),o=await Zd(r.publicKey),i={e:o.e,kty:o.kty,n:o.n},s=yv(i),a=await this.hashString(s),l=await Zd(r.privateKey),c=await gx(l,!1,["sign"]);return await this.cache.setItem(a,{privateKey:c,publicKey:r.publicKey,requestMethod:e.resourceRequestMethod,requestUri:e.resourceRequestUri}),t&&t.end({success:!0}),a}async removeTokenBindingKey(e){return await this.cache.removeItem(e),!await this.cache.containsKey(e)}async clearKeystore(){this.cache.clearInMemory();try{return await this.cache.clearPersistent(),!0}catch(e){return e instanceof Error?this.logger.error(`Clearing keystore failed with error: ${e.message}`):this.logger.error("Clearing keystore failed with unknown error"),!1}}async signJwt(e,t,r,o){var C;const i=(C=this.performanceClient)==null?void 0:C.startMeasurement(T.CryptoOptsSignJwt,o),s=await this.cache.getItem(t);if(!s)throw B(Dm);const a=await Zd(s.publicKey),l=yv(a),c=jl(JSON.stringify({kid:t})),u=Om.getShrHeaderString({...r==null?void 0:r.header,alg:a.alg,kid:c}),d=jl(u);e.cnf={jwk:JSON.parse(l)};const h=jl(JSON.stringify(e)),f=`${d}.${h}`,m=new TextEncoder().encode(f),v=await yx(s.privateKey,m),g=Qu(new Uint8Array(v)),y=`${f}.${g}`;return i&&i.end({success:!0}),y}async hashString(e){return KE(e)}}ys.POP_KEY_USAGES=["sign","verify"];ys.EXTRACTABLE=!0;function yv(n){return JSON.stringify(n,Object.keys(n).sort())}/*! @azure/msal-browser v3.28.1 2025-01-14 */class Dx{constructor(){if(!window.localStorage)throw Ve(Yu)}getItem(e){return window.localStorage.getItem(e)}setItem(e,t){window.localStorage.setItem(e,t)}removeItem(e){window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class Lx{constructor(){if(!window.sessionStorage)throw Ve(Yu)}getItem(e){return window.sessionStorage.getItem(e)}setItem(e,t){window.sessionStorage.setItem(e,t)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */function WE(n,e){if(!e)return null;try{return $n.parseRequestState(n,e).libraryState.meta}catch{throw x(ps)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const Ux=24*60*60*1e3;class Fx{getItem(e){const t=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){const i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),l=a.join("=");if(s===t)return l}return""}setItem(e,t,r,o=!0){let i=`${encodeURIComponent(e)}=${encodeURIComponent(t)};path=/;SameSite=Lax;`;if(r){const s=Hx(r);i+=`expires=${s};`}o&&(i+="Secure;"),document.cookie=i}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),t=[];return e.forEach(r=>{const o=decodeURIComponent(r).trim().split("=");t.push(o[0])}),t}containsKey(e){return this.getKeys().includes(e)}}function Hx(n){const e=new Date;return new Date(e.getTime()+n*Ux).toUTCString()}/*! @azure/msal-browser v3.28.1 2025-01-14 */class Pf extends ms{constructor(e,t,r,o,i,s){super(e,r,o,i),this.cacheConfig=t,this.logger=o,this.internalStorage=new _f,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new Fx,t.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){try{switch(e){case qt.LocalStorage:return new Dx;case qt.SessionStorage:return new Lx;case qt.MemoryStorage:default:break}}catch(t){this.logger.error(t)}return this.cacheConfig.cacheLocation=qt.MemoryStorage,new _f}migrateCacheEntries(){const e=`${b.CACHE_PREFIX}.${nt.ID_TOKEN}`,t=`${b.CACHE_PREFIX}.${nt.CLIENT_INFO}`,r=`${b.CACHE_PREFIX}.${nt.ERROR}`,o=`${b.CACHE_PREFIX}.${nt.ERROR_DESC}`,i=this.browserStorage.getItem(e),s=this.browserStorage.getItem(t),a=this.browserStorage.getItem(r),l=this.browserStorage.getItem(o),c=[i,s,a,l];[nt.ID_TOKEN,nt.CLIENT_INFO,nt.ERROR,nt.ERROR_DESC].forEach((d,h)=>{const f=c[h];f&&this.setTemporaryCache(d,f,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.getItem(Vr.ACCOUNT_KEYS),t=this.getItem(`${Vr.TOKEN_KEYS}.${this.clientId}`);if(e&&t){this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration.");return}this.browserStorage.getKeys().forEach(o=>{if(this.isCredentialKey(o)){const i=this.getItem(o);if(i){const s=this.validateAndParseJson(i);if(s&&s.hasOwnProperty("credentialType"))switch(s.credentialType){case Q.ID_TOKEN:if(Gy(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${o} found, saving key to token key map`);const a=s,l=this.updateCredentialCacheKey(o,a);this.addTokenKey(l,Q.ID_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${o}`);break;case Q.ACCESS_TOKEN:case Q.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(qy(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${o} found, saving key to token key map`);const a=s,l=this.updateCredentialCacheKey(o,a);this.addTokenKey(l,Q.ACCESS_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${o}`);break;case Q.REFRESH_TOKEN:if(Qy(s)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${o} found, saving key to token key map`);const a=s,l=this.updateCredentialCacheKey(o,a);this.addTokenKey(l,Q.REFRESH_TOKEN);return}else this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${o}`);break}}}if(this.isAccountKey(o)){const i=this.getItem(o);if(i){const s=this.validateAndParseJson(i);s&&tt.isAccountEntity(s)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${o} found, saving key to account key map`),this.addAccountKeyToMap(o))}}})}validateAndParseJson(e){try{const t=JSON.parse(e);return t&&typeof t=="object"?t:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,t){this.browserStorage.setItem(e,t)}getAccount(e,t){this.logger.trace("BrowserCacheManager.getAccount called");const r=this.getCachedAccountEntity(e);return this.updateOutdatedCachedAccount(e,r,t)}getCachedAccountEntity(e){const t=this.getItem(e);if(!t)return this.removeAccountKeyFromMap(e),null;const r=this.validateAndParseJson(t);return!r||!tt.isAccountEntity(r)?(this.removeAccountKeyFromMap(e),null):ms.toObject(new tt,r)}setAccount(e){this.logger.trace("BrowserCacheManager.setAccount called");const t=e.generateAccountKey();this.setItem(t,JSON.stringify(e)),this.addAccountKeyToMap(t)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem(Vr.ACCOUNT_KEYS);return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const t=this.getAccountKeys();t.indexOf(e)===-1?(t.push(e),this.setItem(Vr.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const t=this.getAccountKeys(),r=t.indexOf(e);r>-1?(t.splice(r,1),this.setItem(Vr.ACCOUNT_KEYS,JSON.stringify(t)),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")):this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}async removeAccount(e){super.removeAccount(e),this.removeAccountKeyFromMap(e)}removeOutdatedAccount(e){this.removeItem(e),this.removeAccountKeyFromMap(e)}removeIdToken(e){super.removeIdToken(e),this.removeTokenKey(e,Q.ID_TOKEN)}async removeAccessToken(e){super.removeAccessToken(e),this.removeTokenKey(e,Q.ACCESS_TOKEN)}removeRefreshToken(e){super.removeRefreshToken(e),this.removeTokenKey(e,Q.REFRESH_TOKEN)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`${Vr.TOKEN_KEYS}.${this.clientId}`);if(e){const t=this.validateAndParseJson(e);if(t&&t.hasOwnProperty("idToken")&&t.hasOwnProperty("accessToken")&&t.hasOwnProperty("refreshToken"))return t;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}addTokenKey(e,t){this.logger.trace("BrowserCacheManager addTokenKey called");const r=this.getTokenKeys();switch(t){case Q.ID_TOKEN:r.idToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),r.idToken.push(e));break;case Q.ACCESS_TOKEN:r.accessToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - accessToken added to map"),r.accessToken.push(e));break;case Q.REFRESH_TOKEN:r.refreshToken.indexOf(e)===-1&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),r.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${t}`),x(Ef)}this.setItem(`${Vr.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}removeTokenKey(e,t){this.logger.trace("BrowserCacheManager removeTokenKey called");const r=this.getTokenKeys();switch(t){case Q.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const o=r.idToken.indexOf(e);o>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),r.idToken.splice(o,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case Q.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const i=r.accessToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),r.accessToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case Q.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const s=r.refreshToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),r.refreshToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${t}`),x(Ef)}this.setItem(`${Vr.TOKEN_KEYS}.${this.clientId}`,JSON.stringify(r))}getIdTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,Q.ID_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!Gy(r)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeTokenKey(e,Q.ID_TOKEN),null):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),r)}setIdTokenCredential(e){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const t=$i(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,Q.ID_TOKEN)}getAccessTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,Q.ACCESS_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!qy(r)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,Q.ACCESS_TOKEN),null):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),r)}setAccessTokenCredential(e){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const t=$i(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,Q.ACCESS_TOKEN)}getRefreshTokenCredential(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,Q.REFRESH_TOKEN),null;const r=this.validateAndParseJson(t);return!r||!Qy(r)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,Q.REFRESH_TOKEN),null):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),r)}setRefreshTokenCredential(e){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const t=$i(e);this.setItem(t,JSON.stringify(e)),this.addTokenKey(t,Q.REFRESH_TOKEN)}getAppMetadata(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!NR(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r)}setAppMetadata(e){this.logger.trace("BrowserCacheManager.setAppMetadata called");const t=RR(e);this.setItem(t,JSON.stringify(e))}getServerTelemetry(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!AR(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r)}setServerTelemetry(e,t){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(t))}getAuthorityMetadata(e){const t=this.internalStorage.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(t);return r&&xR(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(t=>this.isAuthorityMetadata(t))}setWrapperMetadata(e,t){this.internalStorage.setItem(Kl.WRAPPER_SKU,e),this.internalStorage.setItem(Kl.WRAPPER_VER,t)}getWrapperMetadata(){const e=this.internalStorage.getItem(Kl.WRAPPER_SKU)||b.EMPTY_STRING,t=this.internalStorage.getItem(Kl.WRAPPER_VER)||b.EMPTY_STRING;return[e,t]}setAuthorityMetadata(e,t){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(t))}getActiveAccount(){const e=this.generateCacheKey(nt.ACTIVE_ACCOUNT_FILTERS),t=this.getItem(e);if(!t){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const o=this.generateCacheKey(nt.ACTIVE_ACCOUNT),i=this.getItem(o);if(!i)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const s=this.getAccountInfoFilteredBy({localAccountId:i});return s?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(s),s):null}const r=this.validateAndParseJson(t);return r?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:r.homeAccountId,localAccountId:r.localAccountId,tenantId:r.tenantId})):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e){const t=this.generateCacheKey(nt.ACTIVE_ACCOUNT_FILTERS),r=this.generateCacheKey(nt.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const o={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId};this.browserStorage.setItem(t,JSON.stringify(o)),this.browserStorage.setItem(r,e.localAccountId)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(t),this.browserStorage.removeItem(r)}getThrottlingCache(e){const t=this.getItem(e);if(!t)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(t);return!r||!bR(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null):(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r)}setThrottlingCache(e,t){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(t))}getTemporaryCache(e,t){const r=t?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if(this.cacheConfig.cacheLocation===qt.LocalStorage){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,t,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,t),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,t,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}async clear(){await this.removeAllAccounts(),this.removeAppMetadata(),this.temporaryCacheStorage.getKeys().forEach(e=>{(e.indexOf(b.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.removeTemporaryItem(e)}),this.browserStorage.getKeys().forEach(e=>{(e.indexOf(b.CACHE_PREFIX)!==-1||e.indexOf(this.clientId)!==-1)&&this.browserStorage.removeItem(e)}),this.internalStorage.clear()}async clearTokensAndKeysWithClaims(e,t){e.addQueueMeasurement(T.ClearTokensAndKeysWithClaims,t);const r=this.getTokenKeys(),o=[];r.accessToken.forEach(i=>{const s=this.getAccessTokenCredential(i);s!=null&&s.requestedClaimsHash&&i.includes(s.requestedClaimsHash.toLowerCase())&&o.push(this.removeAccessToken(i))}),await Promise.all(o),o.length>0&&this.logger.warning(`${o.length} access tokens with claims in the cache keys have been removed from the cache.`)}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):jn.startsWith(e,b.CACHE_PREFIX)||jn.startsWith(e,nt.ADAL_ID_TOKEN)?e:`${b.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:t}}=$n.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${me.AUTHORITY}.${t}`)}generateNonceKey(e){const{libraryState:{id:t}}=$n.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${me.NONCE_IDTOKEN}.${t}`)}generateStateKey(e){const{libraryState:{id:t}}=$n.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`${me.REQUEST_STATE}.${t}`)}getCachedAuthority(e){const t=this.generateStateKey(e),r=this.getTemporaryCache(t);if(!r)return null;const o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,t,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,t,!1);const l=this.generateAuthorityKey(e);if(this.setTemporaryCache(l,r,!1),i){const c={credential:i.homeAccountId,type:pn.HOME_ACCOUNT_ID};this.setTemporaryCache(me.CCS_CREDENTIAL,JSON.stringify(c),!0)}else if(o){const c={credential:o,type:pn.UPN};this.setTemporaryCache(me.CCS_CREDENTIAL,JSON.stringify(c),!0)}}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(t=>{t.indexOf(e)!==-1&&this.removeTemporaryItem(t)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey(me.REQUEST_PARAMS)),this.removeTemporaryItem(this.generateCacheKey(me.ORIGIN_URI)),this.removeTemporaryItem(this.generateCacheKey(me.URL_HASH)),this.removeTemporaryItem(this.generateCacheKey(me.CORRELATION_ID)),this.removeTemporaryItem(this.generateCacheKey(me.CCS_CREDENTIAL)),this.removeTemporaryItem(this.generateCacheKey(me.NATIVE_REQUEST)),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const t=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(t);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||b.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(t=>{if(t.indexOf(me.REQUEST_STATE)===-1)return;const r=this.temporaryCacheStorage.getItem(t);if(!r)return;const o=WE(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const t=Um(JSON.stringify(e));this.setTemporaryCache(me.REQUEST_PARAMS,t,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const t=this.getTemporaryCache(me.REQUEST_PARAMS,!0);if(!t)throw B(wE);let r;try{r=JSON.parse(dr(t))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${t}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),B(TE)}if(this.removeTemporaryItem(this.generateCacheKey(me.REQUEST_PARAMS)),!r.authority){const o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw B(Pm);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache(me.NATIVE_REQUEST,!0);if(!e)return this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null;const t=this.validateAndParseJson(e);return t||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null)}isInteractionInProgress(e){const t=this.getInteractionInProgress();return e?t===this.clientId:!!t}getInteractionInProgress(){const e=`${b.CACHE_PREFIX}.${me.INTERACTION_STATUS_KEY}`;return this.getTemporaryCache(e,!1)}setInteractionInProgress(e){const t=`${b.CACHE_PREFIX}.${me.INTERACTION_STATUS_KEY}`;if(e){if(this.getInteractionInProgress())throw B(fE);this.setTemporaryCache(t,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(t)}getLegacyLoginHint(){const e=this.getTemporaryCache(nt.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(nt.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const t=this.getTemporaryCache(nt.ID_TOKEN,!0);t&&(this.browserStorage.removeItem(this.generateCacheKey(nt.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const r=t||e;if(r){const o=vi(r,dr);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,t){const r=$i(t);if(e!==r){const o=this.getItem(e);if(o)return this.browserStorage.removeItem(e),this.setItem(r,o),this.logger.verbose(`Updated an outdated ${t.credentialType} cache key`),r;this.logger.error(`Attempted to update an outdated ${t.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}async hydrateCache(e,t){var a,l,c;const r=Bu((a=e.account)==null?void 0:a.homeAccountId,(l=e.account)==null?void 0:l.environment,e.idToken,this.clientId,e.tenantId);let o;t.claims&&(o=await this.cryptoImpl.hashString(t.claims));const i=zu((c=e.account)==null?void 0:c.homeAccountId,e.account.environment,e.accessToken,this.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,dr,void 0,e.tokenType,void 0,t.sshKid,t.claims,o),s={idToken:r,accessToken:i};return this.saveCacheRecord(s)}async saveCacheRecord(e,t,r){try{await super.saveCacheRecord(e,t,r)}catch(o){if(o instanceof ts&&this.performanceClient&&r)try{const i=this.getTokenKeys();this.performanceClient.addFields({cacheRtCount:i.refreshToken.length,cacheIdCount:i.idToken.length,cacheAtCount:i.accessToken.length},r)}catch{}throw o}}}const Bx=(n,e)=>{const t={cacheLocation:qt.MemoryStorage,temporaryCacheLocation:qt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};return new Pf(n,t,Vc,e)};/*! @azure/msal-browser v3.28.1 2025-01-14 */function zx(n,e,t,r){return n.verbose("getAllAccounts called"),t?e.getAllAccounts(r):[]}function Kx(n,e,t){if(e.trace("getAccount called"),Object.keys(n).length===0)return e.warning("getAccount: No accountFilter provided"),null;const r=t.getAccountInfoFilteredBy(n);return r?(e.verbose("getAccount: Account matching provided filter found, returning"),r):(e.verbose("getAccount: No matching account found, returning null"),null)}function jx(n,e,t){if(e.trace("getAccountByUsername called"),!n)return e.warning("getAccountByUsername: No username provided"),null;const r=t.getAccountInfoFilteredBy({username:n});return r?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${n}`),r):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}function $x(n,e,t){if(e.trace("getAccountByHomeId called"),!n)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const r=t.getAccountInfoFilteredBy({homeAccountId:n});return r?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${n}`),r):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}function Vx(n,e,t){if(e.trace("getAccountByLocalId called"),!n)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const r=t.getAccountInfoFilteredBy({localAccountId:n});return r?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${n}`),r):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}function Wx(n,e){e.setActiveAccount(n)}function qx(n){return n.getActiveAccount()}/*! @azure/msal-browser v3.28.1 2025-01-14 */const z={INITIALIZE_START:"msal:initializeStart",INITIALIZE_END:"msal:initializeEnd",ACCOUNT_ADDED:"msal:accountAdded",ACCOUNT_REMOVED:"msal:accountRemoved",ACTIVE_ACCOUNT_CHANGED:"msal:activeAccountChanged",LOGIN_START:"msal:loginStart",LOGIN_SUCCESS:"msal:loginSuccess",LOGIN_FAILURE:"msal:loginFailure",ACQUIRE_TOKEN_START:"msal:acquireTokenStart",ACQUIRE_TOKEN_SUCCESS:"msal:acquireTokenSuccess",ACQUIRE_TOKEN_FAILURE:"msal:acquireTokenFailure",ACQUIRE_TOKEN_NETWORK_START:"msal:acquireTokenFromNetworkStart",SSO_SILENT_START:"msal:ssoSilentStart",SSO_SILENT_SUCCESS:"msal:ssoSilentSuccess",SSO_SILENT_FAILURE:"msal:ssoSilentFailure",ACQUIRE_TOKEN_BY_CODE_START:"msal:acquireTokenByCodeStart",ACQUIRE_TOKEN_BY_CODE_SUCCESS:"msal:acquireTokenByCodeSuccess",ACQUIRE_TOKEN_BY_CODE_FAILURE:"msal:acquireTokenByCodeFailure",HANDLE_REDIRECT_START:"msal:handleRedirectStart",HANDLE_REDIRECT_END:"msal:handleRedirectEnd",POPUP_OPENED:"msal:popupOpened",LOGOUT_START:"msal:logoutStart",LOGOUT_SUCCESS:"msal:logoutSuccess",LOGOUT_FAILURE:"msal:logoutFailure",LOGOUT_END:"msal:logoutEnd",RESTORE_FROM_BFCACHE:"msal:restoreFromBFCache"};/*! @azure/msal-browser v3.28.1 2025-01-14 */class Gx{constructor(e){this.eventCallbacks=new Map,this.logger=e||new Dr({})}addEventCallback(e,t,r){if(typeof window<"u"){const o=r||Ix();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,t||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,t,r,o){if(typeof window<"u"){const i={eventType:e,interactionType:t||null,payload:r||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],l)=>{(a.length===0||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${l}: ${e}`),s.apply(null,[i]))})}}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class qE{constructor(e,t,r,o,i,s,a,l,c){this.config=e,this.browserStorage=t,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=l,this.correlationId=c||Lr(),this.logger=o.clone(un.MSAL_SKU,Ju,this.correlationId),this.performanceClient=a}async clearCacheOnLogout(e){if(e){tt.accountInfoIsEqual(e,this.browserStorage.getActiveAccount(),!1)&&(this.logger.verbose("Setting active account to null"),this.browserStorage.setActiveAccount(null));try{await this.browserStorage.removeAccount(tt.generateAccountCacheKey(e)),this.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{this.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{this.logger.verbose("No account provided in logout request, clearing all cache items.",this.correlationId),await this.browserStorage.clear(),await this.browserCrypto.clearKeystore()}catch{this.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}}getRedirectUri(e){this.logger.verbose("getRedirectUri called");const t=e||this.config.auth.redirectUri;return ae.getAbsoluteUrl(t,Ir())}initializeServerTelemetryManager(e,t){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:t||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new za(r,this.browserStorage)}async getDiscoveredAuthority(e){const{account:t}=e,r=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;this.performanceClient.addQueueMeasurement(T.StandardInteractionClientGetDiscoveredAuthority,this.correlationId);const o={protocolMode:this.config.auth.protocolMode,OIDCOptions:this.config.auth.OIDCOptions,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},i=e.requestAuthority||this.config.auth.authority,s=r!=null&&r.length?r==="true":this.config.auth.instanceAware,a=t&&s?this.config.auth.authority.replace(ae.getDomainFromUrl(i),t.environment):i,l=At.generateAuthority(a,e.requestAzureCloudOptions||this.config.auth.azureCloudOptions),c=await P(nE,T.AuthorityFactoryCreateDiscoveredInstance,this.logger,this.performanceClient,this.correlationId)(l,this.config.system.networkClient,this.browserStorage,o,this.logger,this.correlationId,this.performanceClient);if(t&&!c.isAlias(t.environment))throw Se(qT);return c}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const Qx=32;async function Yx(n,e,t){n.addQueueMeasurement(T.GeneratePkceCodes,t);const r=Ci(Jx,T.GenerateCodeVerifier,e,n,t)(n,e,t),o=await P(Xx,T.GenerateCodeChallengeFromVerifier,e,n,t)(r,n,e,t);return{verifier:r,challenge:o}}function Jx(n,e,t){try{const r=new Uint8Array(Qx);return Ci(px,T.GetRandomValues,e,n,t)(r),Qu(r)}catch{throw B(Mm)}}async function Xx(n,e,t,r){e.addQueueMeasurement(T.GenerateCodeChallengeFromVerifier,r);try{const o=await P(zE,T.Sha256Digest,t,e,r)(n,e,r);return Qu(new Uint8Array(o))}catch{throw B(Mm)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */async function $m(n,e,t,r){t.addQueueMeasurement(T.InitializeBaseRequest,n.correlationId);const o=n.authority||e.auth.authority,i=[...n&&n.scopes||[]],s={...n,correlationId:n.correlationId,authority:o,scopes:i};if(!s.authenticationScheme)s.authenticationScheme=ye.BEARER,r.verbose(`Authentication Scheme wasn't explicitly set in request, defaulting to "Bearer" request`);else{if(s.authenticationScheme===ye.SSH){if(!n.sshJwk)throw Se(Ku);if(!n.sshKid)throw Se($T)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}return e.cache.claimsBasedCachingEnabled&&n.claims&&!jn.isEmptyObj(n.claims)&&(s.requestedClaimsHash=await KE(n.claims)),s}async function Zx(n,e,t,r,o){r.addQueueMeasurement(T.InitializeSilentRequest,n.correlationId);const i=await P($m,T.InitializeBaseRequest,o,r,n.correlationId)(n,t,r,o);return{...n,...i,account:e,forceRefresh:n.forceRefresh||!1}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class Ns extends qE{async initializeAuthorizationCodeRequest(e){this.performanceClient.addQueueMeasurement(T.StandardInteractionClientInitializeAuthorizationCodeRequest,this.correlationId);const t=await P(Yx,T.GeneratePkceCodes,this.logger,this.performanceClient,this.correlationId)(this.performanceClient,this.logger,this.correlationId),r={...e,redirectUri:e.redirectUri,code:b.EMPTY_STRING,codeVerifier:t.verifier};return e.codeChallenge=t.challenge,e.codeChallengeMethod=b.S256_CODE_CHALLENGE_METHOD,r}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e==null?void 0:e.correlationId);const t={correlationId:this.correlationId||Lr(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),t.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return!e||e.postLogoutRedirectUri!==null?e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",t.correlationId),t.postLogoutRedirectUri=ae.getAbsoluteUrl(e.postLogoutRedirectUri,Ir())):this.config.auth.postLogoutRedirectUri===null?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",t.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",t.correlationId),t.postLogoutRedirectUri=ae.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Ir())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",t.correlationId),t.postLogoutRedirectUri=ae.getAbsoluteUrl(Ir(),Ir())):this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",t.correlationId),t}getLogoutHintFromIdTokenClaims(e){const t=e.idTokenClaims;if(t){if(t.login_hint)return t.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}async createAuthCodeClient(e){this.performanceClient.addQueueMeasurement(T.StandardInteractionClientCreateAuthCodeClient,this.correlationId);const t=await P(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)(e);return new iE(t,this.performanceClient)}async getClientConfiguration(e){const{serverTelemetryManager:t,requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}=e;this.performanceClient.addQueueMeasurement(T.StandardInteractionClientGetClientConfiguration,this.correlationId);const a=await P(this.getDiscoveredAuthority.bind(this),T.StandardInteractionClientGetDiscoveredAuthority,this.logger,this.performanceClient,this.correlationId)({requestAuthority:r,requestAzureCloudOptions:o,requestExtraQueryParameters:i,account:s}),l=this.config.system.loggerOptions;return{authOptions:{clientId:this.config.auth.clientId,authority:a,clientCapabilities:this.config.auth.clientCapabilities,redirectUri:this.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:this.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:l.loggerCallback,piiLoggingEnabled:l.piiLoggingEnabled,logLevel:l.logLevel,correlationId:this.correlationId},cacheOptions:{claimsBasedCachingEnabled:this.config.cache.claimsBasedCachingEnabled},cryptoInterface:this.browserCrypto,networkInterface:this.networkClient,storageInterface:this.browserStorage,serverTelemetryManager:t,libraryInfo:{sku:un.MSAL_SKU,version:Ju,cpu:b.EMPTY_STRING,os:b.EMPTY_STRING},telemetry:this.config.telemetry}}async initializeAuthorizationRequest(e,t){this.performanceClient.addQueueMeasurement(T.StandardInteractionClientInitializeAuthorizationRequest,this.correlationId);const r=this.getRedirectUri(e.redirectUri),o={interactionType:t},i=$n.setRequestState(this.browserCrypto,e&&e.state||b.EMPTY_STRING,o),a={...await P($m,T.InitializeBaseRequest,this.logger,this.performanceClient,this.correlationId)({...e,correlationId:this.correlationId},this.config,this.performanceClient,this.logger),redirectUri:r,state:i,nonce:e.nonce||Lr(),responseMode:this.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return a;const l=e.account||this.browserStorage.getActiveAccount();if(l&&(this.logger.verbose("Setting validated request account",this.correlationId),this.logger.verbosePii(`Setting validated request account: ${l.homeAccountId}`,this.correlationId),a.account=l),!a.loginHint&&!l){const c=this.browserStorage.getLegacyLoginHint();c&&(a.loginHint=c)}return a}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const e1="ContentError",GE="user_switch";/*! @azure/msal-browser v3.28.1 2025-01-14 */const t1="USER_INTERACTION_REQUIRED",n1="USER_CANCEL",r1="NO_NETWORK",o1="PERSISTENT_ERROR",i1="DISABLED",s1="ACCOUNT_UNAVAILABLE";/*! @azure/msal-browser v3.28.1 2025-01-14 */const a1=-2147186943,l1={[GE]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class sr extends Me{constructor(e,t,r){super(e,t),Object.setPrototypeOf(this,sr.prototype),this.name="NativeAuthError",this.ext=r}}function Ni(n){if(n.ext&&n.ext.status&&(n.ext.status===o1||n.ext.status===i1)||n.ext&&n.ext.error&&n.ext.error===a1)return!0;switch(n.errorCode){case e1:return!0;default:return!1}}function Df(n,e,t){if(t&&t.status)switch(t.status){case s1:return bf(rE);case t1:return new Wn(n,e);case n1:return B(li);case r1:return B(Jc)}return new sr(n,l1[n]||e,t)}/*! @azure/msal-browser v3.28.1 2025-01-14 */class QE extends Ns{async acquireToken(e){this.performanceClient.addQueueMeasurement(T.SilentCacheClientAcquireToken,e.correlationId);const t=this.initializeServerTelemetryManager(Ae.acquireTokenSilent_silentFlow),r=await P(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),o=new VN(r,this.performanceClient);this.logger.verbose("Silent auth client created");try{const s=(await P(o.acquireCachedToken.bind(o),T.SilentFlowClientAcquireCachedToken,this.logger,this.performanceClient,e.correlationId)(e))[0];return this.performanceClient.addFields({fromCache:!0},e.correlationId),s}catch(i){throw i instanceof cl&&i.errorCode===Dm&&this.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),i}}logout(e){this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(t==null?void 0:t.account)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class ns extends qE{constructor(e,t,r,o,i,s,a,l,c,u,d,h){var p;super(e,t,r,o,i,s,l,c,h),this.apiId=a,this.accountId=u,this.nativeMessageHandler=c,this.nativeStorageManager=d,this.silentCacheClient=new QE(e,this.nativeStorageManager,r,o,i,s,l,c,h),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const f=this.nativeMessageHandler.getExtensionId()===Wi.PREFERRED_EXTENSION_ID?"chrome":(p=this.nativeMessageHandler.getExtensionId())!=null&&p.length?"unknown":void 0;this.skus=za.makeExtraSkuString({libraryName:un.MSAL_SKU,libraryVersion:Ju,extensionName:f,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[RN]:this.skus}}async acquireToken(e){this.performanceClient.addQueueMeasurement(T.NativeInteractionClientAcquireToken,e.correlationId),this.logger.trace("NativeInteractionClient - acquireToken called.");const t=this.performanceClient.startMeasurement(T.NativeInteractionClientAcquireToken,e.correlationId),r=hr();try{const o=await this.initializeNativeRequest(e);try{const c=await this.acquireTokensFromCache(this.accountId,o);return t.end({success:!0,isNativeBroker:!1,fromCache:!0}),c}catch{this.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...i}=o,s={method:$o.GetToken,request:i},a=await this.nativeMessageHandler.sendMessage(s),l=this.validateNativeResponse(a);return await this.handleNativeResponse(l,o,r).then(c=>(t.end({success:!0,isNativeBroker:!0,requestId:c.requestId}),this.serverTelemetryManager.clearNativeBrokerErrorCode(),c)).catch(c=>{throw t.end({success:!1,errorCode:c.errorCode,subErrorCode:c.subError,isNativeBroker:!0}),c})}catch(o){throw o instanceof sr&&this.serverTelemetryManager.setNativeBrokerErrorCode(o.errorCode),o}}createSilentCacheRequest(e,t){return{authority:e.authority,correlationId:this.correlationId,scopes:je.fromString(e.scope).asArray(),account:t,forceRefresh:!1}}async acquireTokensFromCache(e,t){if(!e)throw this.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),x(wf);const r=this.browserStorage.getBaseAccountInfo({nativeAccountId:e});if(!r)throw x(wf);try{const o=this.createSilentCacheRequest(t,r),i=await this.silentCacheClient.acquireToken(o),s={...r,idTokenClaims:i==null?void 0:i.idTokenClaims,idToken:i==null?void 0:i.idToken};return{...i,account:s}}catch(o){throw o}}async acquireTokenRedirect(e,t){this.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...r}=e;delete r.onRedirectNavigate;const o=await this.initializeNativeRequest(r),i={method:$o.GetToken,request:o};try{const l=await this.nativeMessageHandler.sendMessage(i);this.validateNativeResponse(l)}catch(l){if(l instanceof sr&&(this.serverTelemetryManager.setNativeBrokerErrorCode(l.errorCode),Ni(l)))throw l}this.browserStorage.setTemporaryCache(me.NATIVE_REQUEST,JSON.stringify(o),!0);const s={apiId:Ae.acquireTokenRedirect,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=this.config.auth.navigateToLoginRequestUrl?window.location.href:this.getRedirectUri(e.redirectUri);t.end({success:!0}),await this.navigationClient.navigateExternal(a,s)}async handleRedirectPromise(e,t){if(this.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const r=this.browserStorage.getCachedNativeRequest();if(!r)return this.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&t&&(e==null||e.addFields({errorCode:"no_cached_request"},t)),null;const{prompt:o,...i}=r;o&&this.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),this.browserStorage.removeItem(this.browserStorage.generateCacheKey(me.NATIVE_REQUEST));const s={method:$o.GetToken,request:i},a=hr();try{this.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const l=await this.nativeMessageHandler.sendMessage(s);this.validateNativeResponse(l);const c=this.handleNativeResponse(l,i,a);this.browserStorage.setInteractionInProgress(!1);const u=await c;return this.serverTelemetryManager.clearNativeBrokerErrorCode(),u}catch(l){throw this.browserStorage.setInteractionInProgress(!1),l}}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}async handleNativeResponse(e,t,r){var u;this.logger.trace("NativeInteractionClient - handleNativeResponse called.");const o=vi(e.id_token,dr),i=this.createHomeAccountIdentifier(e,o),s=(u=this.browserStorage.getAccountInfoFilteredBy({nativeAccountId:t.accountId}))==null?void 0:u.homeAccountId;if(i!==s&&e.account.id!==t.accountId)throw Df(GE);const a=await this.getDiscoveredAuthority({requestAuthority:t.authority}),l=Nm(this.browserStorage,a,i,dr,o,e.client_info,void 0,o.tid,void 0,e.account.id,this.logger),c=await this.generateAuthenticationResult(e,t,o,l,a.canonicalAuthority,r);return this.cacheAccount(l),this.cacheNativeTokens(e,t,i,o,e.access_token,c.tenantId,r),c}createHomeAccountIdentifier(e,t){return tt.generateHomeAccountId(e.client_info||b.EMPTY_STRING,Fn.Default,this.logger,this.browserCrypto,t)}generateScopes(e,t){return e.scope?je.fromString(e.scope):je.fromString(t.scope)}async generatePopAccessToken(e,t){if(t.tokenType===ye.POP&&t.signPopToken){if(e.shr)return this.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const r=new gs(this.browserCrypto),o={resourceRequestMethod:t.resourceRequestMethod,resourceRequestUri:t.resourceRequestUri,shrClaims:t.shrClaims,shrNonce:t.shrNonce};if(!t.keyId)throw x(pm);return r.signPopToken(e.access_token,t.keyId,o)}else return e.access_token}async generateAuthenticationResult(e,t,r,o,i,s){const a=this.addTelemetryFromNativeResponse(e),l=e.scope?je.fromString(e.scope):je.fromString(t.scope),c=e.account.properties||{},u=c.UID||r.oid||r.sub||b.EMPTY_STRING,d=c.TenantId||r.tid||b.EMPTY_STRING,h=Em(o.getAccountInfo(),void 0,r,e.id_token);h.nativeAccountId!==e.account.id&&(h.nativeAccountId=e.account.id);const f=await this.generatePopAccessToken(e,t),p=t.tokenType===ye.POP?ye.POP:ye.BEARER;return{authority:i,uniqueId:u,tenantId:d,scopes:l.asArray(),account:h,idToken:e.id_token,idTokenClaims:r,accessToken:f,fromCache:a?this.isResponseFromCache(a):!1,expiresOn:new Date(Number(s+e.expires_in)*1e3),tokenType:p,correlationId:this.correlationId,state:e.state,fromNativeBroker:!0}}cacheAccount(e){this.browserStorage.setAccount(e),this.browserStorage.removeAccountContext(e).catch(t=>{this.logger.error(`Error occurred while removing account context from browser storage. ${t}`)})}cacheNativeTokens(e,t,r,o,i,s,a){const l=Bu(r,t.authority,e.id_token||"",t.clientId,o.tid||""),c=t.tokenType===ye.POP?b.SHR_NONCE_VALIDITY:(typeof e.expires_in=="string"?parseInt(e.expires_in,10):e.expires_in)||0,u=a+c,d=this.generateScopes(e,t),h=zu(r,t.authority,i,t.clientId,o.tid||s,d.printScopes(),u,0,dr,void 0,t.tokenType,void 0,t.keyId),f={idToken:l,accessToken:h};this.nativeStorageManager.saveCacheRecord(f,t.storeInCache)}addTelemetryFromNativeResponse(e){const t=this.getMATSFromResponse(e);return t?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:t.broker_version,matsAccountJoinOnStart:t.account_join_on_start,matsAccountJoinOnEnd:t.account_join_on_end,matsDeviceJoin:t.device_join,matsPromptBehavior:t.prompt_behavior,matsApiErrorCode:t.api_error_code,matsUiVisible:t.ui_visible,matsSilentCode:t.silent_code,matsSilentBiSubCode:t.silent_bi_sub_code,matsSilentMessage:t.silent_message,matsSilentStatus:t.silent_status,matsHttpStatus:t.http_status,matsHttpEventCount:t.http_event_count},this.correlationId),t):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw fT(lm,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}async initializeNativeRequest(e){this.logger.trace("NativeInteractionClient - initializeNativeRequest called");const t=e.authority||this.config.auth.authority;e.account&&await this.getDiscoveredAuthority({requestAuthority:t,requestAzureCloudOptions:e.azureCloudOptions,account:e.account});const r=new ae(t);r.validateAsUri();const{scopes:o,...i}=e,s=new je(o||[]);s.appendScopes(Rs);const a=()=>{switch(this.apiId){case Ae.ssoSilent:case Ae.acquireTokenSilent_silentFlow:return this.logger.trace("initializeNativeRequest: silent request sets prompt to none"),st.NONE}if(!e.prompt){this.logger.trace("initializeNativeRequest: prompt was not provided");return}switch(e.prompt){case st.NONE:case st.CONSENT:case st.LOGIN:return this.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw this.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),B(_E)}},l={...i,accountId:this.accountId,clientId:this.config.auth.clientId,authority:r.urlString,scope:s.printScopes(),redirectUri:this.getRedirectUri(e.redirectUri),prompt:a(),correlationId:this.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(l.signPopToken&&e.popKid)throw B(DE);if(this.handleExtraBrokerParams(l),l.extraParameters=l.extraParameters||{},l.extraParameters.telemetry=Wi.MATS_TELEMETRY,e.authenticationScheme===ye.POP){const c={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},u=new gs(this.browserCrypto);let d;if(l.keyId)d=this.browserCrypto.base64UrlEncode(JSON.stringify({kid:l.keyId})),l.signPopToken=!1;else{const h=await P(u.generateCnf.bind(u),T.PopTokenGenerateCnf,this.logger,this.performanceClient,e.correlationId)(c,this.logger);d=h.reqCnfString,l.keyId=h.kid,l.signPopToken=!0}l.reqCnf=d}return this.addRequestSKUs(l),l}handleExtraBrokerParams(e){var i;const t=e.extraParameters&&e.extraParameters.hasOwnProperty(Am)&&e.extraParameters.hasOwnProperty(Af)&&e.extraParameters.hasOwnProperty(si);if(!e.embeddedClientId&&!t)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[Af],r=e.extraParameters[si]),e.extraParameters={child_client_id:r,child_redirect_uri:o},(i=this.performanceClient)==null||i.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class ar{constructor(e,t,r,o){this.logger=e,this.handshakeTimeoutMs=t,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement(T.NativeMessageHandlerHandshake)}async sendMessage(e){this.logger.trace("NativeMessageHandler - sendMessage called.");const t={channel:Wi.CHANNEL_ID,extensionId:this.extensionId,responseId:Lr(),body:e};return this.logger.trace("NativeMessageHandler - Sending request to browser extension"),this.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(t)}`),this.messageChannel.port1.postMessage(t),new Promise((r,o)=>{this.resolvers.set(t.responseId,{resolve:r,reject:o})})}static async createProvider(e,t,r){e.trace("NativeMessageHandler - createProvider called.");try{const o=new ar(e,t,r,Wi.PREFERRED_EXTENSION_ID);return await o.sendHandshakeRequest(),o}catch{const i=new ar(e,t,r);return await i.sendHandshakeRequest(),i}}async sendHandshakeRequest(){this.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",this.windowListener,!1);const e={channel:Wi.CHANNEL_ID,extensionId:this.extensionId,responseId:Lr(),body:{method:$o.HandshakeRequest}};return this.handshakeEvent.add({extensionId:this.extensionId,extensionHandshakeTimeoutMs:this.handshakeTimeoutMs}),this.messageChannel.port1.onmessage=t=>{this.onChannelMessage(t)},window.postMessage(e,window.origin,[this.messageChannel.port2]),new Promise((t,r)=>{this.handshakeResolvers.set(e.responseId,{resolve:t,reject:r}),this.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",this.windowListener,!1),this.messageChannel.port1.close(),this.messageChannel.port2.close(),this.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),r(B(xE)),this.handshakeResolvers.delete(e.responseId)},this.handshakeTimeoutMs)})}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const t=e.data;if(!(!t.channel||t.channel!==Wi.CHANNEL_ID)&&!(t.extensionId&&t.extensionId!==this.extensionId)&&t.body.method===$o.HandshakeRequest){const r=this.handshakeResolvers.get(t.responseId);if(!r){this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${t.responseId}`);return}this.logger.verbose(t.extensionId?`Extension with id: ${t.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(B(OE))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const t=e.data,r=this.resolvers.get(t.responseId),o=this.handshakeResolvers.get(t.responseId);try{const i=t.body.method;if(i===$o.Response){if(!r)return;const s=t.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),s.status!=="Success")r.reject(Df(s.code,s.description,s.ext));else if(s.result)s.result.code&&s.result.description?r.reject(Df(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result);else throw fT(lm,"Event does not contain result.");this.resolvers.delete(t.responseId)}else if(i===$o.HandshakeResponse){if(!o){this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${t.responseId}`);return}clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=t.extensionId,this.extensionVersion=t.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(t.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,t,r,o){if(t.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return t.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return t.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case ye.BEARER:case ye.POP:return t.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return t.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class Vm{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async handleCodeResponse(e,t){this.performanceClient.addQueueMeasurement(T.HandleCodeResponse,t.correlationId);let r;try{r=this.authModule.handleFragmentResponse(e,t.state)}catch(o){throw o instanceof bo&&o.subError===li?B(li):o}return P(this.handleCodeResponseFromServer.bind(this),T.HandleCodeResponseFromServer,this.logger,this.performanceClient,t.correlationId)(r,t)}async handleCodeResponseFromServer(e,t,r=!0){if(this.performanceClient.addQueueMeasurement(T.HandleCodeResponseFromServer,t.correlationId),this.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),this.authCodeRequest.code=e.code,e.cloud_instance_host_name&&await P(this.authModule.updateAuthority.bind(this.authModule),T.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,t.correlationId)(e.cloud_instance_host_name,t.correlationId),r&&(e.nonce=t.nonce||void 0),e.state=t.state,e.client_info)this.authCodeRequest.clientInfo=e.client_info;else{const i=this.createCcsCredentials(t);i&&(this.authCodeRequest.ccsCredential=i)}return await P(this.authModule.acquireToken.bind(this.authModule),T.AuthClientAcquireToken,this.logger,this.performanceClient,t.correlationId)(this.authCodeRequest,e)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:pn.HOME_ACCOUNT_ID}:e.loginHint?{credential:e.loginHint,type:pn.UPN}:null}}/*! @azure/msal-browser v3.28.1 2025-01-14 */function YE(n,e,t){const r=Gc(n);if(!r)throw QT(n)?(t.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),t.errorPii(`The ${e} detected is: ${n}`),B(uE)):(t.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),B(cE));return r}function c1(n,e,t){if(!n.state)throw B(_m);const r=WE(e,n.state);if(!r)throw B(dE);if(r.interactionType!==t)throw B(hE)}/*! @azure/msal-browser v3.28.1 2025-01-14 */class u1 extends Ns{constructor(e,t,r,o,i,s,a,l,c,u){super(e,t,r,o,i,s,a,c,u),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=l}acquireToken(e){try{const r={popupName:this.generatePopupName(e.scopes||Rs,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r))}catch(t){return Promise.reject(t)}}logout(e){try{this.logger.verbose("logoutPopup called");const t=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(t),popupWindowAttributes:(e==null?void 0:e.popupWindowAttributes)||{},popupWindowParent:(e==null?void 0:e.popupWindowParent)??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(t,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(t,r,o,i))}catch(t){return Promise.reject(t)}}async acquireTokenPopupAsync(e,t){var i;this.logger.verbose("acquireTokenPopupAsync called");const r=this.initializeServerTelemetryManager(Ae.acquireTokenPopup),o=await P(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,j.Popup);VE(o.authority);try{const s=await P(this.initializeAuthorizationCodeRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(o),a=await P(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),l=ar.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme);let c;l&&(c=this.performanceClient.startMeasurement(T.FetchAccountIdWithNativeBroker,e.correlationId));const u=await a.getAuthCodeUrl({...o,nativeBroker:l}),d=new Vm(a,this.browserStorage,s,this.logger,this.performanceClient),h=this.initiateAuthRequest(u,t);this.eventHandler.emitEvent(z.POPUP_OPENED,j.Popup,{popupWindow:h},null);const f=await this.monitorPopupForHash(h,t.popupWindowParent),p=Ci(YE,T.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(f,this.config.auth.OIDCOptions.serverResponseType,this.logger);if(ir.removeThrottle(this.browserStorage,this.config.auth.clientId,s),p.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),c&&c.end({success:!0,isNativeBroker:!0}),!this.nativeMessageHandler)throw B(ll);const v=new ns(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ae.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,p.accountId,this.nativeStorage,o.correlationId),{userRequestState:g}=$n.parseRequestState(this.browserCrypto,o.state);return await v.acquireToken({...o,state:g,prompt:void 0})}return await d.handleCodeResponse(p,o)}catch(s){throw(i=t.popup)==null||i.close(),s instanceof Me&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),s}}async logoutPopupAsync(e,t,r,o){var s,a,l,c;this.logger.verbose("logoutPopupAsync called"),this.eventHandler.emitEvent(z.LOGOUT_START,j.Popup,e);const i=this.initializeServerTelemetryManager(Ae.logoutPopup);try{await this.clearCacheOnLogout(e.account);const u=await P(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:i,requestAuthority:r,account:e.account||void 0});try{u.authority.endSessionEndpoint}catch{if((s=e.account)!=null&&s.homeAccountId&&e.postLogoutRedirectUri&&u.authority.protocolMode===Rr.OIDC){if(this.browserStorage.removeAccount((a=e.account)==null?void 0:a.homeAccountId),this.eventHandler.emitEvent(z.LOGOUT_SUCCESS,j.Popup,e),o){const f={apiId:Ae.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},p=ae.getAbsoluteUrl(o,Ir());await this.navigationClient.navigateInternal(p,f)}(l=t.popup)==null||l.close();return}}const d=u.getLogoutUri(e);this.eventHandler.emitEvent(z.LOGOUT_SUCCESS,j.Popup,e);const h=this.openPopup(d,t);if(this.eventHandler.emitEvent(z.POPUP_OPENED,j.Popup,{popupWindow:h},null),await this.monitorPopupForHash(h,t.popupWindowParent).catch(()=>{}),o){const f={apiId:Ae.logoutPopup,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},p=ae.getAbsoluteUrl(o,Ir());this.logger.verbose("Redirecting main window to url specified in the request"),this.logger.verbosePii(`Redirecting main window to: ${p}`),await this.navigationClient.navigateInternal(p,f)}else this.logger.verbose("No main window navigation requested")}catch(u){throw(c=t.popup)==null||c.close(),u instanceof Me&&(u.setCorrelationId(this.correlationId),i.cacheFailedRequest(u)),this.browserStorage.setInteractionInProgress(!1),this.eventHandler.emitEvent(z.LOGOUT_FAILURE,j.Popup,null,u),this.eventHandler.emitEvent(z.LOGOUT_END,j.Popup),u}this.eventHandler.emitEvent(z.LOGOUT_END,j.Popup)}initiateAuthRequest(e,t){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,t);throw this.logger.error("Navigate url is empty"),B(Wu)}monitorPopupForHash(e,t){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed){this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),o(B(li));return}let s="";try{s=e.location.href}catch{}if(!s||s==="about:blank")return;clearInterval(i);let a="";const l=this.config.auth.OIDCOptions.serverResponseType;e&&(l===al.QUERY?a=e.location.search:a=e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,t)})}openPopup(e,t){try{let r;if(t.popup?(r=t.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof t.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,t)),!r)throw B(mE);return r.focus&&r.focus(),this.currentWindow=r,t.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),B(pE)}}openSizedPopup(e,{popupName:t,popupWindowAttributes:r,popupWindowParent:o}){var f,p,m,v;const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,l=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let c=(f=r.popupSize)==null?void 0:f.width,u=(p=r.popupSize)==null?void 0:p.height,d=(m=r.popupPosition)==null?void 0:m.top,h=(v=r.popupPosition)==null?void 0:v.left;return(!c||c<0||c>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),c=un.POPUP_WIDTH),(!u||u<0||u>l)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),u=un.POPUP_HEIGHT),(!d||d<0||d>l)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,l/2-un.POPUP_HEIGHT/2+s)),(!h||h<0||h>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),h=Math.max(0,a/2-un.POPUP_WIDTH/2+i)),o.open(e,t,`width=${c}, height=${u}, top=${d}, left=${h}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(j.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,t){e.close(),t.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,t){return`${un.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${e.join("-")}.${t}.${this.correlationId}`}generateLogoutPopupName(e){const t=e.account&&e.account.homeAccountId;return`${un.POPUP_NAME_PREFIX}.${this.config.auth.clientId}.${t}.${this.correlationId}`}}/*! @azure/msal-browser v3.28.1 2025-01-14 */let vv=class{constructor(e,t,r,o,i){this.authModule=e,this.browserStorage=t,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}async initiateAuthRequest(e,t){if(this.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){t.redirectStartPage&&(this.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),this.browserStorage.setTemporaryCache(me.ORIGIN_URI,t.redirectStartPage,!0)),this.browserStorage.setTemporaryCache(me.CORRELATION_ID,this.authCodeRequest.correlationId,!0),this.browserStorage.cacheCodeRequest(this.authCodeRequest),this.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const r={apiId:Ae.acquireTokenRedirect,timeout:t.redirectTimeout,noHistory:!1};if(typeof t.onRedirectNavigate=="function")if(this.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),t.onRedirectNavigate(e)!==!1){this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),await t.navigationClient.navigateExternal(e,r);return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation");return}else{this.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),await t.navigationClient.navigateExternal(e,r);return}}else throw this.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),B(Wu)}async handleCodeResponse(e,t){this.logger.verbose("RedirectHandler.handleCodeResponse called"),this.browserStorage.setInteractionInProgress(!1);const r=this.browserStorage.generateStateKey(t),o=this.browserStorage.getTemporaryCache(r);if(!o)throw x($c,"Cached State");let i;try{i=this.authModule.handleFragmentResponse(e,o)}catch(c){throw c instanceof bo&&c.subError===li?B(li):c}const s=this.browserStorage.generateNonceKey(o),a=this.browserStorage.getTemporaryCache(s);if(this.authCodeRequest.code=i.code,i.cloud_instance_host_name&&await P(this.authModule.updateAuthority.bind(this.authModule),T.UpdateTokenEndpointAuthority,this.logger,this.performanceClient,this.authCodeRequest.correlationId)(i.cloud_instance_host_name,this.authCodeRequest.correlationId),i.nonce=a||void 0,i.state=o,i.client_info)this.authCodeRequest.clientInfo=i.client_info;else{const c=this.checkCcsCredentials();c&&(this.authCodeRequest.ccsCredential=c)}const l=await this.authModule.acquireToken(this.authCodeRequest,i);return this.browserStorage.cleanRequestByState(t),l}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache(me.CCS_CREDENTIAL,!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}};/*! @azure/msal-browser v3.28.1 2025-01-14 */function d1(){if(typeof window>"u"||typeof window.performance>"u"||typeof window.performance.getEntriesByType!="function")return;const n=window.performance.getEntriesByType("navigation"),e=n.length?n[0]:void 0;return e==null?void 0:e.type}class h1 extends Ns{constructor(e,t,r,o,i,s,a,l,c,u){super(e,t,r,o,i,s,a,c,u),this.nativeStorage=l}async acquireToken(e){const t=await P(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,this.correlationId)(e,j.Redirect);this.browserStorage.updateCacheEntries(t.state,t.nonce,t.authority,t.loginHint||"",t.account||null);const r=this.initializeServerTelemetryManager(Ae.acquireTokenRedirect),o=i=>{i.persisted&&(this.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),this.browserStorage.cleanRequestByState(t.state),this.eventHandler.emitEvent(z.RESTORE_FROM_BFCACHE,j.Redirect))};try{const i=await P(this.initializeAuthorizationCodeRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,this.correlationId)(t),s=await P(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),a=new vv(s,this.browserStorage,i,this.logger,this.performanceClient),l=await s.getAuthCodeUrl({...t,nativeBroker:ar.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,e.authenticationScheme)}),c=this.getRedirectStartPage(e.redirectStartPage);return this.logger.verbosePii(`Redirect start page: ${c}`),window.addEventListener("pageshow",o),await a.initiateAuthRequest(l,{navigationClient:this.navigationClient,redirectTimeout:this.config.system.redirectNavigationTimeout,redirectStartPage:c,onRedirectNavigate:e.onRedirectNavigate||this.config.auth.onRedirectNavigate})}catch(i){throw i instanceof Me&&(i.setCorrelationId(this.correlationId),r.cacheFailedRequest(i)),window.removeEventListener("pageshow",o),this.browserStorage.cleanRequestByState(t.state),i}}async handleRedirectPromise(e="",t){const r=this.initializeServerTelemetryManager(Ae.handleRedirectPromise);try{if(!this.browserStorage.isInteractionInProgress(!0))return this.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[o,i]=this.getRedirectResponse(e||"");if(!o)return this.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),this.browserStorage.cleanRequestByInteractionType(j.Redirect),d1()!=="back_forward"?t.event.errorCode="no_server_response":this.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const s=this.browserStorage.getTemporaryCache(me.ORIGIN_URI,!0)||b.EMPTY_STRING,a=ae.removeHashFromUrl(s),l=ae.removeHashFromUrl(window.location.href);if(a===l&&this.config.auth.navigateToLoginRequestUrl)return this.logger.verbose("Current page is loginRequestUrl, handling response"),s.indexOf("#")>-1&&Cx(s),await this.handleResponse(o,r);if(this.config.auth.navigateToLoginRequestUrl){if(!zm()||this.config.system.allowRedirectInIframe){this.browserStorage.setTemporaryCache(me.URL_HASH,i,!0);const c={apiId:Ae.handleRedirectPromise,timeout:this.config.system.redirectNavigationTimeout,noHistory:!0};let u=!0;if(!s||s==="null"){const d=wx();this.browserStorage.setTemporaryCache(me.ORIGIN_URI,d,!0),this.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),u=await this.navigationClient.navigateInternal(d,c)}else this.logger.verbose(`Navigating to loginRequestUrl: ${s}`),u=await this.navigationClient.navigateInternal(s,c);if(!u)return await this.handleResponse(o,r)}}else return this.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),await this.handleResponse(o,r);return null}catch(o){throw o instanceof Me&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),this.browserStorage.cleanRequestByInteractionType(j.Redirect),o}}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let t=e;t||(this.config.auth.OIDCOptions.serverResponseType===al.QUERY?t=window.location.search:t=window.location.hash);let r=Gc(t);if(r){try{c1(r,this.browserCrypto,j.Redirect)}catch(i){return i instanceof Me&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return vx(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,t]}const o=this.browserStorage.getTemporaryCache(me.URL_HASH,!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey(me.URL_HASH)),o&&(r=Gc(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}async handleResponse(e,t){const r=e.state;if(!r)throw B(_m);const o=this.browserStorage.getCachedRequest(r);if(this.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw B(ll);const l=new ns(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ae.acquireTokenPopup,this.performanceClient,this.nativeMessageHandler,e.accountId,this.nativeStorage,o.correlationId),{userRequestState:c}=$n.parseRequestState(this.browserCrypto,r);return l.acquireToken({...o,state:c,prompt:void 0}).finally(()=>{this.browserStorage.cleanRequestByState(r)})}const i=this.browserStorage.getCachedAuthority(r);if(!i)throw B(Pm);const s=await P(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:t,requestAuthority:i});return ir.removeThrottle(this.browserStorage,this.config.auth.clientId,o),new vv(s,this.browserStorage,o,this.logger,this.performanceClient).handleCodeResponse(e,r)}async logout(e){var o,i;this.logger.verbose("logoutRedirect called");const t=this.initializeLogoutRequest(e),r=this.initializeServerTelemetryManager(Ae.logout);try{this.eventHandler.emitEvent(z.LOGOUT_START,j.Redirect,e),await this.clearCacheOnLogout(t.account);const s={apiId:Ae.logout,timeout:this.config.system.redirectNavigationTimeout,noHistory:!1},a=await P(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:r,requestAuthority:e&&e.authority,requestExtraQueryParameters:e==null?void 0:e.extraQueryParameters,account:e&&e.account||void 0});if(a.authority.protocolMode===Rr.OIDC)try{a.authority.endSessionEndpoint}catch{if((o=t.account)!=null&&o.homeAccountId){this.browserStorage.removeAccount((i=t.account)==null?void 0:i.homeAccountId),this.eventHandler.emitEvent(z.LOGOUT_SUCCESS,j.Redirect,t);return}}const l=a.getLogoutUri(t);if(this.eventHandler.emitEvent(z.LOGOUT_SUCCESS,j.Redirect,t),e&&typeof e.onRedirectNavigate=="function")if(e.onRedirectNavigate(l)!==!1){this.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(l,s);return}else this.browserStorage.setInteractionInProgress(!1),this.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation");else{this.browserStorage.getInteractionInProgress()||this.browserStorage.setInteractionInProgress(!0),await this.navigationClient.navigateExternal(l,s);return}}catch(s){throw s instanceof Me&&(s.setCorrelationId(this.correlationId),r.cacheFailedRequest(s)),this.eventHandler.emitEvent(z.LOGOUT_FAILURE,j.Redirect,null,s),this.eventHandler.emitEvent(z.LOGOUT_END,j.Redirect),s}this.eventHandler.emitEvent(z.LOGOUT_END,j.Redirect)}getRedirectStartPage(e){const t=e||window.location.href;return ae.getAbsoluteUrl(t,Ir())}}/*! @azure/msal-browser v3.28.1 2025-01-14 */async function f1(n,e,t,r,o){if(e.addQueueMeasurement(T.SilentHandlerInitiateAuthRequest,r),!n)throw t.info("Navigate url is empty"),B(Wu);return o?P(m1,T.SilentHandlerLoadFrame,t,e,r)(n,o,e,r):Ci(g1,T.SilentHandlerLoadFrameSync,t,e,r)(n)}async function p1(n,e,t,r,o,i,s){return r.addQueueMeasurement(T.SilentHandlerMonitorIframeForHash,i),new Promise((a,l)=>{e<Mf&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (${Mf}ms). This may result in timeouts.`);const c=window.setTimeout(()=>{window.clearInterval(u),l(B(gE))},e),u=window.setInterval(()=>{let d="";const h=n.contentWindow;try{d=h?h.location.href:""}catch{}if(!d||d==="about:blank")return;let f="";h&&(s===al.QUERY?f=h.location.search:f=h.location.hash),window.clearTimeout(c),window.clearInterval(u),a(f)},t)}).finally(()=>{Ci(y1,T.RemoveHiddenIframe,o,r,i)(n)})}function m1(n,e,t,r){return t.addQueueMeasurement(T.SilentHandlerLoadFrame,r),new Promise((o,i)=>{const s=JE();window.setTimeout(()=>{if(!s){i("Unable to load iframe");return}s.src=n,o(s)},e)})}function g1(n){const e=JE();return e.src=n,e}function JE(){const n=document.createElement("iframe");return n.className="msalSilentIframe",n.style.visibility="hidden",n.style.position="absolute",n.style.width=n.style.height="0",n.style.border="0",n.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(n),n}function y1(n){document.body===n.parentNode&&document.body.removeChild(n)}/*! @azure/msal-browser v3.28.1 2025-01-14 */class v1 extends Ns{constructor(e,t,r,o,i,s,a,l,c,u,d){super(e,t,r,o,i,s,l,u,d),this.apiId=a,this.nativeStorage=c}async acquireToken(e){this.performanceClient.addQueueMeasurement(T.SilentIframeClientAcquireToken,e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&this.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const t={...e};t.prompt?t.prompt!==st.NONE&&t.prompt!==st.NO_SESSION&&(this.logger.warning(`SilentIframeClient. Replacing invalid prompt ${t.prompt} with ${st.NONE}`),t.prompt=st.NONE):t.prompt=st.NONE;const r=await P(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,j.Silent);VE(r.authority);const o=this.initializeServerTelemetryManager(this.apiId);let i;try{return i=await P(this.createAuthCodeClient.bind(this),T.StandardInteractionClientCreateAuthCodeClient,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),await P(this.silentTokenHelper.bind(this),T.SilentIframeClientTokenHelper,this.logger,this.performanceClient,e.correlationId)(i,r)}catch(s){if(s instanceof Me&&(s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s)),!i||!(s instanceof Me)||s.errorCode!==un.INVALID_GRANT_ERROR)throw s;this.performanceClient.addFields({retryError:s.errorCode},this.correlationId);const a=await P(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(t,j.Silent);return await P(this.silentTokenHelper.bind(this),T.SilentIframeClientTokenHelper,this.logger,this.performanceClient,this.correlationId)(i,a)}}logout(){return Promise.reject(B(qu))}async silentTokenHelper(e,t){const r=t.correlationId;this.performanceClient.addQueueMeasurement(T.SilentIframeClientTokenHelper,r);const o=await P(this.initializeAuthorizationCodeRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationCodeRequest,this.logger,this.performanceClient,r)(t),i=await P(e.getAuthCodeUrl.bind(e),T.GetAuthCodeUrl,this.logger,this.performanceClient,r)({...t,nativeBroker:ar.isNativeAvailable(this.config,this.logger,this.nativeMessageHandler,t.authenticationScheme)}),s=new Vm(e,this.browserStorage,o,this.logger,this.performanceClient),a=await P(f1,T.SilentHandlerInitiateAuthRequest,this.logger,this.performanceClient,r)(i,this.performanceClient,this.logger,r,this.config.system.navigateFrameWait),l=this.config.auth.OIDCOptions.serverResponseType,c=await P(p1,T.SilentHandlerMonitorIframeForHash,this.logger,this.performanceClient,r)(a,this.config.system.iframeHashTimeout,this.config.system.pollIntervalMilliseconds,this.performanceClient,this.logger,r,l),u=Ci(YE,T.DeserializeResponse,this.logger,this.performanceClient,this.correlationId)(c,l,this.logger);if(u.accountId){if(this.logger.verbose("Account id found in hash, calling WAM for token"),!this.nativeMessageHandler)throw B(ll);const d=new ns(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.apiId,this.performanceClient,this.nativeMessageHandler,u.accountId,this.browserStorage,r),{userRequestState:h}=$n.parseRequestState(this.browserCrypto,t.state);return P(d.acquireToken.bind(d),T.NativeInteractionClientAcquireToken,this.logger,this.performanceClient,r)({...t,state:h,prompt:t.prompt||st.NONE})}return P(s.handleCodeResponse.bind(s),T.HandleCodeResponse,this.logger,this.performanceClient,r)(u,t)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class C1 extends Ns{async acquireToken(e){this.performanceClient.addQueueMeasurement(T.SilentRefreshClientAcquireToken,e.correlationId);const t=await P($m,T.InitializeBaseRequest,this.logger,this.performanceClient,e.correlationId)(e,this.config,this.performanceClient,this.logger),r={...e,...t};e.redirectUri&&(r.redirectUri=this.getRedirectUri(e.redirectUri));const o=this.initializeServerTelemetryManager(Ae.acquireTokenSilent_silentFlow),i=await this.createRefreshTokenClient({serverTelemetryManager:o,authorityUrl:r.authority,azureCloudOptions:r.azureCloudOptions,account:r.account});return P(i.acquireTokenByRefreshToken.bind(i),T.RefreshTokenClientAcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(r).catch(s=>{throw s.setCorrelationId(this.correlationId),o.cacheFailedRequest(s),s})}logout(){return Promise.reject(B(qu))}async createRefreshTokenClient(e){const t=await P(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,this.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new Rf(t,this.performanceClient)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class S1{constructor(e,t,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=t,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,t,r){if(!this.isBrowserEnvironment)throw B(Gu);const o=t.id_token?vi(t.id_token,dr):void 0,i={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},s=e.authority?new At(At.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,i,this.logger,e.correlationId||Lr()):void 0,a=this.loadAccount(e,r.clientInfo||t.client_info||"",o,s),l=this.loadIdToken(t,a.homeAccountId,a.environment,a.realm),c=this.loadAccessToken(e,t,a.homeAccountId,a.environment,a.realm,r),u=this.loadRefreshToken(t,a.homeAccountId,a.environment);return this.generateAuthenticationResult(e,{account:a,idToken:l,accessToken:c,refreshToken:u},o,s)}loadAccount(e,t,r,o){if(this.logger.verbose("TokenCache - loading account"),e.account){const l=tt.createFromAccountInfo(e.account);return this.storage.setAccount(l),l}else if(!o||!t&&!r)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),B(IE);const i=tt.generateHomeAccountId(t,o.authorityType,this.logger,this.cryptoObj,r),s=r==null?void 0:r.tid,a=Nm(this.storage,o,i,dr,r,t,o.hostnameAndPort,s,void 0,void 0,this.logger);return this.storage.setAccount(a),a}loadIdToken(e,t,r,o){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const i=Bu(t,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(i),i}loadAccessToken(e,t,r,o,i,s){if(t.access_token)if(t.expires_in){if(!t.scope&&(!e.scopes||!e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null}else return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;else return this.logger.verbose("TokenCache - no access token found in response"),null;this.logger.verbose("TokenCache - loading access token");const a=t.scope?je.fromString(t.scope):new je(e.scopes),l=s.expiresOn||t.expires_in+new Date().getTime()/1e3,c=s.extendedExpiresOn||(t.ext_expires_in||t.expires_in)+new Date().getTime()/1e3,u=zu(r,o,t.access_token,this.config.auth.clientId,i,a.printScopes(),l,c,dr);return this.storage.setAccessTokenCredential(u),u}loadRefreshToken(e,t,r){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const o=_T(t,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(o),o}generateAuthenticationResult(e,t,r,o){var u,d,h;let i="",s=[],a=null,l;t!=null&&t.accessToken&&(i=t.accessToken.secret,s=je.fromString(t.accessToken.target).asArray(),a=new Date(Number(t.accessToken.expiresOn)*1e3),l=new Date(Number(t.accessToken.extendedExpiresOn)*1e3));const c=t.account;return{authority:o?o.canonicalAuthority:"",uniqueId:t.account.localAccountId,tenantId:t.account.realm,scopes:s,account:c.getAccountInfo(),idToken:((u=t.idToken)==null?void 0:u.secret)||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:l,familyId:((d=t.refreshToken)==null?void 0:d.familyId)||"",tokenType:((h=t==null?void 0:t.accessToken)==null?void 0:h.tokenType)||"",state:e.state||"",cloudGraphHostName:c.cloudGraphHostName||"",msGraphHost:c.msGraphHost||"",fromNativeBroker:!1}}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class w1 extends iE{constructor(e){super(e),this.includeRedirectUri=!1}}/*! @azure/msal-browser v3.28.1 2025-01-14 */class T1 extends Ns{constructor(e,t,r,o,i,s,a,l,c,u){super(e,t,r,o,i,s,l,c,u),this.apiId=a}async acquireToken(e){if(!e.code)throw B(AE);const t=await P(this.initializeAuthorizationRequest.bind(this),T.StandardInteractionClientInitializeAuthorizationRequest,this.logger,this.performanceClient,e.correlationId)(e,j.Silent),r=this.initializeServerTelemetryManager(this.apiId);try{const o={...t,code:e.code},i=await P(this.getClientConfiguration.bind(this),T.StandardInteractionClientGetClientConfiguration,this.logger,this.performanceClient,e.correlationId)({serverTelemetryManager:r,requestAuthority:t.authority,requestAzureCloudOptions:t.azureCloudOptions,requestExtraQueryParameters:t.extraQueryParameters,account:t.account}),s=new w1(i);this.logger.verbose("Auth code client created");const a=new Vm(s,this.browserStorage,o,this.logger,this.performanceClient);return await P(a.handleCodeResponseFromServer.bind(a),T.HandleCodeResponseFromServer,this.logger,this.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},t,!1)}catch(o){throw o instanceof Me&&(o.setCorrelationId(this.correlationId),r.cacheFailedRequest(o)),o}}logout(){return Promise.reject(B(qu))}}/*! @azure/msal-browser v3.28.1 2025-01-14 */function er(n){const e=n==null?void 0:n.idTokenClaims;if(e!=null&&e.tfp||e!=null&&e.acr)return"B2C";if(e!=null&&e.tid){if((e==null?void 0:e.tid)==="9188040d-6c67-4c5b-b112-36a304b66dad")return"MSA"}else return;return"AAD"}function $l(n,e){try{Km(n)}catch(t){throw e.end({success:!1},t),t}}class Xu{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new ys(this.logger,this.performanceClient):Vc,this.eventHandler=new Gx(this.logger),this.browserStorage=this.isBrowserEnvironment?new Pf(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,DN(this.config.auth),this.performanceClient):Bx(this.config.auth.clientId,this.logger);const t={cacheLocation:qt.MemoryStorage,temporaryCacheLocation:qt.MemoryStorage,storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1};this.nativeInternalStorage=new Pf(this.config.auth.clientId,t,this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new S1(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static async createController(e,t){const r=new Xu(e);return await r.initialize(t),r}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}async initialize(e){if(this.logger.trace("initialize called"),this.initialized){this.logger.info("initialize has already been called, exiting early.");return}if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, exiting early."),this.initialized=!0,this.eventHandler.emitEvent(z.INITIALIZE_END);return}const t=(e==null?void 0:e.correlationId)||this.getRequestCorrelationId(),r=this.config.system.allowNativeBroker,o=this.performanceClient.startMeasurement(T.InitializeClientApplication,t);if(this.eventHandler.emitEvent(z.INITIALIZE_START),r)try{this.nativeExtensionProvider=await ar.createProvider(this.logger,this.config.system.nativeBrokerHandshakeTimeout,this.performanceClient)}catch(i){this.logger.verbose(i)}this.config.cache.claimsBasedCachingEnabled||(this.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),await P(this.browserStorage.clearTokensAndKeysWithClaims.bind(this.browserStorage),T.ClearTokensAndKeysWithClaims,this.logger,this.performanceClient,t)(this.performanceClient,t)),this.initialized=!0,this.eventHandler.emitEvent(z.INITIALIZE_END),o.end({allowNativeBroker:r,success:!0})}async handleRedirectPromise(e){if(this.logger.verbose("handleRedirectPromise called"),$E(this.initialized),this.isBrowserEnvironment){const t=e||"";let r=this.redirectResponse.get(t);return typeof r>"u"?(r=this.handleRedirectPromiseInternal(e),this.redirectResponse.set(t,r),this.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):this.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),r}return this.logger.verbose("handleRedirectPromise returns null, not browser environment"),null}async handleRedirectPromiseInternal(e){const t=this.getAllAccounts(),r=this.browserStorage.getCachedNativeRequest(),o=r&&ar.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider)&&this.nativeExtensionProvider&&!e,i=o?r==null?void 0:r.correlationId:this.browserStorage.getTemporaryCache(me.CORRELATION_ID,!0)||"",s=this.performanceClient.startMeasurement(T.AcquireTokenRedirect,i);this.eventHandler.emitEvent(z.HANDLE_REDIRECT_START,j.Redirect);let a;if(o&&this.nativeExtensionProvider){this.logger.trace("handleRedirectPromise - acquiring token from native platform");const l=new ns(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ae.handleRedirectPromise,this.performanceClient,this.nativeExtensionProvider,r.accountId,this.nativeInternalStorage,r.correlationId);a=P(l.handleRedirectPromise.bind(l),T.HandleNativeRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(this.performanceClient,s.event.correlationId)}else{this.logger.trace("handleRedirectPromise - acquiring token from web flow");const l=this.createRedirectClient(i);a=P(l.handleRedirectPromise.bind(l),T.HandleRedirectPromiseMeasurement,this.logger,this.performanceClient,s.event.correlationId)(e,s)}return a.then(l=>(l?(t.length<this.getAllAccounts().length?(this.eventHandler.emitEvent(z.LOGIN_SUCCESS,j.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, login success")):(this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_SUCCESS,j.Redirect,l),this.logger.verbose("handleRedirectResponse returned result, acquire token success")),s.end({success:!0,accountType:er(l.account)})):s.event.errorCode?s.end({success:!1}):s.discard(),this.eventHandler.emitEvent(z.HANDLE_REDIRECT_END,j.Redirect),l)).catch(l=>{const c=l;throw t.length>0?this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_FAILURE,j.Redirect,null,c):this.eventHandler.emitEvent(z.LOGIN_FAILURE,j.Redirect,null,c),this.eventHandler.emitEvent(z.HANDLE_REDIRECT_END,j.Redirect),s.end({success:!1},c),l})}async acquireTokenRedirect(e){const t=this.getRequestCorrelationId(e);this.logger.verbose("acquireTokenRedirect called",t);const r=this.performanceClient.startMeasurement(T.AcquireTokenPreRedirect,t);r.add({accountType:er(e.account),scenarioId:e.scenarioId});const o=e.onRedirectNavigate;if(o)e.onRedirectNavigate=s=>{const a=typeof o=="function"?o(s):void 0;return a!==!1?r.end({success:!0}):r.discard(),a};else{const s=this.config.auth.onRedirectNavigate;this.config.auth.onRedirectNavigate=a=>{const l=typeof s=="function"?s(a):void 0;return l!==!1?r.end({success:!0}):r.discard(),l}}const i=this.getAllAccounts().length>0;try{pv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),i?this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_START,j.Redirect,e):this.eventHandler.emitEvent(z.LOGIN_START,j.Redirect,e);let s;return this.nativeExtensionProvider&&this.canUseNative(e)?s=new ns(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ae.acquireTokenRedirect,this.performanceClient,this.nativeExtensionProvider,this.getNativeAccountId(e),this.nativeInternalStorage,t).acquireTokenRedirect(e,r).catch(l=>{if(l instanceof sr&&Ni(l))return this.nativeExtensionProvider=void 0,this.createRedirectClient(t).acquireToken(e);if(l instanceof Wn)return this.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createRedirectClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),l}):s=this.createRedirectClient(t).acquireToken(e),await s}catch(s){throw r.end({success:!1},s),i?this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_FAILURE,j.Redirect,null,s):this.eventHandler.emitEvent(z.LOGIN_FAILURE,j.Redirect,null,s),s}}acquireTokenPopup(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(T.AcquireTokenPopup,t);r.add({scenarioId:e.scenarioId,accountType:er(e.account)});try{this.logger.verbose("acquireTokenPopup called",t),$l(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}const o=this.getAllAccounts();o.length>0?this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_START,j.Popup,e):this.eventHandler.emitEvent(z.LOGIN_START,j.Popup,e);let i;return this.canUseNative(e)?i=this.acquireTokenNative({...e,correlationId:t},Ae.acquireTokenPopup).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,accountType:er(s.account)}),s)).catch(s=>{if(s instanceof sr&&Ni(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(t).acquireToken(e);if(s instanceof Wn)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(t).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):i=this.createPopupClient(t).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent(z.LOGIN_SUCCESS,j.Popup,s):this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_SUCCESS,j.Popup,s),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:er(s.account)}),s)).catch(s=>(o.length>0?this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_FAILURE,j.Popup,null,s):this.eventHandler.emitEvent(z.LOGIN_FAILURE,j.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}async ssoSilent(e){var i,s;const t=this.getRequestCorrelationId(e),r={...e,prompt:e.prompt,correlationId:t};this.ssoSilentMeasurement=this.performanceClient.startMeasurement(T.SsoSilent,t),(i=this.ssoSilentMeasurement)==null||i.add({scenarioId:e.scenarioId,accountType:er(e.account)}),$l(this.initialized,this.ssoSilentMeasurement),(s=this.ssoSilentMeasurement)==null||s.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),this.logger.verbose("ssoSilent called",t),this.eventHandler.emitEvent(z.SSO_SILENT_START,j.Silent,r);let o;return this.canUseNative(r)?o=this.acquireTokenNative(r,Ae.ssoSilent).catch(a=>{if(a instanceof sr&&Ni(a))return this.nativeExtensionProvider=void 0,this.createSilentIframeClient(r.correlationId).acquireToken(r);throw a}):o=this.createSilentIframeClient(r.correlationId).acquireToken(r),o.then(a=>{var l;return this.eventHandler.emitEvent(z.SSO_SILENT_SUCCESS,j.Silent,a),(l=this.ssoSilentMeasurement)==null||l.end({success:!0,isNativeBroker:a.fromNativeBroker,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:er(a.account)}),a}).catch(a=>{var l;throw this.eventHandler.emitEvent(z.SSO_SILENT_FAILURE,j.Silent,null,a),(l=this.ssoSilentMeasurement)==null||l.end({success:!1},a),a}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenByCode(e){const t=this.getRequestCorrelationId(e);this.logger.trace("acquireTokenByCode called",t);const r=this.performanceClient.startMeasurement(T.AcquireTokenByCode,t);$l(this.initialized,r),this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_BY_CODE_START,j.Silent,e),r.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw B(RE);if(e.code){const o=e.code;let i=this.hybridAuthCodeResponses.get(o);return i?(this.logger.verbose("Existing acquireTokenByCode request found",t),r.discard()):(this.logger.verbose("Initiating new acquireTokenByCode request",t),i=this.acquireTokenByCodeAsync({...e,correlationId:t}).then(s=>(this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_BY_CODE_SUCCESS,j.Silent,s),this.hybridAuthCodeResponses.delete(o),r.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:er(s.account)}),s)).catch(s=>{throw this.hybridAuthCodeResponses.delete(o),this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_BY_CODE_FAILURE,j.Silent,null,s),r.end({success:!1},s),s}),this.hybridAuthCodeResponses.set(o,i)),await i}else if(e.nativeAccountId)if(this.canUseNative(e,e.nativeAccountId)){const o=await this.acquireTokenNative({...e,correlationId:t},Ae.acquireTokenByCode,e.nativeAccountId).catch(i=>{throw i instanceof sr&&Ni(i)&&(this.nativeExtensionProvider=void 0),i});return r.end({accountType:er(o.account),success:!0}),o}else throw B(NE);else throw B(bE)}catch(o){throw this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_BY_CODE_FAILURE,j.Silent,null,o),r.end({success:!1},o),o}}async acquireTokenByCodeAsync(e){var o;return this.logger.trace("acquireTokenByCodeAsync called",e.correlationId),this.acquireTokenByCodeAsyncMeasurement=this.performanceClient.startMeasurement(T.AcquireTokenByCodeAsync,e.correlationId),(o=this.acquireTokenByCodeAsyncMeasurement)==null||o.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement),await this.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>{var s;return(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker}),i}).catch(i=>{var s;throw(s=this.acquireTokenByCodeAsyncMeasurement)==null||s.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",this.trackPageVisibilityWithMeasurement)})}async acquireTokenFromCache(e,t){switch(this.performanceClient.addQueueMeasurement(T.AcquireTokenFromCache,e.correlationId),t){case sn.Default:case sn.AccessToken:case sn.AccessTokenAndRefreshToken:const r=this.createSilentCacheClient(e.correlationId);return P(r.acquireToken.bind(r),T.SilentCacheClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw x(kr)}}async acquireTokenByRefreshToken(e,t){switch(this.performanceClient.addQueueMeasurement(T.AcquireTokenByRefreshToken,e.correlationId),t){case sn.Default:case sn.AccessTokenAndRefreshToken:case sn.RefreshToken:case sn.RefreshTokenAndNetwork:const r=this.createSilentRefreshClient(e.correlationId);return P(r.acquireToken.bind(r),T.SilentRefreshClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e);default:throw x(kr)}}async acquireTokenBySilentIframe(e){this.performanceClient.addQueueMeasurement(T.AcquireTokenBySilentIframe,e.correlationId);const t=this.createSilentIframeClient(e.correlationId);return P(t.acquireToken.bind(t),T.SilentIframeClientAcquireToken,this.logger,this.performanceClient,e.correlationId)(e)}async logout(e){const t=this.getRequestCorrelationId(e);return this.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",t),this.logoutRedirect({correlationId:t,...e})}async logoutRedirect(e){const t=this.getRequestCorrelationId(e);return pv(this.initialized,this.config),this.browserStorage.setInteractionInProgress(!0),this.createRedirectClient(t).logout(e)}logoutPopup(e){try{const t=this.getRequestCorrelationId(e);return Km(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(t).logout(e)}catch(t){return Promise.reject(t)}}async clearCache(e){if(!this.isBrowserEnvironment){this.logger.info("in non-browser environment, returning early.");return}const t=this.getRequestCorrelationId(e);return this.createSilentCacheClient(t).logout(e)}getAllAccounts(e){return zx(this.logger,this.browserStorage,this.isBrowserEnvironment,e)}getAccount(e){return Kx(e,this.logger,this.browserStorage)}getAccountByUsername(e){return jx(e,this.logger,this.browserStorage)}getAccountByHomeId(e){return $x(e,this.logger,this.browserStorage)}getAccountByLocalId(e){return Vx(e,this.logger,this.browserStorage)}setActiveAccount(e){Wx(e,this.browserStorage)}getActiveAccount(){return qx(this.browserStorage)}async hydrateCache(e,t){this.logger.verbose("hydrateCache called");const r=tt.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return this.browserStorage.setAccount(r),e.fromNativeBroker?(this.logger.verbose("Response was from native broker, storing in-memory"),this.nativeInternalStorage.hydrateCache(e,t)):this.browserStorage.hydrateCache(e,t)}async acquireTokenNative(e,t,r){if(this.logger.trace("acquireTokenNative called"),!this.nativeExtensionProvider)throw B(ll);return new ns(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,t,this.performanceClient,this.nativeExtensionProvider,r||this.getNativeAccountId(e),this.nativeInternalStorage,e.correlationId).acquireToken(e)}canUseNative(e,t){if(this.logger.trace("canUseNative called"),!ar.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case st.NONE:case st.CONSENT:case st.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!t&&!this.getNativeAccountId(e)?(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),!1):!0}getNativeAccountId(e){const t=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return t&&t.nativeAccountId||""}createPopupClient(e){return new u1(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new h1(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new v1(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ae.ssoSilent,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new QE(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new C1(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new T1(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,Ae.acquireTokenByCode,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,t){return this.eventHandler.addEventCallback(e,t)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return jE(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){var t;try{(t=e.key)!=null&&t.includes(nt.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent(z.ACTIVE_ACCOUNT_CHANGED);const r=e.newValue||e.oldValue;if(!r)return;const o=JSON.parse(r);if(typeof o!="object"||!tt.isAccountEntity(o))return;const s=ms.toObject(new tt,o).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent(z.ACCOUNT_ADDED,void 0,s)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent(z.ACCOUNT_REMOVED,void 0,s))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,t){this.browserStorage.setWrapperMetadata(e,t)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e!=null&&e.correlationId?e.correlationId:this.isBrowserEnvironment?Lr():b.EMPTY_STRING}async loginRedirect(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginRedirect called",t),this.acquireTokenRedirect({correlationId:t,...e||dv})}loginPopup(e){const t=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",t),this.acquireTokenPopup({correlationId:t,...e||dv})}async acquireTokenSilent(e){const t=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement(T.AcquireTokenSilent,t);r.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),$l(this.initialized,r),this.logger.verbose("acquireTokenSilent called",t);const o=e.account||this.getActiveAccount();if(!o)throw B(SE);r.add({accountType:er(o)});const i={clientId:this.config.auth.clientId,authority:e.authority||b.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:o.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions},s=JSON.stringify(i),a=this.activeSilentTokenRequests.get(s);if(typeof a>"u"){this.logger.verbose("acquireTokenSilent called for the first time, storing active request",t);const l=P(this.acquireTokenSilentAsync.bind(this),T.AcquireTokenSilentAsync,this.logger,this.performanceClient,t)({...e,correlationId:t},o).then(c=>(this.activeSilentTokenRequests.delete(s),r.end({success:!0,fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:c.accessToken.length,idTokenSize:c.idToken.length}),c)).catch(c=>{throw this.activeSilentTokenRequests.delete(s),r.end({success:!1},c),c});return this.activeSilentTokenRequests.set(s,l),{...await l,state:e.state}}else return this.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",t),r.discard(),{...await a,state:e.state}}async acquireTokenSilentAsync(e,t){const r=()=>this.trackPageVisibility(e.correlationId);this.performanceClient.addQueueMeasurement(T.AcquireTokenSilentAsync,e.correlationId),this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_START,j.Silent,e),e.correlationId&&this.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",r);const o=await P(Zx,T.InitializeSilentRequest,this.logger,this.performanceClient,e.correlationId)(e,t,this.config,this.performanceClient,this.logger),i=e.cacheLookupPolicy||sn.Default;return this.acquireTokenSilentNoIframe(o,i).catch(async a=>{if(E1(a,i))if(this.activeIframeRequest)if(i!==sn.Skip){const[c,u]=this.activeIframeRequest;this.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${u}`,o.correlationId);const d=this.performanceClient.startMeasurement(T.AwaitConcurrentIframe,o.correlationId);d.add({awaitIframeCorrelationId:u});const h=await c;if(d.end({success:h}),h)return this.logger.verbose(`Parallel iframe request with correlationId: ${u} succeeded. Retrying cache and/or RT redemption`,o.correlationId),this.acquireTokenSilentNoIframe(o,i);throw this.logger.info(`Iframe request with correlationId: ${u} failed. Interaction is required.`),a}else return this.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",o.correlationId),P(this.acquireTokenBySilentIframe.bind(this),T.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o);else{let c;return this.activeIframeRequest=[new Promise(u=>{c=u}),o.correlationId],this.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",o.correlationId),P(this.acquireTokenBySilentIframe.bind(this),T.AcquireTokenBySilentIframe,this.logger,this.performanceClient,o.correlationId)(o).then(u=>(c(!0),u)).catch(u=>{throw c(!1),u}).finally(()=>{this.activeIframeRequest=void 0})}else throw a}).then(a=>(this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_SUCCESS,j.Silent,a),e.correlationId&&this.performanceClient.addFields({fromCache:a.fromCache,isNativeBroker:a.fromNativeBroker},e.correlationId),a)).catch(a=>{throw this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_FAILURE,j.Silent,null,a),a}).finally(()=>{document.removeEventListener("visibilitychange",r)})}async acquireTokenSilentNoIframe(e,t){return ar.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(this.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),this.acquireTokenNative(e,Ae.acquireTokenSilent_silentFlow).catch(async r=>{throw r instanceof sr&&Ni(r)?(this.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),this.nativeExtensionProvider=void 0,x(kr)):r})):(this.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),P(this.acquireTokenFromCache.bind(this),T.AcquireTokenFromCache,this.logger,this.performanceClient,e.correlationId)(e,t).catch(r=>{if(t===sn.AccessToken)throw r;return this.eventHandler.emitEvent(z.ACQUIRE_TOKEN_NETWORK_START,j.Silent,e),P(this.acquireTokenByRefreshToken.bind(this),T.AcquireTokenByRefreshToken,this.logger,this.performanceClient,e.correlationId)(e,t)}))}}function E1(n,e){const t=!(n instanceof Wn&&n.subError!==Vu),r=n.errorCode===un.INVALID_GRANT_ERROR||n.errorCode===kr,o=t&&r||n.errorCode===Yc||n.errorCode===Rm,i=sx.includes(e);return o&&i}/*! @azure/msal-browser v3.28.1 2025-01-14 */async function k1(n,e){const t=new ci(n);return await t.initialize(),Xu.createController(t,e)}/*! @azure/msal-browser v3.28.1 2025-01-14 */class Zu{static async createPublicClientApplication(e){const t=await k1(e);return new Zu(e,t)}constructor(e,t){this.controller=t||new Xu(new ci(e))}async initialize(e){return this.controller.initialize(e)}async acquireTokenPopup(e){return this.controller.acquireTokenPopup(e)}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,t){return this.controller.addEventCallback(e,t)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,t){return this.controller.initializeWrapperLibrary(e,t)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}async hydrateCache(e,t){return this.controller.hydrateCache(e,t)}clearCache(e){return this.controller.clearCache(e)}}/*! @azure/msal-browser v3.28.1 2025-01-14 */const I1={initialize:()=>Promise.reject(Ve(Je)),acquireTokenPopup:()=>Promise.reject(Ve(Je)),acquireTokenRedirect:()=>Promise.reject(Ve(Je)),acquireTokenSilent:()=>Promise.reject(Ve(Je)),acquireTokenByCode:()=>Promise.reject(Ve(Je)),getAllAccounts:()=>[],getAccount:()=>null,getAccountByHomeId:()=>null,getAccountByUsername:()=>null,getAccountByLocalId:()=>null,handleRedirectPromise:()=>Promise.reject(Ve(Je)),loginPopup:()=>Promise.reject(Ve(Je)),loginRedirect:()=>Promise.reject(Ve(Je)),logout:()=>Promise.reject(Ve(Je)),logoutRedirect:()=>Promise.reject(Ve(Je)),logoutPopup:()=>Promise.reject(Ve(Je)),ssoSilent:()=>Promise.reject(Ve(Je)),addEventCallback:()=>null,removeEventCallback:()=>{},addPerformanceCallback:()=>"",removePerformanceCallback:()=>!1,enableAccountStorageEvents:()=>{},disableAccountStorageEvents:()=>{},getTokenCache:()=>{throw Ve(Je)},getLogger:()=>{throw Ve(Je)},setLogger:()=>{},setActiveAccount:()=>{},getActiveAccount:()=>null,initializeWrapperLibrary:()=>{},setNavigationClient:()=>{},getConfiguration:()=>{throw Ve(Je)},hydrateCache:()=>Promise.reject(Ve(Je)),clearCache:()=>Promise.reject(Ve(Je))};/*! @azure/msal-browser v3.28.1 2025-01-14 */class A1{static getInteractionStatusFromEvent(e,t){switch(e.eventType){case z.LOGIN_START:return rt.Login;case z.SSO_SILENT_START:return rt.SsoSilent;case z.ACQUIRE_TOKEN_START:if(e.interactionType===j.Redirect||e.interactionType===j.Popup)return rt.AcquireToken;break;case z.HANDLE_REDIRECT_START:return rt.HandleRedirect;case z.LOGOUT_START:return rt.Logout;case z.SSO_SILENT_SUCCESS:case z.SSO_SILENT_FAILURE:if(t&&t!==rt.SsoSilent)break;return rt.None;case z.LOGOUT_END:if(t&&t!==rt.Logout)break;return rt.None;case z.HANDLE_REDIRECT_END:if(t&&t!==rt.HandleRedirect)break;return rt.None;case z.LOGIN_SUCCESS:case z.LOGIN_FAILURE:case z.ACQUIRE_TOKEN_SUCCESS:case z.ACQUIRE_TOKEN_FAILURE:case z.RESTORE_FROM_BFCACHE:if(e.interactionType===j.Redirect||e.interactionType===j.Popup){if(t&&t!==rt.Login&&t!==rt.AcquireToken)break;return rt.None}break}return null}}/*! @azure/msal-react v2.2.0 2024-11-05 */const b1={instance:I1,inProgress:rt.None,accounts:[],logger:new Dr({})},Wm=S.createContext(b1);Wm.Consumer;/*! @azure/msal-react v2.2.0 2024-11-05 */function Cv(n,e){if(n.length!==e.length)return!1;const t=[...e];return n.every(r=>{const o=t.shift();return!r||!o?!1:r.homeAccountId===o.homeAccountId&&r.localAccountId===o.localAccountId&&r.username===o.username})}/*! @azure/msal-react v2.2.0 2024-11-05 */const R1="@azure/msal-react",Sv="2.2.0";/*! @azure/msal-react v2.2.0 2024-11-05 */const Zc={UNBLOCK_INPROGRESS:"UNBLOCK_INPROGRESS",EVENT:"EVENT"},N1=(n,e)=>{const{type:t,payload:r}=e;let o=n.inProgress;switch(t){case Zc.UNBLOCK_INPROGRESS:n.inProgress===rt.Startup&&(o=rt.None,r.logger.info("MsalProvider - handleRedirectPromise resolved, setting inProgress to 'none'"));break;case Zc.EVENT:const s=r.message,a=A1.getInteractionStatusFromEvent(s,n.inProgress);a&&(r.logger.info(`MsalProvider - ${s.eventType} results in setting inProgress from ${n.inProgress} to ${a}`),o=a);break;default:throw new Error(`Unknown action type: ${t}`)}const i=r.instance.getAllAccounts();return o!==n.inProgress&&!Cv(i,n.accounts)?{...n,inProgress:o,accounts:i}:o!==n.inProgress?{...n,inProgress:o}:Cv(i,n.accounts)?n:{...n,accounts:i}};function x1({instance:n,children:e}){S.useEffect(()=>{n.initializeWrapperLibrary(rx.React,Sv)},[n]);const t=S.useMemo(()=>n.getLogger().clone(R1,Sv),[n]),[r,o]=S.useReducer(N1,void 0,()=>({inProgress:rt.Startup,accounts:n.getAllAccounts()}));S.useEffect(()=>{const s=n.addEventCallback(a=>{o({payload:{instance:n,logger:t,message:a},type:Zc.EVENT})});return t.verbose(`MsalProvider - Registered event callback with id: ${s}`),n.initialize().then(()=>{n.handleRedirectPromise().catch(()=>{}).finally(()=>{o({payload:{instance:n,logger:t},type:Zc.UNBLOCK_INPROGRESS})})}).catch(()=>{}),()=>{s&&(t.verbose(`MsalProvider - Removing event callback ${s}`),n.removeEventCallback(s))}},[n,t]);const i={instance:n,inProgress:r.inProgress,accounts:r.accounts,logger:t};return re.createElement(Wm.Provider,{value:i},e)}/*! @azure/msal-react v2.2.0 2024-11-05 */const qm=()=>S.useContext(Wm),XE={auth:{clientId:"9d415839-9ee7-4830-8dc3-ccf5a34af2b9",authority:"https://login.microsoftonline.com/54df8ee5-42ab-4c14-b444-1b54f749b225",redirectUri:window.location.origin},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},eu={scopes:["User.Read","User.ReadBasic.All","People.Read"]};function Ce(n,e,t,r){function o(i){return i instanceof t?i:new t(function(s){s(i)})}return new(t||(t=Promise))(function(i,s){function a(u){try{c(r.next(u))}catch(d){s(d)}}function l(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?i(u.value):o(u.value).then(a,l)}c((r=r.apply(n,e||[])).next())})}var ln;(function(n){n.GET="GET",n.PATCH="PATCH",n.POST="POST",n.PUT="PUT",n.DELETE="DELETE"})(ln||(ln={}));const O1="v1.0",M1="https://graph.microsoft.com/",_1=new Set(["graph.microsoft.com","graph.microsoft.us","dod-graph.microsoft.us","graph.microsoft.de","microsoftgraph.chinacloudapi.cn","canary.graph.microsoft.com"]);class ui extends Error{static setGraphClientError(e){let t;return e instanceof Error?t=e:(t=new ui,t.customError=e),t}constructor(e){super(e),Object.setPrototypeOf(this,ui.prototype)}}const P1=["$select","$expand","$orderby","$filter","$top","$skip","$skipToken","$count"],D1=n=>{const e=i=>i.replace(/\/+$/,""),t=i=>i.replace(/^\/+/,""),r=(i,s)=>[e(i),t(s)].join("/");return Array.prototype.slice.call(n).reduce(r)},eh=n=>{const e=n&&n.constructor&&n.constructor.name;if(e==="Buffer"||e==="Blob"||e==="File"||e==="FormData"||typeof n=="string")return n;if(e==="ArrayBuffer")n=Buffer.from(n);else if(e==="Int8Array"||e==="Int16Array"||e==="Int32Array"||e==="Uint8Array"||e==="Uint16Array"||e==="Uint32Array"||e==="Uint8ClampedArray"||e==="Float32Array"||e==="Float64Array"||e==="DataView")n=Buffer.from(n.buffer);else try{n=JSON.stringify(n)}catch{throw new Error("Unable to stringify the content")}return n},ZE=n=>tk(n),ek=(n,e)=>(e.forEach(t=>L1(t)),tk(n,e)),tk=(n,e=_1)=>{if(n=n.toLowerCase(),n.indexOf("https://")!==-1){n=n.replace("https://","");const t=n.indexOf(":"),r=n.indexOf("/");let o="";if(r!==-1)return t!==-1&&t<r?(o=n.substring(0,t),e.has(o)):(o=n.substring(0,r),e.has(o))}return!1},L1=n=>{if(n.indexOf("/")!==-1)throw new ui("Please add only hosts or hostnames to the CustomHosts config. If the url is `http://example.com:3000/`, host is `example:3000`")};class di{constructor(e=[]){this.middlewareOptions=new Map;for(const t of e){const r=t.constructor;this.middlewareOptions.set(r,t)}}getMiddlewareOptions(e){return this.middlewareOptions.get(e)}setMiddlewareOptions(e,t){this.middlewareOptions.set(e,t)}}const U1=()=>{let n="";for(let e=0;e<32;e++)(e===8||e===12||e===16||e===20)&&(n+="-"),n+=Math.floor(Math.random()*16).toString(16);return n},nk=(n,e,t)=>{let r=null;if(typeof Request<"u"&&n instanceof Request)r=n.headers.get(t);else if(typeof e<"u"&&e.headers!==void 0)if(typeof Headers<"u"&&e.headers instanceof Headers)r=e.headers.get(t);else if(e.headers instanceof Array){const o=e.headers;for(let i=0,s=o.length;i<s;i++)if(o[i][0]===t){r=o[i][1];break}}else e.headers[t]!==void 0&&(r=e.headers[t]);return r},rk=(n,e,t,r)=>{if(typeof Request<"u"&&n instanceof Request)n.headers.set(t,r);else if(typeof e<"u")if(e.headers===void 0)e.headers=new Headers({[t]:r});else if(typeof Headers<"u"&&e.headers instanceof Headers)e.headers.set(t,r);else if(e.headers instanceof Array){let o=0;const i=e.headers.length;for(;o<i;o++){const s=e.headers[o];if(s[0]===t){s[1]=r;break}}o===i&&e.headers.push([t,r])}else Object.assign(e.headers,{[t]:r})},ok=(n,e,t,r)=>{typeof Request<"u"&&n instanceof Request?n.headers.append(t,r):typeof e<"u"&&(e.headers===void 0?e.headers=new Headers({[t]:r}):typeof Headers<"u"&&e.headers instanceof Headers?e.headers.append(t,r):e.headers instanceof Array?e.headers.push([t,r]):e.headers===void 0?e.headers={[t]:r}:e.headers[t]===void 0?e.headers[t]=r:e.headers[t]+=`, ${r}`)},F1=(n,e)=>Ce(void 0,void 0,void 0,function*(){const t=e.headers.get("Content-Type")?yield e.blob():yield Promise.resolve(void 0),{method:r,headers:o,referrer:i,referrerPolicy:s,mode:a,credentials:l,cache:c,redirect:u,integrity:d,keepalive:h,signal:f}=e;return new Request(n,{method:r,headers:o,body:t,referrer:i,referrerPolicy:s,mode:a,credentials:l,cache:c,redirect:u,integrity:d,keepalive:h,signal:f})});class H1{constructor(e,t){this.authenticationProvider=e,this.authenticationProviderOptions=t}}var vs;(function(n){n[n.NONE=0]="NONE",n[n.REDIRECT_HANDLER_ENABLED=1]="REDIRECT_HANDLER_ENABLED",n[n.RETRY_HANDLER_ENABLED=2]="RETRY_HANDLER_ENABLED",n[n.AUTHENTICATION_HANDLER_ENABLED=4]="AUTHENTICATION_HANDLER_ENABLED"})(vs||(vs={}));class Co{constructor(){this.featureUsage=vs.NONE}static updateFeatureUsageFlag(e,t){let r;e.middlewareControl instanceof di?r=e.middlewareControl.getMiddlewareOptions(Co):e.middlewareControl=new di,typeof r>"u"&&(r=new Co,e.middlewareControl.setMiddlewareOptions(Co,r)),r.setFeatureUsage(t)}setFeatureUsage(e){this.featureUsage=this.featureUsage|e}getFeatureUsage(){return this.featureUsage.toString(16)}}class Ka{constructor(e){this.authenticationProvider=e}execute(e){return Ce(this,void 0,void 0,function*(){const t=typeof e.request=="string"?e.request:e.request.url;if(ZE(t)||e.customHosts&&ek(t,e.customHosts)){let r;e.middlewareControl instanceof di&&(r=e.middlewareControl.getMiddlewareOptions(H1));let o,i;r&&(o=r.authenticationProvider,i=r.authenticationProviderOptions),o||(o=this.authenticationProvider);const a=`Bearer ${yield o.getAccessToken(i)}`;ok(e.request,e.options,Ka.AUTHORIZATION_HEADER,a),Co.updateFeatureUsageFlag(e,vs.AUTHENTICATION_HANDLER_ENABLED)}else e.options.headers&&delete e.options.headers[Ka.AUTHORIZATION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}Ka.AUTHORIZATION_HEADER="Authorization";class B1{execute(e){return Ce(this,void 0,void 0,function*(){e.response=yield fetch(e.request,e.options)})}}class _e{constructor(e=_e.DEFAULT_DELAY,t=_e.DEFAULT_MAX_RETRIES,r=_e.defaultShouldRetry){if(e>_e.MAX_DELAY&&t>_e.MAX_MAX_RETRIES){const o=new Error(`Delay and MaxRetries should not be more than ${_e.MAX_DELAY} and ${_e.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(e>_e.MAX_DELAY){const o=new Error(`Delay should not be more than ${_e.MAX_DELAY}`);throw o.name="MaxLimitExceeded",o}else if(t>_e.MAX_MAX_RETRIES){const o=new Error(`MaxRetries should not be more than ${_e.MAX_MAX_RETRIES}`);throw o.name="MaxLimitExceeded",o}else if(e<0&&t<0){const o=new Error("Delay and MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}else if(e<0){const o=new Error("Delay should not be negative");throw o.name="MinExpectationNotMet",o}else if(t<0){const o=new Error("MaxRetries should not be negative");throw o.name="MinExpectationNotMet",o}this.delay=Math.min(e,_e.MAX_DELAY),this.maxRetries=Math.min(t,_e.MAX_MAX_RETRIES),this.shouldRetry=r}getMaxDelay(){return _e.MAX_DELAY}}_e.DEFAULT_DELAY=3;_e.DEFAULT_MAX_RETRIES=3;_e.MAX_DELAY=180;_e.MAX_MAX_RETRIES=10;_e.defaultShouldRetry=()=>!0;class So{constructor(e=new _e){this.options=e}isRetry(e){return So.RETRY_STATUS_CODES.indexOf(e.status)!==-1}isBuffered(e,t){const r=typeof e=="string"?t.method:e.method;return!((r===ln.PUT||r===ln.PATCH||r===ln.POST)&&nk(e,t,"Content-Type")==="application/octet-stream")}getDelay(e,t,r){const o=()=>Number(Math.random().toFixed(3)),i=e.headers!==void 0?e.headers.get(So.RETRY_AFTER_HEADER):null;let s;return i!==null?Number.isNaN(Number(i))?s=Math.round((new Date(i).getTime()-Date.now())/1e3):s=Number(i):s=t>=2?this.getExponentialBackOffTime(t)+r+o():r+o(),Math.min(s,this.options.getMaxDelay()+o())}getExponentialBackOffTime(e){return Math.round(1/2*(Math.pow(2,e)-1))}sleep(e){return Ce(this,void 0,void 0,function*(){const t=e*1e3;return new Promise(r=>setTimeout(r,t))})}getOptions(e){let t;return e.middlewareControl instanceof di&&(t=e.middlewareControl.getMiddlewareOptions(this.options.constructor)),typeof t>"u"&&(t=Object.assign(new _e,this.options)),t}executeWithRetry(e,t,r){return Ce(this,void 0,void 0,function*(){if(yield this.nextMiddleware.execute(e),t<r.maxRetries&&this.isRetry(e.response)&&this.isBuffered(e.request,e.options)&&r.shouldRetry(r.delay,t,e.request,e.options,e.response)){++t,rk(e.request,e.options,So.RETRY_ATTEMPT_HEADER,t.toString());const o=this.getDelay(e.response,t,r.delay);return yield this.sleep(o),yield this.executeWithRetry(e,t,r)}else return})}execute(e){return Ce(this,void 0,void 0,function*(){const r=this.getOptions(e);return Co.updateFeatureUsageFlag(e,vs.RETRY_HANDLER_ENABLED),yield this.executeWithRetry(e,0,r)})}setNext(e){this.nextMiddleware=e}}So.RETRY_STATUS_CODES=[429,503,504];So.RETRY_ATTEMPT_HEADER="Retry-Attempt";So.RETRY_AFTER_HEADER="Retry-After";class Rn{constructor(e=Rn.DEFAULT_MAX_REDIRECTS,t=Rn.defaultShouldRedirect){if(e>Rn.MAX_MAX_REDIRECTS){const r=new Error(`MaxRedirects should not be more than ${Rn.MAX_MAX_REDIRECTS}`);throw r.name="MaxLimitExceeded",r}if(e<0){const r=new Error("MaxRedirects should not be negative");throw r.name="MinExpectationNotMet",r}this.maxRedirects=e,this.shouldRedirect=t}}Rn.DEFAULT_MAX_REDIRECTS=5;Rn.MAX_MAX_REDIRECTS=20;Rn.defaultShouldRedirect=()=>!0;class dn{constructor(e=new Rn){this.options=e}isRedirect(e){return dn.REDIRECT_STATUS_CODES.indexOf(e.status)!==-1}hasLocationHeader(e){return e.headers.has(dn.LOCATION_HEADER)}getLocationHeader(e){return e.headers.get(dn.LOCATION_HEADER)}isRelativeURL(e){return e.indexOf("://")===-1}shouldDropAuthorizationHeader(e,t){const r=/^[A-Za-z].+?:\/\/.+?(?=\/|$)/,o=r.exec(e);let i,s;o!==null&&(i=o[0]);const a=r.exec(t);return a!==null&&(s=a[0]),typeof i<"u"&&typeof s<"u"&&i!==s}updateRequestUrl(e,t){return Ce(this,void 0,void 0,function*(){t.request=typeof t.request=="string"?e:yield F1(e,t.request)})}getOptions(e){let t;return e.middlewareControl instanceof di&&(t=e.middlewareControl.getMiddlewareOptions(Rn)),typeof t>"u"&&(t=Object.assign(new Rn,this.options)),t}executeWithRedirect(e,t,r){return Ce(this,void 0,void 0,function*(){yield this.nextMiddleware.execute(e);const o=e.response;if(t<r.maxRedirects&&this.isRedirect(o)&&this.hasLocationHeader(o)&&r.shouldRedirect(o)){if(++t,o.status===dn.STATUS_CODE_SEE_OTHER)e.options.method=ln.GET,delete e.options.body;else{const i=this.getLocationHeader(o);!this.isRelativeURL(i)&&this.shouldDropAuthorizationHeader(o.url,i)&&delete e.options.headers[dn.AUTHORIZATION_HEADER],yield this.updateRequestUrl(i,e)}yield this.executeWithRedirect(e,t,r)}else return})}execute(e){return Ce(this,void 0,void 0,function*(){const r=this.getOptions(e);return e.options.redirect=dn.MANUAL_REDIRECT,Co.updateFeatureUsageFlag(e,vs.REDIRECT_HANDLER_ENABLED),yield this.executeWithRedirect(e,0,r)})}setNext(e){this.nextMiddleware=e}}dn.REDIRECT_STATUS_CODES=[301,302,303,307,308];dn.STATUS_CODE_SEE_OTHER=303;dn.LOCATION_HEADER="Location";dn.AUTHORIZATION_HEADER="Authorization";dn.MANUAL_REDIRECT="manual";const z1="3.0.7";class cn{execute(e){return Ce(this,void 0,void 0,function*(){const t=typeof e.request=="string"?e.request:e.request.url;if(ZE(t)||e.customHosts&&ek(t,e.customHosts)){let r=nk(e.request,e.options,cn.CLIENT_REQUEST_ID_HEADER);r||(r=U1(),rk(e.request,e.options,cn.CLIENT_REQUEST_ID_HEADER,r));let o=`${cn.PRODUCT_NAME}/${z1}`,i;if(e.middlewareControl instanceof di&&(i=e.middlewareControl.getMiddlewareOptions(Co)),i){const s=i.getFeatureUsage();o+=` (${cn.FEATURE_USAGE_STRING}=${s})`}ok(e.request,e.options,cn.SDK_VERSION_HEADER,o)}else delete e.options.headers[cn.CLIENT_REQUEST_ID_HEADER],delete e.options.headers[cn.SDK_VERSION_HEADER];return yield this.nextMiddleware.execute(e)})}setNext(e){this.nextMiddleware=e}}cn.CLIENT_REQUEST_ID_HEADER="client-request-id";cn.SDK_VERSION_HEADER="SdkVersion";cn.PRODUCT_NAME="graph-js";cn.FEATURE_USAGE_STRING="featureUsage";var wv;(function(n){n[n.MANUAL=0]="MANUAL",n[n.RANDOM=1]="RANDOM"})(wv||(wv={}));var rr;(function(n){n.ARRAYBUFFER="arraybuffer",n.BLOB="blob",n.DOCUMENT="document",n.JSON="json",n.RAW="raw",n.STREAM="stream",n.TEXT="text"})(rr||(rr={}));var Lf;(function(n){n.TEXT_HTML="text/html",n.TEXT_XML="text/xml",n.APPLICATION_XML="application/xml",n.APPLICATION_XHTML="application/xhtml+xml"})(Lf||(Lf={}));var tu;(function(n){n.TEXT_PLAIN="text/plain",n.APPLICATION_JSON="application/json"})(tu||(tu={}));var nu;(function(n){n.DOCUMENT="^(text\\/(html|xml))|(application\\/(xml|xhtml\\+xml))$",n.IMAGE="^image\\/.+"})(nu||(nu={}));class fa{static parseDocumentResponse(e,t){return typeof DOMParser<"u"?new Promise((r,o)=>{e.text().then(i=>{try{const a=new DOMParser().parseFromString(i,t);r(a)}catch(s){o(s)}})}):Promise.resolve(e.body)}static convertResponse(e,t){return Ce(this,void 0,void 0,function*(){if(e.status===204)return Promise.resolve();let r;const o=e.headers.get("Content-type");switch(t){case rr.ARRAYBUFFER:r=yield e.arrayBuffer();break;case rr.BLOB:r=yield e.blob();break;case rr.DOCUMENT:r=yield fa.parseDocumentResponse(e,Lf.TEXT_XML);break;case rr.JSON:r=yield e.json();break;case rr.STREAM:r=yield Promise.resolve(e.body);break;case rr.TEXT:r=yield e.text();break;default:if(o!==null){const i=o.split(";")[0];new RegExp(nu.DOCUMENT).test(i)?r=yield fa.parseDocumentResponse(e,i):new RegExp(nu.IMAGE).test(i)?r=e.blob():i===tu.TEXT_PLAIN?r=yield e.text():i===tu.APPLICATION_JSON?r=yield e.json():r=Promise.resolve(e.body)}else r=Promise.resolve(e.body);break}return r})}static getResponse(e,t,r){return Ce(this,void 0,void 0,function*(){if(t===rr.RAW)return Promise.resolve(e);{const o=yield fa.convertResponse(e,t);if(e.ok)if(typeof r=="function")r(null,o);else return o;else throw o}})}}class K1{constructor(e){this.provider=e}getAccessToken(){return Ce(this,void 0,void 0,function*(){return new Promise((e,t)=>{this.provider((r,o)=>Ce(this,void 0,void 0,function*(){if(o)e(o);else{if(!r){const s="Access token is undefined or empty.						Please provide a valid token.						For more help - https://github.com/microsoftgraph/msgraph-sdk-javascript/blob/dev/docs/CustomAuthenticationProvider.md";r=new ui(s)}const i=yield ui.setGraphClientError(r);t(i)}}))})})}}class pa extends Error{constructor(e=-1,t,r){super(t||r&&r.message),Object.setPrototypeOf(this,pa.prototype),this.statusCode=e,this.code=null,this.requestId=null,this.date=new Date,this.body=null,this.stack=r?r.stack:this.stack}}class ru{static constructError(e,t,r){const o=new pa(t,"",e);return e.name!==void 0&&(o.code=e.name),o.body=e.toString(),o.date=new Date,o.headers=r==null?void 0:r.headers,o}static constructErrorFromResponse(e,t,r){const o=e.error,i=new pa(t,o.message);return i.code=o.code,o.innerError!==void 0&&(i.requestId=o.innerError["request-id"],i.date=new Date(o.innerError.date)),i.body=JSON.stringify(o),i.headers=r==null?void 0:r.headers,i}static getError(e=null,t=-1,r,o){return Ce(this,void 0,void 0,function*(){let i;if(e&&e.error?i=ru.constructErrorFromResponse(e,t,o):e instanceof Error?i=ru.constructError(e,t,o):(i=new pa(t),i.body=e),typeof r=="function")r(i,null);else return i})}}class j1{constructor(e,t,r){this.parsePath=o=>{if(o.indexOf("https://")!==-1){o=o.replace("https://","");const s=o.indexOf("/");s!==-1&&(this.urlComponents.host="https://"+o.substring(0,s),o=o.substring(s+1,o.length));const a=o.indexOf("/");a!==-1&&(this.urlComponents.version=o.substring(0,a),o=o.substring(a+1,o.length))}o.charAt(0)==="/"&&(o=o.substr(1));const i=o.indexOf("?");if(i===-1)this.urlComponents.path=o;else{this.urlComponents.path=o.substr(0,i);const s=o.substring(i+1,o.length).split("&");for(const a of s)this.parseQueryParameter(a)}},this.httpClient=e,this.config=t,this.urlComponents={host:this.config.baseUrl,version:this.config.defaultVersion,oDataQueryParams:{},otherURLQueryParams:{},otherURLQueryOptions:[]},this._headers={},this._options={},this._middlewareOptions=[],this.parsePath(r)}addCsvQueryParameter(e,t,r){this.urlComponents.oDataQueryParams[e]=this.urlComponents.oDataQueryParams[e]?this.urlComponents.oDataQueryParams[e]+",":"";let o=[];r.length>1&&typeof t=="string"?o=Array.prototype.slice.call(r):typeof t=="string"?o.push(t):o=o.concat(t),this.urlComponents.oDataQueryParams[e]+=o.join(",")}buildFullUrl(){const e=D1([this.urlComponents.host,this.urlComponents.version,this.urlComponents.path])+this.createQueryString();return this.config.debugLogging&&console.log(e),e}createQueryString(){const e=this.urlComponents,t=[];if(Object.keys(e.oDataQueryParams).length!==0)for(const r in e.oDataQueryParams)Object.prototype.hasOwnProperty.call(e.oDataQueryParams,r)&&t.push(r+"="+e.oDataQueryParams[r]);if(Object.keys(e.otherURLQueryParams).length!==0)for(const r in e.otherURLQueryParams)Object.prototype.hasOwnProperty.call(e.otherURLQueryParams,r)&&t.push(r+"="+e.otherURLQueryParams[r]);if(e.otherURLQueryOptions.length!==0)for(const r of e.otherURLQueryOptions)t.push(r);return t.length>0?"?"+t.join("&"):""}parseQueryParameter(e){if(typeof e=="string")if(e.charAt(0)==="?"&&(e=e.substring(1)),e.indexOf("&")!==-1){const t=e.split("&");for(const r of t)this.parseQueryParamenterString(r)}else this.parseQueryParamenterString(e);else if(e.constructor===Object)for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&this.setURLComponentsQueryParamater(t,e[t]);return this}parseQueryParamenterString(e){if(this.isValidQueryKeyValuePair(e)){const t=e.indexOf("="),r=e.substring(0,t),o=e.substring(t+1);this.setURLComponentsQueryParamater(r,o)}else this.urlComponents.otherURLQueryOptions.push(e)}setURLComponentsQueryParamater(e,t){if(P1.indexOf(e)!==-1){const r=this.urlComponents.oDataQueryParams[e],o=r&&(e==="$expand"||e==="$select"||e==="$orderby");this.urlComponents.oDataQueryParams[e]=o?r+","+t:t}else this.urlComponents.otherURLQueryParams[e]=t}isValidQueryKeyValuePair(e){const t=e.indexOf("=");return!(t===-1||e.indexOf("(")!==-1&&e.indexOf("(")<t)}updateRequestOptions(e){const t=Object.assign({},e.headers);if(this.config.fetchOptions!==void 0){const r=Object.assign({},this.config.fetchOptions);Object.assign(e,r),typeof this.config.fetchOptions.headers!==void 0&&(e.headers=Object.assign({},this.config.fetchOptions.headers))}Object.assign(e,this._options),e.headers!==void 0&&Object.assign(t,e.headers),Object.assign(t,this._headers),e.headers=t}send(e,t,r){var o;return Ce(this,void 0,void 0,function*(){let i;const s=new di(this._middlewareOptions);this.updateRequestOptions(t);const a=(o=this.config)===null||o===void 0?void 0:o.customHosts;try{return i=(yield this.httpClient.sendRequest({request:e,options:t,middlewareControl:s,customHosts:a})).response,yield fa.getResponse(i,this._responseType,r)}catch(l){if(l instanceof ui)throw l;let c;throw i&&(c=i.status),yield ru.getError(l,c,r,i)}})}setHeaderContentType(){if(!this._headers){this.header("Content-Type","application/json");return}const e=Object.keys(this._headers);for(const t of e)if(t.toLowerCase()==="content-type")return;this.header("Content-Type","application/json")}header(e,t){return this._headers[e]=t,this}headers(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this._headers[t]=e[t]);return this}option(e,t){return this._options[e]=t,this}options(e){for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(this._options[t]=e[t]);return this}middlewareOptions(e){return this._middlewareOptions=e,this}version(e){return this.urlComponents.version=e,this}responseType(e){return this._responseType=e,this}select(e){return this.addCsvQueryParameter("$select",e,arguments),this}expand(e){return this.addCsvQueryParameter("$expand",e,arguments),this}orderby(e){return this.addCsvQueryParameter("$orderby",e,arguments),this}filter(e){return this.urlComponents.oDataQueryParams.$filter=e,this}search(e){return this.urlComponents.oDataQueryParams.$search=e,this}top(e){return this.urlComponents.oDataQueryParams.$top=e,this}skip(e){return this.urlComponents.oDataQueryParams.$skip=e,this}skipToken(e){return this.urlComponents.oDataQueryParams.$skipToken=e,this}count(e=!0){return this.urlComponents.oDataQueryParams.$count=e.toString(),this}query(e){return this.parseQueryParameter(e)}get(e){return Ce(this,void 0,void 0,function*(){const t=this.buildFullUrl(),r={method:ln.GET};return yield this.send(t,r,e)})}post(e,t){return Ce(this,void 0,void 0,function*(){const r=this.buildFullUrl(),o={method:ln.POST,body:eh(e)};return(e&&e.constructor&&e.constructor.name)==="FormData"?o.headers={}:(this.setHeaderContentType(),o.headers=this._headers),yield this.send(r,o,t)})}create(e,t){return Ce(this,void 0,void 0,function*(){return yield this.post(e,t)})}put(e,t){return Ce(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const o={method:ln.PUT,body:eh(e)};return yield this.send(r,o,t)})}patch(e,t){return Ce(this,void 0,void 0,function*(){const r=this.buildFullUrl();this.setHeaderContentType();const o={method:ln.PATCH,body:eh(e)};return yield this.send(r,o,t)})}update(e,t){return Ce(this,void 0,void 0,function*(){return yield this.patch(e,t)})}delete(e){return Ce(this,void 0,void 0,function*(){const t=this.buildFullUrl(),r={method:ln.DELETE};return yield this.send(t,r,e)})}del(e){return Ce(this,void 0,void 0,function*(){return yield this.delete(e)})}getStream(e){return Ce(this,void 0,void 0,function*(){const t=this.buildFullUrl(),r={method:ln.GET};return this.responseType(rr.STREAM),yield this.send(t,r,e)})}putStream(e,t){return Ce(this,void 0,void 0,function*(){const r=this.buildFullUrl(),o={method:ln.PUT,headers:{"Content-Type":"application/octet-stream"},body:e};return yield this.send(r,o,t)})}}class ik{constructor(...e){if(!e||!e.length){const t=new Error;throw t.name="InvalidMiddlewareChain",t.message="Please provide a default middleware chain or custom middleware chain",t}this.setMiddleware(...e)}setMiddleware(...e){e.length>1?this.parseMiddleWareArray(e):this.middleware=e[0]}parseMiddleWareArray(e){e.forEach((t,r)=>{r<e.length-1&&t.setNext(e[r+1])}),this.middleware=e[0]}sendRequest(e){return Ce(this,void 0,void 0,function*(){if(typeof e.request=="string"&&e.options===void 0){const t=new Error;throw t.name="InvalidRequestOptions",t.message="Unable to execute the middleware, Please provide valid options for a request",t}return yield this.middleware.execute(e),e})}}const $1=()=>typeof process=="object"&&typeof require=="function";class Gm{static createWithAuthenticationProvider(e){const t=new Ka(e),r=new So(new _e),o=new cn,i=new B1;if(t.setNext(r),$1()){const s=new dn(new Rn);r.setNext(s),s.setNext(o)}else r.setNext(o);return o.setNext(i),Gm.createWithMiddleware(t)}static createWithMiddleware(...e){return new ik(...e)}}const V1=()=>{if(typeof Promise>"u"&&typeof fetch>"u"){const n=new Error("Library cannot function without Promise and fetch. So, please provide polyfill for them.");throw n.name="PolyFillNotAvailable",n}else if(typeof Promise>"u"){const n=new Error("Library cannot function without Promise. So, please provide polyfill for it.");throw n.name="PolyFillNotAvailable",n}else if(typeof fetch>"u"){const n=new Error("Library cannot function without fetch. So, please provide polyfill for it.");throw n.name="PolyFillNotAvailable",n}return!0};class ja{static init(e){const t={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=r==="authProvider"?new K1(e[r]):e[r]);return ja.initWithMiddleware(t)}static initWithMiddleware(e){return new ja(e)}constructor(e){this.config={baseUrl:M1,debugLogging:!1,defaultVersion:O1},V1();for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(this.config[r]=e[r]);let t;if(e.authProvider!==void 0&&e.middleware!==void 0){const r=new Error;throw r.name="AmbiguityInInitialization",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain not both",r}else if(e.authProvider!==void 0)t=Gm.createWithAuthenticationProvider(e.authProvider);else if(e.middleware!==void 0)t=new ik(...[].concat(e.middleware));else{const r=new Error;throw r.name="InvalidMiddlewareChain",r.message="Unable to Create Client, Please provide either authentication provider for default middleware chain or custom middleware chain",r}this.httpClient=t}api(e){return new j1(this.httpClient,this.config,e)}}const sk=S.createContext(void 0);function W1({children:n}){const{instance:e,accounts:t}=qm(),[r,o]=S.useState(()=>{const a=localStorage.getItem("userPhotos");return a?JSON.parse(a):{}}),i=a=>r[a.toLowerCase()],s=async a=>{if(!(!t[0]||r[a.toLowerCase()]))try{const l=await e.acquireTokenSilent({...eu,account:t[0]}),c=ja.init({authProvider:u=>{u(null,l.accessToken)}});try{const u=await c.api(`/users/${a}/photo/$value`).get(),d=await new Promise(h=>{const f=new FileReader;f.onloadend=()=>h(f.result),f.readAsDataURL(u)});o(h=>{const f={...h,[a.toLowerCase()]:d};return localStorage.setItem("userPhotos",JSON.stringify(f)),f})}catch(u){console.error(`No photo found for user ${a}:`,u)}}catch(l){console.error(`Error fetching photo for ${a}:`,l)}};return k.jsx(sk.Provider,{value:{getUserPhoto:i,loadUserPhoto:s},children:n})}const q1=()=>{const n=S.useContext(sk);if(!n)throw new Error("useUserPhotos must be used within a UserPhotosProvider");return n};function G1(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return S.useMemo(()=>r=>{e.forEach(o=>o(r))},e)}const ed=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function xs(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function Qm(n){return"nodeType"in n}function jt(n){var e,t;return n?xs(n)?n:Qm(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function Ym(n){const{Document:e}=jt(n);return n instanceof e}function ul(n){return xs(n)?!1:n instanceof jt(n).HTMLElement}function ak(n){return n instanceof jt(n).SVGElement}function Os(n){return n?xs(n)?n.document:Qm(n)?Ym(n)?n:ul(n)||ak(n)?n.ownerDocument:document:document:document}const qn=ed?S.useLayoutEffect:S.useEffect;function td(n){const e=S.useRef(n);return qn(()=>{e.current=n}),S.useCallback(function(){for(var t=arguments.length,r=new Array(t),o=0;o<t;o++)r[o]=arguments[o];return e.current==null?void 0:e.current(...r)},[])}function Q1(){const n=S.useRef(null),e=S.useCallback((r,o)=>{n.current=setInterval(r,o)},[]),t=S.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function $a(n,e){e===void 0&&(e=[n]);const t=S.useRef(n);return qn(()=>{t.current!==n&&(t.current=n)},e),t}function dl(n,e){const t=S.useRef();return S.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function ou(n){const e=td(n),t=S.useRef(null),r=S.useCallback(o=>{o!==t.current&&(e==null||e(o,t.current)),t.current=o},[]);return[t,r]}function iu(n){const e=S.useRef();return S.useEffect(()=>{e.current=n},[n]),e.current}let th={};function hl(n,e){return S.useMemo(()=>{if(e)return e;const t=th[n]==null?0:th[n]+1;return th[n]=t,n+"-"+t},[n,e])}function lk(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),o=1;o<t;o++)r[o-1]=arguments[o];return r.reduce((i,s)=>{const a=Object.entries(s);for(const[l,c]of a){const u=i[l];u!=null&&(i[l]=u+n*c)}return i},{...e})}}const rs=lk(1),su=lk(-1);function Y1(n){return"clientX"in n&&"clientY"in n}function nd(n){if(!n)return!1;const{KeyboardEvent:e}=jt(n.target);return e&&n instanceof e}function J1(n){if(!n)return!1;const{TouchEvent:e}=jt(n.target);return e&&n instanceof e}function au(n){if(J1(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return Y1(n)?{x:n.clientX,y:n.clientY}:null}const Ur=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Ur.Translate.toString(n),Ur.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),Tv="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function X1(n){return n.matches(Tv)?n:n.querySelector(Tv)}const Z1={display:"none"};function eO(n){let{id:e,value:t}=n;return re.createElement("div",{id:e,style:Z1},t)}function tO(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return re.createElement("div",{id:e,style:o,role:"status","aria-live":r,"aria-atomic":!0},t)}function nO(){const[n,e]=S.useState("");return{announce:S.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const ck=S.createContext(null);function rO(n){const e=S.useContext(ck);S.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function oO(){const[n]=S.useState(()=>new Set),e=S.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[S.useCallback(r=>{let{type:o,event:i}=r;n.forEach(s=>{var a;return(a=s[o])==null?void 0:a.call(s,i)})},[n]),e]}const iO={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},sO={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function aO(n){let{announcements:e=sO,container:t,hiddenTextDescribedById:r,screenReaderInstructions:o=iO}=n;const{announce:i,announcement:s}=nO(),a=hl("DndLiveRegion"),[l,c]=S.useState(!1);if(S.useEffect(()=>{c(!0)},[]),rO(S.useMemo(()=>({onDragStart(d){let{active:h}=d;i(e.onDragStart({active:h}))},onDragMove(d){let{active:h,over:f}=d;e.onDragMove&&i(e.onDragMove({active:h,over:f}))},onDragOver(d){let{active:h,over:f}=d;i(e.onDragOver({active:h,over:f}))},onDragEnd(d){let{active:h,over:f}=d;i(e.onDragEnd({active:h,over:f}))},onDragCancel(d){let{active:h,over:f}=d;i(e.onDragCancel({active:h,over:f}))}}),[i,e])),!l)return null;const u=re.createElement(re.Fragment,null,re.createElement(eO,{id:r,value:o.draggable}),re.createElement(tO,{id:a,announcement:s}));return t?oo.createPortal(u,t):u}var Ze;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(Ze||(Ze={}));function lu(){}function lO(n,e){return S.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function cO(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return S.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Gn=Object.freeze({x:0,y:0});function uO(n,e){const t=au(n);if(!t)return"0 0";const r={x:(t.x-e.left)/e.width*100,y:(t.y-e.top)/e.height*100};return r.x+"% "+r.y+"%"}function dO(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function hO(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function fO(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),o=Math.min(e.left+e.width,n.left+n.width),i=Math.min(e.top+e.height,n.top+n.height),s=o-r,a=i-t;if(r<o&&t<i){const l=e.width*e.height,c=n.width*n.height,u=s*a,d=u/(l+c-u);return Number(d.toFixed(4))}return 0}const pO=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const o=[];for(const i of r){const{id:s}=i,a=t.get(s);if(a){const l=fO(a,e);l>0&&o.push({id:s,data:{droppableContainer:i,value:l}})}}return o.sort(dO)};function mO(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function uk(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Gn}function gO(n){return function(t){for(var r=arguments.length,o=new Array(r>1?r-1:0),i=1;i<r;i++)o[i-1]=arguments[i];return o.reduce((s,a)=>({...s,top:s.top+n*a.y,bottom:s.bottom+n*a.y,left:s.left+n*a.x,right:s.right+n*a.x}),{...t})}}const yO=gO(1);function dk(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function vO(n,e,t){const r=dk(e);if(!r)return n;const{scaleX:o,scaleY:i,x:s,y:a}=r,l=n.left-s-(1-o)*parseFloat(t),c=n.top-a-(1-i)*parseFloat(t.slice(t.indexOf(" ")+1)),u=o?n.width/o:n.width,d=i?n.height/i:n.height;return{width:u,height:d,top:c,right:l+u,bottom:c+d,left:l}}const CO={ignoreTransform:!1};function Ms(n,e){e===void 0&&(e=CO);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:c,transformOrigin:u}=jt(n).getComputedStyle(n);c&&(t=vO(t,c,u))}const{top:r,left:o,width:i,height:s,bottom:a,right:l}=t;return{top:r,left:o,width:i,height:s,bottom:a,right:l}}function Ev(n){return Ms(n,{ignoreTransform:!0})}function SO(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function wO(n,e){return e===void 0&&(e=jt(n).getComputedStyle(n)),e.position==="fixed"}function TO(n,e){e===void 0&&(e=jt(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const i=e[o];return typeof i=="string"?t.test(i):!1})}function Jm(n,e){const t=[];function r(o){if(e!=null&&t.length>=e||!o)return t;if(Ym(o)&&o.scrollingElement!=null&&!t.includes(o.scrollingElement))return t.push(o.scrollingElement),t;if(!ul(o)||ak(o)||t.includes(o))return t;const i=jt(n).getComputedStyle(o);return o!==n&&TO(o,i)&&t.push(o),wO(o,i)?t:r(o.parentNode)}return n?r(n):t}function hk(n){const[e]=Jm(n,1);return e??null}function nh(n){return!ed||!n?null:xs(n)?n:Qm(n)?Ym(n)||n===Os(n).scrollingElement?window:ul(n)?n:null:null}function fk(n){return xs(n)?n.scrollX:n.scrollLeft}function pk(n){return xs(n)?n.scrollY:n.scrollTop}function Uf(n){return{x:fk(n),y:pk(n)}}var it;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(it||(it={}));function mk(n){return!ed||!n?!1:n===document.scrollingElement}function gk(n){const e={x:0,y:0},t=mk(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},o=n.scrollTop<=e.y,i=n.scrollLeft<=e.x,s=n.scrollTop>=r.y,a=n.scrollLeft>=r.x;return{isTop:o,isLeft:i,isBottom:s,isRight:a,maxScroll:r,minScroll:e}}const EO={x:.2,y:.2};function kO(n,e,t,r,o){let{top:i,left:s,right:a,bottom:l}=t;r===void 0&&(r=10),o===void 0&&(o=EO);const{isTop:c,isBottom:u,isLeft:d,isRight:h}=gk(n),f={x:0,y:0},p={x:0,y:0},m={height:e.height*o.y,width:e.width*o.x};return!c&&i<=e.top+m.height?(f.y=it.Backward,p.y=r*Math.abs((e.top+m.height-i)/m.height)):!u&&l>=e.bottom-m.height&&(f.y=it.Forward,p.y=r*Math.abs((e.bottom-m.height-l)/m.height)),!h&&a>=e.right-m.width?(f.x=it.Forward,p.x=r*Math.abs((e.right-m.width-a)/m.width)):!d&&s<=e.left+m.width&&(f.x=it.Backward,p.x=r*Math.abs((e.left+m.width-s)/m.width)),{direction:f,speed:p}}function IO(n){if(n===document.scrollingElement){const{innerWidth:i,innerHeight:s}=window;return{top:0,left:0,right:i,bottom:s,width:i,height:s}}const{top:e,left:t,right:r,bottom:o}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:o,width:n.clientWidth,height:n.clientHeight}}function yk(n){return n.reduce((e,t)=>rs(e,Uf(t)),Gn)}function AO(n){return n.reduce((e,t)=>e+fk(t),0)}function bO(n){return n.reduce((e,t)=>e+pk(t),0)}function vk(n,e){if(e===void 0&&(e=Ms),!n)return;const{top:t,left:r,bottom:o,right:i}=e(n);hk(n)&&(o<=0||i<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const RO=[["x",["left","right"],AO],["y",["top","bottom"],bO]];class Xm{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=Jm(t),o=yk(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[i,s,a]of RO)for(const l of s)Object.defineProperty(this,l,{get:()=>{const c=a(r),u=o[i]-c;return this.rect[l]+u},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class ma{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var o;(o=this.target)==null||o.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function NO(n){const{EventTarget:e}=jt(n);return n instanceof e?n:Os(n)}function rh(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Tn;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Tn||(Tn={}));function kv(n){n.preventDefault()}function xO(n){n.stopPropagation()}var he;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(he||(he={}));const Ck={start:[he.Space,he.Enter],cancel:[he.Esc],end:[he.Space,he.Enter,he.Tab]},OO=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case he.Right:return{...t,x:t.x+25};case he.Left:return{...t,x:t.x-25};case he.Down:return{...t,y:t.y+25};case he.Up:return{...t,y:t.y-25}}};class Sk{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new ma(Os(t)),this.windowListeners=new ma(jt(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Tn.Resize,this.handleCancel),this.windowListeners.add(Tn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Tn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&vk(r),t(Gn)}handleKeyDown(e){if(nd(e)){const{active:t,context:r,options:o}=this.props,{keyboardCodes:i=Ck,coordinateGetter:s=OO,scrollBehavior:a="smooth"}=o,{code:l}=e;if(i.end.includes(l)){this.handleEnd(e);return}if(i.cancel.includes(l)){this.handleCancel(e);return}const{collisionRect:c}=r.current,u=c?{x:c.left,y:c.top}:Gn;this.referenceCoordinates||(this.referenceCoordinates=u);const d=s(e,{active:t,context:r.current,currentCoordinates:u});if(d){const h=su(d,u),f={x:0,y:0},{scrollableAncestors:p}=r.current;for(const m of p){const v=e.code,{isTop:g,isRight:y,isLeft:C,isBottom:w,maxScroll:I,minScroll:A}=gk(m),R=IO(m),E={x:Math.min(v===he.Right?R.right-R.width/2:R.right,Math.max(v===he.Right?R.left:R.left+R.width/2,d.x)),y:Math.min(v===he.Down?R.bottom-R.height/2:R.bottom,Math.max(v===he.Down?R.top:R.top+R.height/2,d.y))},_=v===he.Right&&!y||v===he.Left&&!C,O=v===he.Down&&!w||v===he.Up&&!g;if(_&&E.x!==d.x){const W=m.scrollLeft+h.x,ce=v===he.Right&&W<=I.x||v===he.Left&&W>=A.x;if(ce&&!h.y){m.scrollTo({left:W,behavior:a});return}ce?f.x=m.scrollLeft-W:f.x=v===he.Right?m.scrollLeft-I.x:m.scrollLeft-A.x,f.x&&m.scrollBy({left:-f.x,behavior:a});break}else if(O&&E.y!==d.y){const W=m.scrollTop+h.y,ce=v===he.Down&&W<=I.y||v===he.Up&&W>=A.y;if(ce&&!h.x){m.scrollTo({top:W,behavior:a});return}ce?f.y=m.scrollTop-W:f.y=v===he.Down?m.scrollTop-I.y:m.scrollTop-A.y,f.y&&m.scrollBy({top:-f.y,behavior:a});break}}this.handleMove(e,rs(su(d,this.referenceCoordinates),f))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Sk.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=Ck,onActivation:o}=e,{active:i}=t;const{code:s}=n.nativeEvent;if(r.start.includes(s)){const a=i.activatorNode.current;return a&&n.target!==a?!1:(n.preventDefault(),o==null||o({event:n.nativeEvent}),!0)}return!1}}];function Iv(n){return!!(n&&"distance"in n)}function Av(n){return!!(n&&"delay"in n)}class Zm{constructor(e,t,r){var o;r===void 0&&(r=NO(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:i}=e,{target:s}=i;this.props=e,this.events=t,this.document=Os(s),this.documentListeners=new ma(this.document),this.listeners=new ma(r),this.windowListeners=new ma(jt(s)),this.initialCoordinates=(o=au(i))!=null?o:Gn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Tn.Resize,this.handleCancel),this.windowListeners.add(Tn.DragStart,kv),this.windowListeners.add(Tn.VisibilityChange,this.handleCancel),this.windowListeners.add(Tn.ContextMenu,kv),this.documentListeners.add(Tn.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Av(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(Iv(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:o}=this.props;o(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Tn.Click,xO,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Tn.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:o,props:i}=this,{onMove:s,options:{activationConstraint:a}}=i;if(!o)return;const l=(t=au(e))!=null?t:Gn,c=su(o,l);if(!r&&a){if(Iv(a)){if(a.tolerance!=null&&rh(c,a.tolerance))return this.handleCancel();if(rh(c,a.distance))return this.handleStart()}if(Av(a)&&rh(c,a.tolerance))return this.handleCancel();this.handlePending(a,c);return}e.cancelable&&e.preventDefault(),s(l)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===he.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const MO={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class eg extends Zm{constructor(e){const{event:t}=e,r=Os(t.target);super(e,MO,r)}}eg.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const _O={move:{name:"mousemove"},end:{name:"mouseup"}};var Ff;(function(n){n[n.RightClick=2]="RightClick"})(Ff||(Ff={}));class PO extends Zm{constructor(e){super(e,_O,Os(e.event.target))}}PO.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===Ff.RightClick?!1:(r==null||r({event:t}),!0)}}];const oh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class DO extends Zm{constructor(e){super(e,oh)}static setup(){return window.addEventListener(oh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(oh.move.name,e)};function e(){}}}DO.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:o}=t;return o.length>1?!1:(r==null||r({event:t}),!0)}}];var ga;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(ga||(ga={}));var cu;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(cu||(cu={}));function LO(n){let{acceleration:e,activator:t=ga.Pointer,canScroll:r,draggingRect:o,enabled:i,interval:s=5,order:a=cu.TreeOrder,pointerCoordinates:l,scrollableAncestors:c,scrollableAncestorRects:u,delta:d,threshold:h}=n;const f=FO({delta:d,disabled:!i}),[p,m]=Q1(),v=S.useRef({x:0,y:0}),g=S.useRef({x:0,y:0}),y=S.useMemo(()=>{switch(t){case ga.Pointer:return l?{top:l.y,bottom:l.y,left:l.x,right:l.x}:null;case ga.DraggableRect:return o}},[t,o,l]),C=S.useRef(null),w=S.useCallback(()=>{const A=C.current;if(!A)return;const R=v.current.x*g.current.x,E=v.current.y*g.current.y;A.scrollBy(R,E)},[]),I=S.useMemo(()=>a===cu.TreeOrder?[...c].reverse():c,[a,c]);S.useEffect(()=>{if(!i||!c.length||!y){m();return}for(const A of I){if((r==null?void 0:r(A))===!1)continue;const R=c.indexOf(A),E=u[R];if(!E)continue;const{direction:_,speed:O}=kO(A,E,y,e,h);for(const W of["x","y"])f[W][_[W]]||(O[W]=0,_[W]=0);if(O.x>0||O.y>0){m(),C.current=A,p(w,s),v.current=O,g.current=_;return}}v.current={x:0,y:0},g.current={x:0,y:0},m()},[e,w,r,m,i,s,JSON.stringify(y),JSON.stringify(f),p,c,I,u,JSON.stringify(h)])}const UO={x:{[it.Backward]:!1,[it.Forward]:!1},y:{[it.Backward]:!1,[it.Forward]:!1}};function FO(n){let{delta:e,disabled:t}=n;const r=iu(e);return dl(o=>{if(t||!r||!o)return UO;const i={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[it.Backward]:o.x[it.Backward]||i.x===-1,[it.Forward]:o.x[it.Forward]||i.x===1},y:{[it.Backward]:o.y[it.Backward]||i.y===-1,[it.Forward]:o.y[it.Forward]||i.y===1}}},[t,e,r])}function HO(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return dl(o=>{var i;return e==null?null:(i=r??o)!=null?i:null},[r,e])}function BO(n,e){return S.useMemo(()=>n.reduce((t,r)=>{const{sensor:o}=r,i=o.activators.map(s=>({eventName:s.eventName,handler:e(s.handler,r)}));return[...t,...i]},[]),[n,e])}var Va;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(Va||(Va={}));var Hf;(function(n){n.Optimized="optimized"})(Hf||(Hf={}));const bv=new Map;function zO(n,e){let{dragging:t,dependencies:r,config:o}=e;const[i,s]=S.useState(null),{frequency:a,measure:l,strategy:c}=o,u=S.useRef(n),d=v(),h=$a(d),f=S.useCallback(function(g){g===void 0&&(g=[]),!h.current&&s(y=>y===null?g:y.concat(g.filter(C=>!y.includes(C))))},[h]),p=S.useRef(null),m=dl(g=>{if(d&&!t)return bv;if(!g||g===bv||u.current!==n||i!=null){const y=new Map;for(let C of n){if(!C)continue;if(i&&i.length>0&&!i.includes(C.id)&&C.rect.current){y.set(C.id,C.rect.current);continue}const w=C.node.current,I=w?new Xm(l(w),w):null;C.rect.current=I,I&&y.set(C.id,I)}return y}return g},[n,i,t,d,l]);return S.useEffect(()=>{u.current=n},[n]),S.useEffect(()=>{d||f()},[t,d]),S.useEffect(()=>{i&&i.length>0&&s(null)},[JSON.stringify(i)]),S.useEffect(()=>{d||typeof a!="number"||p.current!==null||(p.current=setTimeout(()=>{f(),p.current=null},a))},[a,d,f,...r]),{droppableRects:m,measureDroppableContainers:f,measuringScheduled:i!=null};function v(){switch(c){case Va.Always:return!1;case Va.BeforeDragging:return t;default:return!t}}}function tg(n,e){return dl(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function KO(n,e){return tg(n,e)}function jO(n){let{callback:e,disabled:t}=n;const r=td(e),o=S.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:i}=window;return new i(r)},[r,t]);return S.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function rd(n){let{callback:e,disabled:t}=n;const r=td(e),o=S.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:i}=window;return new i(r)},[t]);return S.useEffect(()=>()=>o==null?void 0:o.disconnect(),[o]),o}function $O(n){return new Xm(Ms(n),n)}function Rv(n,e,t){e===void 0&&(e=$O);const[r,o]=S.useState(null);function i(){o(l=>{if(!n)return null;if(n.isConnected===!1){var c;return(c=l??t)!=null?c:null}const u=e(n);return JSON.stringify(l)===JSON.stringify(u)?l:u})}const s=jO({callback(l){if(n)for(const c of l){const{type:u,target:d}=c;if(u==="childList"&&d instanceof HTMLElement&&d.contains(n)){i();break}}}}),a=rd({callback:i});return qn(()=>{i(),n?(a==null||a.observe(n),s==null||s.observe(document.body,{childList:!0,subtree:!0})):(a==null||a.disconnect(),s==null||s.disconnect())},[n]),r}function VO(n){const e=tg(n);return uk(n,e)}const Nv=[];function WO(n){const e=S.useRef(n),t=dl(r=>n?r&&r!==Nv&&n&&e.current&&n.parentNode===e.current.parentNode?r:Jm(n):Nv,[n]);return S.useEffect(()=>{e.current=n},[n]),t}function qO(n){const[e,t]=S.useState(null),r=S.useRef(n),o=S.useCallback(i=>{const s=nh(i.target);s&&t(a=>a?(a.set(s,Uf(s)),new Map(a)):null)},[]);return S.useEffect(()=>{const i=r.current;if(n!==i){s(i);const a=n.map(l=>{const c=nh(l);return c?(c.addEventListener("scroll",o,{passive:!0}),[c,Uf(c)]):null}).filter(l=>l!=null);t(a.length?new Map(a):null),r.current=n}return()=>{s(n),s(i)};function s(a){a.forEach(l=>{const c=nh(l);c==null||c.removeEventListener("scroll",o)})}},[o,n]),S.useMemo(()=>n.length?e?Array.from(e.values()).reduce((i,s)=>rs(i,s),Gn):yk(n):Gn,[n,e])}function xv(n,e){e===void 0&&(e=[]);const t=S.useRef(null);return S.useEffect(()=>{t.current=null},e),S.useEffect(()=>{const r=n!==Gn;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?su(n,t.current):Gn}function GO(n){S.useEffect(()=>{if(!ed)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},n.map(e=>{let{sensor:t}=e;return t}))}function QO(n,e){return S.useMemo(()=>n.reduce((t,r)=>{let{eventName:o,handler:i}=r;return t[o]=s=>{i(s,e)},t},{}),[n,e])}function wk(n){return S.useMemo(()=>n?SO(n):null,[n])}const Ov=[];function YO(n,e){e===void 0&&(e=Ms);const[t]=n,r=wk(t?jt(t):null),[o,i]=S.useState(Ov);function s(){i(()=>n.length?n.map(l=>mk(l)?r:new Xm(e(l),l)):Ov)}const a=rd({callback:s});return qn(()=>{a==null||a.disconnect(),s(),n.forEach(l=>a==null?void 0:a.observe(l))},[n]),o}function Tk(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return ul(e)?e:n}function JO(n){let{measure:e}=n;const[t,r]=S.useState(null),o=S.useCallback(c=>{for(const{target:u}of c)if(ul(u)){r(d=>{const h=e(u);return d?{...d,width:h.width,height:h.height}:h});break}},[e]),i=rd({callback:o}),s=S.useCallback(c=>{const u=Tk(c);i==null||i.disconnect(),u&&(i==null||i.observe(u)),r(u?e(u):null)},[e,i]),[a,l]=ou(s);return S.useMemo(()=>({nodeRef:a,rect:t,setRef:l}),[t,a,l])}const XO=[{sensor:eg,options:{}},{sensor:Sk,options:{}}],ZO={current:{}},pc={draggable:{measure:Ev},droppable:{measure:Ev,strategy:Va.WhileDragging,frequency:Hf.Optimized},dragOverlay:{measure:Ms}};class ya extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const eM={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new ya,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:lu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:pc,measureDroppableContainers:lu,windowRect:null,measuringScheduled:!1},Ek={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:lu,draggableNodes:new Map,over:null,measureDroppableContainers:lu},fl=S.createContext(Ek),kk=S.createContext(eM);function tM(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new ya}}}function nM(n,e){switch(e.type){case Ze.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case Ze.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case Ze.DragEnd:case Ze.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Ze.RegisterDroppable:{const{element:t}=e,{id:r}=t,o=new ya(n.droppable.containers);return o.set(r,t),{...n,droppable:{...n.droppable,containers:o}}}case Ze.SetDroppableDisabled:{const{id:t,key:r,disabled:o}=e,i=n.droppable.containers.get(t);if(!i||r!==i.key)return n;const s=new ya(n.droppable.containers);return s.set(t,{...i,disabled:o}),{...n,droppable:{...n.droppable,containers:s}}}case Ze.UnregisterDroppable:{const{id:t,key:r}=e,o=n.droppable.containers.get(t);if(!o||r!==o.key)return n;const i=new ya(n.droppable.containers);return i.delete(t),{...n,droppable:{...n.droppable,containers:i}}}default:return n}}function rM(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:o}=S.useContext(fl),i=iu(r),s=iu(t==null?void 0:t.id);return S.useEffect(()=>{if(!e&&!r&&i&&s!=null){if(!nd(i)||document.activeElement===i.target)return;const a=o.get(s);if(!a)return;const{activatorNode:l,node:c}=a;if(!l.current&&!c.current)return;requestAnimationFrame(()=>{for(const u of[l.current,c.current]){if(!u)continue;const d=X1(u);if(d){d.focus();break}}})}},[r,e,o,s,i]),null}function Ik(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((o,i)=>i({transform:o,...r}),t):t}function oM(n){return S.useMemo(()=>({draggable:{...pc.draggable,...n==null?void 0:n.draggable},droppable:{...pc.droppable,...n==null?void 0:n.droppable},dragOverlay:{...pc.dragOverlay,...n==null?void 0:n.dragOverlay}}),[n==null?void 0:n.draggable,n==null?void 0:n.droppable,n==null?void 0:n.dragOverlay])}function iM(n){let{activeNode:e,measure:t,initialRect:r,config:o=!0}=n;const i=S.useRef(!1),{x:s,y:a}=typeof o=="boolean"?{x:o,y:o}:o;qn(()=>{if(!s&&!a||!e){i.current=!1;return}if(i.current||!r)return;const c=e==null?void 0:e.node.current;if(!c||c.isConnected===!1)return;const u=t(c),d=uk(u,r);if(s||(d.x=0),a||(d.y=0),i.current=!0,Math.abs(d.x)>0||Math.abs(d.y)>0){const h=hk(c);h&&h.scrollBy({top:d.y,left:d.x})}},[e,s,a,r,t])}const od=S.createContext({...Gn,scaleX:1,scaleY:1});var Yr;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Yr||(Yr={}));const sM=S.memo(function(e){var t,r,o,i;let{id:s,accessibility:a,autoScroll:l=!0,children:c,sensors:u=XO,collisionDetection:d=pO,measuring:h,modifiers:f,...p}=e;const m=S.useReducer(nM,void 0,tM),[v,g]=m,[y,C]=oO(),[w,I]=S.useState(Yr.Uninitialized),A=w===Yr.Initialized,{draggable:{active:R,nodes:E,translate:_},droppable:{containers:O}}=v,W=R!=null?E.get(R):null,ce=S.useRef({initial:null,translated:null}),ue=S.useMemo(()=>{var Tt;return R!=null?{id:R,data:(Tt=W==null?void 0:W.data)!=null?Tt:ZO,rect:ce}:null},[R,W]),ve=S.useRef(null),[ht,en]=S.useState(null),[Ue,D]=S.useState(null),$=$a(p,Object.values(p)),G=hl("DndDescribedBy",s),fe=S.useMemo(()=>O.getEnabled(),[O]),oe=oM(h),{droppableRects:Qe,measureDroppableContainers:Be,measuringScheduled:ee}=zO(fe,{dragging:A,dependencies:[_.x,_.y],config:oe.droppable}),V=HO(E,R),Y=S.useMemo(()=>Ue?au(Ue):null,[Ue]),X=NA(),se=KO(V,oe.draggable.measure);iM({activeNode:R!=null?E.get(R):null,config:X.layoutShiftCompensation,initialRect:se,measure:oe.draggable.measure});const H=Rv(V,oe.draggable.measure,se),$e=Rv(V?V.parentElement:null),de=S.useRef({activatorEvent:null,active:null,activeNode:V,collisionRect:null,collisions:null,droppableRects:Qe,draggableNodes:E,draggingNode:null,draggingNodeRect:null,droppableContainers:O,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Re=O.getNodeFor((t=de.current.over)==null?void 0:t.id),Ee=JO({measure:oe.dragOverlay.measure}),Ye=(r=Ee.nodeRef.current)!=null?r:V,pe=A?(o=Ee.rect)!=null?o:H:null,wt=!!(Ee.nodeRef.current&&Ee.rect),Vt=VO(wt?null:H),Ne=wk(Ye?jt(Ye):null),ze=WO(A?Re??V:null),_n=YO(ze),wi=Ik(f,{transform:{x:_.x-Vt.x,y:_.y-Vt.y,scaleX:1,scaleY:1},activatorEvent:Ue,active:ue,activeNodeRect:H,containerNodeRect:$e,draggingNodeRect:pe,over:de.current.over,overlayNodeRect:Ee.rect,scrollableAncestors:ze,scrollableAncestorRects:_n,windowRect:Ne}),yl=Y?rs(Y,_):null,vl=qO(ze),Cd=xv(vl),Sd=xv(vl,[H]),Hr=rs(wi,Cd),Br=pe?yO(pe,wi):null,Lo=ue&&Br?d({active:ue,collisionRect:Br,droppableRects:Qe,droppableContainers:fe,pointerCoordinates:yl}):null,Cl=hO(Lo,"id"),[Pn,F]=S.useState(null),ke=wt?wi:rs(wi,Sd),Ps=mO(ke,(i=Pn==null?void 0:Pn.rect)!=null?i:null,H),wd=S.useRef(null),xg=S.useCallback((Tt,tn)=>{let{sensor:nn,options:zr}=tn;if(ve.current==null)return;const wn=E.get(ve.current);if(!wn)return;const rn=Tt.nativeEvent,Jn=new nn({active:ve.current,activeNode:wn,event:rn,options:zr,context:de,onAbort(ft){if(!E.get(ft))return;const{onDragAbort:Xn}=$.current,mr={id:ft};Xn==null||Xn(mr),y({type:"onDragAbort",event:mr})},onPending(ft,Kr,Xn,mr){if(!E.get(ft))return;const{onDragPending:Ls}=$.current,jr={id:ft,constraint:Kr,initialCoordinates:Xn,offset:mr};Ls==null||Ls(jr),y({type:"onDragPending",event:jr})},onStart(ft){const Kr=ve.current;if(Kr==null)return;const Xn=E.get(Kr);if(!Xn)return;const{onDragStart:mr}=$.current,Ds={activatorEvent:rn,active:{id:Kr,data:Xn.data,rect:ce}};oo.unstable_batchedUpdates(()=>{mr==null||mr(Ds),I(Yr.Initializing),g({type:Ze.DragStart,initialCoordinates:ft,active:Kr}),y({type:"onDragStart",event:Ds}),en(wd.current),D(rn)})},onMove(ft){g({type:Ze.DragMove,coordinates:ft})},onEnd:Ti(Ze.DragEnd),onCancel:Ti(Ze.DragCancel)});wd.current=Jn;function Ti(ft){return async function(){const{active:Xn,collisions:mr,over:Ds,scrollAdjustedTranslate:Ls}=de.current;let jr=null;if(Xn&&Ls){const{cancelDrop:Us}=$.current;jr={activatorEvent:rn,active:Xn,collisions:mr,delta:Ls,over:Ds},ft===Ze.DragEnd&&typeof Us=="function"&&await Promise.resolve(Us(jr))&&(ft=Ze.DragCancel)}ve.current=null,oo.unstable_batchedUpdates(()=>{g({type:ft}),I(Yr.Uninitialized),F(null),en(null),D(null),wd.current=null;const Us=ft===Ze.DragEnd?"onDragEnd":"onDragCancel";if(jr){const Td=$.current[Us];Td==null||Td(jr),y({type:Us,event:jr})}})}}},[E]),AA=S.useCallback((Tt,tn)=>(nn,zr)=>{const wn=nn.nativeEvent,rn=E.get(zr);if(ve.current!==null||!rn||wn.dndKit||wn.defaultPrevented)return;const Jn={active:rn};Tt(nn,tn.options,Jn)===!0&&(wn.dndKit={capturedBy:tn.sensor},ve.current=zr,xg(nn,tn))},[E,xg]),Og=BO(u,AA);GO(u),qn(()=>{H&&w===Yr.Initializing&&I(Yr.Initialized)},[H,w]),S.useEffect(()=>{const{onDragMove:Tt}=$.current,{active:tn,activatorEvent:nn,collisions:zr,over:wn}=de.current;if(!tn||!nn)return;const rn={active:tn,activatorEvent:nn,collisions:zr,delta:{x:Hr.x,y:Hr.y},over:wn};oo.unstable_batchedUpdates(()=>{Tt==null||Tt(rn),y({type:"onDragMove",event:rn})})},[Hr.x,Hr.y]),S.useEffect(()=>{const{active:Tt,activatorEvent:tn,collisions:nn,droppableContainers:zr,scrollAdjustedTranslate:wn}=de.current;if(!Tt||ve.current==null||!tn||!wn)return;const{onDragOver:rn}=$.current,Jn=zr.get(Cl),Ti=Jn&&Jn.rect.current?{id:Jn.id,rect:Jn.rect.current,data:Jn.data,disabled:Jn.disabled}:null,ft={active:Tt,activatorEvent:tn,collisions:nn,delta:{x:wn.x,y:wn.y},over:Ti};oo.unstable_batchedUpdates(()=>{F(Ti),rn==null||rn(ft),y({type:"onDragOver",event:ft})})},[Cl]),qn(()=>{de.current={activatorEvent:Ue,active:ue,activeNode:V,collisionRect:Br,collisions:Lo,droppableRects:Qe,draggableNodes:E,draggingNode:Ye,draggingNodeRect:pe,droppableContainers:O,over:Pn,scrollableAncestors:ze,scrollAdjustedTranslate:Hr},ce.current={initial:pe,translated:Br}},[ue,V,Lo,Br,E,Ye,pe,Qe,O,Pn,ze,Hr]),LO({...X,delta:_,draggingRect:Br,pointerCoordinates:yl,scrollableAncestors:ze,scrollableAncestorRects:_n});const bA=S.useMemo(()=>({active:ue,activeNode:V,activeNodeRect:H,activatorEvent:Ue,collisions:Lo,containerNodeRect:$e,dragOverlay:Ee,draggableNodes:E,droppableContainers:O,droppableRects:Qe,over:Pn,measureDroppableContainers:Be,scrollableAncestors:ze,scrollableAncestorRects:_n,measuringConfiguration:oe,measuringScheduled:ee,windowRect:Ne}),[ue,V,H,Ue,Lo,$e,Ee,E,O,Qe,Pn,Be,ze,_n,oe,ee,Ne]),RA=S.useMemo(()=>({activatorEvent:Ue,activators:Og,active:ue,activeNodeRect:H,ariaDescribedById:{draggable:G},dispatch:g,draggableNodes:E,over:Pn,measureDroppableContainers:Be}),[Ue,Og,ue,H,g,G,E,Pn,Be]);return re.createElement(ck.Provider,{value:C},re.createElement(fl.Provider,{value:RA},re.createElement(kk.Provider,{value:bA},re.createElement(od.Provider,{value:Ps},c)),re.createElement(rM,{disabled:(a==null?void 0:a.restoreFocus)===!1})),re.createElement(aO,{...a,hiddenTextDescribedById:G}));function NA(){const Tt=(ht==null?void 0:ht.autoScrollEnabled)===!1,tn=typeof l=="object"?l.enabled===!1:l===!1,nn=A&&!Tt&&!tn;return typeof l=="object"?{...l,enabled:nn}:{enabled:nn}}}),aM=S.createContext(null),Mv="button",lM="Draggable";function cM(n){let{id:e,data:t,disabled:r=!1,attributes:o}=n;const i=hl(lM),{activators:s,activatorEvent:a,active:l,activeNodeRect:c,ariaDescribedById:u,draggableNodes:d,over:h}=S.useContext(fl),{role:f=Mv,roleDescription:p="draggable",tabIndex:m=0}=o??{},v=(l==null?void 0:l.id)===e,g=S.useContext(v?od:aM),[y,C]=ou(),[w,I]=ou(),A=QO(s,e),R=$a(t);qn(()=>(d.set(e,{id:e,key:i,node:y,activatorNode:w,data:R}),()=>{const _=d.get(e);_&&_.key===i&&d.delete(e)}),[d,e]);const E=S.useMemo(()=>({role:f,tabIndex:m,"aria-disabled":r,"aria-pressed":v&&f===Mv?!0:void 0,"aria-roledescription":p,"aria-describedby":u.draggable}),[r,f,m,v,p,u.draggable]);return{active:l,activatorEvent:a,activeNodeRect:c,attributes:E,isDragging:v,listeners:r?void 0:A,node:y,over:h,setNodeRef:C,setActivatorNodeRef:I,transform:g}}function Ak(){return S.useContext(kk)}const uM="Droppable",dM={timeout:25};function hM(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:o}=n;const i=hl(uM),{active:s,dispatch:a,over:l,measureDroppableContainers:c}=S.useContext(fl),u=S.useRef({disabled:t}),d=S.useRef(!1),h=S.useRef(null),f=S.useRef(null),{disabled:p,updateMeasurementsFor:m,timeout:v}={...dM,...o},g=$a(m??r),y=S.useCallback(()=>{if(!d.current){d.current=!0;return}f.current!=null&&clearTimeout(f.current),f.current=setTimeout(()=>{c(Array.isArray(g.current)?g.current:[g.current]),f.current=null},v)},[v]),C=rd({callback:y,disabled:p||!s}),w=S.useCallback((E,_)=>{C&&(_&&(C.unobserve(_),d.current=!1),E&&C.observe(E))},[C]),[I,A]=ou(w),R=$a(e);return S.useEffect(()=>{!C||!I.current||(C.disconnect(),d.current=!1,C.observe(I.current))},[I,C]),S.useEffect(()=>(a({type:Ze.RegisterDroppable,element:{id:r,key:i,disabled:t,node:I,rect:h,data:R}}),()=>a({type:Ze.UnregisterDroppable,key:i,id:r})),[r]),S.useEffect(()=>{t!==u.current.disabled&&(a({type:Ze.SetDroppableDisabled,id:r,key:i,disabled:t}),u.current.disabled=t)},[r,i,t,a]),{active:s,rect:h,isOver:(l==null?void 0:l.id)===r,node:I,over:l,setNodeRef:A}}function fM(n){let{animation:e,children:t}=n;const[r,o]=S.useState(null),[i,s]=S.useState(null),a=iu(t);return!t&&!r&&a&&o(a),qn(()=>{if(!i)return;const l=r==null?void 0:r.key,c=r==null?void 0:r.props.id;if(l==null||c==null){o(null);return}Promise.resolve(e(c,i)).then(()=>{o(null)})},[e,r,i]),re.createElement(re.Fragment,null,t,r?S.cloneElement(r,{ref:s}):null)}const pM={x:0,y:0,scaleX:1,scaleY:1};function mM(n){let{children:e}=n;return re.createElement(fl.Provider,{value:Ek},re.createElement(od.Provider,{value:pM},e))}const gM={position:"fixed",touchAction:"none"},yM=n=>nd(n)?"transform 250ms ease":void 0,vM=S.forwardRef((n,e)=>{let{as:t,activatorEvent:r,adjustScale:o,children:i,className:s,rect:a,style:l,transform:c,transition:u=yM}=n;if(!a)return null;const d=o?c:{...c,scaleX:1,scaleY:1},h={...gM,width:a.width,height:a.height,top:a.top,left:a.left,transform:Ur.Transform.toString(d),transformOrigin:o&&r?uO(r,a):void 0,transition:typeof u=="function"?u(r):u,...l};return re.createElement(t,{className:s,style:h,ref:e},i)}),CM=n=>e=>{let{active:t,dragOverlay:r}=e;const o={},{styles:i,className:s}=n;if(i!=null&&i.active)for(const[a,l]of Object.entries(i.active))l!==void 0&&(o[a]=t.node.style.getPropertyValue(a),t.node.style.setProperty(a,l));if(i!=null&&i.dragOverlay)for(const[a,l]of Object.entries(i.dragOverlay))l!==void 0&&r.node.style.setProperty(a,l);return s!=null&&s.active&&t.node.classList.add(s.active),s!=null&&s.dragOverlay&&r.node.classList.add(s.dragOverlay),function(){for(const[l,c]of Object.entries(o))t.node.style.setProperty(l,c);s!=null&&s.active&&t.node.classList.remove(s.active)}},SM=n=>{let{transform:{initial:e,final:t}}=n;return[{transform:Ur.Transform.toString(e)},{transform:Ur.Transform.toString(t)}]},wM={duration:250,easing:"ease",keyframes:SM,sideEffects:CM({styles:{active:{opacity:"0"}}})};function TM(n){let{config:e,draggableNodes:t,droppableContainers:r,measuringConfiguration:o}=n;return td((i,s)=>{if(e===null)return;const a=t.get(i);if(!a)return;const l=a.node.current;if(!l)return;const c=Tk(s);if(!c)return;const{transform:u}=jt(s).getComputedStyle(s),d=dk(u);if(!d)return;const h=typeof e=="function"?e:EM(e);return vk(l,o.draggable.measure),h({active:{id:i,data:a.data,node:l,rect:o.draggable.measure(l)},draggableNodes:t,dragOverlay:{node:s,rect:o.dragOverlay.measure(c)},droppableContainers:r,measuringConfiguration:o,transform:d})})}function EM(n){const{duration:e,easing:t,sideEffects:r,keyframes:o}={...wM,...n};return i=>{let{active:s,dragOverlay:a,transform:l,...c}=i;if(!e)return;const u={x:a.rect.left-s.rect.left,y:a.rect.top-s.rect.top},d={scaleX:l.scaleX!==1?s.rect.width*l.scaleX/a.rect.width:1,scaleY:l.scaleY!==1?s.rect.height*l.scaleY/a.rect.height:1},h={x:l.x-u.x,y:l.y-u.y,...d},f=o({...c,active:s,dragOverlay:a,transform:{initial:l,final:h}}),[p]=f,m=f[f.length-1];if(JSON.stringify(p)===JSON.stringify(m))return;const v=r==null?void 0:r({active:s,dragOverlay:a,...c}),g=a.node.animate(f,{duration:e,easing:t,fill:"forwards"});return new Promise(y=>{g.onfinish=()=>{v==null||v(),y()}})}}let _v=0;function kM(n){return S.useMemo(()=>{if(n!=null)return _v++,_v},[n])}const IM=re.memo(n=>{let{adjustScale:e=!1,children:t,dropAnimation:r,style:o,transition:i,modifiers:s,wrapperElement:a="div",className:l,zIndex:c=999}=n;const{activatorEvent:u,active:d,activeNodeRect:h,containerNodeRect:f,draggableNodes:p,droppableContainers:m,dragOverlay:v,over:g,measuringConfiguration:y,scrollableAncestors:C,scrollableAncestorRects:w,windowRect:I}=Ak(),A=S.useContext(od),R=kM(d==null?void 0:d.id),E=Ik(s,{activatorEvent:u,active:d,activeNodeRect:h,containerNodeRect:f,draggingNodeRect:v.rect,over:g,overlayNodeRect:v.rect,scrollableAncestors:C,scrollableAncestorRects:w,transform:A,windowRect:I}),_=tg(h),O=TM({config:r,draggableNodes:p,droppableContainers:m,measuringConfiguration:y}),W=_?v.setRef:void 0;return re.createElement(mM,null,re.createElement(fM,{animation:O},d&&R?re.createElement(vM,{key:R,id:d.id,ref:W,as:a,activatorEvent:u,adjustScale:e,className:l,transition:i,rect:_,style:{zIndex:c,...o},transform:E},t):null))});function va(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function AM(n,e){return n.reduce((t,r,o)=>{const i=e.get(r);return i&&(t[o]=i),t},Array(n.length))}function Vl(n){return n!==null&&n>=0}function bM(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function RM(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const bk=n=>{let{rects:e,activeIndex:t,overIndex:r,index:o}=n;const i=va(e,r,t),s=e[o],a=i[o];return!a||!s?null:{x:a.left-s.left,y:a.top-s.top,scaleX:a.width/s.width,scaleY:a.height/s.height}},Rk="Sortable",Nk=re.createContext({activeIndex:-1,containerId:Rk,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:bk,disabled:{draggable:!1,droppable:!1}});function NM(n){let{children:e,id:t,items:r,strategy:o=bk,disabled:i=!1}=n;const{active:s,dragOverlay:a,droppableRects:l,over:c,measureDroppableContainers:u}=Ak(),d=hl(Rk,t),h=a.rect!==null,f=S.useMemo(()=>r.map(A=>typeof A=="object"&&"id"in A?A.id:A),[r]),p=s!=null,m=s?f.indexOf(s.id):-1,v=c?f.indexOf(c.id):-1,g=S.useRef(f),y=!bM(f,g.current),C=v!==-1&&m===-1||y,w=RM(i);qn(()=>{y&&p&&u(f)},[y,f,p,u]),S.useEffect(()=>{g.current=f},[f]);const I=S.useMemo(()=>({activeIndex:m,containerId:d,disabled:w,disableTransforms:C,items:f,overIndex:v,useDragOverlay:h,sortedRects:AM(f,l),strategy:o}),[m,d,w.draggable,w.droppable,C,f,v,l,h,o]);return re.createElement(Nk.Provider,{value:I},e)}const xM=n=>{let{id:e,items:t,activeIndex:r,overIndex:o}=n;return va(t,r,o).indexOf(e)},OM=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:o,items:i,newIndex:s,previousItems:a,previousContainerId:l,transition:c}=n;return!c||!r||a!==i&&o===s?!1:t?!0:s!==o&&e===l},MM={duration:200,easing:"ease"},xk="transform",_M=Ur.Transition.toString({property:xk,duration:0,easing:"linear"}),PM={roleDescription:"sortable"};function DM(n){let{disabled:e,index:t,node:r,rect:o}=n;const[i,s]=S.useState(null),a=S.useRef(t);return qn(()=>{if(!e&&t!==a.current&&r.current){const l=o.current;if(l){const c=Ms(r.current,{ignoreTransform:!0}),u={x:l.left-c.left,y:l.top-c.top,scaleX:l.width/c.width,scaleY:l.height/c.height};(u.x||u.y)&&s(u)}}t!==a.current&&(a.current=t)},[e,t,r,o]),S.useEffect(()=>{i&&s(null)},[i]),i}function Ok(n){let{animateLayoutChanges:e=OM,attributes:t,disabled:r,data:o,getNewIndex:i=xM,id:s,strategy:a,resizeObserverConfig:l,transition:c=MM}=n;const{items:u,containerId:d,activeIndex:h,disabled:f,disableTransforms:p,sortedRects:m,overIndex:v,useDragOverlay:g,strategy:y}=S.useContext(Nk),C=LM(r,f),w=u.indexOf(s),I=S.useMemo(()=>({sortable:{containerId:d,index:w,items:u},...o}),[d,o,w,u]),A=S.useMemo(()=>u.slice(u.indexOf(s)),[u,s]),{rect:R,node:E,isOver:_,setNodeRef:O}=hM({id:s,data:I,disabled:C.droppable,resizeObserverConfig:{updateMeasurementsFor:A,...l}}),{active:W,activatorEvent:ce,activeNodeRect:ue,attributes:ve,setNodeRef:ht,listeners:en,isDragging:Ue,over:D,setActivatorNodeRef:$,transform:G}=cM({id:s,data:I,attributes:{...PM,...t},disabled:C.draggable}),fe=G1(O,ht),oe=!!W,Qe=oe&&!p&&Vl(h)&&Vl(v),Be=!g&&Ue,ee=Be&&Qe?G:null,Y=Qe?ee??(a??y)({rects:m,activeNodeRect:ue,activeIndex:h,overIndex:v,index:w}):null,X=Vl(h)&&Vl(v)?i({id:s,items:u,activeIndex:h,overIndex:v}):w,se=W==null?void 0:W.id,H=S.useRef({activeId:se,items:u,newIndex:X,containerId:d}),$e=u!==H.current.items,de=e({active:W,containerId:d,isDragging:Ue,isSorting:oe,id:s,index:w,items:u,newIndex:H.current.newIndex,previousItems:H.current.items,previousContainerId:H.current.containerId,transition:c,wasDragging:H.current.activeId!=null}),Re=DM({disabled:!de,index:w,node:E,rect:R});return S.useEffect(()=>{oe&&H.current.newIndex!==X&&(H.current.newIndex=X),d!==H.current.containerId&&(H.current.containerId=d),u!==H.current.items&&(H.current.items=u)},[oe,X,d,u]),S.useEffect(()=>{if(se===H.current.activeId)return;if(se&&!H.current.activeId){H.current.activeId=se;return}const Ye=setTimeout(()=>{H.current.activeId=se},50);return()=>clearTimeout(Ye)},[se]),{active:W,activeIndex:h,attributes:ve,data:I,rect:R,index:w,newIndex:X,items:u,isOver:_,isSorting:oe,isDragging:Ue,listeners:en,node:E,overIndex:v,over:D,setNodeRef:fe,setActivatorNodeRef:$,setDroppableNodeRef:O,setDraggableNodeRef:ht,transform:Re??Y,transition:Ee()};function Ee(){if(Re||$e&&H.current.newIndex===w)return _M;if(!(Be&&!nd(ce)||!c)&&(oe||de))return Ur.Transition.toString({...c,property:xk})}}function LM(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n==null?void 0:n.draggable)!=null?t:e.draggable,droppable:(r=n==null?void 0:n.droppable)!=null?r:e.droppable}}he.Down,he.Right,he.Up,he.Left;/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var UM={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FM=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),Mt=(n,e)=>{const t=S.forwardRef(({color:r="currentColor",size:o=24,strokeWidth:i=2,absoluteStrokeWidth:s,className:a="",children:l,...c},u)=>S.createElement("svg",{ref:u,...UM,width:o,height:o,stroke:r,strokeWidth:s?Number(i)*24/Number(o):i,className:["lucide",`lucide-${FM(n)}`,a].join(" "),...c},[...e.map(([d,h])=>S.createElement(d,h)),...Array.isArray(l)?l:[l]]));return t.displayName=`${n}`,t};/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HM=Mt("ArrowLeftRight",[["path",{d:"M8 3 4 7l4 4",key:"9rb6wj"}],["path",{d:"M4 7h16",key:"6tx8e3"}],["path",{d:"m16 21 4-4-4-4",key:"siv7j2"}],["path",{d:"M20 17H4",key:"h6l3hr"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BM=Mt("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Mk=Mt("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _k=Mt("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bf=Mt("CircleUser",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}],["path",{d:"M7 20.662V19a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v1.662",key:"154egf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zM=Mt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KM=Mt("Italic",[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jM=Mt("Key",[["circle",{cx:"7.5",cy:"15.5",r:"5.5",key:"yqb3hr"}],["path",{d:"m21 2-9.6 9.6",key:"1j0ho8"}],["path",{d:"m15.5 7.5 3 3L22 7l-3-3",key:"1rn1fs"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $M=Mt("ListOrdered",[["line",{x1:"10",x2:"21",y1:"6",y2:"6",key:"76qw6h"}],["line",{x1:"10",x2:"21",y1:"12",y2:"12",key:"16nom4"}],["line",{x1:"10",x2:"21",y1:"18",y2:"18",key:"u3jurt"}],["path",{d:"M4 6h1v4",key:"cnovpq"}],["path",{d:"M4 10h2",key:"16xx2s"}],["path",{d:"M6 18H4c0-1 2-2 2-3s-1-1.5-2-1",key:"m9a95d"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VM=Mt("ListRestart",[["path",{d:"M21 6H3",key:"1jwq7v"}],["path",{d:"M7 12H3",key:"13ou7f"}],["path",{d:"M7 18H3",key:"1sijw9"}],["path",{d:"M12 18a5 5 0 0 0 9-3 4.5 4.5 0 0 0-4.5-4.5c-1.33 0-2.54.54-3.41 1.41L11 14",key:"qth677"}],["path",{d:"M11 10v4h4",key:"172dkj"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WM=Mt("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qM=Mt("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zf=Mt("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pv=Mt("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GM=Mt("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.344.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Kf=Mt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Pk="kanban_user_api_key",QM=n=>{try{if(!n||typeof n!="string")throw new Error("Invalid API key provided");const e=n.trim();if(e.length===0)throw new Error("API key cannot be empty");localStorage.setItem(Pk,e),console.log("API key saved successfully")}catch(e){throw console.error("Error saving API key:",e),e}},ng=()=>{try{const n=localStorage.getItem(Pk);return n&&n.trim().length>0?n.trim():null}catch(n){return console.error("Error retrieving API key:",n),null}},YM=()=>{const n=ng();return n!==null&&n.length>0},JM=n=>{try{const e=n||ng();if(!e||e.length===0)return null;const t=e.length>20?5:4,r=e.slice(-t),o=Math.min(e.length-t,8);return`${"*".repeat(o)}${r}`}catch(e){return console.error("Error creating masked API key:",e),null}},XM=n=>{try{if(!n||typeof n!="string")return!1;const e=n.trim();return e.length<20?!1:/^[a-zA-Z0-9._-]+$/.test(e)}catch(e){return console.error("Error validating API key format:",e),!1}},Dv=()=>{const n=YM(),e=n?JM():null;return{hasKey:n,maskedKey:e,displayText:n?e:"No API key set"}},ZM="https://homeapi.quixy.com/api/Report/GetViewResult",e_="eyJhbGciOiJSUzI1NiIsImtpZCI6IkUzMDIwQkIwMTRGQzc0QjZBNEI3QjU5QTFBMTgzOENDIiwidHlwIjoiYXQrand0In0.eyJuYmYiOjE3NTE4NzYxOTAsImV4cCI6MTc1NDQ2ODE5MCwiaXNzIjoiaWRzcnYucXVpeHkuY29tIiwiY2xpZW50X2lkIjoiYW5ndWxhcl9zcGEiLCJzdWIiOiJ2YW1zaGlzYWlrcmlzaG5hLmFyZWxsaUBxdWl4eS5jb20iLCJhdXRoX3RpbWUiOjE3NTE4NzYxOTAsImlkcCI6IiIsIlVzZXJOYW1lIjoidmFtc2hpc2Fpa3Jpc2huYS5hcmVsbGlAcXVpeHkuY29tIiwiaHR0cDovL3NjaGVtYXMueG1sc29hcC5vcmcvd3MvMjAwNS8wNS9pZGVudGl0eS9jbGFpbXMvbmFtZSI6InZhbXNoaSBzYWkga3Jpc2huYWFyZWxsaTY5MzIiLCJVc2VySWQiOiIxNzA2MjAyNC0xODE0MTMxNDYtMjQxMTIxZTQtNjY0NC00ODFmLWEwZWEtZGRmOWUzODMyNTc1IiwiTmFtZSI6IlZhbXNoaSBTYWkgS3Jpc2huYSBBcmVsbGkiLCJFbWFpbElkIjoidmFtc2hpc2Fpa3Jpc2huYS5hcmVsbGlAcXVpeHkuY29tIiwiVXNlclR5cGUiOiJVc2VyIiwicm9sZSI6IlVzZXIiLCJPcmdhbml6YXRpb25JZCI6IjI5MTAyMDE5LTA5MzQzNDU0OC1hNGZlNDFiMC0xZmQwLTQ4OWEtYWMwOC1hMjliOTg4ODMxNDMiLCJBY2NlcHRlZFRlcm1zIjoiVHJ1ZSIsIklwQ29uZmlndXJhdGlvbkVuYWJsZWQiOiJGYWxzZSIsImlzU2Fhc0luc3RhbmNlIjoiVHJ1ZSIsImFwaVVybCI6IiIsImFwaUtleSI6IiIsIlNhbmRib3hUeXBlIjoiQWR2YW5jZWQiLCJTdGFnZUFjY2VzcyI6IkxpdmUiLCJBbGxvd2VkSXBzIjoiIiwiRGF0YWJhc2VOYW1lIjoiMjkxMDIwMTktMDkzNDM0NTQ4LWE0ZmU0MWIwLTFmZDAtNDg5YS1hYzA4LWEyOWI5ODg4MzE0MyIsIkRhdGVGb3JtYXQiOiJkZC9NTS95eXl5IiwiU3Vic2NyaXB0aW9uVHlwZSI6IlVzZXIiLCJUaW1lRm9ybWF0IjoiaGg6bW0gYSIsIkRvbWFpbiI6Imh0dHBzOi8vdml2aWRtaW5kcy5xdWl4eS5jb20iLCJBY2NlcHRlZFRlcm1zRGF0ZSI6IjYvMTgvMjAyNCA4OjM4OjI4IEFNIiwiaHR0cDovL3NjaGVtYXMubWljcm9zb2Z0LmNvbS93cy8yMDA4LzA2L2lkZW50aXR5L2NsYWltcy9yb2xlIjoiVXNlciIsIlRpbWVab25lIjoiSW5kaWEgU3RhbmRhcmQgVGltZSIsImp0aSI6IjI2MjlEMzhDNTU3NjFCMDBDNTVEOUUxNDFCNkYyMDFEIiwic2lkIjoiRTlFQTZEQTFGRjhDNEEwQzlGMkJFQjU5RTc3OUYwOTUiLCJpYXQiOjE3NTE4NzYxOTAsInNjb3BlIjpbIm9wZW5pZCIsInByb2ZpbGUiLCJyb2xlcyIsIm9mZmxpbmVfYWNjZXNzIl0sImFtciI6WyJleHRlcm5hbCJdfQ.g9a34AJ0A_lPjxCuADm2s1DXp1zv9q-9Iuo8To5LBqFt_PoMuUlqWI30AtYyIFZIApkXkLO8CQ9XXaErS4sJLb1dE0X8UMrFnnBs29XrnuQZpDhPnU4SMte9yojZjv02QZiRaVnzDyyI8FrGC_MAal_LDEieDO1GkLXUKQljKRcrS69FBQMgjXSRVbKoKiVJuHJWIgfcLcR2IIzYuetb0EugKnUgqLt4iJ-9vn62Ud5hl_-otEASVYSTk4Wj-QZ9VkMQqHlyLxZKI7eDIDNEM45Mr4tYciYjiekwLE0O-n7uckUPNviQ1bQ5AOZfg-KvWcT9whYQCuynQMV-GJN5SQ",rg=()=>{const n=ng();return n?(console.log("Using user-provided API key"),n):(console.log("Using fallback API token"),e_)};let io=null;const jf=new Zu(XE);async function t_(n="DAP - 25"){const e={orderByFields:"",filters:{searchString:"",columns:"Actions,Sub Tasks,Issue Id,Sprint Name,Issue Type,Summary,Status,Assignee,Project Id,Record Id,Reporter,Estimated Hours,Detection Phase,Status Indicator,Team Member Email Id",groupedColumns:"",rowHeight:null,columnsOrder:"Actions,Sub Tasks,Issue Id,Sprint Name,Issue Type,Summary,Status,Issue Category,Sprint Rank,Reporter,Assignee,Created Date Time,Due Date,Updated On,Dependent Id,Priority,Estimated Hours,Logged Hours,Remaining Hours,Release,Browser,Bug Type,Detection Phase,Fix Branch,Injection Phase,Severity,Required Builds,Checkin Given Branch,Configurations Made,DB scripts,DB scripts exist,Impacted Features Of The Bug,Test Case Id,Project Name,Module,Sub Module,Resource Type,Release DateTime,Created DateTime,Bug Age,Client Name,Reporter Story Points,Assignee Story Points,Task Type,Feature,Sub Feature,Group Name,Bug Scenario,Coding Target Date,Test Cases Target Date,Unit Testing Target Date,Devbox Testing Target Date,System Testing Target Date,Impact Features Sharepoint Link,Issue Reproduced Or Not,Steps To Reproduce,Reason For Not Reproducing,POD,IssueType,Bug Fixed Date,POD Test Owner,POD Dev Owner,BA Owner,DB Type",resizedColumns:[],pageSize:100,filters:[],sorting:[],CustomUserViewFilters:[{Order:0,ColumnName:"Sprint Name",ElementType:"TextBox",ConditionType:"Equal",Value:n,IsEditable:!0,IsVisible:!1,SecondValue:"",SelectedValues:[n]}]}};try{const t=await fetch(`${ZM}?skip=0&take=100&viewId=05072022-184836479-5888ab5b-d645-4e86-a937-f2d02d2414c1`,{method:"POST",headers:{Authorization:`Bearer ${rg()}`,"Content-Type":"application/json"},body:JSON.stringify(e)});if(!t.ok)throw new Error(`HTTP error! status: ${t.status}`);const r=await t.json();if(!r.Status)throw new Error("API returned unsuccessful status");const o=JSON.parse(r.results);if(o.length>0){const i=o[0]["Project Id"];i&&typeof i=="string"?(io=i,console.log("Extracted Project ID from fetchTasks:",io)):console.warn("No Project Id found in API response, keeping current Project ID:",io)}else console.warn("No tasks found in API response, keeping current Project ID:",io);return o.map((i,s)=>({id:s+1,columnId:i.Status,content:`Issue Id: ${i["Issue Id"]}
Summary: ${i.Summary}
Assignee: ${i.Assignee}
Issue Type: ${i["Issue Type"]}`,rowData:{"Issue Id":i["Issue Id"],Summary:i.Summary,Assignee:i.Assignee,"Issue Type":i["Issue Type"],Status:i.Status,"Record Id":i["Record Id"],"Project Id":i["Project Id"],Reporter:i.Reporter,"Estimated Hours":i["Estimated Hours"],"Detection Phase":i["Detection Phase"],"Status Indicator":i["Status Indicator"],"Sprint Name":i["Sprint Name"],"Team Member Email Id":i["Team Member Email Id"]}}))}catch(t){throw console.error("Error fetching tasks:",t),t}}function n_(){return io}const r_=()=>{try{const n=jf.getAllAccounts();if(n.length===0)return console.log("No MSAL accounts found - user not logged in"),!1;const e=n[0];return!e||!e.username?(console.log("No valid active account found"),!1):localStorage.getItem("userData")?(console.log("User is authenticated:",e.username),!0):(console.log("No user data in localStorage - user may not be fully authenticated"),!1)}catch(n){return console.error("Error checking authentication status:",n),!1}},o_=()=>{try{const n=localStorage.getItem("userData");if(n){const t=JSON.parse(n),o=jf.getAllAccounts()[0];return{fullName:t.displayName||(o==null?void 0:o.name)||"",username:(o==null?void 0:o.username)||"",email:(o==null?void 0:o.username)||""}}const e=jf.getAllAccounts();if(e.length>0){const t=e[0];return{fullName:t.name||"",username:t.username||"",email:t.username||""}}return{fullName:"",username:"",email:""}}catch(n){return console.error("Error getting user information:",n),{fullName:"",username:"",email:""}}};async function i_(n,e){console.log("Checking authentication status for updateTaskStatus...");const t=r_();if(console.log("Authentication check result:",t),!t)throw new Error("AUTHENTICATION_REQUIRED");const r="https://homeapi.quixy.com/api/App/SaveAppData?appName=Change%20Issue%20Status&users=&startDate=null&dueDate=null",o=n.rowData||{},i=new Date().toISOString(),s=o["Project Id"]||n_(),a=o_();if(!a.email||!a.fullName)throw alert("Unable to retrieve user information. Please try logging in again."),new Error("User information not available. Please re-authenticate.");const l={"var Project Id":s,"var Issue Record Id":o["Record Id"]||"","var Issue Id":o["Issue Id"]||"","Issue Id":null,Status:"","Project Id":s,"var Issue Type":o["Issue Type"]||"","Issue Type":o["Issue Type"]||"","var Current Assignee":o.Assignee||"","var Issue Current Status":o.Status||"","var Summary":o.Summary||"","Current Status":o.Status||"","Estimated Hours":o["Estimated Hours"]||"","Detection Phase":o["Detection Phase"]||"","New Status":e,"Change Remarks":"","Release Datetime":"","Review Closed Task By":"",Configurations:"",Scripts:"","Environment level":"","Specific details":"","Select Branch":"","Select Required Components":"","Any DB Scripts Exists":"","Issue Remarks":"","Mention the DB script":"","Any configuration changes made":"","Specify the configuration change":"","Configurations added":"","DB Scripts":"","Migration scripts":"","Configurations Files":"","DB Files":"","Migration files":"","Dev Remarks":"","Specify Impact Feature Related To Bug":"","Var Sub Task Id":"","status Indicator Project Id":s,"status Indicator Issue Type":o["Issue Type"]||"","status Indicator Status":o.Status||"","Status Indicator":o["Status Indicator"]||"In Progress","Updated Date Time":i,"Issue Id for watch":null,"Logged In User Name":a.fullName,"Watch List Details":[],"Assignee Story Points":null,"Status Changed User":o["Team Member Email Id"]||a.email,"Sprint Name":o["Sprint Name"]||"","Story points Issue Id":o["Issue Id"]||"","Get Assignee Story Points":"","Story Sub Task Id":null,"Sub task Story Points":"","Get ready for QA Issue id":null,"Get ready for QA Issue id Grid":"",_AppId:"01022021-064254831-3920198f-f15c-4ea9-b8f3-22913911c281",_AppName:"Change Issue Status",_CurrentStepNumber:1,_WorkSpaceId:"03012021-192624661-c4d2d235-e371-4983-973f-c82b074f9b21",_OrganizationId:"29102019-093434548-a4fe41b0-1fd0-489a-ac08-a29b98883143",_NextGroupName:"Done",_IsCompleted:!0,_ExternalApiIds:"",_InternalApiIds:"",_DataFunctionIds:"",_UserFunctionIds:"",_UserId:"17062024-181413146-241121e4-6644-481f-a0ea-ddf9e3832575",_Username:a.username,_FullName:a.fullName,_UpdatedUserId:"",_UpdatedUsername:"",_UpdatedEmailId:"",_UserEmailId:a.email,_NextStepUsers:"",_UpdatedLocation:"",_WorkFlowAction:"Start - Submit"};try{console.log("Making status update API request to:",r),console.log("Update payload:",JSON.stringify(l,null,2));const c=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${rg()}`,"Content-Type":"application/json"},body:JSON.stringify(l)});if(console.log("Update response status:",c.status),console.log("Update response ok:",c.ok),!c.ok){const d=await c.text();throw console.error("Update response error text:",d),new Error(`HTTP error! status: ${c.status}, message: ${d}`)}const u=await c.json();return console.log("Update API response:",u),{Status:u.Status||!0,results:u.results,message:u.message}}catch(c){throw console.error("Error updating task status:",c),c}}async function s_(n,e,t){const r="https://homeapi.quixy.com/api/DataTable/GetDataTableDataByReference";let o;io?(o=io,console.log("Using stored Project ID from last fetchTasks call:",io)):(o="70",console.warn('No Project ID available, using fallback value "70". Make sure fetchTasks has been called at least once.')),console.log("Using Project ID for status check:",o);const i={DataTableFunctionId:"01022021-064148735-3f601026-cf68-4b03-abd5-ca71c5215f97",DataTableId:"03012021-220616917-65360d6b-ab63-4cf6-9977-2d6c91e005d8",ReferencedElements:"",DataTableDataReferenceDataDTOs:[{IsFocused:!1,ReferenceName:"Project Id",Value:o,SelectedValue:""},{IsFocused:!1,ReferenceName:"Issue Type",Value:n,SelectedValue:""},{IsFocused:!1,ReferenceName:"Current Status",Value:e,SelectedValue:""},{IsFocused:!0,ReferenceName:"Next Status",Value:"",SelectedValue:""}]};try{console.log("Making API request to:",r),console.log("Request payload:",JSON.stringify(i,null,2));const s=await fetch(r,{method:"POST",headers:{Authorization:`Bearer ${rg()}`,"Content-Type":"application/json"},body:JSON.stringify(i)});if(console.log("Response status:",s.status),console.log("Response ok:",s.ok),!s.ok){const l=await s.text();throw console.error("Response error text:",l),new Error(`HTTP error! status: ${s.status}, message: ${l}`)}const a=await s.json();if(console.log("Full API response:",a),console.log("API response type:",Array.isArray(a)?"Array":"Object"),Array.isArray(a)){console.log("Response is an array, treating as direct data");const l={Status:!0,results:JSON.stringify(a),__count:a.length};return console.log("Formatted response:",l),l}if(console.log("API response Status field:",a.Status),console.log("API response results field:",a.results),!a.Status)throw console.error("API returned unsuccessful status. Full response:",a),new Error("API returned unsuccessful status");return a}catch(s){throw console.error("Error checking task status:",s),s}}function a_(n){switch(n==null?void 0:n.toLowerCase()){case"feature":return"bg-blue-500";case"improvement":return"bg-green-500";case"bug":return"bg-red-500";case"task":return"bg-violet-500";default:return"bg-gray-500"}}function l_(n){switch(n){case 1:return"text-yellow-500 fill-yellow-500";case 2:return"text-rose-500 fill-rose-500";default:return"text-gray-400"}}function c_(n){const e=n.split(`
`),t={};return e.forEach(r=>{const[o,i]=r.split(": ");if(o&&i)switch(o.trim()){case"Issue Id":t.issueId=i.trim();break;case"Summary":t.summary=i.trim();break;case"Issue Type":t.issueType=i.trim();break;case"Assignee":t.assignee=i.trim();break}}),t}function Dk({task:n,onStatusCheckResult:e,isHighlighted:t,isSuccess:r,isUpdating:o}){const[i,s]=S.useState(!1),[a,l]=S.useState(!1),{getUserPhoto:c,loadUserPhoto:u}=q1(),d=c_(n.content),[h,f]=S.useState(()=>JSON.parse(localStorage.getItem("taskBookmarks")||"{}")[d.issueId||""]||0),{setNodeRef:p,attributes:m,listeners:v,transform:g,transition:y,isDragging:C}=Ok({id:n.id,data:{type:"Task",task:n}});S.useEffect(()=>{d.assignee&&u(d.assignee)},[d.assignee,u]);const w={transition:y,transform:Ur.Transform.toString(g)},I=async()=>{const _=`${d.issueId}: ${d.summary}`;try{await navigator.clipboard.writeText(_),s(!0),setTimeout(()=>s(!1),2e3)}catch(O){console.error("Failed to copy text: ",O)}},A=()=>{const _=(h+1)%3;f(_);const O=JSON.parse(localStorage.getItem("taskBookmarks")||"{}");d.issueId&&(_===0?delete O[d.issueId]:O[d.issueId]=_,localStorage.setItem("taskBookmarks",JSON.stringify(O)))},R=async()=>{if(!d.issueType||!n.columnId){console.error("Missing required data for status check:",{issueType:d.issueType,currentStatus:n.columnId});return}l(!0);try{const _=await s_(d.issueType,n.columnId);if(console.log("Status check response:",_),_.results)try{console.log("Raw API response.results:",_.results);const O=JSON.parse(_.results);console.log("Parsed API results:",O);const W=[];Array.isArray(O)&&O.forEach(ce=>{console.log("Processing item:",ce),ce.AppData&&typeof ce.AppData=="string"&&(W.push(ce.AppData),console.log("Added target status:",ce.AppData))}),console.log("Final extracted target statuses:",W),console.log("onStatusCheckResult callback exists:",!!e),console.log("Task ID:",n.id),e&&W.length>0?(console.log("Calling onStatusCheckResult with:",n.id,W),e(n.id,W)):console.log("Not calling callback - onStatusCheckResult:",!!e,"targetStatuses.length:",W.length)}catch(O){console.error("Failed to parse API response:",O)}else console.log("No response.results found")}catch(_){console.error("Failed to check task status:",_)}finally{l(!1)}};if(C)return k.jsx("div",{ref:p,style:w,className:"relative cursor-grab rounded-xl border-2 border-rose-500 bg-[#0c1015] opacity-30"});const E=d.assignee?c(d.assignee):void 0;return k.jsxs("div",{ref:p,style:w,...m,...v,className:`relative ${C?"cursor-grabbing":"cursor-grab"} rounded-xl bg-[#0c1015] overflow-hidden w-[300px] ${o?"ring-2 ring-inset ring-blue-500 opacity-75":t?"ring-2 ring-inset ring-blue-500":r?"ring-2 ring-inset ring-green-500":"hover:ring-2 hover:ring-inset hover:ring-rose-500"}`,children:[k.jsxs("div",{className:"p-3 border-b border-gray-700",children:[k.jsxs("div",{className:"flex justify-between items-center mb-2",children:[k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:"text-gray-400 text-xs font-mono",children:d.issueId}),o&&k.jsx(zf,{className:"h-3 w-3 text-blue-500 animate-spin"})]}),k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("span",{className:`text-xs px-2 py-1 rounded-full text-white ${a_(d.issueType)}`,children:d.issueType}),k.jsx("button",{onClick:A,className:"hover:scale-110 transition-transform duration-200",children:k.jsx(Mk,{size:16,className:`${l_(h)} transition-colors duration-200`})})]})]}),k.jsx("h3",{className:"text-white font-medium text-sm",children:d.summary})]}),k.jsxs("div",{className:"p-3 flex items-center justify-between",children:[k.jsxs("div",{className:"flex items-center",children:[E?k.jsx("img",{src:E,alt:d.assignee,className:"w-5 h-5 rounded-full mr-2 object-cover"}):k.jsx(Bf,{size:20,className:"text-gray-400 mr-2"}),k.jsx("span",{className:"text-gray-400 text-xs",children:d.assignee})]}),k.jsxs("div",{className:"flex items-center gap-1",children:[k.jsx("button",{onClick:_=>{_.stopPropagation(),R()},disabled:a,className:"rounded p-1 hover:bg-[#181b21] transition-colors duration-200 disabled:opacity-50",title:"Check Next Status",children:a?k.jsx(zf,{className:"h-4 w-4 text-gray-400 animate-spin"}):k.jsx(HM,{className:"h-4 w-4 text-gray-400 hover:text-white"})}),k.jsx("button",{onClick:I,className:"rounded p-1 hover:bg-[#181b21] transition-colors duration-200",title:"Copy Issue ID and Summary",children:i?k.jsx(_k,{className:"h-4 w-4 text-green-500"}):k.jsx(zM,{className:"h-4 w-4 text-gray-400 hover:text-white"})})]})]})]})}function u_({column:n,tasks:e,onStatusCheckResult:t,highlightedTaskId:r,successTaskId:o,updatingTaskId:i}){n.isHighlighted&&console.log(`Column ${n.id} is highlighted:`,n.isHighlighted);const{setNodeRef:s,attributes:a,listeners:l,transform:c,transition:u,isDragging:d}=Ok({id:n.id,data:{type:"Column",column:n}}),h={transition:u,transform:Ur.Transform.toString(c)};return k.jsxs("div",{ref:s,style:h,className:`h-full rounded-lg flex flex-col ${n.isHighlighted?"border-2 border-blue-500 bg-blue-900/20":"bg-[#181b21]"}`,children:[k.jsx("div",{className:"p-4 border-b border-[#2D3139] bg-[#1C1F26] rounded-t-lg",children:k.jsx("div",{className:"flex items-center justify-between",children:k.jsxs("div",{className:"flex items-center gap-2",children:[k.jsx("h2",{className:"font-bold text-white text-sm",children:n.title}),k.jsx("span",{className:"flex h-5 min-w-[20px] items-center justify-center rounded-full bg-[#0c1015] px-2 text-xs text-white border border-[#2D3139]",children:e.length})]})})}),k.jsx(NM,{items:e.map(f=>f.id),children:k.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3 column-scroll",children:e.map(f=>k.jsx(Dk,{task:f,onStatusCheckResult:t,isHighlighted:r===f.id,isSuccess:o===f.id,isUpdating:i===f.id},f.id))})})]})}const $f=["Reopened","Hold","New","Requirement Gathering","Design","Design Review","Design Completed","Ready for TC Preparation","Test Case Preparation","Test Case Review","Test Case Completed","Technical Document Review","In Progress","Coding","Unit Testing","White Box Testing","Coding Review","Devbox Testing","Ready for QA","System Testing","Closed","Release","Other Status"];function Wl(n){const e=$f.indexOf(n);return e===-1?$f.length-1:e}function d_(){const{instance:n,accounts:e}=qm(),[t,r]=S.useState(()=>{const s=localStorage.getItem("userData");return s?JSON.parse(s):{}}),o=()=>{n.loginPopup(eu).catch(s=>{console.error("Login failed:",s)})},i=()=>{localStorage.removeItem("userData"),r({}),n.logoutPopup().catch(s=>{console.error("Logout failed:",s)})};return S.useEffect(()=>{(async()=>{if(e[0])try{const a=await n.acquireTokenSilent({...eu,account:e[0]}),c=await ja.init({authProvider:u=>{u(null,a.accessToken)}}).api("/me").get();try{const u=await fetch("https://graph.microsoft.com/v1.0/me/photo/$value",{headers:{Authorization:`Bearer ${a.accessToken}`}});if(u.ok){const d=await u.blob(),h=await new Promise(p=>{const m=new FileReader;m.onloadend=()=>p(m.result),m.readAsDataURL(d)}),f={displayName:c.displayName,photo:h};r(f),localStorage.setItem("userData",JSON.stringify(f))}else throw new Error("Failed to fetch photo")}catch(u){console.error("Error fetching photo:",u);const d={displayName:c.displayName};r(d),localStorage.setItem("userData",JSON.stringify(d))}}catch(a){console.error("Error fetching user data:",a)}})()},[e,n]),e.length>0?k.jsxs("div",{className:"relative group",children:[t.photo?k.jsx("img",{src:t.photo,alt:t.displayName,className:"w-8 h-8 rounded-full cursor-pointer object-cover",onClick:i}):k.jsx(Bf,{size:32,className:"text-white cursor-pointer",onClick:i}),k.jsxs("div",{className:"absolute right-0 mt-2 w-48 py-2 bg-[#181b21] rounded-lg shadow-xl opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:[k.jsx("div",{className:"px-4 py-2 text-sm text-white",children:t.displayName}),k.jsx("button",{onClick:i,className:"w-full text-left px-4 py-2 text-sm text-white hover:bg-[#2D3139]",children:"Sign out"})]})]}):k.jsxs("button",{onClick:o,className:"flex items-center gap-2 px-3 py-1.5 rounded-full text-sm font-medium bg-[#181b21] text-white hover:bg-[#1C1F26] transition-colors duration-200",children:[k.jsx(Bf,{size:20}),"Sign in"]})}function gt(n){this.content=n}gt.prototype={constructor:gt,find:function(n){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===n)return e;return-1},get:function(n){var e=this.find(n);return e==-1?void 0:this.content[e+1]},update:function(n,e,t){var r=t&&t!=n?this.remove(t):this,o=r.find(n),i=r.content.slice();return o==-1?i.push(t||n,e):(i[o+1]=e,t&&(i[o]=t)),new gt(i)},remove:function(n){var e=this.find(n);if(e==-1)return this;var t=this.content.slice();return t.splice(e,2),new gt(t)},addToStart:function(n,e){return new gt([n,e].concat(this.remove(n).content))},addToEnd:function(n,e){var t=this.remove(n).content.slice();return t.push(n,e),new gt(t)},addBefore:function(n,e,t){var r=this.remove(e),o=r.content.slice(),i=r.find(n);return o.splice(i==-1?o.length:i,0,e,t),new gt(o)},forEach:function(n){for(var e=0;e<this.content.length;e+=2)n(this.content[e],this.content[e+1])},prepend:function(n){return n=gt.from(n),n.size?new gt(n.content.concat(this.subtract(n).content)):this},append:function(n){return n=gt.from(n),n.size?new gt(this.subtract(n).content.concat(n.content)):this},subtract:function(n){var e=this;n=gt.from(n);for(var t=0;t<n.content.length;t+=2)e=e.remove(n.content[t]);return e},toObject:function(){var n={};return this.forEach(function(e,t){n[e]=t}),n},get size(){return this.content.length>>1}};gt.from=function(n){if(n instanceof gt)return n;var e=[];if(n)for(var t in n)e.push(t,n[t]);return new gt(e)};function Lk(n,e,t){for(let r=0;;r++){if(r==n.childCount||r==e.childCount)return n.childCount==e.childCount?null:t;let o=n.child(r),i=e.child(r);if(o==i){t+=o.nodeSize;continue}if(!o.sameMarkup(i))return t;if(o.isText&&o.text!=i.text){for(let s=0;o.text[s]==i.text[s];s++)t++;return t}if(o.content.size||i.content.size){let s=Lk(o.content,i.content,t+1);if(s!=null)return s}t+=o.nodeSize}}function Uk(n,e,t,r){for(let o=n.childCount,i=e.childCount;;){if(o==0||i==0)return o==i?null:{a:t,b:r};let s=n.child(--o),a=e.child(--i),l=s.nodeSize;if(s==a){t-=l,r-=l;continue}if(!s.sameMarkup(a))return{a:t,b:r};if(s.isText&&s.text!=a.text){let c=0,u=Math.min(s.text.length,a.text.length);for(;c<u&&s.text[s.text.length-c-1]==a.text[a.text.length-c-1];)c++,t--,r--;return{a:t,b:r}}if(s.content.size||a.content.size){let c=Uk(s.content,a.content,t-1,r-1);if(c)return c}t-=l,r-=l}}class N{constructor(e,t){if(this.content=e,this.size=t||0,t==null)for(let r=0;r<e.length;r++)this.size+=e[r].nodeSize}nodesBetween(e,t,r,o=0,i){for(let s=0,a=0;a<t;s++){let l=this.content[s],c=a+l.nodeSize;if(c>e&&r(l,o+a,i||null,s)!==!1&&l.content.size){let u=a+1;l.nodesBetween(Math.max(0,e-u),Math.min(l.content.size,t-u),r,o+u)}a=c}}descendants(e){this.nodesBetween(0,this.size,e)}textBetween(e,t,r,o){let i="",s=!0;return this.nodesBetween(e,t,(a,l)=>{let c=a.isText?a.text.slice(Math.max(e,l)-l,t-l):a.isLeaf?o?typeof o=="function"?o(a):o:a.type.spec.leafText?a.type.spec.leafText(a):"":"";a.isBlock&&(a.isLeaf&&c||a.isTextblock)&&r&&(s?s=!1:i+=r),i+=c},0),i}append(e){if(!e.size)return this;if(!this.size)return e;let t=this.lastChild,r=e.firstChild,o=this.content.slice(),i=0;for(t.isText&&t.sameMarkup(r)&&(o[o.length-1]=t.withText(t.text+r.text),i=1);i<e.content.length;i++)o.push(e.content[i]);return new N(o,this.size+e.size)}cut(e,t=this.size){if(e==0&&t==this.size)return this;let r=[],o=0;if(t>e)for(let i=0,s=0;s<t;i++){let a=this.content[i],l=s+a.nodeSize;l>e&&((s<e||l>t)&&(a.isText?a=a.cut(Math.max(0,e-s),Math.min(a.text.length,t-s)):a=a.cut(Math.max(0,e-s-1),Math.min(a.content.size,t-s-1))),r.push(a),o+=a.nodeSize),s=l}return new N(r,o)}cutByIndex(e,t){return e==t?N.empty:e==0&&t==this.content.length?this:new N(this.content.slice(e,t))}replaceChild(e,t){let r=this.content[e];if(r==t)return this;let o=this.content.slice(),i=this.size+t.nodeSize-r.nodeSize;return o[e]=t,new N(o,i)}addToStart(e){return new N([e].concat(this.content),this.size+e.nodeSize)}addToEnd(e){return new N(this.content.concat(e),this.size+e.nodeSize)}eq(e){if(this.content.length!=e.content.length)return!1;for(let t=0;t<this.content.length;t++)if(!this.content[t].eq(e.content[t]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(e){let t=this.content[e];if(!t)throw new RangeError("Index "+e+" out of range for "+this);return t}maybeChild(e){return this.content[e]||null}forEach(e){for(let t=0,r=0;t<this.content.length;t++){let o=this.content[t];e(o,r,t),r+=o.nodeSize}}findDiffStart(e,t=0){return Lk(this,e,t)}findDiffEnd(e,t=this.size,r=e.size){return Uk(this,e,t,r)}findIndex(e,t=-1){if(e==0)return ql(0,e);if(e==this.size)return ql(this.content.length,e);if(e>this.size||e<0)throw new RangeError(`Position ${e} outside of fragment (${this})`);for(let r=0,o=0;;r++){let i=this.child(r),s=o+i.nodeSize;if(s>=e)return s==e||t>0?ql(r+1,s):ql(r,o);o=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(e=>e.toJSON()):null}static fromJSON(e,t){if(!t)return N.empty;if(!Array.isArray(t))throw new RangeError("Invalid input for Fragment.fromJSON");return new N(t.map(e.nodeFromJSON))}static fromArray(e){if(!e.length)return N.empty;let t,r=0;for(let o=0;o<e.length;o++){let i=e[o];r+=i.nodeSize,o&&i.isText&&e[o-1].sameMarkup(i)?(t||(t=e.slice(0,o)),t[t.length-1]=i.withText(t[t.length-1].text+i.text)):t&&t.push(i)}return new N(t||e,r)}static from(e){if(!e)return N.empty;if(e instanceof N)return e;if(Array.isArray(e))return this.fromArray(e);if(e.attrs)return new N([e],e.nodeSize);throw new RangeError("Can not convert "+e+" to a Fragment"+(e.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}N.empty=new N([],0);const ih={index:0,offset:0};function ql(n,e){return ih.index=n,ih.offset=e,ih}function uu(n,e){if(n===e)return!0;if(!(n&&typeof n=="object")||!(e&&typeof e=="object"))return!1;let t=Array.isArray(n);if(Array.isArray(e)!=t)return!1;if(t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!uu(n[r],e[r]))return!1}else{for(let r in n)if(!(r in e)||!uu(n[r],e[r]))return!1;for(let r in e)if(!(r in n))return!1}return!0}let we=class Vf{constructor(e,t){this.type=e,this.attrs=t}addToSet(e){let t,r=!1;for(let o=0;o<e.length;o++){let i=e[o];if(this.eq(i))return e;if(this.type.excludes(i.type))t||(t=e.slice(0,o));else{if(i.type.excludes(this.type))return e;!r&&i.type.rank>this.type.rank&&(t||(t=e.slice(0,o)),t.push(this),r=!0),t&&t.push(i)}}return t||(t=e.slice()),r||t.push(this),t}removeFromSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return e.slice(0,t).concat(e.slice(t+1));return e}isInSet(e){for(let t=0;t<e.length;t++)if(this.eq(e[t]))return!0;return!1}eq(e){return this==e||this.type==e.type&&uu(this.attrs,e.attrs)}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Mark.fromJSON");let r=e.marks[t.type];if(!r)throw new RangeError(`There is no mark type ${t.type} in this schema`);let o=r.create(t.attrs);return r.checkAttrs(o.attrs),o}static sameSet(e,t){if(e==t)return!0;if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!e[r].eq(t[r]))return!1;return!0}static setFrom(e){if(!e||Array.isArray(e)&&e.length==0)return Vf.none;if(e instanceof Vf)return[e];let t=e.slice();return t.sort((r,o)=>r.type.rank-o.type.rank),t}};we.none=[];class du extends Error{}class L{constructor(e,t,r){this.content=e,this.openStart=t,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(e,t){let r=Hk(this.content,e+this.openStart,t);return r&&new L(r,this.openStart,this.openEnd)}removeBetween(e,t){return new L(Fk(this.content,e+this.openStart,t+this.openStart),this.openStart,this.openEnd)}eq(e){return this.content.eq(e.content)&&this.openStart==e.openStart&&this.openEnd==e.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let e={content:this.content.toJSON()};return this.openStart>0&&(e.openStart=this.openStart),this.openEnd>0&&(e.openEnd=this.openEnd),e}static fromJSON(e,t){if(!t)return L.empty;let r=t.openStart||0,o=t.openEnd||0;if(typeof r!="number"||typeof o!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new L(N.fromJSON(e,t.content),r,o)}static maxOpen(e,t=!0){let r=0,o=0;for(let i=e.firstChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.firstChild)r++;for(let i=e.lastChild;i&&!i.isLeaf&&(t||!i.type.spec.isolating);i=i.lastChild)o++;return new L(e,r,o)}}L.empty=new L(N.empty,0,0);function Fk(n,e,t){let{index:r,offset:o}=n.findIndex(e),i=n.maybeChild(r),{index:s,offset:a}=n.findIndex(t);if(o==e||i.isText){if(a!=t&&!n.child(s).isText)throw new RangeError("Removing non-flat range");return n.cut(0,e).append(n.cut(t))}if(r!=s)throw new RangeError("Removing non-flat range");return n.replaceChild(r,i.copy(Fk(i.content,e-o-1,t-o-1)))}function Hk(n,e,t,r){let{index:o,offset:i}=n.findIndex(e),s=n.maybeChild(o);if(i==e||s.isText)return n.cut(0,e).append(t).append(n.cut(e));let a=Hk(s.content,e-i-1,t);return a&&n.replaceChild(o,s.copy(a))}function h_(n,e,t){if(t.openStart>n.depth)throw new du("Inserted content deeper than insertion position");if(n.depth-t.openStart!=e.depth-t.openEnd)throw new du("Inconsistent open depths");return Bk(n,e,t,0)}function Bk(n,e,t,r){let o=n.index(r),i=n.node(r);if(o==e.index(r)&&r<n.depth-t.openStart){let s=Bk(n,e,t,r+1);return i.copy(i.content.replaceChild(o,s))}else if(t.content.size)if(!t.openStart&&!t.openEnd&&n.depth==r&&e.depth==r){let s=n.parent,a=s.content;return Jo(s,a.cut(0,n.parentOffset).append(t.content).append(a.cut(e.parentOffset)))}else{let{start:s,end:a}=f_(t,n);return Jo(i,Kk(n,s,a,e,r))}else return Jo(i,hu(n,e,r))}function zk(n,e){if(!e.type.compatibleContent(n.type))throw new du("Cannot join "+e.type.name+" onto "+n.type.name)}function Wf(n,e,t){let r=n.node(t);return zk(r,e.node(t)),r}function Yo(n,e){let t=e.length-1;t>=0&&n.isText&&n.sameMarkup(e[t])?e[t]=n.withText(e[t].text+n.text):e.push(n)}function Ca(n,e,t,r){let o=(e||n).node(t),i=0,s=e?e.index(t):o.childCount;n&&(i=n.index(t),n.depth>t?i++:n.textOffset&&(Yo(n.nodeAfter,r),i++));for(let a=i;a<s;a++)Yo(o.child(a),r);e&&e.depth==t&&e.textOffset&&Yo(e.nodeBefore,r)}function Jo(n,e){return n.type.checkContent(e),n.copy(e)}function Kk(n,e,t,r,o){let i=n.depth>o&&Wf(n,e,o+1),s=r.depth>o&&Wf(t,r,o+1),a=[];return Ca(null,n,o,a),i&&s&&e.index(o)==t.index(o)?(zk(i,s),Yo(Jo(i,Kk(n,e,t,r,o+1)),a)):(i&&Yo(Jo(i,hu(n,e,o+1)),a),Ca(e,t,o,a),s&&Yo(Jo(s,hu(t,r,o+1)),a)),Ca(r,null,o,a),new N(a)}function hu(n,e,t){let r=[];if(Ca(null,n,t,r),n.depth>t){let o=Wf(n,e,t+1);Yo(Jo(o,hu(n,e,t+1)),r)}return Ca(e,null,t,r),new N(r)}function f_(n,e){let t=e.depth-n.openStart,o=e.node(t).copy(n.content);for(let i=t-1;i>=0;i--)o=e.node(i).copy(N.from(o));return{start:o.resolveNoCache(n.openStart+t),end:o.resolveNoCache(o.content.size-n.openEnd-t)}}class Wa{constructor(e,t,r){this.pos=e,this.path=t,this.parentOffset=r,this.depth=t.length/3-1}resolveDepth(e){return e==null?this.depth:e<0?this.depth+e:e}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(e){return this.path[this.resolveDepth(e)*3]}index(e){return this.path[this.resolveDepth(e)*3+1]}indexAfter(e){return e=this.resolveDepth(e),this.index(e)+(e==this.depth&&!this.textOffset?0:1)}start(e){return e=this.resolveDepth(e),e==0?0:this.path[e*3-1]+1}end(e){return e=this.resolveDepth(e),this.start(e)+this.node(e).content.size}before(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position before the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]}after(e){if(e=this.resolveDepth(e),!e)throw new RangeError("There is no position after the top-level node");return e==this.depth+1?this.pos:this.path[e*3-1]+this.path[e*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let e=this.parent,t=this.index(this.depth);if(t==e.childCount)return null;let r=this.pos-this.path[this.path.length-1],o=e.child(t);return r?e.child(t).cut(r):o}get nodeBefore(){let e=this.index(this.depth),t=this.pos-this.path[this.path.length-1];return t?this.parent.child(e).cut(0,t):e==0?null:this.parent.child(e-1)}posAtIndex(e,t){t=this.resolveDepth(t);let r=this.path[t*3],o=t==0?0:this.path[t*3-1]+1;for(let i=0;i<e;i++)o+=r.child(i).nodeSize;return o}marks(){let e=this.parent,t=this.index();if(e.content.size==0)return we.none;if(this.textOffset)return e.child(t).marks;let r=e.maybeChild(t-1),o=e.maybeChild(t);if(!r){let a=r;r=o,o=a}let i=r.marks;for(var s=0;s<i.length;s++)i[s].type.spec.inclusive===!1&&(!o||!i[s].isInSet(o.marks))&&(i=i[s--].removeFromSet(i));return i}marksAcross(e){let t=this.parent.maybeChild(this.index());if(!t||!t.isInline)return null;let r=t.marks,o=e.parent.maybeChild(e.index());for(var i=0;i<r.length;i++)r[i].type.spec.inclusive===!1&&(!o||!r[i].isInSet(o.marks))&&(r=r[i--].removeFromSet(r));return r}sharedDepth(e){for(let t=this.depth;t>0;t--)if(this.start(t)<=e&&this.end(t)>=e)return t;return 0}blockRange(e=this,t){if(e.pos<this.pos)return e.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==e.pos?1:0);r>=0;r--)if(e.pos<=this.end(r)&&(!t||t(this.node(r))))return new fu(this,e,r);return null}sameParent(e){return this.pos-this.parentOffset==e.pos-e.parentOffset}max(e){return e.pos>this.pos?e:this}min(e){return e.pos<this.pos?e:this}toString(){let e="";for(let t=1;t<=this.depth;t++)e+=(e?"/":"")+this.node(t).type.name+"_"+this.index(t-1);return e+":"+this.parentOffset}static resolve(e,t){if(!(t>=0&&t<=e.content.size))throw new RangeError("Position "+t+" out of range");let r=[],o=0,i=t;for(let s=e;;){let{index:a,offset:l}=s.content.findIndex(i),c=i-l;if(r.push(s,a,o+l),!c||(s=s.child(a),s.isText))break;i=c-1,o+=l+1}return new Wa(t,r,i)}static resolveCached(e,t){let r=Lv.get(e);if(r)for(let i=0;i<r.elts.length;i++){let s=r.elts[i];if(s.pos==t)return s}else Lv.set(e,r=new p_);let o=r.elts[r.i]=Wa.resolve(e,t);return r.i=(r.i+1)%m_,o}}class p_{constructor(){this.elts=[],this.i=0}}const m_=12,Lv=new WeakMap;class fu{constructor(e,t,r){this.$from=e,this.$to=t,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const g_=Object.create(null);let wo=class qf{constructor(e,t,r,o=we.none){this.type=e,this.attrs=t,this.marks=o,this.content=r||N.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(e){return this.content.child(e)}maybeChild(e){return this.content.maybeChild(e)}forEach(e){this.content.forEach(e)}nodesBetween(e,t,r,o=0){this.content.nodesBetween(e,t,r,o,this)}descendants(e){this.nodesBetween(0,this.content.size,e)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(e,t,r,o){return this.content.textBetween(e,t,r,o)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(e){return this==e||this.sameMarkup(e)&&this.content.eq(e.content)}sameMarkup(e){return this.hasMarkup(e.type,e.attrs,e.marks)}hasMarkup(e,t,r){return this.type==e&&uu(this.attrs,t||e.defaultAttrs||g_)&&we.sameSet(this.marks,r||we.none)}copy(e=null){return e==this.content?this:new qf(this.type,this.attrs,e,this.marks)}mark(e){return e==this.marks?this:new qf(this.type,this.attrs,this.content,e)}cut(e,t=this.content.size){return e==0&&t==this.content.size?this:this.copy(this.content.cut(e,t))}slice(e,t=this.content.size,r=!1){if(e==t)return L.empty;let o=this.resolve(e),i=this.resolve(t),s=r?0:o.sharedDepth(t),a=o.start(s),c=o.node(s).content.cut(o.pos-a,i.pos-a);return new L(c,o.depth-s,i.depth-s)}replace(e,t,r){return h_(this.resolve(e),this.resolve(t),r)}nodeAt(e){for(let t=this;;){let{index:r,offset:o}=t.content.findIndex(e);if(t=t.maybeChild(r),!t)return null;if(o==e||t.isText)return t;e-=o+1}}childAfter(e){let{index:t,offset:r}=this.content.findIndex(e);return{node:this.content.maybeChild(t),index:t,offset:r}}childBefore(e){if(e==0)return{node:null,index:0,offset:0};let{index:t,offset:r}=this.content.findIndex(e);if(r<e)return{node:this.content.child(t),index:t,offset:r};let o=this.content.child(t-1);return{node:o,index:t-1,offset:r-o.nodeSize}}resolve(e){return Wa.resolveCached(this,e)}resolveNoCache(e){return Wa.resolve(this,e)}rangeHasMark(e,t,r){let o=!1;return t>e&&this.nodesBetween(e,t,i=>(r.isInSet(i.marks)&&(o=!0),!o)),o}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let e=this.type.name;return this.content.size&&(e+="("+this.content.toStringInner()+")"),jk(this.marks,e)}contentMatchAt(e){let t=this.type.contentMatch.matchFragment(this.content,0,e);if(!t)throw new Error("Called contentMatchAt on a node with invalid content");return t}canReplace(e,t,r=N.empty,o=0,i=r.childCount){let s=this.contentMatchAt(e).matchFragment(r,o,i),a=s&&s.matchFragment(this.content,t);if(!a||!a.validEnd)return!1;for(let l=o;l<i;l++)if(!this.type.allowsMarks(r.child(l).marks))return!1;return!0}canReplaceWith(e,t,r,o){if(o&&!this.type.allowsMarks(o))return!1;let i=this.contentMatchAt(e).matchType(r),s=i&&i.matchFragment(this.content,t);return s?s.validEnd:!1}canAppend(e){return e.content.size?this.canReplace(this.childCount,this.childCount,e.content):this.type.compatibleContent(e.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let e=we.none;for(let t=0;t<this.marks.length;t++){let r=this.marks[t];r.type.checkAttrs(r.attrs),e=r.addToSet(e)}if(!we.sameSet(e,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(t=>t.type.name)}`);this.content.forEach(t=>t.check())}toJSON(){let e={type:this.type.name};for(let t in this.attrs){e.attrs=this.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(t=>t.toJSON())),e}static fromJSON(e,t){if(!t)throw new RangeError("Invalid input for Node.fromJSON");let r;if(t.marks){if(!Array.isArray(t.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=t.marks.map(e.markFromJSON)}if(t.type=="text"){if(typeof t.text!="string")throw new RangeError("Invalid text node in JSON");return e.text(t.text,r)}let o=N.fromJSON(e,t.content),i=e.nodeType(t.type).create(t.attrs,o,r);return i.type.checkAttrs(i.attrs),i}};wo.prototype.text=void 0;class pu extends wo{constructor(e,t,r,o){if(super(e,t,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):jk(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(e,t){return this.text.slice(e,t)}get nodeSize(){return this.text.length}mark(e){return e==this.marks?this:new pu(this.type,this.attrs,this.text,e)}withText(e){return e==this.text?this:new pu(this.type,this.attrs,e,this.marks)}cut(e=0,t=this.text.length){return e==0&&t==this.text.length?this:this.withText(this.text.slice(e,t))}eq(e){return this.sameMarkup(e)&&this.text==e.text}toJSON(){let e=super.toJSON();return e.text=this.text,e}}function jk(n,e){for(let t=n.length-1;t>=0;t--)e=n[t].type.name+"("+e+")";return e}class hi{constructor(e){this.validEnd=e,this.next=[],this.wrapCache=[]}static parse(e,t){let r=new y_(e,t);if(r.next==null)return hi.empty;let o=$k(r);r.next&&r.err("Unexpected trailing text");let i=k_(E_(o));return I_(i,r),i}matchType(e){for(let t=0;t<this.next.length;t++)if(this.next[t].type==e)return this.next[t].next;return null}matchFragment(e,t=0,r=e.childCount){let o=this;for(let i=t;o&&i<r;i++)o=o.matchType(e.child(i).type);return o}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let e=0;e<this.next.length;e++){let{type:t}=this.next[e];if(!(t.isText||t.hasRequiredAttrs()))return t}return null}compatible(e){for(let t=0;t<this.next.length;t++)for(let r=0;r<e.next.length;r++)if(this.next[t].type==e.next[r].type)return!0;return!1}fillBefore(e,t=!1,r=0){let o=[this];function i(s,a){let l=s.matchFragment(e,r);if(l&&(!t||l.validEnd))return N.from(a.map(c=>c.createAndFill()));for(let c=0;c<s.next.length;c++){let{type:u,next:d}=s.next[c];if(!(u.isText||u.hasRequiredAttrs())&&o.indexOf(d)==-1){o.push(d);let h=i(d,a.concat(u));if(h)return h}}return null}return i(this,[])}findWrapping(e){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==e)return this.wrapCache[r+1];let t=this.computeWrapping(e);return this.wrapCache.push(e,t),t}computeWrapping(e){let t=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let o=r.shift(),i=o.match;if(i.matchType(e)){let s=[];for(let a=o;a.type;a=a.via)s.push(a.type);return s.reverse()}for(let s=0;s<i.next.length;s++){let{type:a,next:l}=i.next[s];!a.isLeaf&&!a.hasRequiredAttrs()&&!(a.name in t)&&(!o.type||l.validEnd)&&(r.push({match:a.contentMatch,type:a,via:o}),t[a.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(e){if(e>=this.next.length)throw new RangeError(`There's no ${e}th edge in this content match`);return this.next[e]}toString(){let e=[];function t(r){e.push(r);for(let o=0;o<r.next.length;o++)e.indexOf(r.next[o].next)==-1&&t(r.next[o].next)}return t(this),e.map((r,o)=>{let i=o+(r.validEnd?"*":" ")+" ";for(let s=0;s<r.next.length;s++)i+=(s?", ":"")+r.next[s].type.name+"->"+e.indexOf(r.next[s].next);return i}).join(`
`)}}hi.empty=new hi(!0);class y_{constructor(e,t){this.string=e,this.nodeTypes=t,this.inline=null,this.pos=0,this.tokens=e.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(e){return this.next==e&&(this.pos++||!0)}err(e){throw new SyntaxError(e+" (in content expression '"+this.string+"')")}}function $k(n){let e=[];do e.push(v_(n));while(n.eat("|"));return e.length==1?e[0]:{type:"choice",exprs:e}}function v_(n){let e=[];do e.push(C_(n));while(n.next&&n.next!=")"&&n.next!="|");return e.length==1?e[0]:{type:"seq",exprs:e}}function C_(n){let e=T_(n);for(;;)if(n.eat("+"))e={type:"plus",expr:e};else if(n.eat("*"))e={type:"star",expr:e};else if(n.eat("?"))e={type:"opt",expr:e};else if(n.eat("{"))e=S_(n,e);else break;return e}function Uv(n){/\D/.test(n.next)&&n.err("Expected number, got '"+n.next+"'");let e=Number(n.next);return n.pos++,e}function S_(n,e){let t=Uv(n),r=t;return n.eat(",")&&(n.next!="}"?r=Uv(n):r=-1),n.eat("}")||n.err("Unclosed braced range"),{type:"range",min:t,max:r,expr:e}}function w_(n,e){let t=n.nodeTypes,r=t[e];if(r)return[r];let o=[];for(let i in t){let s=t[i];s.isInGroup(e)&&o.push(s)}return o.length==0&&n.err("No node type or group '"+e+"' found"),o}function T_(n){if(n.eat("(")){let e=$k(n);return n.eat(")")||n.err("Missing closing paren"),e}else if(/\W/.test(n.next))n.err("Unexpected token '"+n.next+"'");else{let e=w_(n,n.next).map(t=>(n.inline==null?n.inline=t.isInline:n.inline!=t.isInline&&n.err("Mixing inline and block content"),{type:"name",value:t}));return n.pos++,e.length==1?e[0]:{type:"choice",exprs:e}}}function E_(n){let e=[[]];return o(i(n,0),t()),e;function t(){return e.push([])-1}function r(s,a,l){let c={term:l,to:a};return e[s].push(c),c}function o(s,a){s.forEach(l=>l.to=a)}function i(s,a){if(s.type=="choice")return s.exprs.reduce((l,c)=>l.concat(i(c,a)),[]);if(s.type=="seq")for(let l=0;;l++){let c=i(s.exprs[l],a);if(l==s.exprs.length-1)return c;o(c,a=t())}else if(s.type=="star"){let l=t();return r(a,l),o(i(s.expr,l),l),[r(l)]}else if(s.type=="plus"){let l=t();return o(i(s.expr,a),l),o(i(s.expr,l),l),[r(l)]}else{if(s.type=="opt")return[r(a)].concat(i(s.expr,a));if(s.type=="range"){let l=a;for(let c=0;c<s.min;c++){let u=t();o(i(s.expr,l),u),l=u}if(s.max==-1)o(i(s.expr,l),l);else for(let c=s.min;c<s.max;c++){let u=t();r(l,u),o(i(s.expr,l),u),l=u}return[r(l)]}else{if(s.type=="name")return[r(a,void 0,s.value)];throw new Error("Unknown expr type")}}}}function Vk(n,e){return e-n}function Fv(n,e){let t=[];return r(e),t.sort(Vk);function r(o){let i=n[o];if(i.length==1&&!i[0].term)return r(i[0].to);t.push(o);for(let s=0;s<i.length;s++){let{term:a,to:l}=i[s];!a&&t.indexOf(l)==-1&&r(l)}}}function k_(n){let e=Object.create(null);return t(Fv(n,0));function t(r){let o=[];r.forEach(s=>{n[s].forEach(({term:a,to:l})=>{if(!a)return;let c;for(let u=0;u<o.length;u++)o[u][0]==a&&(c=o[u][1]);Fv(n,l).forEach(u=>{c||o.push([a,c=[]]),c.indexOf(u)==-1&&c.push(u)})})});let i=e[r.join(",")]=new hi(r.indexOf(n.length-1)>-1);for(let s=0;s<o.length;s++){let a=o[s][1].sort(Vk);i.next.push({type:o[s][0],next:e[a.join(",")]||t(a)})}return i}}function I_(n,e){for(let t=0,r=[n];t<r.length;t++){let o=r[t],i=!o.validEnd,s=[];for(let a=0;a<o.next.length;a++){let{type:l,next:c}=o.next[a];s.push(l.name),i&&!(l.isText||l.hasRequiredAttrs())&&(i=!1),r.indexOf(c)==-1&&r.push(c)}i&&e.err("Only non-generatable nodes ("+s.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function Wk(n){let e=Object.create(null);for(let t in n){let r=n[t];if(!r.hasDefault)return null;e[t]=r.default}return e}function qk(n,e){let t=Object.create(null);for(let r in n){let o=e&&e[r];if(o===void 0){let i=n[r];if(i.hasDefault)o=i.default;else throw new RangeError("No value supplied for attribute "+r)}t[r]=o}return t}function Gk(n,e,t,r){for(let o in e)if(!(o in n))throw new RangeError(`Unsupported attribute ${o} for ${t} of type ${o}`);for(let o in n){let i=n[o];i.validate&&i.validate(e[o])}}function Qk(n,e){let t=Object.create(null);if(e)for(let r in e)t[r]=new b_(n,r,e[r]);return t}let Hv=class Yk{constructor(e,t,r){this.name=e,this.schema=t,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=Qk(e,r.attrs),this.defaultAttrs=Wk(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||e=="text"),this.isText=e=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==hi.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(e){return this.groups.indexOf(e)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let e in this.attrs)if(this.attrs[e].isRequired)return!0;return!1}compatibleContent(e){return this==e||this.contentMatch.compatible(e.contentMatch)}computeAttrs(e){return!e&&this.defaultAttrs?this.defaultAttrs:qk(this.attrs,e)}create(e=null,t,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new wo(this,this.computeAttrs(e),N.from(t),we.setFrom(r))}createChecked(e=null,t,r){return t=N.from(t),this.checkContent(t),new wo(this,this.computeAttrs(e),t,we.setFrom(r))}createAndFill(e=null,t,r){if(e=this.computeAttrs(e),t=N.from(t),t.size){let s=this.contentMatch.fillBefore(t);if(!s)return null;t=s.append(t)}let o=this.contentMatch.matchFragment(t),i=o&&o.fillBefore(N.empty,!0);return i?new wo(this,e,t.append(i),we.setFrom(r)):null}validContent(e){let t=this.contentMatch.matchFragment(e);if(!t||!t.validEnd)return!1;for(let r=0;r<e.childCount;r++)if(!this.allowsMarks(e.child(r).marks))return!1;return!0}checkContent(e){if(!this.validContent(e))throw new RangeError(`Invalid content for node ${this.name}: ${e.toString().slice(0,50)}`)}checkAttrs(e){Gk(this.attrs,e,"node",this.name)}allowsMarkType(e){return this.markSet==null||this.markSet.indexOf(e)>-1}allowsMarks(e){if(this.markSet==null)return!0;for(let t=0;t<e.length;t++)if(!this.allowsMarkType(e[t].type))return!1;return!0}allowedMarks(e){if(this.markSet==null)return e;let t;for(let r=0;r<e.length;r++)this.allowsMarkType(e[r].type)?t&&t.push(e[r]):t||(t=e.slice(0,r));return t?t.length?t:we.none:e}static compile(e,t){let r=Object.create(null);e.forEach((i,s)=>r[i]=new Yk(i,t,s));let o=t.spec.topNode||"doc";if(!r[o])throw new RangeError("Schema is missing its top node type ('"+o+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let i in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function A_(n,e,t){let r=t.split("|");return o=>{let i=o===null?"null":typeof o;if(r.indexOf(i)<0)throw new RangeError(`Expected value of type ${r} for attribute ${e} on type ${n}, got ${i}`)}}class b_{constructor(e,t,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?A_(e,t,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class id{constructor(e,t,r,o){this.name=e,this.rank=t,this.schema=r,this.spec=o,this.attrs=Qk(e,o.attrs),this.excluded=null;let i=Wk(this.attrs);this.instance=i?new we(this,i):null}create(e=null){return!e&&this.instance?this.instance:new we(this,qk(this.attrs,e))}static compile(e,t){let r=Object.create(null),o=0;return e.forEach((i,s)=>r[i]=new id(i,o++,t,s)),r}removeFromSet(e){for(var t=0;t<e.length;t++)e[t].type==this&&(e=e.slice(0,t).concat(e.slice(t+1)),t--);return e}isInSet(e){for(let t=0;t<e.length;t++)if(e[t].type==this)return e[t]}checkAttrs(e){Gk(this.attrs,e,"mark",this.name)}excludes(e){return this.excluded.indexOf(e)>-1}}class Jk{constructor(e){this.linebreakReplacement=null,this.cached=Object.create(null);let t=this.spec={};for(let o in e)t[o]=e[o];t.nodes=gt.from(e.nodes),t.marks=gt.from(e.marks||{}),this.nodes=Hv.compile(this.spec.nodes,this),this.marks=id.compile(this.spec.marks,this);let r=Object.create(null);for(let o in this.nodes){if(o in this.marks)throw new RangeError(o+" can not be both a node and a mark");let i=this.nodes[o],s=i.spec.content||"",a=i.spec.marks;if(i.contentMatch=r[s]||(r[s]=hi.parse(s,this.nodes)),i.inlineContent=i.contentMatch.inlineContent,i.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!i.isInline||!i.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=i}i.markSet=a=="_"?null:a?Bv(this,a.split(" ")):a==""||!i.inlineContent?[]:null}for(let o in this.marks){let i=this.marks[o],s=i.spec.excludes;i.excluded=s==null?[i]:s==""?[]:Bv(this,s.split(" "))}this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(e,t=null,r,o){if(typeof e=="string")e=this.nodeType(e);else if(e instanceof Hv){if(e.schema!=this)throw new RangeError("Node type from different schema used ("+e.name+")")}else throw new RangeError("Invalid node type: "+e);return e.createChecked(t,r,o)}text(e,t){let r=this.nodes.text;return new pu(r,r.defaultAttrs,e,we.setFrom(t))}mark(e,t){return typeof e=="string"&&(e=this.marks[e]),e.create(t)}nodeFromJSON(e){return wo.fromJSON(this,e)}markFromJSON(e){return we.fromJSON(this,e)}nodeType(e){let t=this.nodes[e];if(!t)throw new RangeError("Unknown node type: "+e);return t}}function Bv(n,e){let t=[];for(let r=0;r<e.length;r++){let o=e[r],i=n.marks[o],s=i;if(i)t.push(i);else for(let a in n.marks){let l=n.marks[a];(o=="_"||l.spec.group&&l.spec.group.split(" ").indexOf(o)>-1)&&t.push(s=l)}if(!s)throw new SyntaxError("Unknown mark type: '"+e[r]+"'")}return t}function R_(n){return n.tag!=null}function N_(n){return n.style!=null}let Sa=class Gf{constructor(e,t){this.schema=e,this.rules=t,this.tags=[],this.styles=[];let r=this.matchedStyles=[];t.forEach(o=>{if(R_(o))this.tags.push(o);else if(N_(o)){let i=/[^=]*/.exec(o.style)[0];r.indexOf(i)<0&&r.push(i),this.styles.push(o)}}),this.normalizeLists=!this.tags.some(o=>{if(!/^(ul|ol)\b/.test(o.tag)||!o.node)return!1;let i=e.nodes[o.node];return i.contentMatch.matchType(i)})}parse(e,t={}){let r=new Kv(this,t,!1);return r.addAll(e,we.none,t.from,t.to),r.finish()}parseSlice(e,t={}){let r=new Kv(this,t,!0);return r.addAll(e,we.none,t.from,t.to),L.maxOpen(r.finish())}matchTag(e,t,r){for(let o=r?this.tags.indexOf(r)+1:0;o<this.tags.length;o++){let i=this.tags[o];if(M_(e,i.tag)&&(i.namespace===void 0||e.namespaceURI==i.namespace)&&(!i.context||t.matchesContext(i.context))){if(i.getAttrs){let s=i.getAttrs(e);if(s===!1)continue;i.attrs=s||void 0}return i}}}matchStyle(e,t,r,o){for(let i=o?this.styles.indexOf(o)+1:0;i<this.styles.length;i++){let s=this.styles[i],a=s.style;if(!(a.indexOf(e)!=0||s.context&&!r.matchesContext(s.context)||a.length>e.length&&(a.charCodeAt(e.length)!=61||a.slice(e.length+1)!=t))){if(s.getAttrs){let l=s.getAttrs(t);if(l===!1)continue;s.attrs=l||void 0}return s}}}static schemaRules(e){let t=[];function r(o){let i=o.priority==null?50:o.priority,s=0;for(;s<t.length;s++){let a=t[s];if((a.priority==null?50:a.priority)<i)break}t.splice(s,0,o)}for(let o in e.marks){let i=e.marks[o].spec.parseDOM;i&&i.forEach(s=>{r(s=jv(s)),s.mark||s.ignore||s.clearMark||(s.mark=o)})}for(let o in e.nodes){let i=e.nodes[o].spec.parseDOM;i&&i.forEach(s=>{r(s=jv(s)),s.node||s.ignore||s.mark||(s.node=o)})}return t}static fromSchema(e){return e.cached.domParser||(e.cached.domParser=new Gf(e,Gf.schemaRules(e)))}};const Xk={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},x_={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},Zk={ol:!0,ul:!0},qa=1,Qf=2,wa=4;function zv(n,e,t){return e!=null?(e?qa:0)|(e==="full"?Qf:0):n&&n.whitespace=="pre"?qa|Qf:t&~wa}class Gl{constructor(e,t,r,o,i,s){this.type=e,this.attrs=t,this.marks=r,this.solid=o,this.options=s,this.content=[],this.activeMarks=we.none,this.match=i||(s&wa?null:e.contentMatch)}findWrapping(e){if(!this.match){if(!this.type)return[];let t=this.type.contentMatch.fillBefore(N.from(e));if(t)this.match=this.type.contentMatch.matchFragment(t);else{let r=this.type.contentMatch,o;return(o=r.findWrapping(e.type))?(this.match=r,o):null}}return this.match.findWrapping(e.type)}finish(e){if(!(this.options&qa)){let r=this.content[this.content.length-1],o;if(r&&r.isText&&(o=/[ \t\r\n\u000c]+$/.exec(r.text))){let i=r;r.text.length==o[0].length?this.content.pop():this.content[this.content.length-1]=i.withText(i.text.slice(0,i.text.length-o[0].length))}}let t=N.from(this.content);return!e&&this.match&&(t=t.append(this.match.fillBefore(N.empty,!0))),this.type?this.type.create(this.attrs,t,this.marks):t}inlineContext(e){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:e.parentNode&&!Xk.hasOwnProperty(e.parentNode.nodeName.toLowerCase())}}class Kv{constructor(e,t,r){this.parser=e,this.options=t,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let o=t.topNode,i,s=zv(null,t.preserveWhitespace,0)|(r?wa:0);o?i=new Gl(o.type,o.attrs,we.none,!0,t.topMatch||o.type.contentMatch,s):r?i=new Gl(null,null,we.none,!0,null,s):i=new Gl(e.schema.topNodeType,null,we.none,!0,null,s),this.nodes=[i],this.find=t.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(e,t){e.nodeType==3?this.addTextNode(e,t):e.nodeType==1&&this.addElement(e,t)}addTextNode(e,t){let r=e.nodeValue,o=this.top,i=o.options&Qf?"full":this.localPreserveWS||(o.options&qa)>0;if(i==="full"||o.inlineContext(e)||/[^ \t\r\n\u000c]/.test(r)){if(i)i!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let s=o.content[o.content.length-1],a=e.previousSibling;(!s||a&&a.nodeName=="BR"||s.isText&&/[ \t\r\n\u000c]$/.test(s.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),t,!/\S/.test(r)),this.findInText(e)}else this.findInside(e)}addElement(e,t,r){let o=this.localPreserveWS,i=this.top;(e.tagName=="PRE"||/pre/.test(e.style&&e.style.whiteSpace))&&(this.localPreserveWS=!0);let s=e.nodeName.toLowerCase(),a;Zk.hasOwnProperty(s)&&this.parser.normalizeLists&&O_(e);let l=this.options.ruleFromNode&&this.options.ruleFromNode(e)||(a=this.parser.matchTag(e,this,r));e:if(l?l.ignore:x_.hasOwnProperty(s))this.findInside(e),this.ignoreFallback(e,t);else if(!l||l.skip||l.closeParent){l&&l.closeParent?this.open=Math.max(0,this.open-1):l&&l.skip.nodeType&&(e=l.skip);let c,u=this.needsBlock;if(Xk.hasOwnProperty(s))i.content.length&&i.content[0].isInline&&this.open&&(this.open--,i=this.top),c=!0,i.type||(this.needsBlock=!0);else if(!e.firstChild){this.leafFallback(e,t);break e}let d=l&&l.skip?t:this.readStyles(e,t);d&&this.addAll(e,d),c&&this.sync(i),this.needsBlock=u}else{let c=this.readStyles(e,t);c&&this.addElementByRule(e,l,c,l.consuming===!1?a:void 0)}this.localPreserveWS=o}leafFallback(e,t){e.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(e.ownerDocument.createTextNode(`
`),t)}ignoreFallback(e,t){e.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),t,!0)}readStyles(e,t){let r=e.style;if(r&&r.length)for(let o=0;o<this.parser.matchedStyles.length;o++){let i=this.parser.matchedStyles[o],s=r.getPropertyValue(i);if(s)for(let a=void 0;;){let l=this.parser.matchStyle(i,s,this,a);if(!l)break;if(l.ignore)return null;if(l.clearMark?t=t.filter(c=>!l.clearMark(c)):t=t.concat(this.parser.schema.marks[l.mark].create(l.attrs)),l.consuming===!1)a=l;else break}}return t}addElementByRule(e,t,r,o){let i,s;if(t.node)if(s=this.parser.schema.nodes[t.node],s.isLeaf)this.insertNode(s.create(t.attrs),r,e.nodeName=="BR")||this.leafFallback(e,r);else{let l=this.enter(s,t.attrs||null,r,t.preserveWhitespace);l&&(i=!0,r=l)}else{let l=this.parser.schema.marks[t.mark];r=r.concat(l.create(t.attrs))}let a=this.top;if(s&&s.isLeaf)this.findInside(e);else if(o)this.addElement(e,r,o);else if(t.getContent)this.findInside(e),t.getContent(e,this.parser.schema).forEach(l=>this.insertNode(l,r,!1));else{let l=e;typeof t.contentElement=="string"?l=e.querySelector(t.contentElement):typeof t.contentElement=="function"?l=t.contentElement(e):t.contentElement&&(l=t.contentElement),this.findAround(e,l,!0),this.addAll(l,r),this.findAround(e,l,!1)}i&&this.sync(a)&&this.open--}addAll(e,t,r,o){let i=r||0;for(let s=r?e.childNodes[r]:e.firstChild,a=o==null?null:e.childNodes[o];s!=a;s=s.nextSibling,++i)this.findAtPoint(e,i),this.addDOM(s,t);this.findAtPoint(e,i)}findPlace(e,t,r){let o,i;for(let s=this.open,a=0;s>=0;s--){let l=this.nodes[s],c=l.findWrapping(e);if(c&&(!o||o.length>c.length+a)&&(o=c,i=l,!c.length))break;if(l.solid){if(r)break;a+=2}}if(!o)return null;this.sync(i);for(let s=0;s<o.length;s++)t=this.enterInner(o[s],null,t,!1);return t}insertNode(e,t,r){if(e.isInline&&this.needsBlock&&!this.top.type){let i=this.textblockFromContext();i&&(t=this.enterInner(i,null,t))}let o=this.findPlace(e,t,r);if(o){this.closeExtra();let i=this.top;i.match&&(i.match=i.match.matchType(e.type));let s=we.none;for(let a of o.concat(e.marks))(i.type?i.type.allowsMarkType(a.type):$v(a.type,e.type))&&(s=a.addToSet(s));return i.content.push(e.mark(s)),!0}return!1}enter(e,t,r,o){let i=this.findPlace(e.create(t),r,!1);return i&&(i=this.enterInner(e,t,r,!0,o)),i}enterInner(e,t,r,o=!1,i){this.closeExtra();let s=this.top;s.match=s.match&&s.match.matchType(e);let a=zv(e,i,s.options);s.options&wa&&s.content.length==0&&(a|=wa);let l=we.none;return r=r.filter(c=>(s.type?s.type.allowsMarkType(c.type):$v(c.type,e))?(l=c.addToSet(l),!1):!0),this.nodes.push(new Gl(e,t,l,o,null,a)),this.open++,r}closeExtra(e=!1){let t=this.nodes.length-1;if(t>this.open){for(;t>this.open;t--)this.nodes[t-1].content.push(this.nodes[t].finish(e));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(e){for(let t=this.open;t>=0;t--){if(this.nodes[t]==e)return this.open=t,!0;this.localPreserveWS&&(this.nodes[t].options|=qa)}return!1}get currentPos(){this.closeExtra();let e=0;for(let t=this.open;t>=0;t--){let r=this.nodes[t].content;for(let o=r.length-1;o>=0;o--)e+=r[o].nodeSize;t&&e++}return e}findAtPoint(e,t){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==e&&this.find[r].offset==t&&(this.find[r].pos=this.currentPos)}findInside(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].pos==null&&e.nodeType==1&&e.contains(this.find[t].node)&&(this.find[t].pos=this.currentPos)}findAround(e,t,r){if(e!=t&&this.find)for(let o=0;o<this.find.length;o++)this.find[o].pos==null&&e.nodeType==1&&e.contains(this.find[o].node)&&t.compareDocumentPosition(this.find[o].node)&(r?2:4)&&(this.find[o].pos=this.currentPos)}findInText(e){if(this.find)for(let t=0;t<this.find.length;t++)this.find[t].node==e&&(this.find[t].pos=this.currentPos-(e.nodeValue.length-this.find[t].offset))}matchesContext(e){if(e.indexOf("|")>-1)return e.split(/\s*\|\s*/).some(this.matchesContext,this);let t=e.split("/"),r=this.options.context,o=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),i=-(r?r.depth+1:0)+(o?0:1),s=(a,l)=>{for(;a>=0;a--){let c=t[a];if(c==""){if(a==t.length-1||a==0)continue;for(;l>=i;l--)if(s(a-1,l))return!0;return!1}else{let u=l>0||l==0&&o?this.nodes[l].type:r&&l>=i?r.node(l-i).type:null;if(!u||u.name!=c&&!u.isInGroup(c))return!1;l--}}return!0};return s(t.length-1,this.open)}textblockFromContext(){let e=this.options.context;if(e)for(let t=e.depth;t>=0;t--){let r=e.node(t).contentMatchAt(e.indexAfter(t)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let t in this.parser.schema.nodes){let r=this.parser.schema.nodes[t];if(r.isTextblock&&r.defaultAttrs)return r}}}function O_(n){for(let e=n.firstChild,t=null;e;e=e.nextSibling){let r=e.nodeType==1?e.nodeName.toLowerCase():null;r&&Zk.hasOwnProperty(r)&&t?(t.appendChild(e),e=t):r=="li"?t=e:r&&(t=null)}}function M_(n,e){return(n.matches||n.msMatchesSelector||n.webkitMatchesSelector||n.mozMatchesSelector).call(n,e)}function jv(n){let e={};for(let t in n)e[t]=n[t];return e}function $v(n,e){let t=e.schema.nodes;for(let r in t){let o=t[r];if(!o.allowsMarkType(n))continue;let i=[],s=a=>{i.push(a);for(let l=0;l<a.edgeCount;l++){let{type:c,next:u}=a.edge(l);if(c==e||i.indexOf(u)<0&&s(u))return!0}};if(s(o.contentMatch))return!0}}class Si{constructor(e,t){this.nodes=e,this.marks=t}serializeFragment(e,t={},r){r||(r=sh(t).createDocumentFragment());let o=r,i=[];return e.forEach(s=>{if(i.length||s.marks.length){let a=0,l=0;for(;a<i.length&&l<s.marks.length;){let c=s.marks[l];if(!this.marks[c.type.name]){l++;continue}if(!c.eq(i[a][0])||c.type.spec.spanning===!1)break;a++,l++}for(;a<i.length;)o=i.pop()[1];for(;l<s.marks.length;){let c=s.marks[l++],u=this.serializeMark(c,s.isInline,t);u&&(i.push([c,o]),o.appendChild(u.dom),o=u.contentDOM||u.dom)}}o.appendChild(this.serializeNodeInner(s,t))}),r}serializeNodeInner(e,t){let{dom:r,contentDOM:o}=mc(sh(t),this.nodes[e.type.name](e),null,e.attrs);if(o){if(e.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(e.content,t,o)}return r}serializeNode(e,t={}){let r=this.serializeNodeInner(e,t);for(let o=e.marks.length-1;o>=0;o--){let i=this.serializeMark(e.marks[o],e.isInline,t);i&&((i.contentDOM||i.dom).appendChild(r),r=i.dom)}return r}serializeMark(e,t,r={}){let o=this.marks[e.type.name];return o&&mc(sh(r),o(e,t),null,e.attrs)}static renderSpec(e,t,r=null,o){return mc(e,t,r,o)}static fromSchema(e){return e.cached.domSerializer||(e.cached.domSerializer=new Si(this.nodesFromSchema(e),this.marksFromSchema(e)))}static nodesFromSchema(e){let t=Vv(e.nodes);return t.text||(t.text=r=>r.text),t}static marksFromSchema(e){return Vv(e.marks)}}function Vv(n){let e={};for(let t in n){let r=n[t].spec.toDOM;r&&(e[t]=r)}return e}function sh(n){return n.document||window.document}const Wv=new WeakMap;function __(n){let e=Wv.get(n);return e===void 0&&Wv.set(n,e=P_(n)),e}function P_(n){let e=null;function t(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")e||(e=[]),e.push(r);else for(let o=0;o<r.length;o++)t(r[o]);else for(let o in r)t(r[o])}return t(n),e}function mc(n,e,t,r){if(typeof e=="string")return{dom:n.createTextNode(e)};if(e.nodeType!=null)return{dom:e};if(e.dom&&e.dom.nodeType!=null)return e;let o=e[0],i;if(typeof o!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(i=__(r))&&i.indexOf(e)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let s=o.indexOf(" ");s>0&&(t=o.slice(0,s),o=o.slice(s+1));let a,l=t?n.createElementNS(t,o):n.createElement(o),c=e[1],u=1;if(c&&typeof c=="object"&&c.nodeType==null&&!Array.isArray(c)){u=2;for(let d in c)if(c[d]!=null){let h=d.indexOf(" ");h>0?l.setAttributeNS(d.slice(0,h),d.slice(h+1),c[d]):l.setAttribute(d,c[d])}}for(let d=u;d<e.length;d++){let h=e[d];if(h===0){if(d<e.length-1||d>u)throw new RangeError("Content hole must be the only child of its parent node");return{dom:l,contentDOM:l}}else{let{dom:f,contentDOM:p}=mc(n,h,t,r);if(l.appendChild(f),p){if(a)throw new RangeError("Multiple content holes");a=p}}}return{dom:l,contentDOM:a}}const eI=65535,tI=Math.pow(2,16);function D_(n,e){return n+e*tI}function qv(n){return n&eI}function L_(n){return(n-(n&eI))/tI}const nI=1,rI=2,gc=4,oI=8;class Yf{constructor(e,t,r){this.pos=e,this.delInfo=t,this.recover=r}get deleted(){return(this.delInfo&oI)>0}get deletedBefore(){return(this.delInfo&(nI|gc))>0}get deletedAfter(){return(this.delInfo&(rI|gc))>0}get deletedAcross(){return(this.delInfo&gc)>0}}class hn{constructor(e,t=!1){if(this.ranges=e,this.inverted=t,!e.length&&hn.empty)return hn.empty}recover(e){let t=0,r=qv(e);if(!this.inverted)for(let o=0;o<r;o++)t+=this.ranges[o*3+2]-this.ranges[o*3+1];return this.ranges[r*3]+t+L_(e)}mapResult(e,t=1){return this._map(e,t,!1)}map(e,t=1){return this._map(e,t,!0)}_map(e,t,r){let o=0,i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?o:0);if(l>e)break;let c=this.ranges[a+i],u=this.ranges[a+s],d=l+c;if(e<=d){let h=c?e==l?-1:e==d?1:t:t,f=l+o+(h<0?0:u);if(r)return f;let p=e==(t<0?l:d)?null:D_(a/3,e-l),m=e==l?rI:e==d?nI:gc;return(t<0?e!=l:e!=d)&&(m|=oI),new Yf(f,m,p)}o+=u-c}return r?e+o:new Yf(e+o,0,null)}touches(e,t){let r=0,o=qv(t),i=this.inverted?2:1,s=this.inverted?1:2;for(let a=0;a<this.ranges.length;a+=3){let l=this.ranges[a]-(this.inverted?r:0);if(l>e)break;let c=this.ranges[a+i],u=l+c;if(e<=u&&a==o*3)return!0;r+=this.ranges[a+s]-c}return!1}forEach(e){let t=this.inverted?2:1,r=this.inverted?1:2;for(let o=0,i=0;o<this.ranges.length;o+=3){let s=this.ranges[o],a=s-(this.inverted?i:0),l=s+(this.inverted?0:i),c=this.ranges[o+t],u=this.ranges[o+r];e(a,a+c,l,l+u),i+=u-c}}invert(){return new hn(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(e){return e==0?hn.empty:new hn(e<0?[0,-e,0]:[0,0,e])}}hn.empty=new hn([]);class Ga{constructor(e,t,r=0,o=e?e.length:0){this.mirror=t,this.from=r,this.to=o,this._maps=e||[],this.ownData=!(e||t)}get maps(){return this._maps}slice(e=0,t=this.maps.length){return new Ga(this._maps,this.mirror,e,t)}appendMap(e,t){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(e),t!=null&&this.setMirror(this._maps.length-1,t)}appendMapping(e){for(let t=0,r=this._maps.length;t<e._maps.length;t++){let o=e.getMirror(t);this.appendMap(e._maps[t],o!=null&&o<t?r+o:void 0)}}getMirror(e){if(this.mirror){for(let t=0;t<this.mirror.length;t++)if(this.mirror[t]==e)return this.mirror[t+(t%2?-1:1)]}}setMirror(e,t){this.mirror||(this.mirror=[]),this.mirror.push(e,t)}appendMappingInverted(e){for(let t=e.maps.length-1,r=this._maps.length+e._maps.length;t>=0;t--){let o=e.getMirror(t);this.appendMap(e._maps[t].invert(),o!=null&&o>t?r-o-1:void 0)}}invert(){let e=new Ga;return e.appendMappingInverted(this),e}map(e,t=1){if(this.mirror)return this._map(e,t,!0);for(let r=this.from;r<this.to;r++)e=this._maps[r].map(e,t);return e}mapResult(e,t=1){return this._map(e,t,!1)}_map(e,t,r){let o=0;for(let i=this.from;i<this.to;i++){let s=this._maps[i],a=s.mapResult(e,t);if(a.recover!=null){let l=this.getMirror(i);if(l!=null&&l>i&&l<this.to){i=l,e=this._maps[l].recover(a.recover);continue}}o|=a.delInfo,e=a.pos}return r?e:new Yf(e,o,null)}}const ah=Object.create(null);class _t{getMap(){return hn.empty}merge(e){return null}static fromJSON(e,t){if(!t||!t.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ah[t.stepType];if(!r)throw new RangeError(`No step type ${t.stepType} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in ah)throw new RangeError("Duplicate use of step JSON ID "+e);return ah[e]=t,t.prototype.jsonID=e,t}}class Ge{constructor(e,t){this.doc=e,this.failed=t}static ok(e){return new Ge(e,null)}static fail(e){return new Ge(null,e)}static fromReplace(e,t,r,o){try{return Ge.ok(e.replace(t,r,o))}catch(i){if(i instanceof du)return Ge.fail(i.message);throw i}}}function og(n,e,t){let r=[];for(let o=0;o<n.childCount;o++){let i=n.child(o);i.content.size&&(i=i.copy(og(i.content,e,i))),i.isInline&&(i=e(i,t,o)),r.push(i)}return N.fromArray(r)}class so extends _t{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=e.resolve(this.from),o=r.node(r.sharedDepth(this.to)),i=new L(og(t.content,(s,a)=>!s.isAtom||!a.type.allowsMarkType(this.mark.type)?s:s.mark(this.mark.addToSet(s.marks)),o),t.openStart,t.openEnd);return Ge.fromReplace(e,this.from,this.to,i)}invert(){return new lr(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new so(t.pos,r.pos,this.mark)}merge(e){return e instanceof so&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new so(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new so(t.from,t.to,e.markFromJSON(t.mark))}}_t.jsonID("addMark",so);class lr extends _t{constructor(e,t,r){super(),this.from=e,this.to=t,this.mark=r}apply(e){let t=e.slice(this.from,this.to),r=new L(og(t.content,o=>o.mark(this.mark.removeFromSet(o.marks)),e),t.openStart,t.openEnd);return Ge.fromReplace(e,this.from,this.to,r)}invert(){return new so(this.from,this.to,this.mark)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deleted&&r.deleted||t.pos>=r.pos?null:new lr(t.pos,r.pos,this.mark)}merge(e){return e instanceof lr&&e.mark.eq(this.mark)&&this.from<=e.to&&this.to>=e.from?new lr(Math.min(this.from,e.from),Math.max(this.to,e.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new lr(t.from,t.to,e.markFromJSON(t.mark))}}_t.jsonID("removeMark",lr);class ao extends _t{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ge.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.addToSet(t.marks));return Ge.fromReplace(e,this.pos,this.pos+1,new L(N.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);if(t){let r=this.mark.addToSet(t.marks);if(r.length==t.marks.length){for(let o=0;o<t.marks.length;o++)if(!t.marks[o].isInSet(r))return new ao(this.pos,t.marks[o]);return new ao(this.pos,this.mark)}}return new fi(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new ao(t.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new ao(t.pos,e.markFromJSON(t.mark))}}_t.jsonID("addNodeMark",ao);class fi extends _t{constructor(e,t){super(),this.pos=e,this.mark=t}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ge.fail("No node at mark step's position");let r=t.type.create(t.attrs,null,this.mark.removeFromSet(t.marks));return Ge.fromReplace(e,this.pos,this.pos+1,new L(N.from(r),0,t.isLeaf?0:1))}invert(e){let t=e.nodeAt(this.pos);return!t||!this.mark.isInSet(t.marks)?this:new ao(this.pos,this.mark)}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new fi(t.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new fi(t.pos,e.markFromJSON(t.mark))}}_t.jsonID("removeNodeMark",fi);class at extends _t{constructor(e,t,r,o=!1){super(),this.from=e,this.to=t,this.slice=r,this.structure=o}apply(e){return this.structure&&Jf(e,this.from,this.to)?Ge.fail("Structure replace would overwrite content"):Ge.fromReplace(e,this.from,this.to,this.slice)}getMap(){return new hn([this.from,this.to-this.from,this.slice.size])}invert(e){return new at(this.from,this.from+this.slice.size,e.slice(this.from,this.to))}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1);return t.deletedAcross&&r.deletedAcross?null:new at(t.pos,Math.max(t.pos,r.pos),this.slice,this.structure)}merge(e){if(!(e instanceof at)||e.structure||this.structure)return null;if(this.from+this.slice.size==e.from&&!this.slice.openEnd&&!e.slice.openStart){let t=this.slice.size+e.slice.size==0?L.empty:new L(this.slice.content.append(e.slice.content),this.slice.openStart,e.slice.openEnd);return new at(this.from,this.to+(e.to-e.from),t,this.structure)}else if(e.to==this.from&&!this.slice.openStart&&!e.slice.openEnd){let t=this.slice.size+e.slice.size==0?L.empty:new L(e.slice.content.append(this.slice.content),e.slice.openStart,this.slice.openEnd);return new at(e.from,this.to,t,this.structure)}else return null}toJSON(){let e={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new at(t.from,t.to,L.fromJSON(e,t.slice),!!t.structure)}}_t.jsonID("replace",at);class ct extends _t{constructor(e,t,r,o,i,s,a=!1){super(),this.from=e,this.to=t,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=a}apply(e){if(this.structure&&(Jf(e,this.from,this.gapFrom)||Jf(e,this.gapTo,this.to)))return Ge.fail("Structure gap-replace would overwrite content");let t=e.slice(this.gapFrom,this.gapTo);if(t.openStart||t.openEnd)return Ge.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,t.content);return r?Ge.fromReplace(e,this.from,this.to,r):Ge.fail("Content does not fit in gap")}getMap(){return new hn([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(e){let t=this.gapTo-this.gapFrom;return new ct(this.from,this.from+this.slice.size+t,this.from+this.insert,this.from+this.insert+t,e.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(e){let t=e.mapResult(this.from,1),r=e.mapResult(this.to,-1),o=this.from==this.gapFrom?t.pos:e.map(this.gapFrom,-1),i=this.to==this.gapTo?r.pos:e.map(this.gapTo,1);return t.deletedAcross&&r.deletedAcross||o<t.pos||i>r.pos?null:new ct(t.pos,r.pos,o,i,this.slice,this.insert,this.structure)}toJSON(){let e={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(e.slice=this.slice.toJSON()),this.structure&&(e.structure=!0),e}static fromJSON(e,t){if(typeof t.from!="number"||typeof t.to!="number"||typeof t.gapFrom!="number"||typeof t.gapTo!="number"||typeof t.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new ct(t.from,t.to,t.gapFrom,t.gapTo,L.fromJSON(e,t.slice),t.insert,!!t.structure)}}_t.jsonID("replaceAround",ct);function Jf(n,e,t){let r=n.resolve(e),o=t-e,i=r.depth;for(;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0){let s=r.node(i).maybeChild(r.indexAfter(i));for(;o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}}return!1}function U_(n,e,t,r){let o=[],i=[],s,a;n.doc.nodesBetween(e,t,(l,c,u)=>{if(!l.isInline)return;let d=l.marks;if(!r.isInSet(d)&&u.type.allowsMarkType(r.type)){let h=Math.max(c,e),f=Math.min(c+l.nodeSize,t),p=r.addToSet(d);for(let m=0;m<d.length;m++)d[m].isInSet(p)||(s&&s.to==h&&s.mark.eq(d[m])?s.to=f:o.push(s=new lr(h,f,d[m])));a&&a.to==h?a.to=f:i.push(a=new so(h,f,r))}}),o.forEach(l=>n.step(l)),i.forEach(l=>n.step(l))}function F_(n,e,t,r){let o=[],i=0;n.doc.nodesBetween(e,t,(s,a)=>{if(!s.isInline)return;i++;let l=null;if(r instanceof id){let c=s.marks,u;for(;u=r.isInSet(c);)(l||(l=[])).push(u),c=u.removeFromSet(c)}else r?r.isInSet(s.marks)&&(l=[r]):l=s.marks;if(l&&l.length){let c=Math.min(a+s.nodeSize,t);for(let u=0;u<l.length;u++){let d=l[u],h;for(let f=0;f<o.length;f++){let p=o[f];p.step==i-1&&d.eq(o[f].style)&&(h=p)}h?(h.to=c,h.step=i):o.push({style:d,from:Math.max(a,e),to:c,step:i})}}}),o.forEach(s=>n.step(new lr(s.from,s.to,s.style)))}function ig(n,e,t,r=t.contentMatch,o=!0){let i=n.doc.nodeAt(e),s=[],a=e+1;for(let l=0;l<i.childCount;l++){let c=i.child(l),u=a+c.nodeSize,d=r.matchType(c.type);if(!d)s.push(new at(a,u,L.empty));else{r=d;for(let h=0;h<c.marks.length;h++)t.allowsMarkType(c.marks[h].type)||n.step(new lr(a,u,c.marks[h]));if(o&&c.isText&&t.whitespace!="pre"){let h,f=/\r?\n|\r/g,p;for(;h=f.exec(c.text);)p||(p=new L(N.from(t.schema.text(" ",t.allowedMarks(c.marks))),0,0)),s.push(new at(a+h.index,a+h.index+h[0].length,p))}}a=u}if(!r.validEnd){let l=r.fillBefore(N.empty,!0);n.replace(a,a,new L(l,0,0))}for(let l=s.length-1;l>=0;l--)n.step(s[l])}function H_(n,e,t){return(e==0||n.canReplace(e,n.childCount))&&(t==n.childCount||n.canReplace(0,t))}function _s(n){let t=n.parent.content.cutByIndex(n.startIndex,n.endIndex);for(let r=n.depth;;--r){let o=n.$from.node(r),i=n.$from.index(r),s=n.$to.indexAfter(r);if(r<n.depth&&o.canReplace(i,s,t))return r;if(r==0||o.type.spec.isolating||!H_(o,i,s))break}return null}function B_(n,e,t){let{$from:r,$to:o,depth:i}=e,s=r.before(i+1),a=o.after(i+1),l=s,c=a,u=N.empty,d=0;for(let p=i,m=!1;p>t;p--)m||r.index(p)>0?(m=!0,u=N.from(r.node(p).copy(u)),d++):l--;let h=N.empty,f=0;for(let p=i,m=!1;p>t;p--)m||o.after(p+1)<o.end(p)?(m=!0,h=N.from(o.node(p).copy(h)),f++):c++;n.step(new ct(l,c,s,a,new L(u.append(h),d,f),u.size-d,!0))}function sg(n,e,t=null,r=n){let o=z_(n,e),i=o&&K_(r,e);return i?o.map(Gv).concat({type:e,attrs:t}).concat(i.map(Gv)):null}function Gv(n){return{type:n,attrs:null}}function z_(n,e){let{parent:t,startIndex:r,endIndex:o}=n,i=t.contentMatchAt(r).findWrapping(e);if(!i)return null;let s=i.length?i[0]:e;return t.canReplaceWith(r,o,s)?i:null}function K_(n,e){let{parent:t,startIndex:r,endIndex:o}=n,i=t.child(r),s=e.contentMatch.findWrapping(i.type);if(!s)return null;let l=(s.length?s[s.length-1]:e).contentMatch;for(let c=r;l&&c<o;c++)l=l.matchType(t.child(c).type);return!l||!l.validEnd?null:s}function j_(n,e,t){let r=N.empty;for(let s=t.length-1;s>=0;s--){if(r.size){let a=t[s].type.contentMatch.matchFragment(r);if(!a||!a.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=N.from(t[s].type.create(t[s].attrs,r))}let o=e.start,i=e.end;n.step(new ct(o,i,o,i,new L(r,0,0),t.length,!0))}function $_(n,e,t,r,o){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let i=n.steps.length;n.doc.nodesBetween(e,t,(s,a)=>{let l=typeof o=="function"?o(s):o;if(s.isTextblock&&!s.hasMarkup(r,l)&&V_(n.doc,n.mapping.slice(i).map(a),r)){let c=null;if(r.schema.linebreakReplacement){let f=r.whitespace=="pre",p=!!r.contentMatch.matchType(r.schema.linebreakReplacement);f&&!p?c=!1:!f&&p&&(c=!0)}c===!1&&sI(n,s,a,i),ig(n,n.mapping.slice(i).map(a,1),r,void 0,c===null);let u=n.mapping.slice(i),d=u.map(a,1),h=u.map(a+s.nodeSize,1);return n.step(new ct(d,h,d+1,h-1,new L(N.from(r.create(l,null,s.marks)),0,0),1,!0)),c===!0&&iI(n,s,a,i),!1}})}function iI(n,e,t,r){e.forEach((o,i)=>{if(o.isText){let s,a=/\r?\n|\r/g;for(;s=a.exec(o.text);){let l=n.mapping.slice(r).map(t+1+i+s.index);n.replaceWith(l,l+1,e.type.schema.linebreakReplacement.create())}}})}function sI(n,e,t,r){e.forEach((o,i)=>{if(o.type==o.type.schema.linebreakReplacement){let s=n.mapping.slice(r).map(t+1+i);n.replaceWith(s,s+1,e.type.schema.text(`
`))}})}function V_(n,e,t){let r=n.resolve(e),o=r.index();return r.parent.canReplaceWith(o,o+1,t)}function W_(n,e,t,r,o){let i=n.doc.nodeAt(e);if(!i)throw new RangeError("No node at given position");t||(t=i.type);let s=t.create(r,null,o||i.marks);if(i.isLeaf)return n.replaceWith(e,e+i.nodeSize,s);if(!t.validContent(i.content))throw new RangeError("Invalid content for node type "+t.name);n.step(new ct(e,e+i.nodeSize,e+1,e+i.nodeSize-1,new L(N.from(s),0,0),1,!0))}function Nr(n,e,t=1,r){let o=n.resolve(e),i=o.depth-t,s=r&&r[r.length-1]||o.parent;if(i<0||o.parent.type.spec.isolating||!o.parent.canReplace(o.index(),o.parent.childCount)||!s.type.validContent(o.parent.content.cutByIndex(o.index(),o.parent.childCount)))return!1;for(let c=o.depth-1,u=t-2;c>i;c--,u--){let d=o.node(c),h=o.index(c);if(d.type.spec.isolating)return!1;let f=d.content.cutByIndex(h,d.childCount),p=r&&r[u+1];p&&(f=f.replaceChild(0,p.type.create(p.attrs)));let m=r&&r[u]||d;if(!d.canReplace(h+1,d.childCount)||!m.type.validContent(f))return!1}let a=o.indexAfter(i),l=r&&r[0];return o.node(i).canReplaceWith(a,a,l?l.type:o.node(i+1).type)}function q_(n,e,t=1,r){let o=n.doc.resolve(e),i=N.empty,s=N.empty;for(let a=o.depth,l=o.depth-t,c=t-1;a>l;a--,c--){i=N.from(o.node(a).copy(i));let u=r&&r[c];s=N.from(u?u.type.create(u.attrs,s):o.node(a).copy(s))}n.step(new at(e,e,new L(i.append(s),t,t),!0))}function _o(n,e){let t=n.resolve(e),r=t.index();return aI(t.nodeBefore,t.nodeAfter)&&t.parent.canReplace(r,r+1)}function G_(n,e){e.content.size||n.type.compatibleContent(e.type);let t=n.contentMatchAt(n.childCount),{linebreakReplacement:r}=n.type.schema;for(let o=0;o<e.childCount;o++){let i=e.child(o),s=i.type==r?n.type.schema.nodes.text:i.type;if(t=t.matchType(s),!t||!n.type.allowsMarks(i.marks))return!1}return t.validEnd}function aI(n,e){return!!(n&&e&&!n.isLeaf&&G_(n,e))}function sd(n,e,t=-1){let r=n.resolve(e);for(let o=r.depth;;o--){let i,s,a=r.index(o);if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):t>0?(i=r.node(o+1),a++,s=r.node(o).maybeChild(a)):(i=r.node(o).maybeChild(a-1),s=r.node(o+1)),i&&!i.isTextblock&&aI(i,s)&&r.node(o).canReplace(a,a+1))return e;if(o==0)break;e=t<0?r.before(o):r.after(o)}}function Q_(n,e,t){let r=null,{linebreakReplacement:o}=n.doc.type.schema,i=n.doc.resolve(e-t),s=i.node().type;if(o&&s.inlineContent){let u=s.whitespace=="pre",d=!!s.contentMatch.matchType(o);u&&!d?r=!1:!u&&d&&(r=!0)}let a=n.steps.length;if(r===!1){let u=n.doc.resolve(e+t);sI(n,u.node(),u.before(),a)}s.inlineContent&&ig(n,e+t-1,s,i.node().contentMatchAt(i.index()),r==null);let l=n.mapping.slice(a),c=l.map(e-t);if(n.step(new at(c,l.map(e+t,-1),L.empty,!0)),r===!0){let u=n.doc.resolve(c);iI(n,u.node(),u.before(),n.steps.length)}return n}function Y_(n,e,t){let r=n.resolve(e);if(r.parent.canReplaceWith(r.index(),r.index(),t))return e;if(r.parentOffset==0)for(let o=r.depth-1;o>=0;o--){let i=r.index(o);if(r.node(o).canReplaceWith(i,i,t))return r.before(o+1);if(i>0)return null}if(r.parentOffset==r.parent.content.size)for(let o=r.depth-1;o>=0;o--){let i=r.indexAfter(o);if(r.node(o).canReplaceWith(i,i,t))return r.after(o+1);if(i<r.node(o).childCount)return null}return null}function lI(n,e,t){let r=n.resolve(e);if(!t.content.size)return e;let o=t.content;for(let i=0;i<t.openStart;i++)o=o.firstChild.content;for(let i=1;i<=(t.openStart==0&&t.size?2:1);i++)for(let s=r.depth;s>=0;s--){let a=s==r.depth?0:r.pos<=(r.start(s+1)+r.end(s+1))/2?-1:1,l=r.index(s)+(a>0?1:0),c=r.node(s),u=!1;if(i==1)u=c.canReplace(l,l,o);else{let d=c.contentMatchAt(l).findWrapping(o.firstChild.type);u=d&&c.canReplaceWith(l,l,d[0])}if(u)return a==0?r.pos:a<0?r.before(s+1):r.after(s+1)}return null}function ad(n,e,t=e,r=L.empty){if(e==t&&!r.size)return null;let o=n.resolve(e),i=n.resolve(t);return cI(o,i,r)?new at(e,t,r):new J_(o,i,r).fit()}function cI(n,e,t){return!t.openStart&&!t.openEnd&&n.start()==e.start()&&n.parent.canReplace(n.index(),e.index(),t.content)}class J_{constructor(e,t,r){this.$from=e,this.$to=t,this.unplaced=r,this.frontier=[],this.placed=N.empty;for(let o=0;o<=e.depth;o++){let i=e.node(o);this.frontier.push({type:i.type,match:i.contentMatchAt(e.indexAfter(o))})}for(let o=e.depth;o>0;o--)this.placed=N.from(e.node(o).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let c=this.findFittable();c?this.placeNodes(c):this.openMore()||this.dropNode()}let e=this.mustMoveInline(),t=this.placed.size-this.depth-this.$from.depth,r=this.$from,o=this.close(e<0?this.$to:r.doc.resolve(e));if(!o)return null;let i=this.placed,s=r.depth,a=o.depth;for(;s&&a&&i.childCount==1;)i=i.firstChild.content,s--,a--;let l=new L(i,s,a);return e>-1?new ct(r.pos,e,this.$to.pos,this.$to.end(),l,t):l.size||r.pos!=this.$to.pos?new at(r.pos,o.pos,l):null}findFittable(){let e=this.unplaced.openStart;for(let t=this.unplaced.content,r=0,o=this.unplaced.openEnd;r<e;r++){let i=t.firstChild;if(t.childCount>1&&(o=0),i.type.spec.isolating&&o<=r){e=r;break}t=i.content}for(let t=1;t<=2;t++)for(let r=t==1?e:this.unplaced.openStart;r>=0;r--){let o,i=null;r?(i=lh(this.unplaced.content,r-1).firstChild,o=i.content):o=this.unplaced.content;let s=o.firstChild;for(let a=this.depth;a>=0;a--){let{type:l,match:c}=this.frontier[a],u,d=null;if(t==1&&(s?c.matchType(s.type)||(d=c.fillBefore(N.from(s),!1)):i&&l.compatibleContent(i.type)))return{sliceDepth:r,frontierDepth:a,parent:i,inject:d};if(t==2&&s&&(u=c.findWrapping(s.type)))return{sliceDepth:r,frontierDepth:a,parent:i,wrap:u};if(i&&c.matchType(i.type))break}}}openMore(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=lh(e,t);return!o.childCount||o.firstChild.isLeaf?!1:(this.unplaced=new L(e,t+1,Math.max(r,o.size+t>=e.size-r?t+1:0)),!0)}dropNode(){let{content:e,openStart:t,openEnd:r}=this.unplaced,o=lh(e,t);if(o.childCount<=1&&t>0){let i=e.size-t<=t+o.size;this.unplaced=new L(Xs(e,t-1,1),t-1,i?t-1:r)}else this.unplaced=new L(Xs(e,t,1),t,r)}placeNodes({sliceDepth:e,frontierDepth:t,parent:r,inject:o,wrap:i}){for(;this.depth>t;)this.closeFrontierNode();if(i)for(let m=0;m<i.length;m++)this.openFrontierNode(i[m]);let s=this.unplaced,a=r?r.content:s.content,l=s.openStart-e,c=0,u=[],{match:d,type:h}=this.frontier[t];if(o){for(let m=0;m<o.childCount;m++)u.push(o.child(m));d=d.matchFragment(o)}let f=a.size+e-(s.content.size-s.openEnd);for(;c<a.childCount;){let m=a.child(c),v=d.matchType(m.type);if(!v)break;c++,(c>1||l==0||m.content.size)&&(d=v,u.push(uI(m.mark(h.allowedMarks(m.marks)),c==1?l:0,c==a.childCount?f:-1)))}let p=c==a.childCount;p||(f=-1),this.placed=Zs(this.placed,t,N.from(u)),this.frontier[t].match=d,p&&f<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let m=0,v=a;m<f;m++){let g=v.lastChild;this.frontier.push({type:g.type,match:g.contentMatchAt(g.childCount)}),v=g.content}this.unplaced=p?e==0?L.empty:new L(Xs(s.content,e-1,1),e-1,f<0?s.openEnd:e-1):new L(Xs(s.content,e,c),s.openStart,s.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let e=this.frontier[this.depth],t;if(!e.type.isTextblock||!ch(this.$to,this.$to.depth,e.type,e.match,!1)||this.$to.depth==this.depth&&(t=this.findCloseLevel(this.$to))&&t.depth==this.depth)return-1;let{depth:r}=this.$to,o=this.$to.after(r);for(;r>1&&o==this.$to.end(--r);)++o;return o}findCloseLevel(e){e:for(let t=Math.min(this.depth,e.depth);t>=0;t--){let{match:r,type:o}=this.frontier[t],i=t<e.depth&&e.end(t+1)==e.pos+(e.depth-(t+1)),s=ch(e,t,o,r,i);if(s){for(let a=t-1;a>=0;a--){let{match:l,type:c}=this.frontier[a],u=ch(e,a,c,l,!0);if(!u||u.childCount)continue e}return{depth:t,fit:s,move:i?e.doc.resolve(e.after(t+1)):e}}}}close(e){let t=this.findCloseLevel(e);if(!t)return null;for(;this.depth>t.depth;)this.closeFrontierNode();t.fit.childCount&&(this.placed=Zs(this.placed,t.depth,t.fit)),e=t.move;for(let r=t.depth+1;r<=e.depth;r++){let o=e.node(r),i=o.type.contentMatch.fillBefore(o.content,!0,e.index(r));this.openFrontierNode(o.type,o.attrs,i)}return e}openFrontierNode(e,t=null,r){let o=this.frontier[this.depth];o.match=o.match.matchType(e),this.placed=Zs(this.placed,this.depth,N.from(e.create(t,r))),this.frontier.push({type:e,match:e.contentMatch})}closeFrontierNode(){let t=this.frontier.pop().match.fillBefore(N.empty,!0);t.childCount&&(this.placed=Zs(this.placed,this.frontier.length,t))}}function Xs(n,e,t){return e==0?n.cutByIndex(t,n.childCount):n.replaceChild(0,n.firstChild.copy(Xs(n.firstChild.content,e-1,t)))}function Zs(n,e,t){return e==0?n.append(t):n.replaceChild(n.childCount-1,n.lastChild.copy(Zs(n.lastChild.content,e-1,t)))}function lh(n,e){for(let t=0;t<e;t++)n=n.firstChild.content;return n}function uI(n,e,t){if(e<=0)return n;let r=n.content;return e>1&&(r=r.replaceChild(0,uI(r.firstChild,e-1,r.childCount==1?t-1:0))),e>0&&(r=n.type.contentMatch.fillBefore(r).append(r),t<=0&&(r=r.append(n.type.contentMatch.matchFragment(r).fillBefore(N.empty,!0)))),n.copy(r)}function ch(n,e,t,r,o){let i=n.node(e),s=o?n.indexAfter(e):n.index(e);if(s==i.childCount&&!t.compatibleContent(i.type))return null;let a=r.fillBefore(i.content,!0,s);return a&&!X_(t,i.content,s)?a:null}function X_(n,e,t){for(let r=t;r<e.childCount;r++)if(!n.allowsMarks(e.child(r).marks))return!0;return!1}function Z_(n){return n.spec.defining||n.spec.definingForContent}function eP(n,e,t,r){if(!r.size)return n.deleteRange(e,t);let o=n.doc.resolve(e),i=n.doc.resolve(t);if(cI(o,i,r))return n.step(new at(e,t,r));let s=hI(o,n.doc.resolve(t));s[s.length-1]==0&&s.pop();let a=-(o.depth+1);s.unshift(a);for(let h=o.depth,f=o.pos-1;h>0;h--,f--){let p=o.node(h).type.spec;if(p.defining||p.definingAsContext||p.isolating)break;s.indexOf(h)>-1?a=h:o.before(h)==f&&s.splice(1,0,-h)}let l=s.indexOf(a),c=[],u=r.openStart;for(let h=r.content,f=0;;f++){let p=h.firstChild;if(c.push(p),f==r.openStart)break;h=p.content}for(let h=u-1;h>=0;h--){let f=c[h],p=Z_(f.type);if(p&&!f.sameMarkup(o.node(Math.abs(a)-1)))u=h;else if(p||!f.type.isTextblock)break}for(let h=r.openStart;h>=0;h--){let f=(h+u+1)%(r.openStart+1),p=c[f];if(p)for(let m=0;m<s.length;m++){let v=s[(m+l)%s.length],g=!0;v<0&&(g=!1,v=-v);let y=o.node(v-1),C=o.index(v-1);if(y.canReplaceWith(C,C,p.type,p.marks))return n.replace(o.before(v),g?i.after(v):t,new L(dI(r.content,0,r.openStart,f),f,r.openEnd))}}let d=n.steps.length;for(let h=s.length-1;h>=0&&(n.replace(e,t,r),!(n.steps.length>d));h--){let f=s[h];f<0||(e=o.before(f),t=i.after(f))}}function dI(n,e,t,r,o){if(e<t){let i=n.firstChild;n=n.replaceChild(0,i.copy(dI(i.content,e+1,t,r,i)))}if(e>r){let i=o.contentMatchAt(0),s=i.fillBefore(n).append(n);n=s.append(i.matchFragment(s).fillBefore(N.empty,!0))}return n}function tP(n,e,t,r){if(!r.isInline&&e==t&&n.doc.resolve(e).parent.content.size){let o=Y_(n.doc,e,r.type);o!=null&&(e=t=o)}n.replaceRange(e,t,new L(N.from(r),0,0))}function nP(n,e,t){let r=n.doc.resolve(e),o=n.doc.resolve(t),i=hI(r,o);for(let s=0;s<i.length;s++){let a=i[s],l=s==i.length-1;if(l&&a==0||r.node(a).type.contentMatch.validEnd)return n.delete(r.start(a),o.end(a));if(a>0&&(l||r.node(a-1).canReplace(r.index(a-1),o.indexAfter(a-1))))return n.delete(r.before(a),o.after(a))}for(let s=1;s<=r.depth&&s<=o.depth;s++)if(e-r.start(s)==r.depth-s&&t>r.end(s)&&o.end(s)-t!=o.depth-s&&r.start(s-1)==o.start(s-1)&&r.node(s-1).canReplace(r.index(s-1),o.index(s-1)))return n.delete(r.before(s),t);n.delete(e,t)}function hI(n,e){let t=[],r=Math.min(n.depth,e.depth);for(let o=r;o>=0;o--){let i=n.start(o);if(i<n.pos-(n.depth-o)||e.end(o)>e.pos+(e.depth-o)||n.node(o).type.spec.isolating||e.node(o).type.spec.isolating)break;(i==e.start(o)||o==n.depth&&o==e.depth&&n.parent.inlineContent&&e.parent.inlineContent&&o&&e.start(o-1)==i-1)&&t.push(o)}return t}class is extends _t{constructor(e,t,r){super(),this.pos=e,this.attr=t,this.value=r}apply(e){let t=e.nodeAt(this.pos);if(!t)return Ge.fail("No node at attribute step's position");let r=Object.create(null);for(let i in t.attrs)r[i]=t.attrs[i];r[this.attr]=this.value;let o=t.type.create(r,null,t.marks);return Ge.fromReplace(e,this.pos,this.pos+1,new L(N.from(o),0,t.isLeaf?0:1))}getMap(){return hn.empty}invert(e){return new is(this.pos,this.attr,e.nodeAt(this.pos).attrs[this.attr])}map(e){let t=e.mapResult(this.pos,1);return t.deletedAfter?null:new is(t.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.pos!="number"||typeof t.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new is(t.pos,t.attr,t.value)}}_t.jsonID("attr",is);class Qa extends _t{constructor(e,t){super(),this.attr=e,this.value=t}apply(e){let t=Object.create(null);for(let o in e.attrs)t[o]=e.attrs[o];t[this.attr]=this.value;let r=e.type.create(t,e.content,e.marks);return Ge.ok(r)}getMap(){return hn.empty}invert(e){return new Qa(this.attr,e.attrs[this.attr])}map(e){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(e,t){if(typeof t.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Qa(t.attr,t.value)}}_t.jsonID("docAttr",Qa);let Cs=class extends Error{};Cs=function n(e){let t=Error.call(this,e);return t.__proto__=n.prototype,t};Cs.prototype=Object.create(Error.prototype);Cs.prototype.constructor=Cs;Cs.prototype.name="TransformError";class rP{constructor(e){this.doc=e,this.steps=[],this.docs=[],this.mapping=new Ga}get before(){return this.docs.length?this.docs[0]:this.doc}step(e){let t=this.maybeStep(e);if(t.failed)throw new Cs(t.failed);return this}maybeStep(e){let t=e.apply(this.doc);return t.failed||this.addStep(e,t.doc),t}get docChanged(){return this.steps.length>0}addStep(e,t){this.docs.push(this.doc),this.steps.push(e),this.mapping.appendMap(e.getMap()),this.doc=t}replace(e,t=e,r=L.empty){let o=ad(this.doc,e,t,r);return o&&this.step(o),this}replaceWith(e,t,r){return this.replace(e,t,new L(N.from(r),0,0))}delete(e,t){return this.replace(e,t,L.empty)}insert(e,t){return this.replaceWith(e,e,t)}replaceRange(e,t,r){return eP(this,e,t,r),this}replaceRangeWith(e,t,r){return tP(this,e,t,r),this}deleteRange(e,t){return nP(this,e,t),this}lift(e,t){return B_(this,e,t),this}join(e,t=1){return Q_(this,e,t),this}wrap(e,t){return j_(this,e,t),this}setBlockType(e,t=e,r,o=null){return $_(this,e,t,r,o),this}setNodeMarkup(e,t,r=null,o){return W_(this,e,t,r,o),this}setNodeAttribute(e,t,r){return this.step(new is(e,t,r)),this}setDocAttribute(e,t){return this.step(new Qa(e,t)),this}addNodeMark(e,t){return this.step(new ao(e,t)),this}removeNodeMark(e,t){let r=this.doc.nodeAt(e);if(!r)throw new RangeError("No node at position "+e);if(t instanceof we)t.isInSet(r.marks)&&this.step(new fi(e,t));else{let o=r.marks,i,s=[];for(;i=t.isInSet(o);)s.push(new fi(e,i)),o=i.removeFromSet(o);for(let a=s.length-1;a>=0;a--)this.step(s[a])}return this}split(e,t=1,r){return q_(this,e,t,r),this}addMark(e,t,r){return U_(this,e,t,r),this}removeMark(e,t,r){return F_(this,e,t,r),this}clearIncompatible(e,t,r){return ig(this,e,t,r),this}}const uh=Object.create(null);class Z{constructor(e,t,r){this.$anchor=e,this.$head=t,this.ranges=r||[new oP(e.min(t),e.max(t))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let e=this.ranges;for(let t=0;t<e.length;t++)if(e[t].$from.pos!=e[t].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(e,t=L.empty){let r=t.content.lastChild,o=null;for(let a=0;a<t.openEnd;a++)o=r,r=r.lastChild;let i=e.steps.length,s=this.ranges;for(let a=0;a<s.length;a++){let{$from:l,$to:c}=s[a],u=e.mapping.slice(i);e.replaceRange(u.map(l.pos),u.map(c.pos),a?L.empty:t),a==0&&Jv(e,i,(r?r.isInline:o&&o.isTextblock)?-1:1)}}replaceWith(e,t){let r=e.steps.length,o=this.ranges;for(let i=0;i<o.length;i++){let{$from:s,$to:a}=o[i],l=e.mapping.slice(r),c=l.map(s.pos),u=l.map(a.pos);i?e.deleteRange(c,u):(e.replaceRangeWith(c,u,t),Jv(e,r,t.isInline?-1:1))}}static findFrom(e,t,r=!1){let o=e.parent.inlineContent?new J(e):xi(e.node(0),e.parent,e.pos,e.index(),t,r);if(o)return o;for(let i=e.depth-1;i>=0;i--){let s=t<0?xi(e.node(0),e.node(i),e.before(i+1),e.index(i),t,r):xi(e.node(0),e.node(i),e.after(i+1),e.index(i)+1,t,r);if(s)return s}return null}static near(e,t=1){return this.findFrom(e,t)||this.findFrom(e,-t)||new yn(e.node(0))}static atStart(e){return xi(e,e,0,0,1)||new yn(e)}static atEnd(e){return xi(e,e,e.content.size,e.childCount,-1)||new yn(e)}static fromJSON(e,t){if(!t||!t.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=uh[t.type];if(!r)throw new RangeError(`No selection type ${t.type} defined`);return r.fromJSON(e,t)}static jsonID(e,t){if(e in uh)throw new RangeError("Duplicate use of selection JSON ID "+e);return uh[e]=t,t.prototype.jsonID=e,t}getBookmark(){return J.between(this.$anchor,this.$head).getBookmark()}}Z.prototype.visible=!0;class oP{constructor(e,t){this.$from=e,this.$to=t}}let Qv=!1;function Yv(n){!Qv&&!n.parent.inlineContent&&(Qv=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+n.parent.type.name+")"))}class J extends Z{constructor(e,t=e){Yv(e),Yv(t),super(e,t)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(e,t){let r=e.resolve(t.map(this.head));if(!r.parent.inlineContent)return Z.near(r);let o=e.resolve(t.map(this.anchor));return new J(o.parent.inlineContent?o:r,r)}replace(e,t=L.empty){if(super.replace(e,t),t==L.empty){let r=this.$from.marksAcross(this.$to);r&&e.ensureMarks(r)}}eq(e){return e instanceof J&&e.anchor==this.anchor&&e.head==this.head}getBookmark(){return new ld(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(e,t){if(typeof t.anchor!="number"||typeof t.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new J(e.resolve(t.anchor),e.resolve(t.head))}static create(e,t,r=t){let o=e.resolve(t);return new this(o,r==t?o:e.resolve(r))}static between(e,t,r){let o=e.pos-t.pos;if((!r||o)&&(r=o>=0?1:-1),!t.parent.inlineContent){let i=Z.findFrom(t,r,!0)||Z.findFrom(t,-r,!0);if(i)t=i.$head;else return Z.near(t,r)}return e.parent.inlineContent||(o==0?e=t:(e=(Z.findFrom(e,-r,!0)||Z.findFrom(e,r,!0)).$anchor,e.pos<t.pos!=o<0&&(e=t))),new J(e,t)}}Z.jsonID("text",J);class ld{constructor(e,t){this.anchor=e,this.head=t}map(e){return new ld(e.map(this.anchor),e.map(this.head))}resolve(e){return J.between(e.resolve(this.anchor),e.resolve(this.head))}}class q extends Z{constructor(e){let t=e.nodeAfter,r=e.node(0).resolve(e.pos+t.nodeSize);super(e,r),this.node=t}map(e,t){let{deleted:r,pos:o}=t.mapResult(this.anchor),i=e.resolve(o);return r?Z.near(i):new q(i)}content(){return new L(N.from(this.node),0,0)}eq(e){return e instanceof q&&e.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new ag(this.anchor)}static fromJSON(e,t){if(typeof t.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new q(e.resolve(t.anchor))}static create(e,t){return new q(e.resolve(t))}static isSelectable(e){return!e.isText&&e.type.spec.selectable!==!1}}q.prototype.visible=!1;Z.jsonID("node",q);class ag{constructor(e){this.anchor=e}map(e){let{deleted:t,pos:r}=e.mapResult(this.anchor);return t?new ld(r,r):new ag(r)}resolve(e){let t=e.resolve(this.anchor),r=t.nodeAfter;return r&&q.isSelectable(r)?new q(t):Z.near(t)}}class yn extends Z{constructor(e){super(e.resolve(0),e.resolve(e.content.size))}replace(e,t=L.empty){if(t==L.empty){e.delete(0,e.doc.content.size);let r=Z.atStart(e.doc);r.eq(e.selection)||e.setSelection(r)}else super.replace(e,t)}toJSON(){return{type:"all"}}static fromJSON(e){return new yn(e)}map(e){return new yn(e)}eq(e){return e instanceof yn}getBookmark(){return iP}}Z.jsonID("all",yn);const iP={map(){return this},resolve(n){return new yn(n)}};function xi(n,e,t,r,o,i=!1){if(e.inlineContent)return J.create(n,t);for(let s=r-(o>0?0:1);o>0?s<e.childCount:s>=0;s+=o){let a=e.child(s);if(a.isAtom){if(!i&&q.isSelectable(a))return q.create(n,t-(o<0?a.nodeSize:0))}else{let l=xi(n,a,t+o,o<0?a.childCount:0,o,i);if(l)return l}t+=a.nodeSize*o}return null}function Jv(n,e,t){let r=n.steps.length-1;if(r<e)return;let o=n.steps[r];if(!(o instanceof at||o instanceof ct))return;let i=n.mapping.maps[r],s;i.forEach((a,l,c,u)=>{s==null&&(s=u)}),n.setSelection(Z.near(n.doc.resolve(s),t))}const Xv=1,Ql=2,Zv=4;class sP extends rP{constructor(e){super(e.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=e.selection,this.storedMarks=e.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(e){if(e.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=e,this.curSelectionFor=this.steps.length,this.updated=(this.updated|Xv)&~Ql,this.storedMarks=null,this}get selectionSet(){return(this.updated&Xv)>0}setStoredMarks(e){return this.storedMarks=e,this.updated|=Ql,this}ensureMarks(e){return we.sameSet(this.storedMarks||this.selection.$from.marks(),e)||this.setStoredMarks(e),this}addStoredMark(e){return this.ensureMarks(e.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(e){return this.ensureMarks(e.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ql)>0}addStep(e,t){super.addStep(e,t),this.updated=this.updated&~Ql,this.storedMarks=null}setTime(e){return this.time=e,this}replaceSelection(e){return this.selection.replace(this,e),this}replaceSelectionWith(e,t=!0){let r=this.selection;return t&&(e=e.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||we.none))),r.replaceWith(this,e),this}deleteSelection(){return this.selection.replace(this),this}insertText(e,t,r){let o=this.doc.type.schema;if(t==null)return e?this.replaceSelectionWith(o.text(e),!0):this.deleteSelection();{if(r==null&&(r=t),r=r??t,!e)return this.deleteRange(t,r);let i=this.storedMarks;if(!i){let s=this.doc.resolve(t);i=r==t?s.marks():s.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(t,r,o.text(e,i)),this.selection.empty||this.setSelection(Z.near(this.selection.$to)),this}}setMeta(e,t){return this.meta[typeof e=="string"?e:e.key]=t,this}getMeta(e){return this.meta[typeof e=="string"?e:e.key]}get isGeneric(){for(let e in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=Zv,this}get scrolledIntoView(){return(this.updated&Zv)>0}}function eC(n,e){return!e||!n?n:n.bind(e)}class ea{constructor(e,t,r){this.name=e,this.init=eC(t.init,r),this.apply=eC(t.apply,r)}}const aP=[new ea("doc",{init(n){return n.doc||n.schema.topNodeType.createAndFill()},apply(n){return n.doc}}),new ea("selection",{init(n,e){return n.selection||Z.atStart(e.doc)},apply(n){return n.selection}}),new ea("storedMarks",{init(n){return n.storedMarks||null},apply(n,e,t,r){return r.selection.$cursor?n.storedMarks:null}}),new ea("scrollToSelection",{init(){return 0},apply(n,e){return n.scrolledIntoView?e+1:e}})];class dh{constructor(e,t){this.schema=e,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=aP.slice(),t&&t.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new ea(r.key,r.spec.state,r))})}}class qi{constructor(e){this.config=e}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(e){return this.applyTransaction(e).state}filterTransaction(e,t=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=t){let o=this.config.plugins[r];if(o.spec.filterTransaction&&!o.spec.filterTransaction.call(o,e,this))return!1}return!0}applyTransaction(e){if(!this.filterTransaction(e))return{state:this,transactions:[]};let t=[e],r=this.applyInner(e),o=null;for(;;){let i=!1;for(let s=0;s<this.config.plugins.length;s++){let a=this.config.plugins[s];if(a.spec.appendTransaction){let l=o?o[s].n:0,c=o?o[s].state:this,u=l<t.length&&a.spec.appendTransaction.call(a,l?t.slice(l):t,c,r);if(u&&r.filterTransaction(u,s)){if(u.setMeta("appendedTransaction",e),!o){o=[];for(let d=0;d<this.config.plugins.length;d++)o.push(d<s?{state:r,n:t.length}:{state:this,n:0})}t.push(u),r=r.applyInner(u),i=!0}o&&(o[s]={state:r,n:t.length})}}if(!i)return{state:r,transactions:t}}}applyInner(e){if(!e.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let t=new qi(this.config),r=this.config.fields;for(let o=0;o<r.length;o++){let i=r[o];t[i.name]=i.apply(e,this[i.name],this,t)}return t}get tr(){return new sP(this)}static create(e){let t=new dh(e.doc?e.doc.type.schema:e.schema,e.plugins),r=new qi(t);for(let o=0;o<t.fields.length;o++)r[t.fields[o].name]=t.fields[o].init(e,r);return r}reconfigure(e){let t=new dh(this.schema,e.plugins),r=t.fields,o=new qi(t);for(let i=0;i<r.length;i++){let s=r[i].name;o[s]=this.hasOwnProperty(s)?this[s]:r[i].init(e,o)}return o}toJSON(e){let t={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(t.storedMarks=this.storedMarks.map(r=>r.toJSON())),e&&typeof e=="object")for(let r in e){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let o=e[r],i=o.spec.state;i&&i.toJSON&&(t[r]=i.toJSON.call(o,this[o.key]))}return t}static fromJSON(e,t,r){if(!t)throw new RangeError("Invalid input for EditorState.fromJSON");if(!e.schema)throw new RangeError("Required config field 'schema' missing");let o=new dh(e.schema,e.plugins),i=new qi(o);return o.fields.forEach(s=>{if(s.name=="doc")i.doc=wo.fromJSON(e.schema,t.doc);else if(s.name=="selection")i.selection=Z.fromJSON(i.doc,t.selection);else if(s.name=="storedMarks")t.storedMarks&&(i.storedMarks=t.storedMarks.map(e.schema.markFromJSON));else{if(r)for(let a in r){let l=r[a],c=l.spec.state;if(l.key==s.name&&c&&c.fromJSON&&Object.prototype.hasOwnProperty.call(t,a)){i[s.name]=c.fromJSON.call(l,e,t[a],i);return}}i[s.name]=s.init(e,i)}}),i}}function fI(n,e,t){for(let r in n){let o=n[r];o instanceof Function?o=o.bind(e):r=="handleDOMEvents"&&(o=fI(o,e,{})),t[r]=o}return t}class $t{constructor(e){this.spec=e,this.props={},e.props&&fI(e.props,this,this.props),this.key=e.key?e.key.key:pI("plugin")}getState(e){return e[this.key]}}const hh=Object.create(null);function pI(n){return n in hh?n+"$"+ ++hh[n]:(hh[n]=0,n+"$")}class Yn{constructor(e="key"){this.key=pI(e)}get(e){return e.config.pluginsByKey[this.key]}getState(e){return e[this.key]}}const yt=function(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e},Ss=function(n){let e=n.assignedSlot||n.parentNode;return e&&e.nodeType==11?e.host:e};let Xf=null;const Sr=function(n,e,t){let r=Xf||(Xf=document.createRange());return r.setEnd(n,t??n.nodeValue.length),r.setStart(n,e||0),r},lP=function(){Xf=null},pi=function(n,e,t,r){return t&&(tC(n,e,t,r,-1)||tC(n,e,t,r,1))},cP=/^(img|br|input|textarea|hr)$/i;function tC(n,e,t,r,o){for(var i;;){if(n==t&&e==r)return!0;if(e==(o<0?0:An(n))){let s=n.parentNode;if(!s||s.nodeType!=1||pl(n)||cP.test(n.nodeName)||n.contentEditable=="false")return!1;e=yt(n)+(o<0?0:1),n=s}else if(n.nodeType==1){let s=n.childNodes[e+(o<0?-1:0)];if(s.nodeType==1&&s.contentEditable=="false")if(!((i=s.pmViewDesc)===null||i===void 0)&&i.ignoreForSelection)e+=o;else return!1;else n=s,e=o<0?An(n):0}else return!1}}function An(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function uP(n,e){for(;;){if(n.nodeType==3&&e)return n;if(n.nodeType==1&&e>0){if(n.contentEditable=="false")return null;n=n.childNodes[e-1],e=An(n)}else if(n.parentNode&&!pl(n))e=yt(n),n=n.parentNode;else return null}}function dP(n,e){for(;;){if(n.nodeType==3&&e<n.nodeValue.length)return n;if(n.nodeType==1&&e<n.childNodes.length){if(n.contentEditable=="false")return null;n=n.childNodes[e],e=0}else if(n.parentNode&&!pl(n))e=yt(n)+1,n=n.parentNode;else return null}}function hP(n,e,t){for(let r=e==0,o=e==An(n);r||o;){if(n==t)return!0;let i=yt(n);if(n=n.parentNode,!n)return!1;r=r&&i==0,o=o&&i==An(n)}}function pl(n){let e;for(let t=n;t&&!(e=t.pmViewDesc);t=t.parentNode);return e&&e.node&&e.node.isBlock&&(e.dom==n||e.contentDOM==n)}const cd=function(n){return n.focusNode&&pi(n.focusNode,n.focusOffset,n.anchorNode,n.anchorOffset)};function Ho(n,e){let t=document.createEvent("Event");return t.initEvent("keydown",!0,!0),t.keyCode=n,t.key=t.code=e,t}function fP(n){let e=n.activeElement;for(;e&&e.shadowRoot;)e=e.shadowRoot.activeElement;return e}function pP(n,e,t){if(n.caretPositionFromPoint)try{let r=n.caretPositionFromPoint(e,t);if(r)return{node:r.offsetNode,offset:Math.min(An(r.offsetNode),r.offset)}}catch{}if(n.caretRangeFromPoint){let r=n.caretRangeFromPoint(e,t);if(r)return{node:r.startContainer,offset:Math.min(An(r.startContainer),r.startOffset)}}}const fr=typeof navigator<"u"?navigator:null,nC=typeof document<"u"?document:null,Po=fr&&fr.userAgent||"",Zf=/Edge\/(\d+)/.exec(Po),mI=/MSIE \d/.exec(Po),ep=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Po),Xt=!!(mI||ep||Zf),To=mI?document.documentMode:ep?+ep[1]:Zf?+Zf[1]:0,Qn=!Xt&&/gecko\/(\d+)/i.test(Po);Qn&&+(/Firefox\/(\d+)/.exec(Po)||[0,0])[1];const tp=!Xt&&/Chrome\/(\d+)/.exec(Po),Nt=!!tp,gI=tp?+tp[1]:0,Ut=!Xt&&!!fr&&/Apple Computer/.test(fr.vendor),ws=Ut&&(/Mobile\/\w+/.test(Po)||!!fr&&fr.maxTouchPoints>2),En=ws||(fr?/Mac/.test(fr.platform):!1),mP=fr?/Win/.test(fr.platform):!1,Ar=/Android \d/.test(Po),ml=!!nC&&"webkitFontSmoothing"in nC.documentElement.style,gP=ml?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function yP(n){let e=n.defaultView&&n.defaultView.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.documentElement.clientWidth,top:0,bottom:n.documentElement.clientHeight}}function yr(n,e){return typeof n=="number"?n:n[e]}function vP(n){let e=n.getBoundingClientRect(),t=e.width/n.offsetWidth||1,r=e.height/n.offsetHeight||1;return{left:e.left,right:e.left+n.clientWidth*t,top:e.top,bottom:e.top+n.clientHeight*r}}function rC(n,e,t){let r=n.someProp("scrollThreshold")||0,o=n.someProp("scrollMargin")||5,i=n.dom.ownerDocument;for(let s=t||n.dom;s;){if(s.nodeType!=1){s=Ss(s);continue}let a=s,l=a==i.body,c=l?yP(i):vP(a),u=0,d=0;if(e.top<c.top+yr(r,"top")?d=-(c.top-e.top+yr(o,"top")):e.bottom>c.bottom-yr(r,"bottom")&&(d=e.bottom-e.top>c.bottom-c.top?e.top+yr(o,"top")-c.top:e.bottom-c.bottom+yr(o,"bottom")),e.left<c.left+yr(r,"left")?u=-(c.left-e.left+yr(o,"left")):e.right>c.right-yr(r,"right")&&(u=e.right-c.right+yr(o,"right")),u||d)if(l)i.defaultView.scrollBy(u,d);else{let f=a.scrollLeft,p=a.scrollTop;d&&(a.scrollTop+=d),u&&(a.scrollLeft+=u);let m=a.scrollLeft-f,v=a.scrollTop-p;e={left:e.left-m,top:e.top-v,right:e.right-m,bottom:e.bottom-v}}let h=l?"fixed":getComputedStyle(s).position;if(/^(fixed|sticky)$/.test(h))break;s=h=="absolute"?s.offsetParent:Ss(s)}}function CP(n){let e=n.dom.getBoundingClientRect(),t=Math.max(0,e.top),r,o;for(let i=(e.left+e.right)/2,s=t+1;s<Math.min(innerHeight,e.bottom);s+=5){let a=n.root.elementFromPoint(i,s);if(!a||a==n.dom||!n.dom.contains(a))continue;let l=a.getBoundingClientRect();if(l.top>=t-20){r=a,o=l.top;break}}return{refDOM:r,refTop:o,stack:yI(n.dom)}}function yI(n){let e=[],t=n.ownerDocument;for(let r=n;r&&(e.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),n!=t);r=Ss(r));return e}function SP({refDOM:n,refTop:e,stack:t}){let r=n?n.getBoundingClientRect().top:0;vI(t,r==0?0:r-e)}function vI(n,e){for(let t=0;t<n.length;t++){let{dom:r,top:o,left:i}=n[t];r.scrollTop!=o+e&&(r.scrollTop=o+e),r.scrollLeft!=i&&(r.scrollLeft=i)}}let Ii=null;function wP(n){if(n.setActive)return n.setActive();if(Ii)return n.focus(Ii);let e=yI(n);n.focus(Ii==null?{get preventScroll(){return Ii={preventScroll:!0},!0}}:void 0),Ii||(Ii=!1,vI(e,0))}function CI(n,e){let t,r=2e8,o,i=0,s=e.top,a=e.top,l,c;for(let u=n.firstChild,d=0;u;u=u.nextSibling,d++){let h;if(u.nodeType==1)h=u.getClientRects();else if(u.nodeType==3)h=Sr(u).getClientRects();else continue;for(let f=0;f<h.length;f++){let p=h[f];if(p.top<=s&&p.bottom>=a){s=Math.max(p.bottom,s),a=Math.min(p.top,a);let m=p.left>e.left?p.left-e.left:p.right<e.left?e.left-p.right:0;if(m<r){t=u,r=m,o=m&&t.nodeType==3?{left:p.right<e.left?p.right:p.left,top:e.top}:e,u.nodeType==1&&m&&(i=d+(e.left>=(p.left+p.right)/2?1:0));continue}}else p.top>e.top&&!l&&p.left<=e.left&&p.right>=e.left&&(l=u,c={left:Math.max(p.left,Math.min(p.right,e.left)),top:p.top});!t&&(e.left>=p.right&&e.top>=p.top||e.left>=p.left&&e.top>=p.bottom)&&(i=d+1)}}return!t&&l&&(t=l,o=c,r=0),t&&t.nodeType==3?TP(t,o):!t||r&&t.nodeType==1?{node:n,offset:i}:CI(t,o)}function TP(n,e){let t=n.nodeValue.length,r=document.createRange();for(let o=0;o<t;o++){r.setEnd(n,o+1),r.setStart(n,o);let i=qr(r,1);if(i.top!=i.bottom&&lg(e,i))return{node:n,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:n,offset:0}}function lg(n,e){return n.left>=e.left-1&&n.left<=e.right+1&&n.top>=e.top-1&&n.top<=e.bottom+1}function EP(n,e){let t=n.parentNode;return t&&/^li$/i.test(t.nodeName)&&e.left<n.getBoundingClientRect().left?t:n}function kP(n,e,t){let{node:r,offset:o}=CI(e,t),i=-1;if(r.nodeType==1&&!r.firstChild){let s=r.getBoundingClientRect();i=s.left!=s.right&&t.left>(s.left+s.right)/2?1:-1}return n.docView.posFromDOM(r,o,i)}function IP(n,e,t,r){let o=-1;for(let i=e,s=!1;i!=n.dom;){let a=n.docView.nearestDesc(i,!0),l;if(!a)return null;if(a.dom.nodeType==1&&(a.node.isBlock&&a.parent||!a.contentDOM)&&((l=a.dom.getBoundingClientRect()).width||l.height)&&(a.node.isBlock&&a.parent&&(!s&&l.left>r.left||l.top>r.top?o=a.posBefore:(!s&&l.right<r.left||l.bottom<r.top)&&(o=a.posAfter),s=!0),!a.contentDOM&&o<0&&!a.node.isText))return(a.node.isBlock?r.top<(l.top+l.bottom)/2:r.left<(l.left+l.right)/2)?a.posBefore:a.posAfter;i=a.dom.parentNode}return o>-1?o:n.docView.posFromDOM(e,t,-1)}function SI(n,e,t){let r=n.childNodes.length;if(r&&t.top<t.bottom)for(let o=Math.max(0,Math.min(r-1,Math.floor(r*(e.top-t.top)/(t.bottom-t.top))-2)),i=o;;){let s=n.childNodes[i];if(s.nodeType==1){let a=s.getClientRects();for(let l=0;l<a.length;l++){let c=a[l];if(lg(e,c))return SI(s,e,c)}}if((i=(i+1)%r)==o)break}return n}function AP(n,e){let t=n.dom.ownerDocument,r,o=0,i=pP(t,e.left,e.top);i&&({node:r,offset:o}=i);let s=(n.root.elementFromPoint?n.root:t).elementFromPoint(e.left,e.top),a;if(!s||!n.dom.contains(s.nodeType!=1?s.parentNode:s)){let c=n.dom.getBoundingClientRect();if(!lg(e,c)||(s=SI(n.dom,e,c),!s))return null}if(Ut)for(let c=s;r&&c;c=Ss(c))c.draggable&&(r=void 0);if(s=EP(s,e),r){if(Qn&&r.nodeType==1&&(o=Math.min(o,r.childNodes.length),o<r.childNodes.length)){let u=r.childNodes[o],d;u.nodeName=="IMG"&&(d=u.getBoundingClientRect()).right<=e.left&&d.bottom>e.top&&o++}let c;ml&&o&&r.nodeType==1&&(c=r.childNodes[o-1]).nodeType==1&&c.contentEditable=="false"&&c.getBoundingClientRect().top>=e.top&&o--,r==n.dom&&o==r.childNodes.length-1&&r.lastChild.nodeType==1&&e.top>r.lastChild.getBoundingClientRect().bottom?a=n.state.doc.content.size:(o==0||r.nodeType!=1||r.childNodes[o-1].nodeName!="BR")&&(a=IP(n,r,o,e))}a==null&&(a=kP(n,s,e));let l=n.docView.nearestDesc(s,!0);return{pos:a,inside:l?l.posAtStart-l.border:-1}}function oC(n){return n.top<n.bottom||n.left<n.right}function qr(n,e){let t=n.getClientRects();if(t.length){let r=t[e<0?0:t.length-1];if(oC(r))return r}return Array.prototype.find.call(t,oC)||n.getBoundingClientRect()}const bP=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function wI(n,e,t){let{node:r,offset:o,atom:i}=n.docView.domFromPos(e,t<0?-1:1),s=ml||Qn;if(r.nodeType==3)if(s&&(bP.test(r.nodeValue)||(t<0?!o:o==r.nodeValue.length))){let l=qr(Sr(r,o,o),t);if(Qn&&o&&/\s/.test(r.nodeValue[o-1])&&o<r.nodeValue.length){let c=qr(Sr(r,o-1,o-1),-1);if(c.top==l.top){let u=qr(Sr(r,o,o+1),-1);if(u.top!=l.top)return Ws(u,u.left<c.left)}}return l}else{let l=o,c=o,u=t<0?1:-1;return t<0&&!o?(c++,u=-1):t>=0&&o==r.nodeValue.length?(l--,u=1):t<0?l--:c++,Ws(qr(Sr(r,l,c),u),u<0)}if(!n.state.doc.resolve(e-(i||0)).parent.inlineContent){if(i==null&&o&&(t<0||o==An(r))){let l=r.childNodes[o-1];if(l.nodeType==1)return fh(l.getBoundingClientRect(),!1)}if(i==null&&o<An(r)){let l=r.childNodes[o];if(l.nodeType==1)return fh(l.getBoundingClientRect(),!0)}return fh(r.getBoundingClientRect(),t>=0)}if(i==null&&o&&(t<0||o==An(r))){let l=r.childNodes[o-1],c=l.nodeType==3?Sr(l,An(l)-(s?0:1)):l.nodeType==1&&(l.nodeName!="BR"||!l.nextSibling)?l:null;if(c)return Ws(qr(c,1),!1)}if(i==null&&o<An(r)){let l=r.childNodes[o];for(;l.pmViewDesc&&l.pmViewDesc.ignoreForCoords;)l=l.nextSibling;let c=l?l.nodeType==3?Sr(l,0,s?0:1):l.nodeType==1?l:null:null;if(c)return Ws(qr(c,-1),!0)}return Ws(qr(r.nodeType==3?Sr(r):r,-t),t>=0)}function Ws(n,e){if(n.width==0)return n;let t=e?n.left:n.right;return{top:n.top,bottom:n.bottom,left:t,right:t}}function fh(n,e){if(n.height==0)return n;let t=e?n.top:n.bottom;return{top:t,bottom:t,left:n.left,right:n.right}}function TI(n,e,t){let r=n.state,o=n.root.activeElement;r!=e&&n.updateState(e),o!=n.dom&&n.focus();try{return t()}finally{r!=e&&n.updateState(r),o!=n.dom&&o&&o.focus()}}function RP(n,e,t){let r=e.selection,o=t=="up"?r.$from:r.$to;return TI(n,e,()=>{let{node:i}=n.docView.domFromPos(o.pos,t=="up"?-1:1);for(;;){let a=n.docView.nearestDesc(i,!0);if(!a)break;if(a.node.isBlock){i=a.contentDOM||a.dom;break}i=a.dom.parentNode}let s=wI(n,o.pos,1);for(let a=i.firstChild;a;a=a.nextSibling){let l;if(a.nodeType==1)l=a.getClientRects();else if(a.nodeType==3)l=Sr(a,0,a.nodeValue.length).getClientRects();else continue;for(let c=0;c<l.length;c++){let u=l[c];if(u.bottom>u.top+1&&(t=="up"?s.top-u.top>(u.bottom-s.top)*2:u.bottom-s.bottom>(s.bottom-u.top)*2))return!1}}return!0})}const NP=/[\u0590-\u08ac]/;function xP(n,e,t){let{$head:r}=e.selection;if(!r.parent.isTextblock)return!1;let o=r.parentOffset,i=!o,s=o==r.parent.content.size,a=n.domSelection();return a?!NP.test(r.parent.textContent)||!a.modify?t=="left"||t=="backward"?i:s:TI(n,e,()=>{let{focusNode:l,focusOffset:c,anchorNode:u,anchorOffset:d}=n.domSelectionRange(),h=a.caretBidiLevel;a.modify("move",t,"character");let f=r.depth?n.docView.domAfterPos(r.before()):n.dom,{focusNode:p,focusOffset:m}=n.domSelectionRange(),v=p&&!f.contains(p.nodeType==1?p:p.parentNode)||l==p&&c==m;try{a.collapse(u,d),l&&(l!=u||c!=d)&&a.extend&&a.extend(l,c)}catch{}return h!=null&&(a.caretBidiLevel=h),v}):r.pos==r.start()||r.pos==r.end()}let iC=null,sC=null,aC=!1;function OP(n,e,t){return iC==e&&sC==t?aC:(iC=e,sC=t,aC=t=="up"||t=="down"?RP(n,e,t):xP(n,e,t))}const xn=0,lC=1,Vo=2,pr=3;class gl{constructor(e,t,r,o){this.parent=e,this.children=t,this.dom=r,this.contentDOM=o,this.dirty=xn,r.pmViewDesc=this}matchesWidget(e){return!1}matchesMark(e){return!1}matchesNode(e,t,r){return!1}matchesHack(e){return!1}parseRule(){return null}stopEvent(e){return!1}get size(){let e=0;for(let t=0;t<this.children.length;t++)e+=this.children[t].size;return e}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let e=0;e<this.children.length;e++)this.children[e].destroy()}posBeforeChild(e){for(let t=0,r=this.posAtStart;;t++){let o=this.children[t];if(o==e)return r;r+=o.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(e,t,r){if(this.contentDOM&&this.contentDOM.contains(e.nodeType==1?e:e.parentNode))if(r<0){let i,s;if(e==this.contentDOM)i=e.childNodes[t-1];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.previousSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.previousSibling;return i?this.posBeforeChild(s)+s.size:this.posAtStart}else{let i,s;if(e==this.contentDOM)i=e.childNodes[t];else{for(;e.parentNode!=this.contentDOM;)e=e.parentNode;i=e.nextSibling}for(;i&&!((s=i.pmViewDesc)&&s.parent==this);)i=i.nextSibling;return i?this.posBeforeChild(s):this.posAtEnd}let o;if(e==this.dom&&this.contentDOM)o=t>yt(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))o=e.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(t==0)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!1;break}if(i.previousSibling)break}if(o==null&&t==e.childNodes.length)for(let i=e;;i=i.parentNode){if(i==this.dom){o=!0;break}if(i.nextSibling)break}}return o??r>0?this.posAtEnd:this.posAtStart}nearestDesc(e,t=!1){for(let r=!0,o=e;o;o=o.parentNode){let i=this.getDesc(o),s;if(i&&(!t||i.node))if(r&&(s=i.nodeDOM)&&!(s.nodeType==1?s.contains(e.nodeType==1?e:e.parentNode):s==e))r=!1;else return i}}getDesc(e){let t=e.pmViewDesc;for(let r=t;r;r=r.parent)if(r==this)return t}posFromDOM(e,t,r){for(let o=e;o;o=o.parentNode){let i=this.getDesc(o);if(i)return i.localPosFromDOM(e,t,r)}return-1}descAt(e){for(let t=0,r=0;t<this.children.length;t++){let o=this.children[t],i=r+o.size;if(r==e&&i!=r){for(;!o.border&&o.children.length;)for(let s=0;s<o.children.length;s++){let a=o.children[s];if(a.size){o=a;break}}return o}if(e<i)return o.descAt(e-r-o.border);r=i}}domFromPos(e,t){if(!this.contentDOM)return{node:this.dom,offset:0,atom:e+1};let r=0,o=0;for(let i=0;r<this.children.length;r++){let s=this.children[r],a=i+s.size;if(a>e||s instanceof kI){o=e-i;break}i=a}if(o)return this.children[r].domFromPos(o-this.children[r].border,t);for(let i;r&&!(i=this.children[r-1]).size&&i instanceof EI&&i.side>=0;r--);if(t<=0){let i,s=!0;for(;i=r?this.children[r-1]:null,!(!i||i.dom.parentNode==this.contentDOM);r--,s=!1);return i&&t&&s&&!i.border&&!i.domAtom?i.domFromPos(i.size,t):{node:this.contentDOM,offset:i?yt(i.dom)+1:0}}else{let i,s=!0;for(;i=r<this.children.length?this.children[r]:null,!(!i||i.dom.parentNode==this.contentDOM);r++,s=!1);return i&&s&&!i.border&&!i.domAtom?i.domFromPos(0,t):{node:this.contentDOM,offset:i?yt(i.dom):this.contentDOM.childNodes.length}}}parseRange(e,t,r=0){if(this.children.length==0)return{node:this.contentDOM,from:e,to:t,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let o=-1,i=-1;for(let s=r,a=0;;a++){let l=this.children[a],c=s+l.size;if(o==-1&&e<=c){let u=s+l.border;if(e>=u&&t<=c-l.border&&l.node&&l.contentDOM&&this.contentDOM.contains(l.contentDOM))return l.parseRange(e,t,u);e=s;for(let d=a;d>0;d--){let h=this.children[d-1];if(h.size&&h.dom.parentNode==this.contentDOM&&!h.emptyChildAt(1)){o=yt(h.dom)+1;break}e-=h.size}o==-1&&(o=0)}if(o>-1&&(c>t||a==this.children.length-1)){t=c;for(let u=a+1;u<this.children.length;u++){let d=this.children[u];if(d.size&&d.dom.parentNode==this.contentDOM&&!d.emptyChildAt(-1)){i=yt(d.dom);break}t+=d.size}i==-1&&(i=this.contentDOM.childNodes.length);break}s=c}return{node:this.contentDOM,from:e,to:t,fromOffset:o,toOffset:i}}emptyChildAt(e){if(this.border||!this.contentDOM||!this.children.length)return!1;let t=this.children[e<0?0:this.children.length-1];return t.size==0||t.emptyChildAt(e)}domAfterPos(e){let{node:t,offset:r}=this.domFromPos(e,0);if(t.nodeType!=1||r==t.childNodes.length)throw new RangeError("No node after pos "+e);return t.childNodes[r]}setSelection(e,t,r,o=!1){let i=Math.min(e,t),s=Math.max(e,t);for(let f=0,p=0;f<this.children.length;f++){let m=this.children[f],v=p+m.size;if(i>p&&s<v)return m.setSelection(e-p-m.border,t-p-m.border,r,o);p=v}let a=this.domFromPos(e,e?-1:1),l=t==e?a:this.domFromPos(t,t?-1:1),c=r.root.getSelection(),u=r.domSelectionRange(),d=!1;if((Qn||Ut)&&e==t){let{node:f,offset:p}=a;if(f.nodeType==3){if(d=!!(p&&f.nodeValue[p-1]==`
`),d&&p==f.nodeValue.length)for(let m=f,v;m;m=m.parentNode){if(v=m.nextSibling){v.nodeName=="BR"&&(a=l={node:v.parentNode,offset:yt(v)+1});break}let g=m.pmViewDesc;if(g&&g.node&&g.node.isBlock)break}}else{let m=f.childNodes[p-1];d=m&&(m.nodeName=="BR"||m.contentEditable=="false")}}if(Qn&&u.focusNode&&u.focusNode!=l.node&&u.focusNode.nodeType==1){let f=u.focusNode.childNodes[u.focusOffset];f&&f.contentEditable=="false"&&(o=!0)}if(!(o||d&&Ut)&&pi(a.node,a.offset,u.anchorNode,u.anchorOffset)&&pi(l.node,l.offset,u.focusNode,u.focusOffset))return;let h=!1;if((c.extend||e==t)&&!d){c.collapse(a.node,a.offset);try{e!=t&&c.extend(l.node,l.offset),h=!0}catch{}}if(!h){if(e>t){let p=a;a=l,l=p}let f=document.createRange();f.setEnd(l.node,l.offset),f.setStart(a.node,a.offset),c.removeAllRanges(),c.addRange(f)}}ignoreMutation(e){return!this.contentDOM&&e.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(e,t){for(let r=0,o=0;o<this.children.length;o++){let i=this.children[o],s=r+i.size;if(r==s?e<=s&&t>=r:e<s&&t>r){let a=r+i.border,l=s-i.border;if(e>=a&&t<=l){this.dirty=e==r||t==s?Vo:lC,e==a&&t==l&&(i.contentLost||i.dom.parentNode!=this.contentDOM)?i.dirty=pr:i.markDirty(e-a,t-a);return}else i.dirty=i.dom==i.contentDOM&&i.dom.parentNode==this.contentDOM&&!i.children.length?Vo:pr}r=s}this.dirty=Vo}markParentsDirty(){let e=1;for(let t=this.parent;t;t=t.parent,e++){let r=e==1?Vo:lC;t.dirty<r&&(t.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(e){return!1}}class EI extends gl{constructor(e,t,r,o){let i,s=t.type.toDOM;if(typeof s=="function"&&(s=s(r,()=>{if(!i)return o;if(i.parent)return i.parent.posBeforeChild(i)})),!t.type.spec.raw){if(s.nodeType!=1){let a=document.createElement("span");a.appendChild(s),s=a}s.contentEditable="false",s.classList.add("ProseMirror-widget")}super(e,[],s,null),this.widget=t,this.widget=t,i=this}matchesWidget(e){return this.dirty==xn&&e.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(e){let t=this.widget.spec.stopEvent;return t?t(e):!1}ignoreMutation(e){return e.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class MP extends gl{constructor(e,t,r,o){super(e,[],t,null),this.textDOM=r,this.text=o}get size(){return this.text.length}localPosFromDOM(e,t){return e!=this.textDOM?this.posAtStart+(t?this.size:0):this.posAtStart+t}domFromPos(e){return{node:this.textDOM,offset:e}}ignoreMutation(e){return e.type==="characterData"&&e.target.nodeValue==e.oldValue}}class mi extends gl{constructor(e,t,r,o,i){super(e,[],r,o),this.mark=t,this.spec=i}static create(e,t,r,o){let i=o.nodeViews[t.type.name],s=i&&i(t,o,r);return(!s||!s.dom)&&(s=Si.renderSpec(document,t.type.spec.toDOM(t,r),null,t.attrs)),new mi(e,t,s.dom,s.contentDOM||s.dom,s)}parseRule(){return this.dirty&pr||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(e){return this.dirty!=pr&&this.mark.eq(e)}markDirty(e,t){if(super.markDirty(e,t),this.dirty!=xn){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=xn}}slice(e,t,r){let o=mi.create(this.parent,this.mark,!0,r),i=this.children,s=this.size;t<s&&(i=rp(i,t,s,r)),e>0&&(i=rp(i,0,e,r));for(let a=0;a<i.length;a++)i[a].parent=o;return o.children=i,o}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Eo extends gl{constructor(e,t,r,o,i,s,a,l,c){super(e,[],i,s),this.node=t,this.outerDeco=r,this.innerDeco=o,this.nodeDOM=a}static create(e,t,r,o,i,s){let a=i.nodeViews[t.type.name],l,c=a&&a(t,i,()=>{if(!l)return s;if(l.parent)return l.parent.posBeforeChild(l)},r,o),u=c&&c.dom,d=c&&c.contentDOM;if(t.isText){if(!u)u=document.createTextNode(t.text);else if(u.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else u||({dom:u,contentDOM:d}=Si.renderSpec(document,t.type.spec.toDOM(t),null,t.attrs));!d&&!t.isText&&u.nodeName!="BR"&&(u.hasAttribute("contenteditable")||(u.contentEditable="false"),t.type.spec.draggable&&(u.draggable=!0));let h=u;return u=bI(u,r,t),c?l=new _P(e,t,r,o,u,d||null,h,c,i,s+1):t.isText?new ud(e,t,r,o,u,h,i):new Eo(e,t,r,o,u,d||null,h,i,s+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let e={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(e.preserveWhitespace="full"),!this.contentDOM)e.getContent=()=>this.node.content;else if(!this.contentLost)e.contentElement=this.contentDOM;else{for(let t=this.children.length-1;t>=0;t--){let r=this.children[t];if(this.dom.contains(r.dom.parentNode)){e.contentElement=r.dom.parentNode;break}}e.contentElement||(e.getContent=()=>N.empty)}return e}matchesNode(e,t,r){return this.dirty==xn&&e.eq(this.node)&&mu(t,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(e,t){let r=this.node.inlineContent,o=t,i=e.composing?this.localCompositionInfo(e,t):null,s=i&&i.pos>-1?i:null,a=i&&i.pos<0,l=new DP(this,s&&s.node,e);FP(this.node,this.innerDeco,(c,u,d)=>{c.spec.marks?l.syncToMarks(c.spec.marks,r,e):c.type.side>=0&&!d&&l.syncToMarks(u==this.node.childCount?we.none:this.node.child(u).marks,r,e),l.placeWidget(c,e,o)},(c,u,d,h)=>{l.syncToMarks(c.marks,r,e);let f;l.findNodeMatch(c,u,d,h)||a&&e.state.selection.from>o&&e.state.selection.to<o+c.nodeSize&&(f=l.findIndexWithChild(i.node))>-1&&l.updateNodeAt(c,u,d,f,e)||l.updateNextNode(c,u,d,e,h,o)||l.addNode(c,u,d,e,o),o+=c.nodeSize}),l.syncToMarks([],r,e),this.node.isTextblock&&l.addTextblockHacks(),l.destroyRest(),(l.changed||this.dirty==Vo)&&(s&&this.protectLocalComposition(e,s),II(this.contentDOM,this.children,e),ws&&HP(this.dom))}localCompositionInfo(e,t){let{from:r,to:o}=e.state.selection;if(!(e.state.selection instanceof J)||r<t||o>t+this.node.content.size)return null;let i=e.input.compositionNode;if(!i||!this.dom.contains(i.parentNode))return null;if(this.node.inlineContent){let s=i.nodeValue,a=BP(this.node.content,s,r-t,o-t);return a<0?null:{node:i,pos:a,text:s}}else return{node:i,pos:-1,text:""}}protectLocalComposition(e,{node:t,pos:r,text:o}){if(this.getDesc(t))return;let i=t;for(;i.parentNode!=this.contentDOM;i=i.parentNode){for(;i.previousSibling;)i.parentNode.removeChild(i.previousSibling);for(;i.nextSibling;)i.parentNode.removeChild(i.nextSibling);i.pmViewDesc&&(i.pmViewDesc=void 0)}let s=new MP(this,i,t,o);e.input.compositionNodes.push(s),this.children=rp(this.children,r,r+o.length,e,s)}update(e,t,r,o){return this.dirty==pr||!e.sameMarkup(this.node)?!1:(this.updateInner(e,t,r,o),!0)}updateInner(e,t,r,o){this.updateOuterDeco(t),this.node=e,this.innerDeco=r,this.contentDOM&&this.updateChildren(o,this.posAtStart),this.dirty=xn}updateOuterDeco(e){if(mu(e,this.outerDeco))return;let t=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=AI(this.dom,this.nodeDOM,np(this.outerDeco,this.node,t),np(e,this.node,t)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=e}selectNode(){this.nodeDOM.nodeType==1&&this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.dom.draggable=!0)}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.dom.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function cC(n,e,t,r,o){bI(r,e,n);let i=new Eo(void 0,n,e,t,r,r,r,o,0);return i.contentDOM&&i.updateChildren(o,0),i}class ud extends Eo{constructor(e,t,r,o,i,s,a){super(e,t,r,o,i,null,s,a,0)}parseRule(){let e=this.nodeDOM.parentNode;for(;e&&e!=this.dom&&!e.pmIsDeco;)e=e.parentNode;return{skip:e||!0}}update(e,t,r,o){return this.dirty==pr||this.dirty!=xn&&!this.inParent()||!e.sameMarkup(this.node)?!1:(this.updateOuterDeco(t),(this.dirty!=xn||e.text!=this.node.text)&&e.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=e.text,o.trackWrites==this.nodeDOM&&(o.trackWrites=null)),this.node=e,this.dirty=xn,!0)}inParent(){let e=this.parent.contentDOM;for(let t=this.nodeDOM;t;t=t.parentNode)if(t==e)return!0;return!1}domFromPos(e){return{node:this.nodeDOM,offset:e}}localPosFromDOM(e,t,r){return e==this.nodeDOM?this.posAtStart+Math.min(t,this.node.text.length):super.localPosFromDOM(e,t,r)}ignoreMutation(e){return e.type!="characterData"&&e.type!="selection"}slice(e,t,r){let o=this.node.cut(e,t),i=document.createTextNode(o.text);return new ud(this.parent,o,this.outerDeco,this.innerDeco,i,i,r)}markDirty(e,t){super.markDirty(e,t),this.dom!=this.nodeDOM&&(e==0||t==this.nodeDOM.nodeValue.length)&&(this.dirty=pr)}get domAtom(){return!1}isText(e){return this.node.text==e}}class kI extends gl{parseRule(){return{ignore:!0}}matchesHack(e){return this.dirty==xn&&this.dom.nodeName==e}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class _P extends Eo{constructor(e,t,r,o,i,s,a,l,c,u){super(e,t,r,o,i,s,a,c,u),this.spec=l}update(e,t,r,o){if(this.dirty==pr)return!1;if(this.spec.update&&(this.node.type==e.type||this.spec.multiType)){let i=this.spec.update(e,t,r);return i&&this.updateInner(e,t,r,o),i}else return!this.contentDOM&&!e.isLeaf?!1:super.update(e,t,r,o)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(e,t,r,o){this.spec.setSelection?this.spec.setSelection(e,t,r.root):super.setSelection(e,t,r,o)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(e){return this.spec.stopEvent?this.spec.stopEvent(e):!1}ignoreMutation(e){return this.spec.ignoreMutation?this.spec.ignoreMutation(e):super.ignoreMutation(e)}}function II(n,e,t){let r=n.firstChild,o=!1;for(let i=0;i<e.length;i++){let s=e[i],a=s.dom;if(a.parentNode==n){for(;a!=r;)r=uC(r),o=!0;r=r.nextSibling}else o=!0,n.insertBefore(a,r);if(s instanceof mi){let l=r?r.previousSibling:n.lastChild;II(s.contentDOM,s.children,t),r=l?l.nextSibling:n.firstChild}}for(;r;)r=uC(r),o=!0;o&&t.trackWrites==n&&(t.trackWrites=null)}const Ta=function(n){n&&(this.nodeName=n)};Ta.prototype=Object.create(null);const Wo=[new Ta];function np(n,e,t){if(n.length==0)return Wo;let r=t?Wo[0]:new Ta,o=[r];for(let i=0;i<n.length;i++){let s=n[i].type.attrs;if(s){s.nodeName&&o.push(r=new Ta(s.nodeName));for(let a in s){let l=s[a];l!=null&&(t&&o.length==1&&o.push(r=new Ta(e.isInline?"span":"div")),a=="class"?r.class=(r.class?r.class+" ":"")+l:a=="style"?r.style=(r.style?r.style+";":"")+l:a!="nodeName"&&(r[a]=l))}}}return o}function AI(n,e,t,r){if(t==Wo&&r==Wo)return e;let o=e;for(let i=0;i<r.length;i++){let s=r[i],a=t[i];if(i){let l;a&&a.nodeName==s.nodeName&&o!=n&&(l=o.parentNode)&&l.nodeName.toLowerCase()==s.nodeName||(l=document.createElement(s.nodeName),l.pmIsDeco=!0,l.appendChild(o),a=Wo[0]),o=l}PP(o,a||Wo[0],s)}return o}function PP(n,e,t){for(let r in e)r!="class"&&r!="style"&&r!="nodeName"&&!(r in t)&&n.removeAttribute(r);for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&t[r]!=e[r]&&n.setAttribute(r,t[r]);if(e.class!=t.class){let r=e.class?e.class.split(" ").filter(Boolean):[],o=t.class?t.class.split(" ").filter(Boolean):[];for(let i=0;i<r.length;i++)o.indexOf(r[i])==-1&&n.classList.remove(r[i]);for(let i=0;i<o.length;i++)r.indexOf(o[i])==-1&&n.classList.add(o[i]);n.classList.length==0&&n.removeAttribute("class")}if(e.style!=t.style){if(e.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,o;for(;o=r.exec(e.style);)n.style.removeProperty(o[1])}t.style&&(n.style.cssText+=t.style)}}function bI(n,e,t){return AI(n,n,Wo,np(e,t,n.nodeType!=1))}function mu(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].type.eq(e[t].type))return!1;return!0}function uC(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class DP{constructor(e,t,r){this.lock=t,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=e,this.preMatch=LP(e.node.content,e)}destroyBetween(e,t){if(e!=t){for(let r=e;r<t;r++)this.top.children[r].destroy();this.top.children.splice(e,t-e),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(e,t,r){let o=0,i=this.stack.length>>1,s=Math.min(i,e.length);for(;o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(e[o])&&e[o].type.spec.spanning!==!1;)o++;for(;o<i;)this.destroyRest(),this.top.dirty=xn,this.index=this.stack.pop(),this.top=this.stack.pop(),i--;for(;i<e.length;){this.stack.push(this.top,this.index+1);let a=-1;for(let l=this.index;l<Math.min(this.index+3,this.top.children.length);l++){let c=this.top.children[l];if(c.matchesMark(e[i])&&!this.isLocked(c.dom)){a=l;break}}if(a>-1)a>this.index&&(this.changed=!0,this.destroyBetween(this.index,a)),this.top=this.top.children[this.index];else{let l=mi.create(this.top,e[i],t,r);this.top.children.splice(this.index,0,l),this.top=l,this.changed=!0}this.index=0,i++}}findNodeMatch(e,t,r,o){let i=-1,s;if(o>=this.preMatch.index&&(s=this.preMatch.matches[o-this.preMatch.index]).parent==this.top&&s.matchesNode(e,t,r))i=this.top.children.indexOf(s,this.index);else for(let a=this.index,l=Math.min(this.top.children.length,a+5);a<l;a++){let c=this.top.children[a];if(c.matchesNode(e,t,r)&&!this.preMatch.matched.has(c)){i=a;break}}return i<0?!1:(this.destroyBetween(this.index,i),this.index++,!0)}updateNodeAt(e,t,r,o,i){let s=this.top.children[o];return s.dirty==pr&&s.dom==s.contentDOM&&(s.dirty=Vo),s.update(e,t,r,i)?(this.destroyBetween(this.index,o),this.index++,!0):!1}findIndexWithChild(e){for(;;){let t=e.parentNode;if(!t)return-1;if(t==this.top.contentDOM){let r=e.pmViewDesc;if(r){for(let o=this.index;o<this.top.children.length;o++)if(this.top.children[o]==r)return o}return-1}e=t}}updateNextNode(e,t,r,o,i,s){for(let a=this.index;a<this.top.children.length;a++){let l=this.top.children[a];if(l instanceof Eo){let c=this.preMatch.matched.get(l);if(c!=null&&c!=i)return!1;let u=l.dom,d,h=this.isLocked(u)&&!(e.isText&&l.node&&l.node.isText&&l.nodeDOM.nodeValue==e.text&&l.dirty!=pr&&mu(t,l.outerDeco));if(!h&&l.update(e,t,r,o))return this.destroyBetween(this.index,a),l.dom!=u&&(this.changed=!0),this.index++,!0;if(!h&&(d=this.recreateWrapper(l,e,t,r,o,s)))return this.destroyBetween(this.index,a),this.top.children[this.index]=d,d.contentDOM&&(d.dirty=Vo,d.updateChildren(o,s+1),d.dirty=xn),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(e,t,r,o,i,s){if(e.dirty||t.isAtom||!e.children.length||!e.node.content.eq(t.content)||!mu(r,e.outerDeco)||!o.eq(e.innerDeco))return null;let a=Eo.create(this.top,t,r,o,i,s);if(a.contentDOM){a.children=e.children,e.children=[];for(let l of a.children)l.parent=a}return e.destroy(),a}addNode(e,t,r,o,i){let s=Eo.create(this.top,e,t,r,o,i);s.contentDOM&&s.updateChildren(o,i+1),this.top.children.splice(this.index++,0,s),this.changed=!0}placeWidget(e,t,r){let o=this.index<this.top.children.length?this.top.children[this.index]:null;if(o&&o.matchesWidget(e)&&(e==o.widget||!o.widget.type.toDOM.parentNode))this.index++;else{let i=new EI(this.top,e,t,r);this.top.children.splice(this.index++,0,i),this.changed=!0}}addTextblockHacks(){let e=this.top.children[this.index-1],t=this.top;for(;e instanceof mi;)t=e,e=t.children[t.children.length-1];(!e||!(e instanceof ud)||/\n$/.test(e.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(e.node.text))&&((Ut||Nt)&&e&&e.dom.contentEditable=="false"&&this.addHackNode("IMG",t),this.addHackNode("BR",this.top))}addHackNode(e,t){if(t==this.top&&this.index<t.children.length&&t.children[this.index].matchesHack(e))this.index++;else{let r=document.createElement(e);e=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),e=="BR"&&(r.className="ProseMirror-trailingBreak");let o=new kI(this.top,[],r,null);t!=this.top?t.children.push(o):t.children.splice(this.index++,0,o),this.changed=!0}}isLocked(e){return this.lock&&(e==this.lock||e.nodeType==1&&e.contains(this.lock.parentNode))}}function LP(n,e){let t=e,r=t.children.length,o=n.childCount,i=new Map,s=[];e:for(;o>0;){let a;for(;;)if(r){let c=t.children[r-1];if(c instanceof mi)t=c,r=c.children.length;else{a=c,r--;break}}else{if(t==e)break e;r=t.parent.children.indexOf(t),t=t.parent}let l=a.node;if(l){if(l!=n.child(o-1))break;--o,i.set(a,o),s.push(a)}}return{index:o,matched:i,matches:s.reverse()}}function UP(n,e){return n.type.side-e.type.side}function FP(n,e,t,r){let o=e.locals(n),i=0;if(o.length==0){for(let c=0;c<n.childCount;c++){let u=n.child(c);r(u,o,e.forChild(i,u),c),i+=u.nodeSize}return}let s=0,a=[],l=null;for(let c=0;;){let u,d;for(;s<o.length&&o[s].to==i;){let v=o[s++];v.widget&&(u?(d||(d=[u])).push(v):u=v)}if(u)if(d){d.sort(UP);for(let v=0;v<d.length;v++)t(d[v],c,!!l)}else t(u,c,!!l);let h,f;if(l)f=-1,h=l,l=null;else if(c<n.childCount)f=c,h=n.child(c++);else break;for(let v=0;v<a.length;v++)a[v].to<=i&&a.splice(v--,1);for(;s<o.length&&o[s].from<=i&&o[s].to>i;)a.push(o[s++]);let p=i+h.nodeSize;if(h.isText){let v=p;s<o.length&&o[s].from<v&&(v=o[s].from);for(let g=0;g<a.length;g++)a[g].to<v&&(v=a[g].to);v<p&&(l=h.cut(v-i),h=h.cut(0,v-i),p=v,f=-1)}else for(;s<o.length&&o[s].to<p;)s++;let m=h.isInline&&!h.isLeaf?a.filter(v=>!v.inline):a.slice();r(h,m,e.forChild(i,h),f),i=p}}function HP(n){if(n.nodeName=="UL"||n.nodeName=="OL"){let e=n.style.cssText;n.style.cssText=e+"; list-style: square !important",window.getComputedStyle(n).listStyle,n.style.cssText=e}}function BP(n,e,t,r){for(let o=0,i=0;o<n.childCount&&i<=r;){let s=n.child(o++),a=i;if(i+=s.nodeSize,!s.isText)continue;let l=s.text;for(;o<n.childCount;){let c=n.child(o++);if(i+=c.nodeSize,!c.isText)break;l+=c.text}if(i>=t){if(i>=r&&l.slice(r-e.length-a,r-a)==e)return r-e.length;let c=a<r?l.lastIndexOf(e,r-a-1):-1;if(c>=0&&c+e.length+a>=t)return a+c;if(t==r&&l.length>=r+e.length-a&&l.slice(r-a,r-a+e.length)==e)return r}}return-1}function rp(n,e,t,r,o){let i=[];for(let s=0,a=0;s<n.length;s++){let l=n[s],c=a,u=a+=l.size;c>=t||u<=e?i.push(l):(c<e&&i.push(l.slice(0,e-c,r)),o&&(i.push(o),o=void 0),u>t&&i.push(l.slice(t-c,l.size,r)))}return i}function cg(n,e=null){let t=n.domSelectionRange(),r=n.state.doc;if(!t.focusNode)return null;let o=n.docView.nearestDesc(t.focusNode),i=o&&o.size==0,s=n.docView.posFromDOM(t.focusNode,t.focusOffset,1);if(s<0)return null;let a=r.resolve(s),l,c;if(cd(t)){for(l=s;o&&!o.node;)o=o.parent;let d=o.node;if(o&&d.isAtom&&q.isSelectable(d)&&o.parent&&!(d.isInline&&hP(t.focusNode,t.focusOffset,o.dom))){let h=o.posBefore;c=new q(s==h?a:r.resolve(h))}}else{if(t instanceof n.dom.ownerDocument.defaultView.Selection&&t.rangeCount>1){let d=s,h=s;for(let f=0;f<t.rangeCount;f++){let p=t.getRangeAt(f);d=Math.min(d,n.docView.posFromDOM(p.startContainer,p.startOffset,1)),h=Math.max(h,n.docView.posFromDOM(p.endContainer,p.endOffset,-1))}if(d<0)return null;[l,s]=h==n.state.selection.anchor?[h,d]:[d,h],a=r.resolve(s)}else l=n.docView.posFromDOM(t.anchorNode,t.anchorOffset,1);if(l<0)return null}let u=r.resolve(l);if(!c){let d=e=="pointer"||n.state.selection.head<a.pos&&!i?1:-1;c=ug(n,u,a,d)}return c}function RI(n){return n.editable?n.hasFocus():xI(n)&&document.activeElement&&document.activeElement.contains(n.dom)}function xr(n,e=!1){let t=n.state.selection;if(NI(n,t),!!RI(n)){if(!e&&n.input.mouseDown&&n.input.mouseDown.allowDefault&&Nt){let r=n.domSelectionRange(),o=n.domObserver.currentSelection;if(r.anchorNode&&o.anchorNode&&pi(r.anchorNode,r.anchorOffset,o.anchorNode,o.anchorOffset)){n.input.mouseDown.delayedSelectionSync=!0,n.domObserver.setCurSelection();return}}if(n.domObserver.disconnectSelection(),n.cursorWrapper)KP(n);else{let{anchor:r,head:o}=t,i,s;dC&&!(t instanceof J)&&(t.$from.parent.inlineContent||(i=hC(n,t.from)),!t.empty&&!t.$from.parent.inlineContent&&(s=hC(n,t.to))),n.docView.setSelection(r,o,n,e),dC&&(i&&fC(i),s&&fC(s)),t.visible?n.dom.classList.remove("ProseMirror-hideselection"):(n.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&zP(n))}n.domObserver.setCurSelection(),n.domObserver.connectSelection()}}const dC=Ut||Nt&&gI<63;function hC(n,e){let{node:t,offset:r}=n.docView.domFromPos(e,0),o=r<t.childNodes.length?t.childNodes[r]:null,i=r?t.childNodes[r-1]:null;if(Ut&&o&&o.contentEditable=="false")return ph(o);if((!o||o.contentEditable=="false")&&(!i||i.contentEditable=="false")){if(o)return ph(o);if(i)return ph(i)}}function ph(n){return n.contentEditable="true",Ut&&n.draggable&&(n.draggable=!1,n.wasDraggable=!0),n}function fC(n){n.contentEditable="false",n.wasDraggable&&(n.draggable=!0,n.wasDraggable=null)}function zP(n){let e=n.dom.ownerDocument;e.removeEventListener("selectionchange",n.input.hideSelectionGuard);let t=n.domSelectionRange(),r=t.anchorNode,o=t.anchorOffset;e.addEventListener("selectionchange",n.input.hideSelectionGuard=()=>{(t.anchorNode!=r||t.anchorOffset!=o)&&(e.removeEventListener("selectionchange",n.input.hideSelectionGuard),setTimeout(()=>{(!RI(n)||n.state.selection.visible)&&n.dom.classList.remove("ProseMirror-hideselection")},20))})}function KP(n){let e=n.domSelection(),t=document.createRange();if(!e)return;let r=n.cursorWrapper.dom,o=r.nodeName=="IMG";o?t.setStart(r.parentNode,yt(r)+1):t.setStart(r,0),t.collapse(!0),e.removeAllRanges(),e.addRange(t),!o&&!n.state.selection.visible&&Xt&&To<=11&&(r.disabled=!0,r.disabled=!1)}function NI(n,e){if(e instanceof q){let t=n.docView.descAt(e.from);t!=n.lastSelectedViewDesc&&(pC(n),t&&t.selectNode(),n.lastSelectedViewDesc=t)}else pC(n)}function pC(n){n.lastSelectedViewDesc&&(n.lastSelectedViewDesc.parent&&n.lastSelectedViewDesc.deselectNode(),n.lastSelectedViewDesc=void 0)}function ug(n,e,t,r){return n.someProp("createSelectionBetween",o=>o(n,e,t))||J.between(e,t,r)}function mC(n){return n.editable&&!n.hasFocus()?!1:xI(n)}function xI(n){let e=n.domSelectionRange();if(!e.anchorNode)return!1;try{return n.dom.contains(e.anchorNode.nodeType==3?e.anchorNode.parentNode:e.anchorNode)&&(n.editable||n.dom.contains(e.focusNode.nodeType==3?e.focusNode.parentNode:e.focusNode))}catch{return!1}}function jP(n){let e=n.docView.domFromPos(n.state.selection.anchor,0),t=n.domSelectionRange();return pi(e.node,e.offset,t.anchorNode,t.anchorOffset)}function op(n,e){let{$anchor:t,$head:r}=n.selection,o=e>0?t.max(r):t.min(r),i=o.parent.inlineContent?o.depth?n.doc.resolve(e>0?o.after():o.before()):null:o;return i&&Z.findFrom(i,e)}function Jr(n,e){return n.dispatch(n.state.tr.setSelection(e).scrollIntoView()),!0}function gC(n,e,t){let r=n.state.selection;if(r instanceof J)if(t.indexOf("s")>-1){let{$head:o}=r,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter;if(!i||i.isText||!i.isLeaf)return!1;let s=n.state.doc.resolve(o.pos+i.nodeSize*(e<0?-1:1));return Jr(n,new J(r.$anchor,s))}else if(r.empty){if(n.endOfTextblock(e>0?"forward":"backward")){let o=op(n.state,e);return o&&o instanceof q?Jr(n,o):!1}else if(!(En&&t.indexOf("m")>-1)){let o=r.$head,i=o.textOffset?null:e<0?o.nodeBefore:o.nodeAfter,s;if(!i||i.isText)return!1;let a=e<0?o.pos-i.nodeSize:o.pos;return i.isAtom||(s=n.docView.descAt(a))&&!s.contentDOM?q.isSelectable(i)?Jr(n,new q(e<0?n.state.doc.resolve(o.pos-i.nodeSize):o)):ml?Jr(n,new J(n.state.doc.resolve(e<0?a:a+i.nodeSize))):!1:!1}}else return!1;else{if(r instanceof q&&r.node.isInline)return Jr(n,new J(e>0?r.$to:r.$from));{let o=op(n.state,e);return o?Jr(n,o):!1}}}function gu(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Ea(n,e){let t=n.pmViewDesc;return t&&t.size==0&&(e<0||n.nextSibling||n.nodeName!="BR")}function Ai(n,e){return e<0?$P(n):VP(n)}function $P(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o,i,s=!1;for(Qn&&t.nodeType==1&&r<gu(t)&&Ea(t.childNodes[r],-1)&&(s=!0);;)if(r>0){if(t.nodeType!=1)break;{let a=t.childNodes[r-1];if(Ea(a,-1))o=t,i=--r;else if(a.nodeType==3)t=a,r=t.nodeValue.length;else break}}else{if(OI(t))break;{let a=t.previousSibling;for(;a&&Ea(a,-1);)o=t.parentNode,i=yt(a),a=a.previousSibling;if(a)t=a,r=gu(t);else{if(t=t.parentNode,t==n.dom)break;r=0}}}s?ip(n,t,r):o&&ip(n,o,i)}function VP(n){let e=n.domSelectionRange(),t=e.focusNode,r=e.focusOffset;if(!t)return;let o=gu(t),i,s;for(;;)if(r<o){if(t.nodeType!=1)break;let a=t.childNodes[r];if(Ea(a,1))i=t,s=++r;else break}else{if(OI(t))break;{let a=t.nextSibling;for(;a&&Ea(a,1);)i=a.parentNode,s=yt(a)+1,a=a.nextSibling;if(a)t=a,r=0,o=gu(t);else{if(t=t.parentNode,t==n.dom)break;r=o=0}}}i&&ip(n,i,s)}function OI(n){let e=n.pmViewDesc;return e&&e.node&&e.node.isBlock}function WP(n,e){for(;n&&e==n.childNodes.length&&!pl(n);)e=yt(n)+1,n=n.parentNode;for(;n&&e<n.childNodes.length;){let t=n.childNodes[e];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=0}}function qP(n,e){for(;n&&!e&&!pl(n);)e=yt(n),n=n.parentNode;for(;n&&e;){let t=n.childNodes[e-1];if(t.nodeType==3)return t;if(t.nodeType==1&&t.contentEditable=="false")break;n=t,e=n.childNodes.length}}function ip(n,e,t){if(e.nodeType!=3){let i,s;(s=WP(e,t))?(e=s,t=0):(i=qP(e,t))&&(e=i,t=i.nodeValue.length)}let r=n.domSelection();if(!r)return;if(cd(r)){let i=document.createRange();i.setEnd(e,t),i.setStart(e,t),r.removeAllRanges(),r.addRange(i)}else r.extend&&r.extend(e,t);n.domObserver.setCurSelection();let{state:o}=n;setTimeout(()=>{n.state==o&&xr(n)},50)}function yC(n,e){let t=n.state.doc.resolve(e);if(!(Nt||mP)&&t.parent.inlineContent){let o=n.coordsAtPos(e);if(e>t.start()){let i=n.coordsAtPos(e-1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left<o.left?"ltr":"rtl"}if(e<t.end()){let i=n.coordsAtPos(e+1),s=(i.top+i.bottom)/2;if(s>o.top&&s<o.bottom&&Math.abs(i.left-o.left)>1)return i.left>o.left?"ltr":"rtl"}}return getComputedStyle(n.dom).direction=="rtl"?"rtl":"ltr"}function vC(n,e,t){let r=n.state.selection;if(r instanceof J&&!r.empty||t.indexOf("s")>-1||En&&t.indexOf("m")>-1)return!1;let{$from:o,$to:i}=r;if(!o.parent.inlineContent||n.endOfTextblock(e<0?"up":"down")){let s=op(n.state,e);if(s&&s instanceof q)return Jr(n,s)}if(!o.parent.inlineContent){let s=e<0?o:i,a=r instanceof yn?Z.near(s,e):Z.findFrom(s,e);return a?Jr(n,a):!1}return!1}function CC(n,e){if(!(n.state.selection instanceof J))return!0;let{$head:t,$anchor:r,empty:o}=n.state.selection;if(!t.sameParent(r))return!0;if(!o)return!1;if(n.endOfTextblock(e>0?"forward":"backward"))return!0;let i=!t.textOffset&&(e<0?t.nodeBefore:t.nodeAfter);if(i&&!i.isText){let s=n.state.tr;return e<0?s.delete(t.pos-i.nodeSize,t.pos):s.delete(t.pos,t.pos+i.nodeSize),n.dispatch(s),!0}return!1}function SC(n,e,t){n.domObserver.stop(),e.contentEditable=t,n.domObserver.start()}function GP(n){if(!Ut||n.state.selection.$head.parentOffset>0)return!1;let{focusNode:e,focusOffset:t}=n.domSelectionRange();if(e&&e.nodeType==1&&t==0&&e.firstChild&&e.firstChild.contentEditable=="false"){let r=e.firstChild;SC(n,r,"true"),setTimeout(()=>SC(n,r,"false"),20)}return!1}function QP(n){let e="";return n.ctrlKey&&(e+="c"),n.metaKey&&(e+="m"),n.altKey&&(e+="a"),n.shiftKey&&(e+="s"),e}function YP(n,e){let t=e.keyCode,r=QP(e);if(t==8||En&&t==72&&r=="c")return CC(n,-1)||Ai(n,-1);if(t==46&&!e.shiftKey||En&&t==68&&r=="c")return CC(n,1)||Ai(n,1);if(t==13||t==27)return!0;if(t==37||En&&t==66&&r=="c"){let o=t==37?yC(n,n.state.selection.from)=="ltr"?-1:1:-1;return gC(n,o,r)||Ai(n,o)}else if(t==39||En&&t==70&&r=="c"){let o=t==39?yC(n,n.state.selection.from)=="ltr"?1:-1:1;return gC(n,o,r)||Ai(n,o)}else{if(t==38||En&&t==80&&r=="c")return vC(n,-1,r)||Ai(n,-1);if(t==40||En&&t==78&&r=="c")return GP(n)||vC(n,1,r)||Ai(n,1);if(r==(En?"m":"c")&&(t==66||t==73||t==89||t==90))return!0}return!1}function dg(n,e){n.someProp("transformCopied",f=>{e=f(e,n)});let t=[],{content:r,openStart:o,openEnd:i}=e;for(;o>1&&i>1&&r.childCount==1&&r.firstChild.childCount==1;){o--,i--;let f=r.firstChild;t.push(f.type.name,f.attrs!=f.type.defaultAttrs?f.attrs:null),r=f.content}let s=n.someProp("clipboardSerializer")||Si.fromSchema(n.state.schema),a=UI(),l=a.createElement("div");l.appendChild(s.serializeFragment(r,{document:a}));let c=l.firstChild,u,d=0;for(;c&&c.nodeType==1&&(u=LI[c.nodeName.toLowerCase()]);){for(let f=u.length-1;f>=0;f--){let p=a.createElement(u[f]);for(;l.firstChild;)p.appendChild(l.firstChild);l.appendChild(p),d++}c=l.firstChild}c&&c.nodeType==1&&c.setAttribute("data-pm-slice",`${o} ${i}${d?` -${d}`:""} ${JSON.stringify(t)}`);let h=n.someProp("clipboardTextSerializer",f=>f(e,n))||e.content.textBetween(0,e.content.size,`

`);return{dom:l,text:h,slice:e}}function MI(n,e,t,r,o){let i=o.parent.type.spec.code,s,a;if(!t&&!e)return null;let l=e&&(r||i||!t);if(l){if(n.someProp("transformPastedText",h=>{e=h(e,i||r,n)}),i)return e?new L(N.from(n.state.schema.text(e.replace(/\r\n?/g,`
`))),0,0):L.empty;let d=n.someProp("clipboardTextParser",h=>h(e,o,r,n));if(d)a=d;else{let h=o.marks(),{schema:f}=n.state,p=Si.fromSchema(f);s=document.createElement("div"),e.split(/(?:\r\n?|\n)+/).forEach(m=>{let v=s.appendChild(document.createElement("p"));m&&v.appendChild(p.serializeNode(f.text(m,h)))})}}else n.someProp("transformPastedHTML",d=>{t=d(t,n)}),s=eD(t),ml&&tD(s);let c=s&&s.querySelector("[data-pm-slice]"),u=c&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(c.getAttribute("data-pm-slice")||"");if(u&&u[3])for(let d=+u[3];d>0;d--){let h=s.firstChild;for(;h&&h.nodeType!=1;)h=h.nextSibling;if(!h)break;s=h}if(a||(a=(n.someProp("clipboardParser")||n.someProp("domParser")||Sa.fromSchema(n.state.schema)).parseSlice(s,{preserveWhitespace:!!(l||u),context:o,ruleFromNode(h){return h.nodeName=="BR"&&!h.nextSibling&&h.parentNode&&!JP.test(h.parentNode.nodeName)?{ignore:!0}:null}})),u)a=nD(wC(a,+u[1],+u[2]),u[4]);else if(a=L.maxOpen(XP(a.content,o),!0),a.openStart||a.openEnd){let d=0,h=0;for(let f=a.content.firstChild;d<a.openStart&&!f.type.spec.isolating;d++,f=f.firstChild);for(let f=a.content.lastChild;h<a.openEnd&&!f.type.spec.isolating;h++,f=f.lastChild);a=wC(a,d,h)}return n.someProp("transformPasted",d=>{a=d(a,n)}),a}const JP=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function XP(n,e){if(n.childCount<2)return n;for(let t=e.depth;t>=0;t--){let o=e.node(t).contentMatchAt(e.index(t)),i,s=[];if(n.forEach(a=>{if(!s)return;let l=o.findWrapping(a.type),c;if(!l)return s=null;if(c=s.length&&i.length&&PI(l,i,a,s[s.length-1],0))s[s.length-1]=c;else{s.length&&(s[s.length-1]=DI(s[s.length-1],i.length));let u=_I(a,l);s.push(u),o=o.matchType(u.type),i=l}}),s)return N.from(s)}return n}function _I(n,e,t=0){for(let r=e.length-1;r>=t;r--)n=e[r].create(null,N.from(n));return n}function PI(n,e,t,r,o){if(o<n.length&&o<e.length&&n[o]==e[o]){let i=PI(n,e,t,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));if(r.contentMatchAt(r.childCount).matchType(o==n.length-1?t.type:n[o+1]))return r.copy(r.content.append(N.from(_I(t,n,o+1))))}}function DI(n,e){if(e==0)return n;let t=n.content.replaceChild(n.childCount-1,DI(n.lastChild,e-1)),r=n.contentMatchAt(n.childCount).fillBefore(N.empty,!0);return n.copy(t.append(r))}function sp(n,e,t,r,o,i){let s=e<0?n.firstChild:n.lastChild,a=s.content;return n.childCount>1&&(i=0),o<r-1&&(a=sp(a,e,t,r,o+1,i)),o>=t&&(a=e<0?s.contentMatchAt(0).fillBefore(a,i<=o).append(a):a.append(s.contentMatchAt(s.childCount).fillBefore(N.empty,!0))),n.replaceChild(e<0?0:n.childCount-1,s.copy(a))}function wC(n,e,t){return e<n.openStart&&(n=new L(sp(n.content,-1,e,n.openStart,0,n.openEnd),e,n.openEnd)),t<n.openEnd&&(n=new L(sp(n.content,1,t,n.openEnd,0,0),n.openStart,t)),n}const LI={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let TC=null;function UI(){return TC||(TC=document.implementation.createHTMLDocument("title"))}let mh=null;function ZP(n){let e=window.trustedTypes;return e?(mh||(mh=e.defaultPolicy||e.createPolicy("ProseMirrorClipboard",{createHTML:t=>t})),mh.createHTML(n)):n}function eD(n){let e=/^(\s*<meta [^>]*>)*/.exec(n);e&&(n=n.slice(e[0].length));let t=UI().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(n),o;if((o=r&&LI[r[1].toLowerCase()])&&(n=o.map(i=>"<"+i+">").join("")+n+o.map(i=>"</"+i+">").reverse().join("")),t.innerHTML=ZP(n),o)for(let i=0;i<o.length;i++)t=t.querySelector(o[i])||t;return t}function tD(n){let e=n.querySelectorAll(Nt?"span:not([class]):not([style])":"span.Apple-converted-space");for(let t=0;t<e.length;t++){let r=e[t];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(n.ownerDocument.createTextNode(" "),r)}}function nD(n,e){if(!n.size)return n;let t=n.content.firstChild.type.schema,r;try{r=JSON.parse(e)}catch{return n}let{content:o,openStart:i,openEnd:s}=n;for(let a=r.length-2;a>=0;a-=2){let l=t.nodes[r[a]];if(!l||l.hasRequiredAttrs())break;o=N.from(l.create(r[a+1],o)),i++,s++}return new L(o,i,s)}const Ft={},Ht={},rD={touchstart:!0,touchmove:!0};class oD{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function iD(n){for(let e in Ft){let t=Ft[e];n.dom.addEventListener(e,n.input.eventHandlers[e]=r=>{aD(n,r)&&!hg(n,r)&&(n.editable||!(r.type in Ht))&&t(n,r)},rD[e]?{passive:!0}:void 0)}Ut&&n.dom.addEventListener("input",()=>null),ap(n)}function lo(n,e){n.input.lastSelectionOrigin=e,n.input.lastSelectionTime=Date.now()}function sD(n){n.domObserver.stop();for(let e in n.input.eventHandlers)n.dom.removeEventListener(e,n.input.eventHandlers[e]);clearTimeout(n.input.composingTimeout),clearTimeout(n.input.lastIOSEnterFallbackTimeout)}function ap(n){n.someProp("handleDOMEvents",e=>{for(let t in e)n.input.eventHandlers[t]||n.dom.addEventListener(t,n.input.eventHandlers[t]=r=>hg(n,r))})}function hg(n,e){return n.someProp("handleDOMEvents",t=>{let r=t[e.type];return r?r(n,e)||e.defaultPrevented:!1})}function aD(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target;t!=n.dom;t=t.parentNode)if(!t||t.nodeType==11||t.pmViewDesc&&t.pmViewDesc.stopEvent(e))return!1;return!0}function lD(n,e){!hg(n,e)&&Ft[e.type]&&(n.editable||!(e.type in Ht))&&Ft[e.type](n,e)}Ht.keydown=(n,e)=>{let t=e;if(n.input.shiftKey=t.keyCode==16||t.shiftKey,!HI(n,t)&&(n.input.lastKeyCode=t.keyCode,n.input.lastKeyCodeTime=Date.now(),!(Ar&&Nt&&t.keyCode==13)))if(t.keyCode!=229&&n.domObserver.forceFlush(),ws&&t.keyCode==13&&!t.ctrlKey&&!t.altKey&&!t.metaKey){let r=Date.now();n.input.lastIOSEnter=r,n.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{n.input.lastIOSEnter==r&&(n.someProp("handleKeyDown",o=>o(n,Ho(13,"Enter"))),n.input.lastIOSEnter=0)},200)}else n.someProp("handleKeyDown",r=>r(n,t))||YP(n,t)?t.preventDefault():lo(n,"key")};Ht.keyup=(n,e)=>{e.keyCode==16&&(n.input.shiftKey=!1)};Ht.keypress=(n,e)=>{let t=e;if(HI(n,t)||!t.charCode||t.ctrlKey&&!t.altKey||En&&t.metaKey)return;if(n.someProp("handleKeyPress",o=>o(n,t))){t.preventDefault();return}let r=n.state.selection;if(!(r instanceof J)||!r.$from.sameParent(r.$to)){let o=String.fromCharCode(t.charCode),i=()=>n.state.tr.insertText(o).scrollIntoView();!/[\r\n]/.test(o)&&!n.someProp("handleTextInput",s=>s(n,r.$from.pos,r.$to.pos,o,i))&&n.dispatch(i()),t.preventDefault()}};function dd(n){return{left:n.clientX,top:n.clientY}}function cD(n,e){let t=e.x-n.clientX,r=e.y-n.clientY;return t*t+r*r<100}function fg(n,e,t,r,o){if(r==-1)return!1;let i=n.state.doc.resolve(r);for(let s=i.depth+1;s>0;s--)if(n.someProp(e,a=>s>i.depth?a(n,t,i.nodeAfter,i.before(s),o,!0):a(n,t,i.node(s),i.before(s),o,!1)))return!0;return!1}function ss(n,e,t){if(n.focused||n.focus(),n.state.selection.eq(e))return;let r=n.state.tr.setSelection(e);r.setMeta("pointer",!0),n.dispatch(r)}function uD(n,e){if(e==-1)return!1;let t=n.state.doc.resolve(e),r=t.nodeAfter;return r&&r.isAtom&&q.isSelectable(r)?(ss(n,new q(t)),!0):!1}function dD(n,e){if(e==-1)return!1;let t=n.state.selection,r,o;t instanceof q&&(r=t.node);let i=n.state.doc.resolve(e);for(let s=i.depth+1;s>0;s--){let a=s>i.depth?i.nodeAfter:i.node(s);if(q.isSelectable(a)){r&&t.$from.depth>0&&s>=t.$from.depth&&i.before(t.$from.depth+1)==t.$from.pos?o=i.before(t.$from.depth):o=i.before(s);break}}return o!=null?(ss(n,q.create(n.state.doc,o)),!0):!1}function hD(n,e,t,r,o){return fg(n,"handleClickOn",e,t,r)||n.someProp("handleClick",i=>i(n,e,r))||(o?dD(n,t):uD(n,t))}function fD(n,e,t,r){return fg(n,"handleDoubleClickOn",e,t,r)||n.someProp("handleDoubleClick",o=>o(n,e,r))}function pD(n,e,t,r){return fg(n,"handleTripleClickOn",e,t,r)||n.someProp("handleTripleClick",o=>o(n,e,r))||mD(n,t,r)}function mD(n,e,t){if(t.button!=0)return!1;let r=n.state.doc;if(e==-1)return r.inlineContent?(ss(n,J.create(r,0,r.content.size)),!0):!1;let o=r.resolve(e);for(let i=o.depth+1;i>0;i--){let s=i>o.depth?o.nodeAfter:o.node(i),a=o.before(i);if(s.inlineContent)ss(n,J.create(r,a+1,a+1+s.content.size));else if(q.isSelectable(s))ss(n,q.create(r,a));else continue;return!0}}function pg(n){return yu(n)}const FI=En?"metaKey":"ctrlKey";Ft.mousedown=(n,e)=>{let t=e;n.input.shiftKey=t.shiftKey;let r=pg(n),o=Date.now(),i="singleClick";o-n.input.lastClick.time<500&&cD(t,n.input.lastClick)&&!t[FI]&&n.input.lastClick.button==t.button&&(n.input.lastClick.type=="singleClick"?i="doubleClick":n.input.lastClick.type=="doubleClick"&&(i="tripleClick")),n.input.lastClick={time:o,x:t.clientX,y:t.clientY,type:i,button:t.button};let s=n.posAtCoords(dd(t));s&&(i=="singleClick"?(n.input.mouseDown&&n.input.mouseDown.done(),n.input.mouseDown=new gD(n,s,t,!!r)):(i=="doubleClick"?fD:pD)(n,s.pos,s.inside,t)?t.preventDefault():lo(n,"pointer"))};class gD{constructor(e,t,r,o){this.view=e,this.pos=t,this.event=r,this.flushed=o,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=e.state.doc,this.selectNode=!!r[FI],this.allowDefault=r.shiftKey;let i,s;if(t.inside>-1)i=e.state.doc.nodeAt(t.inside),s=t.inside;else{let u=e.state.doc.resolve(t.pos);i=u.parent,s=u.depth?u.before():0}const a=o?null:r.target,l=a?e.docView.nearestDesc(a,!0):null;this.target=l&&l.dom.nodeType==1?l.dom:null;let{selection:c}=e.state;(r.button==0&&i.type.spec.draggable&&i.type.spec.selectable!==!1||c instanceof q&&c.from<=s&&c.to>s)&&(this.mightDrag={node:i,pos:s,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Qn&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),e.root.addEventListener("mouseup",this.up=this.up.bind(this)),e.root.addEventListener("mousemove",this.move=this.move.bind(this)),lo(e,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>xr(this.view)),this.view.input.mouseDown=null}up(e){if(this.done(),!this.view.dom.contains(e.target))return;let t=this.pos;this.view.state.doc!=this.startDoc&&(t=this.view.posAtCoords(dd(e))),this.updateAllowDefault(e),this.allowDefault||!t?lo(this.view,"pointer"):hD(this.view,t.pos,t.inside,e,this.selectNode)?e.preventDefault():e.button==0&&(this.flushed||Ut&&this.mightDrag&&!this.mightDrag.node.isAtom||Nt&&!this.view.state.selection.visible&&Math.min(Math.abs(t.pos-this.view.state.selection.from),Math.abs(t.pos-this.view.state.selection.to))<=2)?(ss(this.view,Z.near(this.view.state.doc.resolve(t.pos))),e.preventDefault()):lo(this.view,"pointer")}move(e){this.updateAllowDefault(e),lo(this.view,"pointer"),e.buttons==0&&this.done()}updateAllowDefault(e){!this.allowDefault&&(Math.abs(this.event.x-e.clientX)>4||Math.abs(this.event.y-e.clientY)>4)&&(this.allowDefault=!0)}}Ft.touchstart=n=>{n.input.lastTouch=Date.now(),pg(n),lo(n,"pointer")};Ft.touchmove=n=>{n.input.lastTouch=Date.now(),lo(n,"pointer")};Ft.contextmenu=n=>pg(n);function HI(n,e){return n.composing?!0:Ut&&Math.abs(e.timeStamp-n.input.compositionEndedAt)<500?(n.input.compositionEndedAt=-2e8,!0):!1}const yD=Ar?5e3:-1;Ht.compositionstart=Ht.compositionupdate=n=>{if(!n.composing){n.domObserver.flush();let{state:e}=n,t=e.selection.$to;if(e.selection instanceof J&&(e.storedMarks||!t.textOffset&&t.parentOffset&&t.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))n.markCursor=n.state.storedMarks||t.marks(),yu(n,!0),n.markCursor=null;else if(yu(n,!e.selection.empty),Qn&&e.selection.empty&&t.parentOffset&&!t.textOffset&&t.nodeBefore.marks.length){let r=n.domSelectionRange();for(let o=r.focusNode,i=r.focusOffset;o&&o.nodeType==1&&i!=0;){let s=i<0?o.lastChild:o.childNodes[i-1];if(!s)break;if(s.nodeType==3){let a=n.domSelection();a&&a.collapse(s,s.nodeValue.length);break}else o=s,i=-1}}n.input.composing=!0}BI(n,yD)};Ht.compositionend=(n,e)=>{n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=e.timeStamp,n.input.compositionPendingChanges=n.domObserver.pendingRecords().length?n.input.compositionID:0,n.input.compositionNode=null,n.input.compositionPendingChanges&&Promise.resolve().then(()=>n.domObserver.flush()),n.input.compositionID++,BI(n,20))};function BI(n,e){clearTimeout(n.input.composingTimeout),e>-1&&(n.input.composingTimeout=setTimeout(()=>yu(n),e))}function zI(n){for(n.composing&&(n.input.composing=!1,n.input.compositionEndedAt=CD());n.input.compositionNodes.length>0;)n.input.compositionNodes.pop().markParentsDirty()}function vD(n){let e=n.domSelectionRange();if(!e.focusNode)return null;let t=uP(e.focusNode,e.focusOffset),r=dP(e.focusNode,e.focusOffset);if(t&&r&&t!=r){let o=r.pmViewDesc,i=n.domObserver.lastChangedTextNode;if(t==i||r==i)return i;if(!o||!o.isText(r.nodeValue))return r;if(n.input.compositionNode==r){let s=t.pmViewDesc;if(!(!s||!s.isText(t.nodeValue)))return r}}return t||r}function CD(){let n=document.createEvent("Event");return n.initEvent("event",!0,!0),n.timeStamp}function yu(n,e=!1){if(!(Ar&&n.domObserver.flushingSoon>=0)){if(n.domObserver.forceFlush(),zI(n),e||n.docView&&n.docView.dirty){let t=cg(n),r=n.state.selection;return t&&!t.eq(r)?n.dispatch(n.state.tr.setSelection(t)):(n.markCursor||e)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?n.dispatch(n.state.tr.deleteSelection()):n.updateState(n.state),!0}return!1}}function SD(n,e){if(!n.dom.parentNode)return;let t=n.dom.parentNode.appendChild(document.createElement("div"));t.appendChild(e),t.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),o=document.createRange();o.selectNodeContents(e),n.dom.blur(),r.removeAllRanges(),r.addRange(o),setTimeout(()=>{t.parentNode&&t.parentNode.removeChild(t),n.focus()},50)}const Ya=Xt&&To<15||ws&&gP<604;Ft.copy=Ht.cut=(n,e)=>{let t=e,r=n.state.selection,o=t.type=="cut";if(r.empty)return;let i=Ya?null:t.clipboardData,s=r.content(),{dom:a,text:l}=dg(n,s);i?(t.preventDefault(),i.clearData(),i.setData("text/html",a.innerHTML),i.setData("text/plain",l)):SD(n,a),o&&n.dispatch(n.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function wD(n){return n.openStart==0&&n.openEnd==0&&n.content.childCount==1?n.content.firstChild:null}function TD(n,e){if(!n.dom.parentNode)return;let t=n.input.shiftKey||n.state.selection.$from.parent.type.spec.code,r=n.dom.parentNode.appendChild(document.createElement(t?"textarea":"div"));t||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let o=n.input.shiftKey&&n.input.lastKeyCode!=45;setTimeout(()=>{n.focus(),r.parentNode&&r.parentNode.removeChild(r),t?Ja(n,r.value,null,o,e):Ja(n,r.textContent,r.innerHTML,o,e)},50)}function Ja(n,e,t,r,o){let i=MI(n,e,t,r,n.state.selection.$from);if(n.someProp("handlePaste",l=>l(n,o,i||L.empty)))return!0;if(!i)return!1;let s=wD(i),a=s?n.state.tr.replaceSelectionWith(s,r):n.state.tr.replaceSelection(i);return n.dispatch(a.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function KI(n){let e=n.getData("text/plain")||n.getData("Text");if(e)return e;let t=n.getData("text/uri-list");return t?t.replace(/\r?\n/g," "):""}Ht.paste=(n,e)=>{let t=e;if(n.composing&&!Ar)return;let r=Ya?null:t.clipboardData,o=n.input.shiftKey&&n.input.lastKeyCode!=45;r&&Ja(n,KI(r),r.getData("text/html"),o,t)?t.preventDefault():TD(n,t)};class jI{constructor(e,t,r){this.slice=e,this.move=t,this.node=r}}const ED=En?"altKey":"ctrlKey";function $I(n,e){let t=n.someProp("dragCopies",r=>!r(e));return t??!e[ED]}Ft.dragstart=(n,e)=>{let t=e,r=n.input.mouseDown;if(r&&r.done(),!t.dataTransfer)return;let o=n.state.selection,i=o.empty?null:n.posAtCoords(dd(t)),s;if(!(i&&i.pos>=o.from&&i.pos<=(o instanceof q?o.to-1:o.to))){if(r&&r.mightDrag)s=q.create(n.state.doc,r.mightDrag.pos);else if(t.target&&t.target.nodeType==1){let d=n.docView.nearestDesc(t.target,!0);d&&d.node.type.spec.draggable&&d!=n.docView&&(s=q.create(n.state.doc,d.posBefore))}}let a=(s||n.state.selection).content(),{dom:l,text:c,slice:u}=dg(n,a);(!t.dataTransfer.files.length||!Nt||gI>120)&&t.dataTransfer.clearData(),t.dataTransfer.setData(Ya?"Text":"text/html",l.innerHTML),t.dataTransfer.effectAllowed="copyMove",Ya||t.dataTransfer.setData("text/plain",c),n.dragging=new jI(u,$I(n,t),s)};Ft.dragend=n=>{let e=n.dragging;window.setTimeout(()=>{n.dragging==e&&(n.dragging=null)},50)};Ht.dragover=Ht.dragenter=(n,e)=>e.preventDefault();Ht.drop=(n,e)=>{let t=e,r=n.dragging;if(n.dragging=null,!t.dataTransfer)return;let o=n.posAtCoords(dd(t));if(!o)return;let i=n.state.doc.resolve(o.pos),s=r&&r.slice;s?n.someProp("transformPasted",p=>{s=p(s,n)}):s=MI(n,KI(t.dataTransfer),Ya?null:t.dataTransfer.getData("text/html"),!1,i);let a=!!(r&&$I(n,t));if(n.someProp("handleDrop",p=>p(n,t,s||L.empty,a))){t.preventDefault();return}if(!s)return;t.preventDefault();let l=s?lI(n.state.doc,i.pos,s):i.pos;l==null&&(l=i.pos);let c=n.state.tr;if(a){let{node:p}=r;p?p.replace(c):c.deleteSelection()}let u=c.mapping.map(l),d=s.openStart==0&&s.openEnd==0&&s.content.childCount==1,h=c.doc;if(d?c.replaceRangeWith(u,u,s.content.firstChild):c.replaceRange(u,u,s),c.doc.eq(h))return;let f=c.doc.resolve(u);if(d&&q.isSelectable(s.content.firstChild)&&f.nodeAfter&&f.nodeAfter.sameMarkup(s.content.firstChild))c.setSelection(new q(f));else{let p=c.mapping.map(l);c.mapping.maps[c.mapping.maps.length-1].forEach((m,v,g,y)=>p=y),c.setSelection(ug(n,f,c.doc.resolve(p)))}n.focus(),n.dispatch(c.setMeta("uiEvent","drop"))};Ft.focus=n=>{n.input.lastFocus=Date.now(),n.focused||(n.domObserver.stop(),n.dom.classList.add("ProseMirror-focused"),n.domObserver.start(),n.focused=!0,setTimeout(()=>{n.docView&&n.hasFocus()&&!n.domObserver.currentSelection.eq(n.domSelectionRange())&&xr(n)},20))};Ft.blur=(n,e)=>{let t=e;n.focused&&(n.domObserver.stop(),n.dom.classList.remove("ProseMirror-focused"),n.domObserver.start(),t.relatedTarget&&n.dom.contains(t.relatedTarget)&&n.domObserver.currentSelection.clear(),n.focused=!1)};Ft.beforeinput=(n,e)=>{if(Nt&&Ar&&e.inputType=="deleteContentBackward"){n.domObserver.flushSoon();let{domChangeCount:r}=n.input;setTimeout(()=>{if(n.input.domChangeCount!=r||(n.dom.blur(),n.focus(),n.someProp("handleKeyDown",i=>i(n,Ho(8,"Backspace")))))return;let{$cursor:o}=n.state.selection;o&&o.pos>0&&n.dispatch(n.state.tr.delete(o.pos-1,o.pos).scrollIntoView())},50)}};for(let n in Ht)Ft[n]=Ht[n];function Xa(n,e){if(n==e)return!0;for(let t in n)if(n[t]!==e[t])return!1;for(let t in e)if(!(t in n))return!1;return!0}class vu{constructor(e,t){this.toDOM=e,this.spec=t||Xo,this.side=this.spec.side||0}map(e,t,r,o){let{pos:i,deleted:s}=e.mapResult(t.from+o,this.side<0?-1:1);return s?null:new mn(i-r,i-r,this)}valid(){return!0}eq(e){return this==e||e instanceof vu&&(this.spec.key&&this.spec.key==e.spec.key||this.toDOM==e.toDOM&&Xa(this.spec,e.spec))}destroy(e){this.spec.destroy&&this.spec.destroy(e)}}class ko{constructor(e,t){this.attrs=e,this.spec=t||Xo}map(e,t,r,o){let i=e.map(t.from+o,this.spec.inclusiveStart?-1:1)-r,s=e.map(t.to+o,this.spec.inclusiveEnd?1:-1)-r;return i>=s?null:new mn(i,s,this)}valid(e,t){return t.from<t.to}eq(e){return this==e||e instanceof ko&&Xa(this.attrs,e.attrs)&&Xa(this.spec,e.spec)}static is(e){return e.type instanceof ko}destroy(){}}class mg{constructor(e,t){this.attrs=e,this.spec=t||Xo}map(e,t,r,o){let i=e.mapResult(t.from+o,1);if(i.deleted)return null;let s=e.mapResult(t.to+o,-1);return s.deleted||s.pos<=i.pos?null:new mn(i.pos-r,s.pos-r,this)}valid(e,t){let{index:r,offset:o}=e.content.findIndex(t.from),i;return o==t.from&&!(i=e.child(r)).isText&&o+i.nodeSize==t.to}eq(e){return this==e||e instanceof mg&&Xa(this.attrs,e.attrs)&&Xa(this.spec,e.spec)}destroy(){}}class mn{constructor(e,t,r){this.from=e,this.to=t,this.type=r}copy(e,t){return new mn(e,t,this.type)}eq(e,t=0){return this.type.eq(e.type)&&this.from+t==e.from&&this.to+t==e.to}map(e,t,r){return this.type.map(e,this,t,r)}static widget(e,t,r){return new mn(e,e,new vu(t,r))}static inline(e,t,r,o){return new mn(e,t,new ko(r,o))}static node(e,t,r,o){return new mn(e,t,new mg(r,o))}get spec(){return this.type.spec}get inline(){return this.type instanceof ko}get widget(){return this.type instanceof vu}}const Oi=[],Xo={};class We{constructor(e,t){this.local=e.length?e:Oi,this.children=t.length?t:Oi}static create(e,t){return t.length?Cu(t,e,0,Xo):It}find(e,t,r){let o=[];return this.findInner(e??0,t??1e9,o,0,r),o}findInner(e,t,r,o,i){for(let s=0;s<this.local.length;s++){let a=this.local[s];a.from<=t&&a.to>=e&&(!i||i(a.spec))&&r.push(a.copy(a.from+o,a.to+o))}for(let s=0;s<this.children.length;s+=3)if(this.children[s]<t&&this.children[s+1]>e){let a=this.children[s]+1;this.children[s+2].findInner(e-a,t-a,r,o+a,i)}}map(e,t,r){return this==It||e.maps.length==0?this:this.mapInner(e,t,0,0,r||Xo)}mapInner(e,t,r,o,i){let s;for(let a=0;a<this.local.length;a++){let l=this.local[a].map(e,r,o);l&&l.type.valid(t,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(this.local[a].spec)}return this.children.length?kD(this.children,s||[],e,t,r,o,i):s?new We(s.sort(Zo),Oi):It}add(e,t){return t.length?this==It?We.create(e,t):this.addInner(e,t,0):this}addInner(e,t,r){let o,i=0;e.forEach((a,l)=>{let c=l+r,u;if(u=WI(t,a,c)){for(o||(o=this.children.slice());i<o.length&&o[i]<l;)i+=3;o[i]==l?o[i+2]=o[i+2].addInner(a,u,c+1):o.splice(i,0,l,l+a.nodeSize,Cu(u,a,c+1,Xo)),i+=3}});let s=VI(i?qI(t):t,-r);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||s.splice(a--,1);return new We(s.length?this.local.concat(s).sort(Zo):this.local,o||this.children)}remove(e){return e.length==0||this==It?this:this.removeInner(e,0)}removeInner(e,t){let r=this.children,o=this.local;for(let i=0;i<r.length;i+=3){let s,a=r[i]+t,l=r[i+1]+t;for(let u=0,d;u<e.length;u++)(d=e[u])&&d.from>a&&d.to<l&&(e[u]=null,(s||(s=[])).push(d));if(!s)continue;r==this.children&&(r=this.children.slice());let c=r[i+2].removeInner(s,a+1);c!=It?r[i+2]=c:(r.splice(i,3),i-=3)}if(o.length){for(let i=0,s;i<e.length;i++)if(s=e[i])for(let a=0;a<o.length;a++)o[a].eq(s,t)&&(o==this.local&&(o=this.local.slice()),o.splice(a--,1))}return r==this.children&&o==this.local?this:o.length||r.length?new We(o,r):It}forChild(e,t){if(this==It)return this;if(t.isLeaf)return We.empty;let r,o;for(let a=0;a<this.children.length;a+=3)if(this.children[a]>=e){this.children[a]==e&&(r=this.children[a+2]);break}let i=e+1,s=i+t.content.size;for(let a=0;a<this.local.length;a++){let l=this.local[a];if(l.from<s&&l.to>i&&l.type instanceof ko){let c=Math.max(i,l.from)-i,u=Math.min(s,l.to)-i;c<u&&(o||(o=[])).push(l.copy(c,u))}}if(o){let a=new We(o.sort(Zo),Oi);return r?new to([a,r]):a}return r||It}eq(e){if(this==e)return!0;if(!(e instanceof We)||this.local.length!=e.local.length||this.children.length!=e.children.length)return!1;for(let t=0;t<this.local.length;t++)if(!this.local[t].eq(e.local[t]))return!1;for(let t=0;t<this.children.length;t+=3)if(this.children[t]!=e.children[t]||this.children[t+1]!=e.children[t+1]||!this.children[t+2].eq(e.children[t+2]))return!1;return!0}locals(e){return gg(this.localsInner(e))}localsInner(e){if(this==It)return Oi;if(e.inlineContent||!this.local.some(ko.is))return this.local;let t=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof ko||t.push(this.local[r]);return t}forEachSet(e){e(this)}}We.empty=new We([],[]);We.removeOverlap=gg;const It=We.empty;class to{constructor(e){this.members=e}map(e,t){const r=this.members.map(o=>o.map(e,t,Xo));return to.from(r)}forChild(e,t){if(t.isLeaf)return We.empty;let r=[];for(let o=0;o<this.members.length;o++){let i=this.members[o].forChild(e,t);i!=It&&(i instanceof to?r=r.concat(i.members):r.push(i))}return to.from(r)}eq(e){if(!(e instanceof to)||e.members.length!=this.members.length)return!1;for(let t=0;t<this.members.length;t++)if(!this.members[t].eq(e.members[t]))return!1;return!0}locals(e){let t,r=!0;for(let o=0;o<this.members.length;o++){let i=this.members[o].localsInner(e);if(i.length)if(!t)t=i;else{r&&(t=t.slice(),r=!1);for(let s=0;s<i.length;s++)t.push(i[s])}}return t?gg(r?t:t.sort(Zo)):Oi}static from(e){switch(e.length){case 0:return It;case 1:return e[0];default:return new to(e.every(t=>t instanceof We)?e:e.reduce((t,r)=>t.concat(r instanceof We?r:r.members),[]))}}forEachSet(e){for(let t=0;t<this.members.length;t++)this.members[t].forEachSet(e)}}function kD(n,e,t,r,o,i,s){let a=n.slice();for(let c=0,u=i;c<t.maps.length;c++){let d=0;t.maps[c].forEach((h,f,p,m)=>{let v=m-p-(f-h);for(let g=0;g<a.length;g+=3){let y=a[g+1];if(y<0||h>y+u-d)continue;let C=a[g]+u-d;f>=C?a[g+1]=h<=C?-2:-1:h>=u&&v&&(a[g]+=v,a[g+1]+=v)}d+=v}),u=t.maps[c].map(u,-1)}let l=!1;for(let c=0;c<a.length;c+=3)if(a[c+1]<0){if(a[c+1]==-2){l=!0,a[c+1]=-1;continue}let u=t.map(n[c]+i),d=u-o;if(d<0||d>=r.content.size){l=!0;continue}let h=t.map(n[c+1]+i,-1),f=h-o,{index:p,offset:m}=r.content.findIndex(d),v=r.maybeChild(p);if(v&&m==d&&m+v.nodeSize==f){let g=a[c+2].mapInner(t,v,u+1,n[c]+i+1,s);g!=It?(a[c]=d,a[c+1]=f,a[c+2]=g):(a[c+1]=-2,l=!0)}else l=!0}if(l){let c=ID(a,n,e,t,o,i,s),u=Cu(c,r,0,s);e=u.local;for(let d=0;d<a.length;d+=3)a[d+1]<0&&(a.splice(d,3),d-=3);for(let d=0,h=0;d<u.children.length;d+=3){let f=u.children[d];for(;h<a.length&&a[h]<f;)h+=3;a.splice(h,0,u.children[d],u.children[d+1],u.children[d+2])}}return new We(e.sort(Zo),a)}function VI(n,e){if(!e||!n.length)return n;let t=[];for(let r=0;r<n.length;r++){let o=n[r];t.push(new mn(o.from+e,o.to+e,o.type))}return t}function ID(n,e,t,r,o,i,s){function a(l,c){for(let u=0;u<l.local.length;u++){let d=l.local[u].map(r,o,c);d?t.push(d):s.onRemove&&s.onRemove(l.local[u].spec)}for(let u=0;u<l.children.length;u+=3)a(l.children[u+2],l.children[u]+c+1)}for(let l=0;l<n.length;l+=3)n[l+1]==-1&&a(n[l+2],e[l]+i+1);return t}function WI(n,e,t){if(e.isLeaf)return null;let r=t+e.nodeSize,o=null;for(let i=0,s;i<n.length;i++)(s=n[i])&&s.from>t&&s.to<r&&((o||(o=[])).push(s),n[i]=null);return o}function qI(n){let e=[];for(let t=0;t<n.length;t++)n[t]!=null&&e.push(n[t]);return e}function Cu(n,e,t,r){let o=[],i=!1;e.forEach((a,l)=>{let c=WI(n,a,l+t);if(c){i=!0;let u=Cu(c,a,t+l+1,r);u!=It&&o.push(l,l+a.nodeSize,u)}});let s=VI(i?qI(n):n,-t).sort(Zo);for(let a=0;a<s.length;a++)s[a].type.valid(e,s[a])||(r.onRemove&&r.onRemove(s[a].spec),s.splice(a--,1));return s.length||o.length?new We(s,o):It}function Zo(n,e){return n.from-e.from||n.to-e.to}function gg(n){let e=n;for(let t=0;t<e.length-1;t++){let r=e[t];if(r.from!=r.to)for(let o=t+1;o<e.length;o++){let i=e[o];if(i.from==r.from){i.to!=r.to&&(e==n&&(e=n.slice()),e[o]=i.copy(i.from,r.to),EC(e,o+1,i.copy(r.to,i.to)));continue}else{i.from<r.to&&(e==n&&(e=n.slice()),e[t]=r.copy(r.from,i.from),EC(e,o,r.copy(i.from,r.to)));break}}}return e}function EC(n,e,t){for(;e<n.length&&Zo(t,n[e])>0;)e++;n.splice(e,0,t)}function gh(n){let e=[];return n.someProp("decorations",t=>{let r=t(n.state);r&&r!=It&&e.push(r)}),n.cursorWrapper&&e.push(We.create(n.state.doc,[n.cursorWrapper.deco])),to.from(e)}const AD={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bD=Xt&&To<=11;class RD{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(e){this.anchorNode=e.anchorNode,this.anchorOffset=e.anchorOffset,this.focusNode=e.focusNode,this.focusOffset=e.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(e){return e.anchorNode==this.anchorNode&&e.anchorOffset==this.anchorOffset&&e.focusNode==this.focusNode&&e.focusOffset==this.focusOffset}}class ND{constructor(e,t){this.view=e,this.handleDOMChange=t,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new RD,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let o=0;o<r.length;o++)this.queue.push(r[o]);Xt&&To<=11&&r.some(o=>o.type=="childList"&&o.removedNodes.length||o.type=="characterData"&&o.oldValue.length>o.target.nodeValue.length)?this.flushSoon():this.flush()}),bD&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,AD)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let e=this.observer.takeRecords();if(e.length){for(let t=0;t<e.length;t++)this.queue.push(e[t]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(mC(this.view)){if(this.suppressingSelectionUpdates)return xr(this.view);if(Xt&&To<=11&&!this.view.state.selection.empty){let e=this.view.domSelectionRange();if(e.focusNode&&pi(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(e){if(!e.focusNode)return!0;let t=new Set,r;for(let i=e.focusNode;i;i=Ss(i))t.add(i);for(let i=e.anchorNode;i;i=Ss(i))if(t.has(i)){r=i;break}let o=r&&this.view.docView.nearestDesc(r);if(o&&o.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}flush(){let{view:e}=this;if(!e.docView||this.flushingSoon>-1)return;let t=this.pendingRecords();t.length&&(this.queue=[]);let r=e.domSelectionRange(),o=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&mC(e)&&!this.ignoreSelectionChange(r),i=-1,s=-1,a=!1,l=[];if(e.editable)for(let u=0;u<t.length;u++){let d=this.registerMutation(t[u],l);d&&(i=i<0?d.from:Math.min(d.from,i),s=s<0?d.to:Math.max(d.to,s),d.typeOver&&(a=!0))}if(Qn&&l.length){let u=l.filter(d=>d.nodeName=="BR");if(u.length==2){let[d,h]=u;d.parentNode&&d.parentNode.parentNode==h.parentNode?h.remove():d.remove()}else{let{focusNode:d}=this.currentSelection;for(let h of u){let f=h.parentNode;f&&f.nodeName=="LI"&&(!d||MD(e,d)!=f)&&h.remove()}}}let c=null;i<0&&o&&e.input.lastFocus>Date.now()-200&&Math.max(e.input.lastTouch,e.input.lastClick.time)<Date.now()-300&&cd(r)&&(c=cg(e))&&c.eq(Z.near(e.state.doc.resolve(0),1))?(e.input.lastFocus=0,xr(e),this.currentSelection.set(r),e.scrollToSelection()):(i>-1||o)&&(i>-1&&(e.docView.markDirty(i,s),xD(e)),this.handleDOMChange(i,s,a,l),e.docView&&e.docView.dirty?e.updateState(e.state):this.currentSelection.eq(r)||xr(e),this.currentSelection.set(r))}registerMutation(e,t){if(t.indexOf(e.target)>-1)return null;let r=this.view.docView.nearestDesc(e.target);if(e.type=="attributes"&&(r==this.view.docView||e.attributeName=="contenteditable"||e.attributeName=="style"&&!e.oldValue&&!e.target.getAttribute("style"))||!r||r.ignoreMutation(e))return null;if(e.type=="childList"){for(let u=0;u<e.addedNodes.length;u++){let d=e.addedNodes[u];t.push(d),d.nodeType==3&&(this.lastChangedTextNode=d)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(e.target))return{from:r.posBefore,to:r.posAfter};let o=e.previousSibling,i=e.nextSibling;if(Xt&&To<=11&&e.addedNodes.length)for(let u=0;u<e.addedNodes.length;u++){let{previousSibling:d,nextSibling:h}=e.addedNodes[u];(!d||Array.prototype.indexOf.call(e.addedNodes,d)<0)&&(o=d),(!h||Array.prototype.indexOf.call(e.addedNodes,h)<0)&&(i=h)}let s=o&&o.parentNode==e.target?yt(o)+1:0,a=r.localPosFromDOM(e.target,s,-1),l=i&&i.parentNode==e.target?yt(i):e.target.childNodes.length,c=r.localPosFromDOM(e.target,l,1);return{from:a,to:c}}else return e.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=e.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:e.target.nodeValue==e.oldValue})}}let kC=new WeakMap,IC=!1;function xD(n){if(!kC.has(n)&&(kC.set(n,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(n.dom).whiteSpace)!==-1)){if(n.requiresGeckoHackNode=Qn,IC)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),IC=!0}}function AC(n,e){let t=e.startContainer,r=e.startOffset,o=e.endContainer,i=e.endOffset,s=n.domAtPos(n.state.selection.anchor);return pi(s.node,s.offset,o,i)&&([t,r,o,i]=[o,i,t,r]),{anchorNode:t,anchorOffset:r,focusNode:o,focusOffset:i}}function OD(n,e){if(e.getComposedRanges){let o=e.getComposedRanges(n.root)[0];if(o)return AC(n,o)}let t;function r(o){o.preventDefault(),o.stopImmediatePropagation(),t=o.getTargetRanges()[0]}return n.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),n.dom.removeEventListener("beforeinput",r,!0),t?AC(n,t):null}function MD(n,e){for(let t=e.parentNode;t&&t!=n.dom;t=t.parentNode){let r=n.docView.nearestDesc(t,!0);if(r&&r.node.isBlock)return t}return null}function _D(n,e,t){let{node:r,fromOffset:o,toOffset:i,from:s,to:a}=n.docView.parseRange(e,t),l=n.domSelectionRange(),c,u=l.anchorNode;if(u&&n.dom.contains(u.nodeType==1?u:u.parentNode)&&(c=[{node:u,offset:l.anchorOffset}],cd(l)||c.push({node:l.focusNode,offset:l.focusOffset})),Nt&&n.input.lastKeyCode===8)for(let v=i;v>o;v--){let g=r.childNodes[v-1],y=g.pmViewDesc;if(g.nodeName=="BR"&&!y){i=v;break}if(!y||y.size)break}let d=n.state.doc,h=n.someProp("domParser")||Sa.fromSchema(n.state.schema),f=d.resolve(s),p=null,m=h.parse(r,{topNode:f.parent,topMatch:f.parent.contentMatchAt(f.index()),topOpen:!0,from:o,to:i,preserveWhitespace:f.parent.type.whitespace=="pre"?"full":!0,findPositions:c,ruleFromNode:PD,context:f});if(c&&c[0].pos!=null){let v=c[0].pos,g=c[1]&&c[1].pos;g==null&&(g=v),p={anchor:v+s,head:g+s}}return{doc:m,sel:p,from:s,to:a}}function PD(n){let e=n.pmViewDesc;if(e)return e.parseRule();if(n.nodeName=="BR"&&n.parentNode){if(Ut&&/^(ul|ol)$/i.test(n.parentNode.nodeName)){let t=document.createElement("div");return t.appendChild(document.createElement("li")),{skip:t}}else if(n.parentNode.lastChild==n||Ut&&/^(tr|table)$/i.test(n.parentNode.nodeName))return{ignore:!0}}else if(n.nodeName=="IMG"&&n.getAttribute("mark-placeholder"))return{ignore:!0};return null}const DD=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function LD(n,e,t,r,o){let i=n.input.compositionPendingChanges||(n.composing?n.input.compositionID:0);if(n.input.compositionPendingChanges=0,e<0){let E=n.input.lastSelectionTime>Date.now()-50?n.input.lastSelectionOrigin:null,_=cg(n,E);if(_&&!n.state.selection.eq(_)){if(Nt&&Ar&&n.input.lastKeyCode===13&&Date.now()-100<n.input.lastKeyCodeTime&&n.someProp("handleKeyDown",W=>W(n,Ho(13,"Enter"))))return;let O=n.state.tr.setSelection(_);E=="pointer"?O.setMeta("pointer",!0):E=="key"&&O.scrollIntoView(),i&&O.setMeta("composition",i),n.dispatch(O)}return}let s=n.state.doc.resolve(e),a=s.sharedDepth(t);e=s.before(a+1),t=n.state.doc.resolve(t).after(a+1);let l=n.state.selection,c=_D(n,e,t),u=n.state.doc,d=u.slice(c.from,c.to),h,f;n.input.lastKeyCode===8&&Date.now()-100<n.input.lastKeyCodeTime?(h=n.state.selection.to,f="end"):(h=n.state.selection.from,f="start"),n.input.lastKeyCode=null;let p=HD(d.content,c.doc.content,c.from,h,f);if(p&&n.input.domChangeCount++,(ws&&n.input.lastIOSEnter>Date.now()-225||Ar)&&o.some(E=>E.nodeType==1&&!DD.test(E.nodeName))&&(!p||p.endA>=p.endB)&&n.someProp("handleKeyDown",E=>E(n,Ho(13,"Enter")))){n.input.lastIOSEnter=0;return}if(!p)if(r&&l instanceof J&&!l.empty&&l.$head.sameParent(l.$anchor)&&!n.composing&&!(c.sel&&c.sel.anchor!=c.sel.head))p={start:l.from,endA:l.to,endB:l.to};else{if(c.sel){let E=bC(n,n.state.doc,c.sel);if(E&&!E.eq(n.state.selection)){let _=n.state.tr.setSelection(E);i&&_.setMeta("composition",i),n.dispatch(_)}}return}n.state.selection.from<n.state.selection.to&&p.start==p.endB&&n.state.selection instanceof J&&(p.start>n.state.selection.from&&p.start<=n.state.selection.from+2&&n.state.selection.from>=c.from?p.start=n.state.selection.from:p.endA<n.state.selection.to&&p.endA>=n.state.selection.to-2&&n.state.selection.to<=c.to&&(p.endB+=n.state.selection.to-p.endA,p.endA=n.state.selection.to)),Xt&&To<=11&&p.endB==p.start+1&&p.endA==p.start&&p.start>c.from&&c.doc.textBetween(p.start-c.from-1,p.start-c.from+1)==" "&&(p.start--,p.endA--,p.endB--);let m=c.doc.resolveNoCache(p.start-c.from),v=c.doc.resolveNoCache(p.endB-c.from),g=u.resolve(p.start),y=m.sameParent(v)&&m.parent.inlineContent&&g.end()>=p.endA,C;if((ws&&n.input.lastIOSEnter>Date.now()-225&&(!y||o.some(E=>E.nodeName=="DIV"||E.nodeName=="P"))||!y&&m.pos<c.doc.content.size&&(!m.sameParent(v)||!m.parent.inlineContent)&&!/\S/.test(c.doc.textBetween(m.pos,v.pos,"",""))&&(C=Z.findFrom(c.doc.resolve(m.pos+1),1,!0))&&C.head>m.pos)&&n.someProp("handleKeyDown",E=>E(n,Ho(13,"Enter")))){n.input.lastIOSEnter=0;return}if(n.state.selection.anchor>p.start&&FD(u,p.start,p.endA,m,v)&&n.someProp("handleKeyDown",E=>E(n,Ho(8,"Backspace")))){Ar&&Nt&&n.domObserver.suppressSelectionUpdates();return}Nt&&p.endB==p.start&&(n.input.lastChromeDelete=Date.now()),Ar&&!y&&m.start()!=v.start()&&v.parentOffset==0&&m.depth==v.depth&&c.sel&&c.sel.anchor==c.sel.head&&c.sel.head==p.endA&&(p.endB-=2,v=c.doc.resolveNoCache(p.endB-c.from),setTimeout(()=>{n.someProp("handleKeyDown",function(E){return E(n,Ho(13,"Enter"))})},20));let w=p.start,I=p.endA,A=E=>{let _=E||n.state.tr.replace(w,I,c.doc.slice(p.start-c.from,p.endB-c.from));if(c.sel){let O=bC(n,_.doc,c.sel);O&&!(Nt&&n.composing&&O.empty&&(p.start!=p.endB||n.input.lastChromeDelete<Date.now()-100)&&(O.head==w||O.head==_.mapping.map(I)-1)||Xt&&O.empty&&O.head==w)&&_.setSelection(O)}return i&&_.setMeta("composition",i),_.scrollIntoView()},R;if(y){if(m.pos==v.pos){Xt&&To<=11&&m.parentOffset==0&&(n.domObserver.suppressSelectionUpdates(),setTimeout(()=>xr(n),20));let E=A(n.state.tr.delete(w,I)),_=u.resolve(p.start).marksAcross(u.resolve(p.endA));_&&E.ensureMarks(_),n.dispatch(E)}else if(p.endA==p.endB&&(R=UD(m.parent.content.cut(m.parentOffset,v.parentOffset),g.parent.content.cut(g.parentOffset,p.endA-g.start())))){let E=A(n.state.tr);R.type=="add"?E.addMark(w,I,R.mark):E.removeMark(w,I,R.mark),n.dispatch(E)}else if(m.parent.child(m.index()).isText&&m.index()==v.index()-(v.textOffset?0:1)){let E=m.parent.textBetween(m.parentOffset,v.parentOffset),_=()=>A(n.state.tr.insertText(E,w,I));n.someProp("handleTextInput",O=>O(n,w,I,E,_))||n.dispatch(_())}}else n.dispatch(A())}function bC(n,e,t){return Math.max(t.anchor,t.head)>e.content.size?null:ug(n,e.resolve(t.anchor),e.resolve(t.head))}function UD(n,e){let t=n.firstChild.marks,r=e.firstChild.marks,o=t,i=r,s,a,l;for(let u=0;u<r.length;u++)o=r[u].removeFromSet(o);for(let u=0;u<t.length;u++)i=t[u].removeFromSet(i);if(o.length==1&&i.length==0)a=o[0],s="add",l=u=>u.mark(a.addToSet(u.marks));else if(o.length==0&&i.length==1)a=i[0],s="remove",l=u=>u.mark(a.removeFromSet(u.marks));else return null;let c=[];for(let u=0;u<e.childCount;u++)c.push(l(e.child(u)));if(N.from(c).eq(n))return{mark:a,type:s}}function FD(n,e,t,r,o){if(t-e<=o.pos-r.pos||yh(r,!0,!1)<o.pos)return!1;let i=n.resolve(e);if(!r.parent.isTextblock){let a=i.nodeAfter;return a!=null&&t==e+a.nodeSize}if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;let s=n.resolve(yh(i,!0,!0));return!s.parent.isTextblock||s.pos>t||yh(s,!0,!1)<t?!1:r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function yh(n,e,t){let r=n.depth,o=e?n.end():n.pos;for(;r>0&&(e||n.indexAfter(r)==n.node(r).childCount);)r--,o++,e=!1;if(t){let i=n.node(r).maybeChild(n.indexAfter(r));for(;i&&!i.isLeaf;)i=i.firstChild,o++}return o}function HD(n,e,t,r,o){let i=n.findDiffStart(e,t);if(i==null)return null;let{a:s,b:a}=n.findDiffEnd(e,t+n.size,t+e.size);if(o=="end"){let l=Math.max(0,i-Math.min(s,a));r-=s+l-i}if(s<i&&n.size<e.size){let l=r<=i&&r>=s?i-r:0;i-=l,i&&i<e.size&&RC(e.textBetween(i-1,i+1))&&(i+=l?1:-1),a=i+(a-s),s=i}else if(a<i){let l=r<=i&&r>=a?i-r:0;i-=l,i&&i<n.size&&RC(n.textBetween(i-1,i+1))&&(i+=l?1:-1),s=i+(s-a),a=i}return{start:i,endA:s,endB:a}}function RC(n){if(n.length!=2)return!1;let e=n.charCodeAt(0),t=n.charCodeAt(1);return e>=56320&&e<=57343&&t>=55296&&t<=56319}class GI{constructor(e,t){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new oD,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=t,this.state=t.state,this.directPlugins=t.plugins||[],this.directPlugins.forEach(_C),this.dispatch=this.dispatch.bind(this),this.dom=e&&e.mount||document.createElement("div"),e&&(e.appendChild?e.appendChild(this.dom):typeof e=="function"?e(this.dom):e.mount&&(this.mounted=!0)),this.editable=OC(this),xC(this),this.nodeViews=MC(this),this.docView=cC(this.state.doc,NC(this),gh(this),this.dom,this),this.domObserver=new ND(this,(r,o,i,s)=>LD(this,r,o,i,s)),this.domObserver.start(),iD(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let e=this._props;this._props={};for(let t in e)this._props[t]=e[t];this._props.state=this.state}return this._props}update(e){e.handleDOMEvents!=this._props.handleDOMEvents&&ap(this);let t=this._props;this._props=e,e.plugins&&(e.plugins.forEach(_C),this.directPlugins=e.plugins),this.updateStateInner(e.state,t)}setProps(e){let t={};for(let r in this._props)t[r]=this._props[r];t.state=this.state;for(let r in e)t[r]=e[r];this.update(t)}updateState(e){this.updateStateInner(e,this._props)}updateStateInner(e,t){var r;let o=this.state,i=!1,s=!1;e.storedMarks&&this.composing&&(zI(this),s=!0),this.state=e;let a=o.plugins!=e.plugins||this._props.plugins!=t.plugins;if(a||this._props.plugins!=t.plugins||this._props.nodeViews!=t.nodeViews){let f=MC(this);zD(f,this.nodeViews)&&(this.nodeViews=f,i=!0)}(a||t.handleDOMEvents!=this._props.handleDOMEvents)&&ap(this),this.editable=OC(this),xC(this);let l=gh(this),c=NC(this),u=o.plugins!=e.plugins&&!o.doc.eq(e.doc)?"reset":e.scrollToSelection>o.scrollToSelection?"to selection":"preserve",d=i||!this.docView.matchesNode(e.doc,c,l);(d||!e.selection.eq(o.selection))&&(s=!0);let h=u=="preserve"&&s&&this.dom.style.overflowAnchor==null&&CP(this);if(s){this.domObserver.stop();let f=d&&(Xt||Nt)&&!this.composing&&!o.selection.empty&&!e.selection.empty&&BD(o.selection,e.selection);if(d){let p=Nt?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=vD(this)),(i||!this.docView.update(e.doc,c,l,this))&&(this.docView.updateOuterDeco(c),this.docView.destroy(),this.docView=cC(e.doc,c,l,this.dom,this)),p&&!this.trackWrites&&(f=!0)}f||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&jP(this))?xr(this,f):(NI(this,e.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(o),!((r=this.dragging)===null||r===void 0)&&r.node&&!o.doc.eq(e.doc)&&this.updateDraggedNode(this.dragging,o),u=="reset"?this.dom.scrollTop=0:u=="to selection"?this.scrollToSelection():h&&SP(h)}scrollToSelection(){let e=this.domSelectionRange().focusNode;if(!(!e||!this.dom.contains(e.nodeType==1?e:e.parentNode))){if(!this.someProp("handleScrollToSelection",t=>t(this)))if(this.state.selection instanceof q){let t=this.docView.domAfterPos(this.state.selection.from);t.nodeType==1&&rC(this,t.getBoundingClientRect(),e)}else rC(this,this.coordsAtPos(this.state.selection.head,1),e)}}destroyPluginViews(){let e;for(;e=this.pluginViews.pop();)e.destroy&&e.destroy()}updatePluginViews(e){if(!e||e.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let t=0;t<this.directPlugins.length;t++){let r=this.directPlugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let t=0;t<this.state.plugins.length;t++){let r=this.state.plugins[t];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let t=0;t<this.pluginViews.length;t++){let r=this.pluginViews[t];r.update&&r.update(this,e)}}updateDraggedNode(e,t){let r=e.node,o=-1;if(this.state.doc.nodeAt(r.from)==r.node)o=r.from;else{let i=r.from+(this.state.doc.content.size-t.doc.content.size);(i>0&&this.state.doc.nodeAt(i))==r.node&&(o=i)}this.dragging=new jI(e.slice,e.move,o<0?void 0:q.create(this.state.doc,o))}someProp(e,t){let r=this._props&&this._props[e],o;if(r!=null&&(o=t?t(r):r))return o;for(let s=0;s<this.directPlugins.length;s++){let a=this.directPlugins[s].props[e];if(a!=null&&(o=t?t(a):a))return o}let i=this.state.plugins;if(i)for(let s=0;s<i.length;s++){let a=i[s].props[e];if(a!=null&&(o=t?t(a):a))return o}}hasFocus(){if(Xt){let e=this.root.activeElement;if(e==this.dom)return!0;if(!e||!this.dom.contains(e))return!1;for(;e&&this.dom!=e&&this.dom.contains(e);){if(e.contentEditable=="false")return!1;e=e.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&wP(this.dom),xr(this),this.domObserver.start()}get root(){let e=this._root;if(e==null){for(let t=this.dom.parentNode;t;t=t.parentNode)if(t.nodeType==9||t.nodeType==11&&t.host)return t.getSelection||(Object.getPrototypeOf(t).getSelection=()=>t.ownerDocument.getSelection()),this._root=t}return e||document}updateRoot(){this._root=null}posAtCoords(e){return AP(this,e)}coordsAtPos(e,t=1){return wI(this,e,t)}domAtPos(e,t=0){return this.docView.domFromPos(e,t)}nodeDOM(e){let t=this.docView.descAt(e);return t?t.nodeDOM:null}posAtDOM(e,t,r=-1){let o=this.docView.posFromDOM(e,t,r);if(o==null)throw new RangeError("DOM position not inside the editor");return o}endOfTextblock(e,t){return OP(this,t||this.state,e)}pasteHTML(e,t){return Ja(this,"",e,!1,t||new ClipboardEvent("paste"))}pasteText(e,t){return Ja(this,e,null,!0,t||new ClipboardEvent("paste"))}serializeForClipboard(e){return dg(this,e)}destroy(){this.docView&&(sD(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],gh(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,lP())}get isDestroyed(){return this.docView==null}dispatchEvent(e){return lD(this,e)}domSelectionRange(){let e=this.domSelection();return e?Ut&&this.root.nodeType===11&&fP(this.dom.ownerDocument)==this.dom&&OD(this,e)||e:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}GI.prototype.dispatch=function(n){let e=this._props.dispatchTransaction;e?e.call(this,n):this.updateState(this.state.apply(n))};function NC(n){let e=Object.create(null);return e.class="ProseMirror",e.contenteditable=String(n.editable),n.someProp("attributes",t=>{if(typeof t=="function"&&(t=t(n.state)),t)for(let r in t)r=="class"?e.class+=" "+t[r]:r=="style"?e.style=(e.style?e.style+";":"")+t[r]:!e[r]&&r!="contenteditable"&&r!="nodeName"&&(e[r]=String(t[r]))}),e.translate||(e.translate="no"),[mn.node(0,n.state.doc.content.size,e)]}function xC(n){if(n.markCursor){let e=document.createElement("img");e.className="ProseMirror-separator",e.setAttribute("mark-placeholder","true"),e.setAttribute("alt",""),n.cursorWrapper={dom:e,deco:mn.widget(n.state.selection.from,e,{raw:!0,marks:n.markCursor})}}else n.cursorWrapper=null}function OC(n){return!n.someProp("editable",e=>e(n.state)===!1)}function BD(n,e){let t=Math.min(n.$anchor.sharedDepth(n.head),e.$anchor.sharedDepth(e.head));return n.$anchor.start(t)!=e.$anchor.start(t)}function MC(n){let e=Object.create(null);function t(r){for(let o in r)Object.prototype.hasOwnProperty.call(e,o)||(e[o]=r[o])}return n.someProp("nodeViews",t),n.someProp("markViews",t),e}function zD(n,e){let t=0,r=0;for(let o in n){if(n[o]!=e[o])return!0;t++}for(let o in e)r++;return t!=r}function _C(n){if(n.spec.state||n.spec.filterTransaction||n.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Ro={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Su={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},KD=typeof navigator<"u"&&/Mac/.test(navigator.platform),jD=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var vt=0;vt<10;vt++)Ro[48+vt]=Ro[96+vt]=String(vt);for(var vt=1;vt<=24;vt++)Ro[vt+111]="F"+vt;for(var vt=65;vt<=90;vt++)Ro[vt]=String.fromCharCode(vt+32),Su[vt]=String.fromCharCode(vt);for(var vh in Ro)Su.hasOwnProperty(vh)||(Su[vh]=Ro[vh]);function $D(n){var e=KD&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||jD&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Su:Ro)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}const VD=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),WD=typeof navigator<"u"&&/Win/.test(navigator.platform);function qD(n){let e=n.split(/-(?!$)/),t=e[e.length-1];t=="Space"&&(t=" ");let r,o,i,s;for(let a=0;a<e.length-1;a++){let l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))VD?s=!0:o=!0;else throw new Error("Unrecognized modifier name: "+l)}return r&&(t="Alt-"+t),o&&(t="Ctrl-"+t),s&&(t="Meta-"+t),i&&(t="Shift-"+t),t}function GD(n){let e=Object.create(null);for(let t in n)e[qD(t)]=n[t];return e}function Ch(n,e,t=!0){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t&&e.shiftKey&&(n="Shift-"+n),n}function QD(n){return new $t({props:{handleKeyDown:QI(n)}})}function QI(n){let e=GD(n);return function(t,r){let o=$D(r),i,s=e[Ch(o,r)];if(s&&s(t.state,t.dispatch,t))return!0;if(o.length==1&&o!=" "){if(r.shiftKey){let a=e[Ch(o,r,!1)];if(a&&a(t.state,t.dispatch,t))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(WD&&r.ctrlKey&&r.altKey)&&(i=Ro[r.keyCode])&&i!=o){let a=e[Ch(i,r)];if(a&&a(t.state,t.dispatch,t))return!0}}return!1}}const yg=(n,e)=>n.selection.empty?!1:(e&&e(n.tr.deleteSelection().scrollIntoView()),!0);function YI(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("backward",n):t.parentOffset>0)?null:t}const JI=(n,e,t)=>{let r=YI(n,t);if(!r)return!1;let o=vg(r);if(!o){let s=r.blockRange(),a=s&&_s(s);return a==null?!1:(e&&e(n.tr.lift(s,a).scrollIntoView()),!0)}let i=o.nodeBefore;if(sA(n,o,e,-1))return!0;if(r.parent.content.size==0&&(Ts(i,"end")||q.isSelectable(i)))for(let s=r.depth;;s--){let a=ad(n.doc,r.before(s),r.after(s),L.empty);if(a&&a.slice.size<a.to-a.from){if(e){let l=n.tr.step(a);l.setSelection(Ts(i,"end")?Z.findFrom(l.doc.resolve(l.mapping.map(o.pos,-1)),-1):q.create(l.doc,o.pos-i.nodeSize)),e(l.scrollIntoView())}return!0}if(s==1||r.node(s-1).childCount>1)break}return i.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos-i.nodeSize,o.pos).scrollIntoView()),!0):!1},YD=(n,e,t)=>{let r=YI(n,t);if(!r)return!1;let o=vg(r);return o?XI(n,o,e):!1},JD=(n,e,t)=>{let r=eA(n,t);if(!r)return!1;let o=Cg(r);return o?XI(n,o,e):!1};function XI(n,e,t){let r=e.nodeBefore,o=r,i=e.pos-1;for(;!o.isTextblock;i--){if(o.type.spec.isolating)return!1;let u=o.lastChild;if(!u)return!1;o=u}let s=e.nodeAfter,a=s,l=e.pos+1;for(;!a.isTextblock;l++){if(a.type.spec.isolating)return!1;let u=a.firstChild;if(!u)return!1;a=u}let c=ad(n.doc,i,l,L.empty);if(!c||c.from!=i||c instanceof at&&c.slice.size>=l-i)return!1;if(t){let u=n.tr.step(c);u.setSelection(J.create(u.doc,i)),t(u.scrollIntoView())}return!0}function Ts(n,e,t=!1){for(let r=n;r;r=e=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(t&&r.childCount!=1)return!1}return!1}const ZI=(n,e,t)=>{let{$head:r,empty:o}=n.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("backward",n):r.parentOffset>0)return!1;i=vg(r)}let s=i&&i.nodeBefore;return!s||!q.isSelectable(s)?!1:(e&&e(n.tr.setSelection(q.create(n.doc,i.pos-s.nodeSize)).scrollIntoView()),!0)};function vg(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){if(n.index(e)>0)return n.doc.resolve(n.before(e+1));if(n.node(e).type.spec.isolating)break}return null}function eA(n,e){let{$cursor:t}=n.selection;return!t||(e?!e.endOfTextblock("forward",n):t.parentOffset<t.parent.content.size)?null:t}const tA=(n,e,t)=>{let r=eA(n,t);if(!r)return!1;let o=Cg(r);if(!o)return!1;let i=o.nodeAfter;if(sA(n,o,e,1))return!0;if(r.parent.content.size==0&&(Ts(i,"start")||q.isSelectable(i))){let s=ad(n.doc,r.before(),r.after(),L.empty);if(s&&s.slice.size<s.to-s.from){if(e){let a=n.tr.step(s);a.setSelection(Ts(i,"start")?Z.findFrom(a.doc.resolve(a.mapping.map(o.pos)),1):q.create(a.doc,a.mapping.map(o.pos))),e(a.scrollIntoView())}return!0}}return i.isAtom&&o.depth==r.depth-1?(e&&e(n.tr.delete(o.pos,o.pos+i.nodeSize).scrollIntoView()),!0):!1},nA=(n,e,t)=>{let{$head:r,empty:o}=n.selection,i=r;if(!o)return!1;if(r.parent.isTextblock){if(t?!t.endOfTextblock("forward",n):r.parentOffset<r.parent.content.size)return!1;i=Cg(r)}let s=i&&i.nodeAfter;return!s||!q.isSelectable(s)?!1:(e&&e(n.tr.setSelection(q.create(n.doc,i.pos)).scrollIntoView()),!0)};function Cg(n){if(!n.parent.type.spec.isolating)for(let e=n.depth-1;e>=0;e--){let t=n.node(e);if(n.index(e)+1<t.childCount)return n.doc.resolve(n.after(e+1));if(t.type.spec.isolating)break}return null}const XD=(n,e)=>{let t=n.selection,r=t instanceof q,o;if(r){if(t.node.isTextblock||!_o(n.doc,t.from))return!1;o=t.from}else if(o=sd(n.doc,t.from,-1),o==null)return!1;if(e){let i=n.tr.join(o);r&&i.setSelection(q.create(i.doc,o-n.doc.resolve(o).nodeBefore.nodeSize)),e(i.scrollIntoView())}return!0},ZD=(n,e)=>{let t=n.selection,r;if(t instanceof q){if(t.node.isTextblock||!_o(n.doc,t.to))return!1;r=t.to}else if(r=sd(n.doc,t.to,1),r==null)return!1;return e&&e(n.tr.join(r).scrollIntoView()),!0},eL=(n,e)=>{let{$from:t,$to:r}=n.selection,o=t.blockRange(r),i=o&&_s(o);return i==null?!1:(e&&e(n.tr.lift(o,i).scrollIntoView()),!0)},rA=(n,e)=>{let{$head:t,$anchor:r}=n.selection;return!t.parent.type.spec.code||!t.sameParent(r)?!1:(e&&e(n.tr.insertText(`
`).scrollIntoView()),!0)};function Sg(n){for(let e=0;e<n.edgeCount;e++){let{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}const tL=(n,e)=>{let{$head:t,$anchor:r}=n.selection;if(!t.parent.type.spec.code||!t.sameParent(r))return!1;let o=t.node(-1),i=t.indexAfter(-1),s=Sg(o.contentMatchAt(i));if(!s||!o.canReplaceWith(i,i,s))return!1;if(e){let a=t.after(),l=n.tr.replaceWith(a,a,s.createAndFill());l.setSelection(Z.near(l.doc.resolve(a),1)),e(l.scrollIntoView())}return!0},oA=(n,e)=>{let t=n.selection,{$from:r,$to:o}=t;if(t instanceof yn||r.parent.inlineContent||o.parent.inlineContent)return!1;let i=Sg(o.parent.contentMatchAt(o.indexAfter()));if(!i||!i.isTextblock)return!1;if(e){let s=(!r.parentOffset&&o.index()<o.parent.childCount?r:o).pos,a=n.tr.insert(s,i.createAndFill());a.setSelection(J.create(a.doc,s+1)),e(a.scrollIntoView())}return!0},iA=(n,e)=>{let{$cursor:t}=n.selection;if(!t||t.parent.content.size)return!1;if(t.depth>1&&t.after()!=t.end(-1)){let i=t.before();if(Nr(n.doc,i))return e&&e(n.tr.split(i).scrollIntoView()),!0}let r=t.blockRange(),o=r&&_s(r);return o==null?!1:(e&&e(n.tr.lift(r,o).scrollIntoView()),!0)};function nL(n){return(e,t)=>{let{$from:r,$to:o}=e.selection;if(e.selection instanceof q&&e.selection.node.isBlock)return!r.parentOffset||!Nr(e.doc,r.pos)?!1:(t&&t(e.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let i=[],s,a,l=!1,c=!1;for(let f=r.depth;;f--)if(r.node(f).isBlock){l=r.end(f)==r.pos+(r.depth-f),c=r.start(f)==r.pos-(r.depth-f),a=Sg(r.node(f-1).contentMatchAt(r.indexAfter(f-1))),i.unshift(l&&a?{type:a}:null),s=f;break}else{if(f==1)return!1;i.unshift(null)}let u=e.tr;(e.selection instanceof J||e.selection instanceof yn)&&u.deleteSelection();let d=u.mapping.map(r.pos),h=Nr(u.doc,d,i.length,i);if(h||(i[0]=a?{type:a}:null,h=Nr(u.doc,d,i.length,i)),!h)return!1;if(u.split(d,i.length,i),!l&&c&&r.node(s).type!=a){let f=u.mapping.map(r.before(s)),p=u.doc.resolve(f);a&&r.node(s-1).canReplaceWith(p.index(),p.index()+1,a)&&u.setNodeMarkup(u.mapping.map(r.before(s)),a)}return t&&t(u.scrollIntoView()),!0}}const rL=nL(),oL=(n,e)=>{let{$from:t,to:r}=n.selection,o,i=t.sharedDepth(r);return i==0?!1:(o=t.before(i),e&&e(n.tr.setSelection(q.create(n.doc,o))),!0)};function iL(n,e,t){let r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!r||!o||!r.type.compatibleContent(o.type)?!1:!r.content.size&&e.parent.canReplace(i-1,i)?(t&&t(n.tr.delete(e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!e.parent.canReplace(i,i+1)||!(o.isTextblock||_o(n.doc,e.pos))?!1:(t&&t(n.tr.join(e.pos).scrollIntoView()),!0)}function sA(n,e,t,r){let o=e.nodeBefore,i=e.nodeAfter,s,a,l=o.type.spec.isolating||i.type.spec.isolating;if(!l&&iL(n,e,t))return!0;let c=!l&&e.parent.canReplace(e.index(),e.index()+1);if(c&&(s=(a=o.contentMatchAt(o.childCount)).findWrapping(i.type))&&a.matchType(s[0]||i.type).validEnd){if(t){let f=e.pos+i.nodeSize,p=N.empty;for(let g=s.length-1;g>=0;g--)p=N.from(s[g].create(null,p));p=N.from(o.copy(p));let m=n.tr.step(new ct(e.pos-1,f,e.pos,f,new L(p,1,0),s.length,!0)),v=m.doc.resolve(f+2*s.length);v.nodeAfter&&v.nodeAfter.type==o.type&&_o(m.doc,v.pos)&&m.join(v.pos),t(m.scrollIntoView())}return!0}let u=i.type.spec.isolating||r>0&&l?null:Z.findFrom(e,1),d=u&&u.$from.blockRange(u.$to),h=d&&_s(d);if(h!=null&&h>=e.depth)return t&&t(n.tr.lift(d,h).scrollIntoView()),!0;if(c&&Ts(i,"start",!0)&&Ts(o,"end")){let f=o,p=[];for(;p.push(f),!f.isTextblock;)f=f.lastChild;let m=i,v=1;for(;!m.isTextblock;m=m.firstChild)v++;if(f.canReplace(f.childCount,f.childCount,m.content)){if(t){let g=N.empty;for(let C=p.length-1;C>=0;C--)g=N.from(p[C].copy(g));let y=n.tr.step(new ct(e.pos-p.length,e.pos+i.nodeSize,e.pos+v,e.pos+i.nodeSize-v,new L(g,p.length,0),0,!0));t(y.scrollIntoView())}return!0}}return!1}function aA(n){return function(e,t){let r=e.selection,o=n<0?r.$from:r.$to,i=o.depth;for(;o.node(i).isInline;){if(!i)return!1;i--}return o.node(i).isTextblock?(t&&t(e.tr.setSelection(J.create(e.doc,n<0?o.start(i):o.end(i)))),!0):!1}}const sL=aA(-1),aL=aA(1);function lL(n,e=null){return function(t,r){let{$from:o,$to:i}=t.selection,s=o.blockRange(i),a=s&&sg(s,n,e);return a?(r&&r(t.tr.wrap(s,a).scrollIntoView()),!0):!1}}function PC(n,e=null){return function(t,r){let o=!1;for(let i=0;i<t.selection.ranges.length&&!o;i++){let{$from:{pos:s},$to:{pos:a}}=t.selection.ranges[i];t.doc.nodesBetween(s,a,(l,c)=>{if(o)return!1;if(!(!l.isTextblock||l.hasMarkup(n,e)))if(l.type==n)o=!0;else{let u=t.doc.resolve(c),d=u.index();o=u.parent.canReplaceWith(d,d+1,n)}})}if(!o)return!1;if(r){let i=t.tr;for(let s=0;s<t.selection.ranges.length;s++){let{$from:{pos:a},$to:{pos:l}}=t.selection.ranges[s];i.setBlockType(a,l,n,e)}r(i.scrollIntoView())}return!0}}function wg(...n){return function(e,t,r){for(let o=0;o<n.length;o++)if(n[o](e,t,r))return!0;return!1}}wg(yg,JI,ZI);wg(yg,tA,nA);wg(rA,oA,iA,rL);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function cL(n,e=null){return function(t,r){let{$from:o,$to:i}=t.selection,s=o.blockRange(i);if(!s)return!1;let a=r?t.tr:null;return uL(a,s,n,e)?(r&&r(a.scrollIntoView()),!0):!1}}function uL(n,e,t,r=null){let o=!1,i=e,s=e.$from.doc;if(e.depth>=2&&e.$from.node(e.depth-1).type.compatibleContent(t)&&e.startIndex==0){if(e.$from.index(e.depth-1)==0)return!1;let l=s.resolve(e.start-2);i=new fu(l,l,e.depth),e.endIndex<e.parent.childCount&&(e=new fu(e.$from,s.resolve(e.$to.end(e.depth)),e.depth)),o=!0}let a=sg(i,t,r,e);return a?(n&&dL(n,e,a,o,t),!0):!1}function dL(n,e,t,r,o){let i=N.empty;for(let u=t.length-1;u>=0;u--)i=N.from(t[u].type.create(t[u].attrs,i));n.step(new ct(e.start-(r?2:0),e.end,e.start,e.end,new L(i,0,0),t.length,!0));let s=0;for(let u=0;u<t.length;u++)t[u].type==o&&(s=u+1);let a=t.length-s,l=e.start+t.length-(r?2:0),c=e.parent;for(let u=e.startIndex,d=e.endIndex,h=!0;u<d;u++,h=!1)!h&&Nr(n.doc,l,a)&&(n.split(l,a),l+=2*a),l+=c.child(u).nodeSize;return n}function hL(n){return function(e,t){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,s=>s.childCount>0&&s.firstChild.type==n);return i?t?r.node(i.depth-1).type==n?fL(e,t,n,i):pL(e,t,i):!0:!1}}function fL(n,e,t,r){let o=n.tr,i=r.end,s=r.$to.end(r.depth);i<s&&(o.step(new ct(i-1,s,i,s,new L(N.from(t.create(null,r.parent.copy())),1,0),1,!0)),r=new fu(o.doc.resolve(r.$from.pos),o.doc.resolve(s),r.depth));const a=_s(r);if(a==null)return!1;o.lift(r,a);let l=o.doc.resolve(o.mapping.map(i,-1)-1);return _o(o.doc,l.pos)&&l.nodeBefore.type==l.nodeAfter.type&&o.join(l.pos),e(o.scrollIntoView()),!0}function pL(n,e,t){let r=n.tr,o=t.parent;for(let f=t.end,p=t.endIndex-1,m=t.startIndex;p>m;p--)f-=o.child(p).nodeSize,r.delete(f-1,f+1);let i=r.doc.resolve(t.start),s=i.nodeAfter;if(r.mapping.map(t.end)!=t.start+i.nodeAfter.nodeSize)return!1;let a=t.startIndex==0,l=t.endIndex==o.childCount,c=i.node(-1),u=i.index(-1);if(!c.canReplace(u+(a?0:1),u+1,s.content.append(l?N.empty:N.from(o))))return!1;let d=i.pos,h=d+s.nodeSize;return r.step(new ct(d-(a?1:0),h+(l?1:0),d+1,h-1,new L((a?N.empty:N.from(o.copy(N.empty))).append(l?N.empty:N.from(o.copy(N.empty))),a?0:1,l?0:1),a?0:1)),e(r.scrollIntoView()),!0}function mL(n){return function(e,t){let{$from:r,$to:o}=e.selection,i=r.blockRange(o,c=>c.childCount>0&&c.firstChild.type==n);if(!i)return!1;let s=i.startIndex;if(s==0)return!1;let a=i.parent,l=a.child(s-1);if(l.type!=n)return!1;if(t){let c=l.lastChild&&l.lastChild.type==a.type,u=N.from(c?n.create():null),d=new L(N.from(n.create(null,N.from(a.type.create(null,u)))),c?3:1,0),h=i.start,f=i.end;t(e.tr.step(new ct(h-(c?3:1),f,h,f,d,1,!0)).scrollIntoView())}return!0}}function hd(n){const{state:e,transaction:t}=n;let{selection:r}=t,{doc:o}=t,{storedMarks:i}=t;return{...e,apply:e.apply.bind(e),applyTransaction:e.applyTransaction.bind(e),plugins:e.plugins,schema:e.schema,reconfigure:e.reconfigure.bind(e),toJSON:e.toJSON.bind(e),get storedMarks(){return i},get selection(){return r},get doc(){return o},get tr(){return r=t.selection,o=t.doc,i=t.storedMarks,t}}}class fd{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:r}=this,{view:o}=t,{tr:i}=r,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([a,l])=>[a,(...u)=>{const d=l(...u)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&o.dispatch(i),d}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a=[],l=!!e,c=e||i.tr,u=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),a.every(h=>h===!0)),d={...Object.fromEntries(Object.entries(r).map(([h,f])=>[h,(...m)=>{const v=this.buildProps(c,t),g=f(...m)(v);return a.push(g),d}])),run:u};return d}createCan(e){const{rawCommands:t,state:r}=this,o=!1,i=e||r.tr,s=this.buildProps(i,o);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...u)=>c(...u)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,o)}}buildProps(e,t=!0){const{rawCommands:r,editor:o,state:i}=this,{view:s}=o,a={tr:e,editor:o,view:s,state:hd({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(r).map(([l,c])=>[l,(...u)=>c(...u)(a)]))}};return a}}class gL{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const r=this.callbacks[e];return r&&r.forEach(o=>o.apply(this,t)),this}off(e,t){const r=this.callbacks[e];return r&&(t?this.callbacks[e]=r.filter(o=>o!==t):delete this.callbacks[e]),this}once(e,t){const r=(...o)=>{this.off(e,r),t.apply(this,o)};return this.on(e,r)}removeAllListeners(){this.callbacks={}}}function K(n,e,t){return n.config[e]===void 0&&n.parent?K(n.parent,e,t):typeof n.config[e]=="function"?n.config[e].bind({...t,parent:n.parent?K(n.parent,e,t):null}):n.config[e]}function pd(n){const e=n.filter(o=>o.type==="extension"),t=n.filter(o=>o.type==="node"),r=n.filter(o=>o.type==="mark");return{baseExtensions:e,nodeExtensions:t,markExtensions:r}}function lA(n){const e=[],{nodeExtensions:t,markExtensions:r}=pd(n),o=[...t,...r],i={default:null,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return n.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage,extensions:o},l=K(s,"addGlobalAttributes",a);if(!l)return;l().forEach(u=>{u.types.forEach(d=>{Object.entries(u.attributes).forEach(([h,f])=>{e.push({type:d,name:h,attribute:{...i,...f}})})})})}),o.forEach(s=>{const a={name:s.name,options:s.options,storage:s.storage},l=K(s,"addAttributes",a);if(!l)return;const c=l();Object.entries(c).forEach(([u,d])=>{const h={...i,...d};typeof(h==null?void 0:h.default)=="function"&&(h.default=h.default()),h!=null&&h.isRequired&&(h==null?void 0:h.default)===void 0&&delete h.default,e.push({type:s.name,name:u,attribute:h})})}),e}function dt(n,e){if(typeof n=="string"){if(!e.nodes[n])throw Error(`There is no node type named '${n}'. Maybe you forgot to add the extension?`);return e.nodes[n]}return n}function Bt(...n){return n.filter(e=>!!e).reduce((e,t)=>{const r={...e};return Object.entries(t).forEach(([o,i])=>{if(!r[o]){r[o]=i;return}if(o==="class"){const a=i?String(i).split(" "):[],l=r[o]?r[o].split(" "):[],c=a.filter(u=>!l.includes(u));r[o]=[...l,...c].join(" ")}else if(o==="style"){const a=i?i.split(";").map(u=>u.trim()).filter(Boolean):[],l=r[o]?r[o].split(";").map(u=>u.trim()).filter(Boolean):[],c=new Map;l.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),a.forEach(u=>{const[d,h]=u.split(":").map(f=>f.trim());c.set(d,h)}),r[o]=Array.from(c.entries()).map(([u,d])=>`${u}: ${d}`).join("; ")}else r[o]=i}),r},{})}function lp(n,e){return e.filter(t=>t.type===n.type.name).filter(t=>t.attribute.rendered).map(t=>t.attribute.renderHTML?t.attribute.renderHTML(n.attrs)||{}:{[t.name]:n.attrs[t.name]}).reduce((t,r)=>Bt(t,r),{})}function cA(n){return typeof n=="function"}function ne(n,e=void 0,...t){return cA(n)?e?n.bind(e)(...t):n(...t):n}function yL(n={}){return Object.keys(n).length===0&&n.constructor===Object}function vL(n){return typeof n!="string"?n:n.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(n):n==="true"?!0:n==="false"?!1:n}function DC(n,e){return"style"in n?n:{...n,getAttrs:t=>{const r=n.getAttrs?n.getAttrs(t):n.attrs;if(r===!1)return!1;const o=e.reduce((i,s)=>{const a=s.attribute.parseHTML?s.attribute.parseHTML(t):vL(t.getAttribute(s.name));return a==null?i:{...i,[s.name]:a}},{});return{...r,...o}}}}function LC(n){return Object.fromEntries(Object.entries(n).filter(([e,t])=>e==="attrs"&&yL(t)?!1:t!=null))}function CL(n,e){var t;const r=lA(n),{nodeExtensions:o,markExtensions:i}=pd(n),s=(t=o.find(c=>K(c,"topNode")))===null||t===void 0?void 0:t.name,a=Object.fromEntries(o.map(c=>{const u=r.filter(g=>g.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=n.reduce((g,y)=>{const C=K(y,"extendNodeSchema",d);return{...g,...C?C(c):{}}},{}),f=LC({...h,content:ne(K(c,"content",d)),marks:ne(K(c,"marks",d)),group:ne(K(c,"group",d)),inline:ne(K(c,"inline",d)),atom:ne(K(c,"atom",d)),selectable:ne(K(c,"selectable",d)),draggable:ne(K(c,"draggable",d)),code:ne(K(c,"code",d)),whitespace:ne(K(c,"whitespace",d)),linebreakReplacement:ne(K(c,"linebreakReplacement",d)),defining:ne(K(c,"defining",d)),isolating:ne(K(c,"isolating",d)),attrs:Object.fromEntries(u.map(g=>{var y;return[g.name,{default:(y=g==null?void 0:g.attribute)===null||y===void 0?void 0:y.default}]}))}),p=ne(K(c,"parseHTML",d));p&&(f.parseDOM=p.map(g=>DC(g,u)));const m=K(c,"renderHTML",d);m&&(f.toDOM=g=>m({node:g,HTMLAttributes:lp(g,u)}));const v=K(c,"renderText",d);return v&&(f.toText=v),[c.name,f]})),l=Object.fromEntries(i.map(c=>{const u=r.filter(v=>v.type===c.name),d={name:c.name,options:c.options,storage:c.storage,editor:e},h=n.reduce((v,g)=>{const y=K(g,"extendMarkSchema",d);return{...v,...y?y(c):{}}},{}),f=LC({...h,inclusive:ne(K(c,"inclusive",d)),excludes:ne(K(c,"excludes",d)),group:ne(K(c,"group",d)),spanning:ne(K(c,"spanning",d)),code:ne(K(c,"code",d)),attrs:Object.fromEntries(u.map(v=>{var g;return[v.name,{default:(g=v==null?void 0:v.attribute)===null||g===void 0?void 0:g.default}]}))}),p=ne(K(c,"parseHTML",d));p&&(f.parseDOM=p.map(v=>DC(v,u)));const m=K(c,"renderHTML",d);return m&&(f.toDOM=v=>m({mark:v,HTMLAttributes:lp(v,u)})),[c.name,f]}));return new Jk({topNode:s,nodes:a,marks:l})}function Sh(n,e){return e.nodes[n]||e.marks[n]||null}function UC(n,e){return Array.isArray(e)?e.some(t=>(typeof t=="string"?t:t.name)===n.name):e}function Tg(n,e){const t=Si.fromSchema(e).serializeFragment(n),o=document.implementation.createHTMLDocument().createElement("div");return o.appendChild(t),o.innerHTML}const SL=(n,e=500)=>{let t="";const r=n.parentOffset;return n.parent.nodesBetween(Math.max(0,r-e),r,(o,i,s,a)=>{var l,c;const u=((c=(l=o.type.spec).toText)===null||c===void 0?void 0:c.call(l,{node:o,pos:i,parent:s,index:a}))||o.textContent||"%leaf%";t+=o.isAtom&&!o.isText?u:u.slice(0,Math.max(0,r-i))}),t};function Eg(n){return Object.prototype.toString.call(n)==="[object RegExp]"}class md{constructor(e){this.find=e.find,this.handler=e.handler}}const wL=(n,e)=>{if(Eg(e))return e.exec(n);const t=e(n);if(!t)return null;const r=[t.text];return r.index=t.index,r.input=n,r.data=t.data,t.replaceWith&&(t.text.includes(t.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(t.replaceWith)),r};function Yl(n){var e;const{editor:t,from:r,to:o,text:i,rules:s,plugin:a}=n,{view:l}=t;if(l.composing)return!1;const c=l.state.doc.resolve(r);if(c.parent.type.spec.code||!((e=c.nodeBefore||c.nodeAfter)===null||e===void 0)&&e.marks.find(h=>h.type.spec.code))return!1;let u=!1;const d=SL(c)+i;return s.forEach(h=>{if(u)return;const f=wL(d,h.find);if(!f)return;const p=l.state.tr,m=hd({state:l.state,transaction:p}),v={from:r-(f[0].length-i.length),to:o},{commands:g,chain:y,can:C}=new fd({editor:t,state:m});h.handler({state:m,range:v,match:f,commands:g,chain:y,can:C})===null||!p.steps.length||(p.setMeta(a,{transform:p,from:r,to:o,text:i}),l.dispatch(p),u=!0)}),u}function TL(n){const{editor:e,rules:t}=n,r=new $t({state:{init(){return null},apply(o,i,s){const a=o.getMeta(r);if(a)return a;const l=o.getMeta("applyInputRules");return!!l&&setTimeout(()=>{let{text:u}=l;typeof u=="string"?u=u:u=Tg(N.from(u),s.schema);const{from:d}=l,h=d+u.length;Yl({editor:e,from:d,to:h,text:u,rules:t,plugin:r})}),o.selectionSet||o.docChanged?null:i}},props:{handleTextInput(o,i,s,a){return Yl({editor:e,from:i,to:s,text:a,rules:t,plugin:r})},handleDOMEvents:{compositionend:o=>(setTimeout(()=>{const{$cursor:i}=o.state.selection;i&&Yl({editor:e,from:i.pos,to:i.pos,text:"",rules:t,plugin:r})}),!1)},handleKeyDown(o,i){if(i.key!=="Enter")return!1;const{$cursor:s}=o.state.selection;return s?Yl({editor:e,from:s.pos,to:s.pos,text:`
`,rules:t,plugin:r}):!1}},isInputRules:!0});return r}function EL(n){return Object.prototype.toString.call(n).slice(8,-1)}function Jl(n){return EL(n)!=="Object"?!1:n.constructor===Object&&Object.getPrototypeOf(n)===Object.prototype}function gd(n,e){const t={...n};return Jl(n)&&Jl(e)&&Object.keys(e).forEach(r=>{Jl(e[r])&&Jl(n[r])?t[r]=gd(n[r],e[r]):t[r]=e[r]}),t}class No{constructor(e={}){this.type="mark",this.name="mark",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ne(K(this,"addOptions",{name:this.name}))),this.storage=ne(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new No(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>gd(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new No(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ne(K(t,"addOptions",{name:t.name})),t.storage=ne(K(t,"addStorage",{name:t.name,options:t.options})),t}static handleExit({editor:e,mark:t}){const{tr:r}=e.state,o=e.state.selection.$from;if(o.pos===o.end()){const s=o.marks();if(!!!s.find(c=>(c==null?void 0:c.type.name)===t.name))return!1;const l=s.find(c=>(c==null?void 0:c.type.name)===t.name);return l&&r.removeStoredMark(l),r.insertText(" ",o.pos),e.view.dispatch(r),!0}return!1}}function kL(n){return typeof n=="number"}class IL{constructor(e){this.find=e.find,this.handler=e.handler}}const AL=(n,e,t)=>{if(Eg(e))return[...n.matchAll(e)];const r=e(n,t);return r?r.map(o=>{const i=[o.text];return i.index=o.index,i.input=n,i.data=o.data,o.replaceWith&&(o.text.includes(o.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),i.push(o.replaceWith)),i}):[]};function bL(n){const{editor:e,state:t,from:r,to:o,rule:i,pasteEvent:s,dropEvent:a}=n,{commands:l,chain:c,can:u}=new fd({editor:e,state:t}),d=[];return t.doc.nodesBetween(r,o,(f,p)=>{if(!f.isTextblock||f.type.spec.code)return;const m=Math.max(r,p),v=Math.min(o,p+f.content.size),g=f.textBetween(m-p,v-p,void 0,"");AL(g,i.find,s).forEach(C=>{if(C.index===void 0)return;const w=m+C.index+1,I=w+C[0].length,A={from:t.tr.mapping.map(w),to:t.tr.mapping.map(I)},R=i.handler({state:t,range:A,match:C,commands:l,chain:c,can:u,pasteEvent:s,dropEvent:a});d.push(R)})}),d.every(f=>f!==null)}let Xl=null;const RL=n=>{var e;const t=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(e=t.clipboardData)===null||e===void 0||e.setData("text/html",n),t};function NL(n){const{editor:e,rules:t}=n;let r=null,o=!1,i=!1,s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,a;try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}const l=({state:u,from:d,to:h,rule:f,pasteEvt:p})=>{const m=u.tr,v=hd({state:u,transaction:m});if(!(!bL({editor:e,state:v,from:Math.max(d-1,0),to:h.b-1,rule:f,pasteEvent:p,dropEvent:a})||!m.steps.length)){try{a=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{a=null}return s=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,m}};return t.map(u=>new $t({view(d){const h=p=>{var m;r=!((m=d.dom.parentElement)===null||m===void 0)&&m.contains(p.target)?d.dom.parentElement:null,r&&(Xl=e)},f=()=>{Xl&&(Xl=null)};return window.addEventListener("dragstart",h),window.addEventListener("dragend",f),{destroy(){window.removeEventListener("dragstart",h),window.removeEventListener("dragend",f)}}},props:{handleDOMEvents:{drop:(d,h)=>{if(i=r===d.dom.parentElement,a=h,!i){const f=Xl;f&&setTimeout(()=>{const p=f.state.selection;p&&f.commands.deleteRange({from:p.from,to:p.to})},10)}return!1},paste:(d,h)=>{var f;const p=(f=h.clipboardData)===null||f===void 0?void 0:f.getData("text/html");return s=h,o=!!(p!=null&&p.includes("data-pm-slice")),!1}}},appendTransaction:(d,h,f)=>{const p=d[0],m=p.getMeta("uiEvent")==="paste"&&!o,v=p.getMeta("uiEvent")==="drop"&&!i,g=p.getMeta("applyPasteRules"),y=!!g;if(!m&&!v&&!y)return;if(y){let{text:I}=g;typeof I=="string"?I=I:I=Tg(N.from(I),f.schema);const{from:A}=g,R=A+I.length,E=RL(I);return l({rule:u,state:f,from:A,to:{b:R},pasteEvt:E})}const C=h.doc.content.findDiffStart(f.doc.content),w=h.doc.content.findDiffEnd(f.doc.content);if(!(!kL(C)||!w||C===w.b))return l({rule:u,state:f,from:C,to:w,pasteEvt:s})}}))}function xL(n){const e=n.filter((t,r)=>n.indexOf(t)!==r);return Array.from(new Set(e))}class Gi{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=Gi.resolve(e),this.schema=CL(this.extensions,t),this.setupExtensions()}static resolve(e){const t=Gi.sort(Gi.flatten(e)),r=xL(t.map(o=>o.name));return r.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${r.map(o=>`'${o}'`).join(", ")}]. This can lead to issues.`),t}static flatten(e){return e.map(t=>{const r={name:t.name,options:t.options,storage:t.storage},o=K(t,"addExtensions",r);return o?[t,...this.flatten(o())]:t}).flat(10)}static sort(e){return e.sort((r,o)=>{const i=K(r,"priority")||100,s=K(o,"priority")||100;return i>s?-1:i<s?1:0})}get commands(){return this.extensions.reduce((e,t)=>{const r={name:t.name,options:t.options,storage:t.storage,editor:this.editor,type:Sh(t.name,this.schema)},o=K(t,"addCommands",r);return o?{...e,...o()}:e},{})}get plugins(){const{editor:e}=this,t=Gi.sort([...this.extensions].reverse()),r=[],o=[],i=t.map(s=>{const a={name:s.name,options:s.options,storage:s.storage,editor:e,type:Sh(s.name,this.schema)},l=[],c=K(s,"addKeyboardShortcuts",a);let u={};if(s.type==="mark"&&K(s,"exitable",a)&&(u.ArrowRight=()=>No.handleExit({editor:e,mark:s})),c){const m=Object.fromEntries(Object.entries(c()).map(([v,g])=>[v,()=>g({editor:e})]));u={...u,...m}}const d=QD(u);l.push(d);const h=K(s,"addInputRules",a);UC(s,e.options.enableInputRules)&&h&&r.push(...h());const f=K(s,"addPasteRules",a);UC(s,e.options.enablePasteRules)&&f&&o.push(...f());const p=K(s,"addProseMirrorPlugins",a);if(p){const m=p();l.push(...m)}return l}).flat();return[TL({editor:e,rules:r}),...NL({editor:e,rules:o}),...i]}get attributes(){return lA(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=pd(this.extensions);return Object.fromEntries(t.filter(r=>!!K(r,"addNodeView")).map(r=>{const o=this.attributes.filter(l=>l.type===r.name),i={name:r.name,options:r.options,storage:r.storage,editor:e,type:dt(r.name,this.schema)},s=K(r,"addNodeView",i);if(!s)return[];const a=(l,c,u,d,h)=>{const f=lp(l,o);return s()({node:l,view:c,getPos:u,decorations:d,innerDecorations:h,editor:e,extension:r,HTMLAttributes:f})};return[r.name,a]}))}setupExtensions(){this.extensions.forEach(e=>{var t;this.editor.extensionStorage[e.name]=e.storage;const r={name:e.name,options:e.options,storage:e.storage,editor:this.editor,type:Sh(e.name,this.schema)};e.type==="mark"&&(!((t=ne(K(e,"keepOnSplit",r)))!==null&&t!==void 0)||t)&&this.splittableMarks.push(e.name);const o=K(e,"onBeforeCreate",r),i=K(e,"onCreate",r),s=K(e,"onUpdate",r),a=K(e,"onSelectionUpdate",r),l=K(e,"onTransaction",r),c=K(e,"onFocus",r),u=K(e,"onBlur",r),d=K(e,"onDestroy",r);o&&this.editor.on("beforeCreate",o),i&&this.editor.on("create",i),s&&this.editor.on("update",s),a&&this.editor.on("selectionUpdate",a),l&&this.editor.on("transaction",l),c&&this.editor.on("focus",c),u&&this.editor.on("blur",u),d&&this.editor.on("destroy",d)})}}class Ot{constructor(e={}){this.type="extension",this.name="extension",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ne(K(this,"addOptions",{name:this.name}))),this.storage=ne(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Ot(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>gd(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Ot({...this.config,...e});return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ne(K(t,"addOptions",{name:t.name})),t.storage=ne(K(t,"addStorage",{name:t.name,options:t.options})),t}}function uA(n,e,t){const{from:r,to:o}=e,{blockSeparator:i=`

`,textSerializers:s={}}=t||{};let a="";return n.nodesBetween(r,o,(l,c,u,d)=>{var h;l.isBlock&&c>r&&(a+=i);const f=s==null?void 0:s[l.type.name];if(f)return u&&(a+=f({node:l,pos:c,parent:u,index:d,range:e})),!1;l.isText&&(a+=(h=l==null?void 0:l.text)===null||h===void 0?void 0:h.slice(Math.max(r,c)-c,o-c))}),a}function dA(n){return Object.fromEntries(Object.entries(n.nodes).filter(([,e])=>e.spec.toText).map(([e,t])=>[e,t.spec.toText]))}const OL=Ot.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new $t({key:new Yn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:n}=this,{state:e,schema:t}=n,{doc:r,selection:o}=e,{ranges:i}=o,s=Math.min(...i.map(u=>u.$from.pos)),a=Math.max(...i.map(u=>u.$to.pos)),l=dA(t);return uA(r,{from:s,to:a},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:l})}}})]}}),ML=()=>({editor:n,view:e})=>(requestAnimationFrame(()=>{var t;n.isDestroyed||(e.dom.blur(),(t=window==null?void 0:window.getSelection())===null||t===void 0||t.removeAllRanges())}),!0),_L=(n=!1)=>({commands:e})=>e.setContent("",n),PL=()=>({state:n,tr:e,dispatch:t})=>{const{selection:r}=e,{ranges:o}=r;return t&&o.forEach(({$from:i,$to:s})=>{n.doc.nodesBetween(i.pos,s.pos,(a,l)=>{if(a.type.isText)return;const{doc:c,mapping:u}=e,d=c.resolve(u.map(l)),h=c.resolve(u.map(l+a.nodeSize)),f=d.blockRange(h);if(!f)return;const p=_s(f);if(a.type.isTextblock){const{defaultType:m}=d.parent.contentMatchAt(d.index());e.setNodeMarkup(f.start,m)}(p||p===0)&&e.lift(f,p)})}),!0},DL=n=>e=>n(e),LL=()=>({state:n,dispatch:e})=>oA(n,e),UL=(n,e)=>({editor:t,tr:r})=>{const{state:o}=t,i=o.doc.slice(n.from,n.to);r.deleteRange(n.from,n.to);const s=r.mapping.map(e);return r.insert(s,i.content),r.setSelection(new J(r.doc.resolve(s-1))),!0},FL=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,r=t.$anchor.node();if(r.content.size>0)return!1;const o=n.selection.$anchor;for(let i=o.depth;i>0;i-=1)if(o.node(i).type===r.type){if(e){const a=o.before(i),l=o.after(i);n.delete(a,l).scrollIntoView()}return!0}return!1},HL=n=>({tr:e,state:t,dispatch:r})=>{const o=dt(n,t.schema),i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===o){if(r){const l=i.before(s),c=i.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},BL=n=>({tr:e,dispatch:t})=>{const{from:r,to:o}=n;return t&&e.delete(r,o),!0},zL=()=>({state:n,dispatch:e})=>yg(n,e),KL=()=>({commands:n})=>n.keyboardShortcut("Enter"),jL=()=>({state:n,dispatch:e})=>tL(n,e);function wu(n,e,t={strict:!0}){const r=Object.keys(e);return r.length?r.every(o=>t.strict?e[o]===n[o]:Eg(e[o])?e[o].test(n[o]):e[o]===n[o]):!0}function hA(n,e,t={}){return n.find(r=>r.type===e&&wu(Object.fromEntries(Object.keys(t).map(o=>[o,r.attrs[o]])),t))}function FC(n,e,t={}){return!!hA(n,e,t)}function kg(n,e,t){var r;if(!n||!e)return;let o=n.parent.childAfter(n.parentOffset);if((!o.node||!o.node.marks.some(u=>u.type===e))&&(o=n.parent.childBefore(n.parentOffset)),!o.node||!o.node.marks.some(u=>u.type===e)||(t=t||((r=o.node.marks[0])===null||r===void 0?void 0:r.attrs),!hA([...o.node.marks],e,t)))return;let s=o.index,a=n.start()+o.offset,l=s+1,c=a+o.node.nodeSize;for(;s>0&&FC([...n.parent.child(s-1).marks],e,t);)s-=1,a-=n.parent.child(s).nodeSize;for(;l<n.parent.childCount&&FC([...n.parent.child(l).marks],e,t);)c+=n.parent.child(l).nodeSize,l+=1;return{from:a,to:c}}function Do(n,e){if(typeof n=="string"){if(!e.marks[n])throw Error(`There is no mark type named '${n}'. Maybe you forgot to add the extension?`);return e.marks[n]}return n}const $L=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const i=Do(n,r.schema),{doc:s,selection:a}=t,{$from:l,from:c,to:u}=a;if(o){const d=kg(l,i,e);if(d&&d.from<=c&&d.to>=u){const h=J.create(s,d.from,d.to);t.setSelection(h)}}return!0},VL=n=>e=>{const t=typeof n=="function"?n(e):n;for(let r=0;r<t.length;r+=1)if(t[r](e))return!0;return!1};function fA(n){return n instanceof J}function qo(n=0,e=0,t=0){return Math.min(Math.max(n,e),t)}function pA(n,e=null){if(!e)return null;const t=Z.atStart(n),r=Z.atEnd(n);if(e==="start"||e===!0)return t;if(e==="end")return r;const o=t.from,i=r.to;return e==="all"?J.create(n,qo(0,o,i),qo(n.content.size,o,i)):J.create(n,qo(e,o,i),qo(e,o,i))}function WL(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function Ig(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}const qL=(n=null,e={})=>({editor:t,view:r,tr:o,dispatch:i})=>{e={scrollIntoView:!0,...e};const s=()=>{(Ig()||WL())&&r.dom.focus(),requestAnimationFrame(()=>{t.isDestroyed||(r.focus(),e!=null&&e.scrollIntoView&&t.commands.scrollIntoView())})};if(r.hasFocus()&&n===null||n===!1)return!0;if(i&&n===null&&!fA(t.state.selection))return s(),!0;const a=pA(o.doc,n)||t.state.selection,l=t.state.selection.eq(a);return i&&(l||o.setSelection(a),l&&o.storedMarks&&o.setStoredMarks(o.storedMarks),s()),!0},GL=(n,e)=>t=>n.every((r,o)=>e(r,{...t,index:o})),QL=(n,e)=>({tr:t,commands:r})=>r.insertContentAt({from:t.selection.from,to:t.selection.to},n,e),mA=n=>{const e=n.childNodes;for(let t=e.length-1;t>=0;t-=1){const r=e[t];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?n.removeChild(r):r.nodeType===1&&mA(r)}return n};function Zl(n){const e=`<body>${n}</body>`,t=new window.DOMParser().parseFromString(e,"text/html").body;return mA(t)}function Za(n,e,t){if(n instanceof wo||n instanceof N)return n;t={slice:!0,parseOptions:{},...t};const r=typeof n=="object"&&n!==null,o=typeof n=="string";if(r)try{if(Array.isArray(n)&&n.length>0)return N.fromArray(n.map(a=>e.nodeFromJSON(a)));const s=e.nodeFromJSON(n);return t.errorOnInvalidContent&&s.check(),s}catch(i){if(t.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:i});return console.warn("[tiptap warn]: Invalid content.","Passed value:",n,"Error:",i),Za("",e,t)}if(o){if(t.errorOnInvalidContent){let s=!1,a="";const l=new Jk({topNode:e.spec.topNode,marks:e.spec.marks,nodes:e.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:c=>(s=!0,a=typeof c=="string"?c:c.outerHTML,null)}]}})});if(t.slice?Sa.fromSchema(l).parseSlice(Zl(n),t.parseOptions):Sa.fromSchema(l).parse(Zl(n),t.parseOptions),t.errorOnInvalidContent&&s)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${a}`)})}const i=Sa.fromSchema(e);return t.slice?i.parseSlice(Zl(n),t.parseOptions).content:i.parse(Zl(n),t.parseOptions)}return Za("",e,t)}function YL(n,e,t){const r=n.steps.length-1;if(r<e)return;const o=n.steps[r];if(!(o instanceof at||o instanceof ct))return;const i=n.mapping.maps[r];let s=0;i.forEach((a,l,c,u)=>{s===0&&(s=u)}),n.setSelection(Z.near(n.doc.resolve(s),t))}const JL=n=>!("type"in n),XL=(n,e,t)=>({tr:r,dispatch:o,editor:i})=>{var s;if(o){t={parseOptions:i.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...t};let a;const l=v=>{i.emit("contentError",{editor:i,error:v,disableCollaboration:()=>{i.storage.collaboration&&(i.storage.collaboration.isDisabled=!0)}})},c={preserveWhitespace:"full",...t.parseOptions};if(!t.errorOnInvalidContent&&!i.options.enableContentCheck&&i.options.emitContentError)try{Za(e,i.schema,{parseOptions:c,errorOnInvalidContent:!0})}catch(v){l(v)}try{a=Za(e,i.schema,{parseOptions:c,errorOnInvalidContent:(s=t.errorOnInvalidContent)!==null&&s!==void 0?s:i.options.enableContentCheck})}catch(v){return l(v),!1}let{from:u,to:d}=typeof n=="number"?{from:n,to:n}:{from:n.from,to:n.to},h=!0,f=!0;if((JL(a)?a:[a]).forEach(v=>{v.check(),h=h?v.isText&&v.marks.length===0:!1,f=f?v.isBlock:!1}),u===d&&f){const{parent:v}=r.doc.resolve(u);v.isTextblock&&!v.type.spec.code&&!v.childCount&&(u-=1,d+=1)}let m;if(h){if(Array.isArray(e))m=e.map(v=>v.text||"").join("");else if(e instanceof N){let v="";e.forEach(g=>{g.text&&(v+=g.text)}),m=v}else typeof e=="object"&&e&&e.text?m=e.text:m=e;r.insertText(m,u,d)}else m=a,r.replaceWith(u,d,m);t.updateSelection&&YL(r,r.steps.length-1,-1),t.applyInputRules&&r.setMeta("applyInputRules",{from:u,text:m}),t.applyPasteRules&&r.setMeta("applyPasteRules",{from:u,text:m})}return!0},ZL=()=>({state:n,dispatch:e})=>XD(n,e),eU=()=>({state:n,dispatch:e})=>ZD(n,e),tU=()=>({state:n,dispatch:e})=>JI(n,e),nU=()=>({state:n,dispatch:e})=>tA(n,e),rU=()=>({state:n,dispatch:e,tr:t})=>{try{const r=sd(n.doc,n.selection.$from.pos,-1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},oU=()=>({state:n,dispatch:e,tr:t})=>{try{const r=sd(n.doc,n.selection.$from.pos,1);return r==null?!1:(t.join(r,2),e&&e(t),!0)}catch{return!1}},iU=()=>({state:n,dispatch:e})=>YD(n,e),sU=()=>({state:n,dispatch:e})=>JD(n,e);function gA(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function aU(n){const e=n.split(/-(?!$)/);let t=e[e.length-1];t==="Space"&&(t=" ");let r,o,i,s;for(let a=0;a<e.length-1;a+=1){const l=e[a];if(/^(cmd|meta|m)$/i.test(l))s=!0;else if(/^a(lt)?$/i.test(l))r=!0;else if(/^(c|ctrl|control)$/i.test(l))o=!0;else if(/^s(hift)?$/i.test(l))i=!0;else if(/^mod$/i.test(l))Ig()||gA()?s=!0:o=!0;else throw new Error(`Unrecognized modifier name: ${l}`)}return r&&(t=`Alt-${t}`),o&&(t=`Ctrl-${t}`),s&&(t=`Meta-${t}`),i&&(t=`Shift-${t}`),t}const lU=n=>({editor:e,view:t,tr:r,dispatch:o})=>{const i=aU(n).split(/-(?!$)/),s=i.find(c=>!["Alt","Ctrl","Meta","Shift"].includes(c)),a=new KeyboardEvent("keydown",{key:s==="Space"?" ":s,altKey:i.includes("Alt"),ctrlKey:i.includes("Ctrl"),metaKey:i.includes("Meta"),shiftKey:i.includes("Shift"),bubbles:!0,cancelable:!0}),l=e.captureTransaction(()=>{t.someProp("handleKeyDown",c=>c(t,a))});return l==null||l.steps.forEach(c=>{const u=c.map(r.mapping);u&&o&&r.maybeStep(u)}),!0};function el(n,e,t={}){const{from:r,to:o,empty:i}=n.selection,s=e?dt(e,n.schema):null,a=[];n.doc.nodesBetween(r,o,(d,h)=>{if(d.isText)return;const f=Math.max(r,h),p=Math.min(o,h+d.nodeSize);a.push({node:d,from:f,to:p})});const l=o-r,c=a.filter(d=>s?s.name===d.node.type.name:!0).filter(d=>wu(d.node.attrs,t,{strict:!1}));return i?!!c.length:c.reduce((d,h)=>d+h.to-h.from,0)>=l}const cU=(n,e={})=>({state:t,dispatch:r})=>{const o=dt(n,t.schema);return el(t,o,e)?eL(t,r):!1},uU=()=>({state:n,dispatch:e})=>iA(n,e),dU=n=>({state:e,dispatch:t})=>{const r=dt(n,e.schema);return hL(r)(e,t)},hU=()=>({state:n,dispatch:e})=>rA(n,e);function yd(n,e){return e.nodes[n]?"node":e.marks[n]?"mark":null}function HC(n,e){const t=typeof e=="string"?[e]:e;return Object.keys(n).reduce((r,o)=>(t.includes(o)||(r[o]=n[o]),r),{})}const fU=(n,e)=>({tr:t,state:r,dispatch:o})=>{let i=null,s=null;const a=yd(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(i=dt(n,r.schema)),a==="mark"&&(s=Do(n,r.schema)),o&&t.selection.ranges.forEach(l=>{r.doc.nodesBetween(l.$from.pos,l.$to.pos,(c,u)=>{i&&i===c.type&&t.setNodeMarkup(u,void 0,HC(c.attrs,e)),s&&c.marks.length&&c.marks.forEach(d=>{s===d.type&&t.addMark(u,u+c.nodeSize,s.create(HC(d.attrs,e)))})})}),!0):!1},pU=()=>({tr:n,dispatch:e})=>(e&&n.scrollIntoView(),!0),mU=()=>({tr:n,dispatch:e})=>{if(e){const t=new yn(n.doc);n.setSelection(t)}return!0},gU=()=>({state:n,dispatch:e})=>ZI(n,e),yU=()=>({state:n,dispatch:e})=>nA(n,e),vU=()=>({state:n,dispatch:e})=>oL(n,e),CU=()=>({state:n,dispatch:e})=>aL(n,e),SU=()=>({state:n,dispatch:e})=>sL(n,e);function cp(n,e,t={},r={}){return Za(n,e,{slice:!1,parseOptions:t,errorOnInvalidContent:r.errorOnInvalidContent})}const wU=(n,e=!1,t={},r={})=>({editor:o,tr:i,dispatch:s,commands:a})=>{var l,c;const{doc:u}=i;if(t.preserveWhitespace!=="full"){const d=cp(n,o.schema,t,{errorOnInvalidContent:(l=r.errorOnInvalidContent)!==null&&l!==void 0?l:o.options.enableContentCheck});return s&&i.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!e),!0}return s&&i.setMeta("preventUpdate",!e),a.insertContentAt({from:0,to:u.content.size},n,{parseOptions:t,errorOnInvalidContent:(c=r.errorOnInvalidContent)!==null&&c!==void 0?c:o.options.enableContentCheck})};function yA(n,e){const t=Do(e,n.schema),{from:r,to:o,empty:i}=n.selection,s=[];i?(n.storedMarks&&s.push(...n.storedMarks),s.push(...n.selection.$head.marks())):n.doc.nodesBetween(r,o,l=>{s.push(...l.marks)});const a=s.find(l=>l.type.name===t.name);return a?{...a.attrs}:{}}function TU(n){for(let e=0;e<n.edgeCount;e+=1){const{type:t}=n.edge(e);if(t.isTextblock&&!t.hasRequiredAttrs())return t}return null}function EU(n,e){for(let t=n.depth;t>0;t-=1){const r=n.node(t);if(e(r))return{pos:t>0?n.before(t):0,start:n.start(t),depth:t,node:r}}}function Ag(n){return e=>EU(e.$from,n)}function kU(n,e){const t={from:0,to:n.content.size};return uA(n,t,e)}function IU(n,e){const t=dt(e,n.schema),{from:r,to:o}=n.selection,i=[];n.doc.nodesBetween(r,o,a=>{i.push(a)});const s=i.reverse().find(a=>a.type.name===t.name);return s?{...s.attrs}:{}}function AU(n,e){const t=yd(typeof e=="string"?e:e.name,n.schema);return t==="node"?IU(n,e):t==="mark"?yA(n,e):{}}function vA(n,e,t){const r=[];return n===e?t.resolve(n).marks().forEach(o=>{const i=t.resolve(n),s=kg(i,o.type);s&&r.push({mark:o,...s})}):t.nodesBetween(n,e,(o,i)=>{!o||(o==null?void 0:o.nodeSize)===void 0||r.push(...o.marks.map(s=>({from:i,to:i+o.nodeSize,mark:s})))}),r}function yc(n,e,t){return Object.fromEntries(Object.entries(t).filter(([r])=>{const o=n.find(i=>i.type===e&&i.name===r);return o?o.attribute.keepOnSplit:!1}))}function up(n,e,t={}){const{empty:r,ranges:o}=n.selection,i=e?Do(e,n.schema):null;if(r)return!!(n.storedMarks||n.selection.$from.marks()).filter(d=>i?i.name===d.type.name:!0).find(d=>wu(d.attrs,t,{strict:!1}));let s=0;const a=[];if(o.forEach(({$from:d,$to:h})=>{const f=d.pos,p=h.pos;n.doc.nodesBetween(f,p,(m,v)=>{if(!m.isText&&!m.marks.length)return;const g=Math.max(f,v),y=Math.min(p,v+m.nodeSize),C=y-g;s+=C,a.push(...m.marks.map(w=>({mark:w,from:g,to:y})))})}),s===0)return!1;const l=a.filter(d=>i?i.name===d.mark.type.name:!0).filter(d=>wu(d.mark.attrs,t,{strict:!1})).reduce((d,h)=>d+h.to-h.from,0),c=a.filter(d=>i?d.mark.type!==i&&d.mark.type.excludes(i):!0).reduce((d,h)=>d+h.to-h.from,0);return(l>0?l+c:l)>=s}function bU(n,e,t={}){if(!e)return el(n,null,t)||up(n,null,t);const r=yd(e,n.schema);return r==="node"?el(n,e,t):r==="mark"?up(n,e,t):!1}function BC(n,e){const{nodeExtensions:t}=pd(e),r=t.find(s=>s.name===n);if(!r)return!1;const o={name:r.name,options:r.options,storage:r.storage},i=ne(K(r,"group",o));return typeof i!="string"?!1:i.split(" ").includes("list")}function vd(n,{checkChildren:e=!0,ignoreWhitespace:t=!1}={}){var r;if(t){if(n.type.name==="hardBreak")return!0;if(n.isText)return/^\s*$/m.test((r=n.text)!==null&&r!==void 0?r:"")}if(n.isText)return!n.text;if(n.isAtom||n.isLeaf)return!1;if(n.content.childCount===0)return!0;if(e){let o=!0;return n.content.forEach(i=>{o!==!1&&(vd(i,{ignoreWhitespace:t,checkChildren:e})||(o=!1))}),o}return!1}function RU(n){return n instanceof q}function NU(n,e,t){var r;const{selection:o}=e;let i=null;if(fA(o)&&(i=o.$cursor),i){const a=(r=n.storedMarks)!==null&&r!==void 0?r:i.marks();return!!t.isInSet(a)||!a.some(l=>l.type.excludes(t))}const{ranges:s}=o;return s.some(({$from:a,$to:l})=>{let c=a.depth===0?n.doc.inlineContent&&n.doc.type.allowsMarkType(t):!1;return n.doc.nodesBetween(a.pos,l.pos,(u,d,h)=>{if(c)return!1;if(u.isInline){const f=!h||h.type.allowsMarkType(t),p=!!t.isInSet(u.marks)||!u.marks.some(m=>m.type.excludes(t));c=f&&p}return!c}),c})}const xU=(n,e={})=>({tr:t,state:r,dispatch:o})=>{const{selection:i}=t,{empty:s,ranges:a}=i,l=Do(n,r.schema);if(o)if(s){const c=yA(r,l);t.addStoredMark(l.create({...c,...e}))}else a.forEach(c=>{const u=c.$from.pos,d=c.$to.pos;r.doc.nodesBetween(u,d,(h,f)=>{const p=Math.max(f,u),m=Math.min(f+h.nodeSize,d);h.marks.find(g=>g.type===l)?h.marks.forEach(g=>{l===g.type&&t.addMark(p,m,l.create({...g.attrs,...e}))}):t.addMark(p,m,l.create(e))})});return NU(r,t,l)},OU=(n,e)=>({tr:t})=>(t.setMeta(n,e),!0),MU=(n,e={})=>({state:t,dispatch:r,chain:o})=>{const i=dt(n,t.schema);let s;return t.selection.$anchor.sameParent(t.selection.$head)&&(s=t.selection.$anchor.parent.attrs),i.isTextblock?o().command(({commands:a})=>PC(i,{...s,...e})(t)?!0:a.clearNodes()).command(({state:a})=>PC(i,{...s,...e})(a,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},_U=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,o=qo(n,0,r.content.size),i=q.create(r,o);e.setSelection(i)}return!0},PU=n=>({tr:e,dispatch:t})=>{if(t){const{doc:r}=e,{from:o,to:i}=typeof n=="number"?{from:n,to:n}:n,s=J.atStart(r).from,a=J.atEnd(r).to,l=qo(o,s,a),c=qo(i,s,a),u=J.create(r,l,c);e.setSelection(u)}return!0},DU=n=>({state:e,dispatch:t})=>{const r=dt(n,e.schema);return mL(r)(e,t)};function zC(n,e){const t=n.storedMarks||n.selection.$to.parentOffset&&n.selection.$from.marks();if(t){const r=t.filter(o=>e==null?void 0:e.includes(o.type.name));n.tr.ensureMarks(r)}}const LU=({keepMarks:n=!0}={})=>({tr:e,state:t,dispatch:r,editor:o})=>{const{selection:i,doc:s}=e,{$from:a,$to:l}=i,c=o.extensionManager.attributes,u=yc(c,a.node().type.name,a.node().attrs);if(i instanceof q&&i.node.isBlock)return!a.parentOffset||!Nr(s,a.pos)?!1:(r&&(n&&zC(t,o.extensionManager.splittableMarks),e.split(a.pos).scrollIntoView()),!0);if(!a.parent.isBlock)return!1;const d=l.parentOffset===l.parent.content.size,h=a.depth===0?void 0:TU(a.node(-1).contentMatchAt(a.indexAfter(-1)));let f=d&&h?[{type:h,attrs:u}]:void 0,p=Nr(e.doc,e.mapping.map(a.pos),1,f);if(!f&&!p&&Nr(e.doc,e.mapping.map(a.pos),1,h?[{type:h}]:void 0)&&(p=!0,f=h?[{type:h,attrs:u}]:void 0),r){if(p&&(i instanceof J&&e.deleteSelection(),e.split(e.mapping.map(a.pos),1,f),h&&!d&&!a.parentOffset&&a.parent.type!==h)){const m=e.mapping.map(a.before()),v=e.doc.resolve(m);a.node(-1).canReplaceWith(v.index(),v.index()+1,h)&&e.setNodeMarkup(e.mapping.map(a.before()),h)}n&&zC(t,o.extensionManager.splittableMarks),e.scrollIntoView()}return p},UU=(n,e={})=>({tr:t,state:r,dispatch:o,editor:i})=>{var s;const a=dt(n,r.schema),{$from:l,$to:c}=r.selection,u=r.selection.node;if(u&&u.isBlock||l.depth<2||!l.sameParent(c))return!1;const d=l.node(-1);if(d.type!==a)return!1;const h=i.extensionManager.attributes;if(l.parent.content.size===0&&l.node(-1).childCount===l.indexAfter(-1)){if(l.depth===2||l.node(-3).type!==a||l.index(-2)!==l.node(-2).childCount-1)return!1;if(o){let g=N.empty;const y=l.index(-1)?1:l.index(-2)?2:3;for(let E=l.depth-y;E>=l.depth-3;E-=1)g=N.from(l.node(E).copy(g));const C=l.indexAfter(-1)<l.node(-2).childCount?1:l.indexAfter(-2)<l.node(-3).childCount?2:3,w={...yc(h,l.node().type.name,l.node().attrs),...e},I=((s=a.contentMatch.defaultType)===null||s===void 0?void 0:s.createAndFill(w))||void 0;g=g.append(N.from(a.createAndFill(null,I)||void 0));const A=l.before(l.depth-(y-1));t.replace(A,l.after(-C),new L(g,4-y,0));let R=-1;t.doc.nodesBetween(A,t.doc.content.size,(E,_)=>{if(R>-1)return!1;E.isTextblock&&E.content.size===0&&(R=_+1)}),R>-1&&t.setSelection(J.near(t.doc.resolve(R))),t.scrollIntoView()}return!0}const f=c.pos===l.end()?d.contentMatchAt(0).defaultType:null,p={...yc(h,d.type.name,d.attrs),...e},m={...yc(h,l.node().type.name,l.node().attrs),...e};t.delete(l.pos,c.pos);const v=f?[{type:a,attrs:p},{type:f,attrs:m}]:[{type:a,attrs:p}];if(!Nr(t.doc,l.pos,2))return!1;if(o){const{selection:g,storedMarks:y}=r,{splittableMarks:C}=i.extensionManager,w=y||g.$to.parentOffset&&g.$from.marks();if(t.split(l.pos,2,v).scrollIntoView(),!w||!o)return!0;const I=w.filter(A=>C.includes(A.type.name));t.ensureMarks(I)}return!0},wh=(n,e)=>{const t=Ag(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(Math.max(0,t.pos-1)).before(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===(o==null?void 0:o.type)&&_o(n.doc,t.pos)&&n.join(t.pos),!0},Th=(n,e)=>{const t=Ag(s=>s.type===e)(n.selection);if(!t)return!0;const r=n.doc.resolve(t.start).after(t.depth);if(r===void 0)return!0;const o=n.doc.nodeAt(r);return t.node.type===(o==null?void 0:o.type)&&_o(n.doc,r)&&n.join(r),!0},FU=(n,e,t,r={})=>({editor:o,tr:i,state:s,dispatch:a,chain:l,commands:c,can:u})=>{const{extensions:d,splittableMarks:h}=o.extensionManager,f=dt(n,s.schema),p=dt(e,s.schema),{selection:m,storedMarks:v}=s,{$from:g,$to:y}=m,C=g.blockRange(y),w=v||m.$to.parentOffset&&m.$from.marks();if(!C)return!1;const I=Ag(A=>BC(A.type.name,d))(m);if(C.depth>=1&&I&&C.depth-I.depth<=1){if(I.node.type===f)return c.liftListItem(p);if(BC(I.node.type.name,d)&&f.validContent(I.node.content)&&a)return l().command(()=>(i.setNodeMarkup(I.pos,f),!0)).command(()=>wh(i,f)).command(()=>Th(i,f)).run()}return!t||!w||!a?l().command(()=>u().wrapInList(f,r)?!0:c.clearNodes()).wrapInList(f,r).command(()=>wh(i,f)).command(()=>Th(i,f)).run():l().command(()=>{const A=u().wrapInList(f,r),R=w.filter(E=>h.includes(E.type.name));return i.ensureMarks(R),A?!0:c.clearNodes()}).wrapInList(f,r).command(()=>wh(i,f)).command(()=>Th(i,f)).run()},HU=(n,e={},t={})=>({state:r,commands:o})=>{const{extendEmptyMarkRange:i=!1}=t,s=Do(n,r.schema);return up(r,s,e)?o.unsetMark(s,{extendEmptyMarkRange:i}):o.setMark(s,e)},BU=(n,e,t={})=>({state:r,commands:o})=>{const i=dt(n,r.schema),s=dt(e,r.schema),a=el(r,i,t);let l;return r.selection.$anchor.sameParent(r.selection.$head)&&(l=r.selection.$anchor.parent.attrs),a?o.setNode(s,l):o.setNode(i,{...l,...t})},zU=(n,e={})=>({state:t,commands:r})=>{const o=dt(n,t.schema);return el(t,o,e)?r.lift(o):r.wrapIn(o,e)},KU=()=>({state:n,dispatch:e})=>{const t=n.plugins;for(let r=0;r<t.length;r+=1){const o=t[r];let i;if(o.spec.isInputRules&&(i=o.getState(n))){if(e){const s=n.tr,a=i.transform;for(let l=a.steps.length-1;l>=0;l-=1)s.step(a.steps[l].invert(a.docs[l]));if(i.text){const l=s.doc.resolve(i.from).marks();s.replaceWith(i.from,i.to,n.schema.text(i.text,l))}else s.delete(i.from,i.to)}return!0}}return!1},jU=()=>({tr:n,dispatch:e})=>{const{selection:t}=n,{empty:r,ranges:o}=t;return r||e&&o.forEach(i=>{n.removeMark(i.$from.pos,i.$to.pos)}),!0},$U=(n,e={})=>({tr:t,state:r,dispatch:o})=>{var i;const{extendEmptyMarkRange:s=!1}=e,{selection:a}=t,l=Do(n,r.schema),{$from:c,empty:u,ranges:d}=a;if(!o)return!0;if(u&&s){let{from:h,to:f}=a;const p=(i=c.marks().find(v=>v.type===l))===null||i===void 0?void 0:i.attrs,m=kg(c,l,p);m&&(h=m.from,f=m.to),t.removeMark(h,f,l)}else d.forEach(h=>{t.removeMark(h.$from.pos,h.$to.pos,l)});return t.removeStoredMark(l),!0},VU=(n,e={})=>({tr:t,state:r,dispatch:o})=>{let i=null,s=null;const a=yd(typeof n=="string"?n:n.name,r.schema);return a?(a==="node"&&(i=dt(n,r.schema)),a==="mark"&&(s=Do(n,r.schema)),o&&t.selection.ranges.forEach(l=>{const c=l.$from.pos,u=l.$to.pos;let d,h,f,p;t.selection.empty?r.doc.nodesBetween(c,u,(m,v)=>{i&&i===m.type&&(f=Math.max(v,c),p=Math.min(v+m.nodeSize,u),d=v,h=m)}):r.doc.nodesBetween(c,u,(m,v)=>{v<c&&i&&i===m.type&&(f=Math.max(v,c),p=Math.min(v+m.nodeSize,u),d=v,h=m),v>=c&&v<=u&&(i&&i===m.type&&t.setNodeMarkup(v,void 0,{...m.attrs,...e}),s&&m.marks.length&&m.marks.forEach(g=>{if(s===g.type){const y=Math.max(v,c),C=Math.min(v+m.nodeSize,u);t.addMark(y,C,s.create({...g.attrs,...e}))}}))}),h&&(d!==void 0&&t.setNodeMarkup(d,void 0,{...h.attrs,...e}),s&&h.marks.length&&h.marks.forEach(m=>{s===m.type&&t.addMark(f,p,s.create({...m.attrs,...e}))}))}),!0):!1},WU=(n,e={})=>({state:t,dispatch:r})=>{const o=dt(n,t.schema);return lL(o,e)(t,r)},qU=(n,e={})=>({state:t,dispatch:r})=>{const o=dt(n,t.schema);return cL(o,e)(t,r)};var GU=Object.freeze({__proto__:null,blur:ML,clearContent:_L,clearNodes:PL,command:DL,createParagraphNear:LL,cut:UL,deleteCurrentNode:FL,deleteNode:HL,deleteRange:BL,deleteSelection:zL,enter:KL,exitCode:jL,extendMarkRange:$L,first:VL,focus:qL,forEach:GL,insertContent:QL,insertContentAt:XL,joinBackward:tU,joinDown:eU,joinForward:nU,joinItemBackward:rU,joinItemForward:oU,joinTextblockBackward:iU,joinTextblockForward:sU,joinUp:ZL,keyboardShortcut:lU,lift:cU,liftEmptyBlock:uU,liftListItem:dU,newlineInCode:hU,resetAttributes:fU,scrollIntoView:pU,selectAll:mU,selectNodeBackward:gU,selectNodeForward:yU,selectParentNode:vU,selectTextblockEnd:CU,selectTextblockStart:SU,setContent:wU,setMark:xU,setMeta:OU,setNode:MU,setNodeSelection:_U,setTextSelection:PU,sinkListItem:DU,splitBlock:LU,splitListItem:UU,toggleList:FU,toggleMark:HU,toggleNode:BU,toggleWrap:zU,undoInputRule:KU,unsetAllMarks:jU,unsetMark:$U,updateAttributes:VU,wrapIn:WU,wrapInList:qU});const QU=Ot.create({name:"commands",addCommands(){return{...GU}}}),YU=Ot.create({name:"drop",addProseMirrorPlugins(){return[new $t({key:new Yn("tiptapDrop"),props:{handleDrop:(n,e,t,r)=>{this.editor.emit("drop",{editor:this.editor,event:e,slice:t,moved:r})}}})]}}),JU=Ot.create({name:"editable",addProseMirrorPlugins(){return[new $t({key:new Yn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),XU=new Yn("focusEvents"),ZU=Ot.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:n}=this;return[new $t({key:XU,props:{handleDOMEvents:{focus:(e,t)=>{n.isFocused=!0;const r=n.state.tr.setMeta("focus",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1},blur:(e,t)=>{n.isFocused=!1;const r=n.state.tr.setMeta("blur",{event:t}).setMeta("addToHistory",!1);return e.dispatch(r),!1}}}})]}}),e2=Ot.create({name:"keymap",addKeyboardShortcuts(){const n=()=>this.editor.commands.first(({commands:s})=>[()=>s.undoInputRule(),()=>s.command(({tr:a})=>{const{selection:l,doc:c}=a,{empty:u,$anchor:d}=l,{pos:h,parent:f}=d,p=d.parent.isTextblock&&h>0?a.doc.resolve(h-1):d,m=p.parent.type.spec.isolating,v=d.pos-d.parentOffset,g=m&&p.parent.childCount===1?v===d.pos:Z.atStart(c).from===h;return!u||!f.type.isTextblock||f.textContent.length||!g||g&&d.parent.type.name==="paragraph"?!1:s.clearNodes()}),()=>s.deleteSelection(),()=>s.joinBackward(),()=>s.selectNodeBackward()]),e=()=>this.editor.commands.first(({commands:s})=>[()=>s.deleteSelection(),()=>s.deleteCurrentNode(),()=>s.joinForward(),()=>s.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:s})=>[()=>s.newlineInCode(),()=>s.createParagraphNear(),()=>s.liftEmptyBlock(),()=>s.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:n,"Mod-Backspace":n,"Shift-Backspace":n,Delete:e,"Mod-Delete":e,"Mod-a":()=>this.editor.commands.selectAll()},o={...r},i={...r,"Ctrl-h":n,"Alt-Backspace":n,"Ctrl-d":e,"Ctrl-Alt-Backspace":e,"Alt-Delete":e,"Alt-d":e,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return Ig()||gA()?i:o},addProseMirrorPlugins(){return[new $t({key:new Yn("clearDocument"),appendTransaction:(n,e,t)=>{if(n.some(m=>m.getMeta("composition")))return;const r=n.some(m=>m.docChanged)&&!e.doc.eq(t.doc),o=n.some(m=>m.getMeta("preventClearDocument"));if(!r||o)return;const{empty:i,from:s,to:a}=e.selection,l=Z.atStart(e.doc).from,c=Z.atEnd(e.doc).to;if(i||!(s===l&&a===c)||!vd(t.doc))return;const h=t.tr,f=hd({state:t,transaction:h}),{commands:p}=new fd({editor:this.editor,state:f});if(p.clearNodes(),!!h.steps.length)return h}})]}}),t2=Ot.create({name:"paste",addProseMirrorPlugins(){return[new $t({key:new Yn("tiptapPaste"),props:{handlePaste:(n,e,t)=>{this.editor.emit("paste",{editor:this.editor,event:e,slice:t})}}})]}}),n2=Ot.create({name:"tabindex",addProseMirrorPlugins(){return[new $t({key:new Yn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}});class Bo{get name(){return this.node.type.name}constructor(e,t,r=!1,o=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=e,this.editor=t,this.currentNode=o}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var e;return(e=this.actualDepth)!==null&&e!==void 0?e:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(e){let t=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}t=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:t,to:r},e)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const e=this.resolvedPos.start(this.resolvedPos.depth-1),t=this.resolvedPos.doc.resolve(e);return new Bo(t,this.editor)}get before(){let e=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.from-3)),new Bo(e,this.editor)}get after(){let e=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return e.depth!==this.depth&&(e=this.resolvedPos.doc.resolve(this.to+3)),new Bo(e,this.editor)}get children(){const e=[];return this.node.content.forEach((t,r)=>{const o=t.isBlock&&!t.isTextblock,i=t.isAtom&&!t.isText,s=this.pos+r+(i?0:1);if(s<0||s>this.resolvedPos.doc.nodeSize-2)return;const a=this.resolvedPos.doc.resolve(s);if(!o&&a.depth<=this.depth)return;const l=new Bo(a,this.editor,o,o?t:null);o&&(l.actualDepth=this.depth+1),e.push(new Bo(a,this.editor,o,o?t:null))}),e}get firstChild(){return this.children[0]||null}get lastChild(){const e=this.children;return e[e.length-1]||null}closest(e,t={}){let r=null,o=this.parent;for(;o&&!r;){if(o.node.type.name===e)if(Object.keys(t).length>0){const i=o.node.attrs,s=Object.keys(t);for(let a=0;a<s.length;a+=1){const l=s[a];if(i[l]!==t[l])break}}else r=o;o=o.parent}return r}querySelector(e,t={}){return this.querySelectorAll(e,t,!0)[0]||null}querySelectorAll(e,t={},r=!1){let o=[];if(!this.children||this.children.length===0)return o;const i=Object.keys(t);return this.children.forEach(s=>{r&&o.length>0||(s.node.type.name===e&&i.every(l=>t[l]===s.node.attrs[l])&&o.push(s),!(r&&o.length>0)&&(o=o.concat(s.querySelectorAll(e,t,r))))}),o}setAttribute(e){const{tr:t}=this.editor.state;t.setNodeMarkup(this.from,void 0,{...this.node.attrs,...e}),this.editor.view.dispatch(t)}}const r2=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}

.tippy-box[data-animation=fade][data-state=hidden] {
  opacity: 0
}`;function o2(n,e,t){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const o=document.createElement("style");return e&&o.setAttribute("nonce",e),o.setAttribute("data-tiptap-style",""),o.innerHTML=n,document.getElementsByTagName("head")[0].appendChild(o),o}class i2 extends gL{constructor(e={}){super(),this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.options={element:document.createElement("div"),content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:t})=>{throw t},onPaste:()=>null,onDrop:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("contentError",this.options.onContentError),this.createView(),this.injectCSS(),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:t,slice:r,moved:o})=>this.options.onDrop(t,r,o)),this.on("paste",({event:t,slice:r})=>this.options.onPaste(t,r)),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&document&&(this.css=o2(r2,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.view||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get state(){return this.view.state}registerPlugin(e,t){const r=cA(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let r=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;r=r.filter(a=>!a.key.startsWith(s))}),t.length===r.length)return;const o=this.state.reconfigure({plugins:r});return this.view.updateState(o),o}createExtensionManager(){var e,t;const o=[...this.options.enableCoreExtensions?[JU,OL.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)===null||e===void 0?void 0:e.clipboardTextSerializer)===null||t===void 0?void 0:t.blockSeparator}),QU,ZU,e2,n2,YU,t2].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i==null?void 0:i.type));this.extensionManager=new Gi(o,this)}createCommandManager(){this.commandManager=new fd({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createView(){var e;let t;try{t=cp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(s){if(!(s instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(s.message))throw s;this.emit("contentError",{editor:this,error:s,disableCollaboration:()=>{this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(a=>a.name!=="collaboration"),this.createExtensionManager()}}),t=cp(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}const r=pA(t,this.options.autofocus);this.view=new GI(this.options.element,{...this.options.editorProps,attributes:{role:"textbox",...(e=this.options.editorProps)===null||e===void 0?void 0:e.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:qi.create({doc:t,selection:r||void 0})});const o=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(o),this.createNodeViews(),this.prependClass();const i=this.view.dom;i.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(s=>{var a;return(a=this.capturedTransaction)===null||a===void 0?void 0:a.step(s)});return}const t=this.state.apply(e),r=!this.state.selection.eq(t.selection);this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=e.getMeta("focus"),i=e.getMeta("blur");o&&this.emit("focus",{editor:this,event:o.event,transaction:e}),i&&this.emit("blur",{editor:this,event:i.event,transaction:e}),!(!e.docChanged||e.getMeta("preventUpdate"))&&this.emit("update",{editor:this,transaction:e})}getAttributes(e){return AU(this.state,e)}isActive(e,t){const r=typeof e=="string"?e:null,o=typeof e=="string"?t:e;return bU(this.state,r,o)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Tg(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:r={}}=e||{};return kU(this.state.doc,{blockSeparator:t,textSerializers:{...dA(this.schema),...r}})}get isEmpty(){return vd(this.state.doc)}getCharacterCount(){return console.warn('[tiptap warn]: "editor.getCharacterCount()" is deprecated. Please use "editor.storage.characterCount.characters()" instead.'),this.state.doc.content.size-2}destroy(){if(this.emit("destroy"),this.view){const e=this.view.dom;e&&e.editor&&delete e.editor,this.view.destroy()}this.removeAllListeners()}get isDestroyed(){var e;return!(!((e=this.view)===null||e===void 0)&&e.docView)}$node(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelector(e,t))||null}$nodes(e,t){var r;return((r=this.$doc)===null||r===void 0?void 0:r.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new Bo(t,this)}get $doc(){return this.$pos(0)}}function Es(n){return new md({find:n.find,handler:({state:e,range:t,match:r})=>{const o=ne(n.getAttributes,void 0,r);if(o===!1||o===null)return null;const{tr:i}=e,s=r[r.length-1],a=r[0];if(s){const l=a.search(/\S/),c=t.from+a.indexOf(s),u=c+s.length;if(vA(t.from,t.to,e.doc).filter(f=>f.mark.type.excluded.find(m=>m===n.type&&m!==f.mark.type)).filter(f=>f.to>c).length)return null;u<t.to&&i.delete(u,t.to),c>t.from&&i.delete(t.from+l,c);const h=t.from+l+s.length;i.addMark(t.from+l,h,n.type.create(o||{})),i.removeStoredMark(n.type)}}})}function s2(n){return new md({find:n.find,handler:({state:e,range:t,match:r})=>{const o=ne(n.getAttributes,void 0,r)||{},{tr:i}=e,s=t.from;let a=t.to;const l=n.type.create(o);if(r[1]){const c=r[0].lastIndexOf(r[1]);let u=s+c;u>a?u=a:a=u+r[1].length;const d=r[0][r[0].length-1];i.insertText(d,s+r[0].length-1),i.replaceWith(u,a,l)}else if(r[0]){const c=n.type.isInline?s:s-1;i.insert(c,n.type.create(o)).delete(i.mapping.map(s),i.mapping.map(a))}i.scrollIntoView()}})}function dp(n){return new md({find:n.find,handler:({state:e,range:t,match:r})=>{const o=e.doc.resolve(t.from),i=ne(n.getAttributes,void 0,r)||{};if(!o.node(-1).canReplaceWith(o.index(-1),o.indexAfter(-1),n.type))return null;e.tr.delete(t.from,t.to).setBlockType(t.from,t.from,n.type,i)}})}function tl(n){return new md({find:n.find,handler:({state:e,range:t,match:r,chain:o})=>{const i=ne(n.getAttributes,void 0,r)||{},s=e.tr.delete(t.from,t.to),l=s.doc.resolve(t.from).blockRange(),c=l&&sg(l,n.type,i);if(!c)return null;if(s.wrap(l,c),n.keepMarks&&n.editor){const{selection:d,storedMarks:h}=e,{splittableMarks:f}=n.editor.extensionManager,p=h||d.$to.parentOffset&&d.$from.marks();if(p){const m=p.filter(v=>f.includes(v.type.name));s.ensureMarks(m)}}if(n.keepAttributes){const d=n.type.name==="bulletList"||n.type.name==="orderedList"?"listItem":"taskList";o().updateAttributes(d,i).run()}const u=s.doc.resolve(t.from-1).nodeBefore;u&&u.type===n.type&&_o(s.doc,t.from-1)&&(!n.joinPredicate||n.joinPredicate(r,u))&&s.join(t.from-1)}})}class Zt{constructor(e={}){this.type="node",this.name="node",this.parent=null,this.child=null,this.config={name:this.name,defaultOptions:{}},this.config={...this.config,...e},this.name=this.config.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${this.name}".`),this.options=this.config.defaultOptions,this.config.addOptions&&(this.options=ne(K(this,"addOptions",{name:this.name}))),this.storage=ne(K(this,"addStorage",{name:this.name,options:this.options}))||{}}static create(e={}){return new Zt(e)}configure(e={}){const t=this.extend({...this.config,addOptions:()=>gd(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new Zt(e);return t.parent=this,this.child=t,t.name=e.name?e.name:t.parent.name,e.defaultOptions&&Object.keys(e.defaultOptions).length>0&&console.warn(`[tiptap warn]: BREAKING CHANGE: "defaultOptions" is deprecated. Please use "addOptions" instead. Found in extension: "${t.name}".`),t.options=ne(K(t,"addOptions",{name:t.name})),t.storage=ne(K(t,"addStorage",{name:t.name,options:t.options})),t}}function ks(n){return new IL({find:n.find,handler:({state:e,range:t,match:r,pasteEvent:o})=>{const i=ne(n.getAttributes,void 0,r,o);if(i===!1||i===null)return null;const{tr:s}=e,a=r[r.length-1],l=r[0];let c=t.to;if(a){const u=l.search(/\S/),d=t.from+l.indexOf(a),h=d+a.length;if(vA(t.from,t.to,e.doc).filter(p=>p.mark.type.excluded.find(v=>v===n.type&&v!==p.mark.type)).filter(p=>p.to>d).length)return null;h<t.to&&s.delete(h,t.to),d>t.from&&s.delete(t.from+u,d),c=t.from+u+a.length,s.addMark(t.from+u,c,n.type.create(i||{})),s.removeStoredMark(n.type)}}})}function a2(n,e){const{selection:t}=n,{$from:r}=t;if(t instanceof q){const i=r.index();return r.parent.canReplaceWith(i,i+1,e)}let o=r.depth;for(;o>=0;){const i=r.index(o);if(r.node(o).contentMatchAt(i).matchType(e))return!0;o-=1}return!1}function l2(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var CA={exports:{}},Eh={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KC;function c2(){if(KC)return Eh;KC=1;var n=re;function e(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var t=typeof Object.is=="function"?Object.is:e,r=n.useState,o=n.useEffect,i=n.useLayoutEffect,s=n.useDebugValue;function a(d,h){var f=h(),p=r({inst:{value:f,getSnapshot:h}}),m=p[0].inst,v=p[1];return i(function(){m.value=f,m.getSnapshot=h,l(m)&&v({inst:m})},[d,f,h]),o(function(){return l(m)&&v({inst:m}),d(function(){l(m)&&v({inst:m})})},[d]),s(f),f}function l(d){var h=d.getSnapshot;d=d.value;try{var f=h();return!t(d,f)}catch{return!0}}function c(d,h){return h()}var u=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?c:a;return Eh.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:u,Eh}CA.exports=c2();var bg=CA.exports;const u2=(...n)=>e=>{n.forEach(t=>{typeof t=="function"?t(e):t&&(t.current=e)})},d2=({contentComponent:n})=>{const e=bg.useSyncExternalStore(n.subscribe,n.getSnapshot,n.getServerSnapshot);return re.createElement(re.Fragment,null,Object.values(e))};function h2(){const n=new Set;let e={};return{subscribe(t){return n.add(t),()=>{n.delete(t)}},getSnapshot(){return e},getServerSnapshot(){return e},setRenderer(t,r){e={...e,[t]:tR.createPortal(r.reactElement,r.element,t)},n.forEach(o=>o())},removeRenderer(t){const r={...e};delete r[t],e=r,n.forEach(o=>o())}}}class f2 extends re.Component{constructor(e){var t;super(e),this.editorContentRef=re.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!(!((t=e.editor)===null||t===void 0)&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=h2(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(r=>r.hasContentComponentInitialized?r:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){const e=this.props.editor;if(!e||(this.initialized=!1,e.isDestroyed||e.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),e.contentComponent=null,!e.options.element.firstChild))return;const t=document.createElement("div");t.append(...e.options.element.childNodes),e.setOptions({element:t})}render(){const{editor:e,innerRef:t,...r}=this.props;return re.createElement(re.Fragment,null,re.createElement("div",{ref:u2(t,this.editorContentRef),...r}),(e==null?void 0:e.contentComponent)&&re.createElement(d2,{contentComponent:e.contentComponent}))}}const p2=S.forwardRef((n,e)=>{const t=re.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[n.editor]);return re.createElement(f2,{key:t,innerRef:e,...n})}),m2=re.memo(p2);var g2=function n(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var r,o,i;if(Array.isArray(e)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(!n(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;for(o of e.entries())if(!n(o[1],t.get(o[0])))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(o of e.entries())if(!t.has(o[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(r=e.length,r!=t.length)return!1;for(o=r;o--!==0;)if(e[o]!==t[o])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===t.toString();if(i=Object.keys(e),r=i.length,r!==Object.keys(t).length)return!1;for(o=r;o--!==0;)if(!Object.prototype.hasOwnProperty.call(t,i[o]))return!1;for(o=r;o--!==0;){var s=i[o];if(!(s==="_owner"&&e.$$typeof)&&!n(e[s],t[s]))return!1}return!0}return e!==e&&t!==t},y2=l2(g2),SA={exports:{}},kh={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jC;function v2(){if(jC)return kh;jC=1;var n=re,e=bg;function t(c,u){return c===u&&(c!==0||1/c===1/u)||c!==c&&u!==u}var r=typeof Object.is=="function"?Object.is:t,o=e.useSyncExternalStore,i=n.useRef,s=n.useEffect,a=n.useMemo,l=n.useDebugValue;return kh.useSyncExternalStoreWithSelector=function(c,u,d,h,f){var p=i(null);if(p.current===null){var m={hasValue:!1,value:null};p.current=m}else m=p.current;p=a(function(){function g(A){if(!y){if(y=!0,C=A,A=h(A),f!==void 0&&m.hasValue){var R=m.value;if(f(R,A))return w=R}return w=A}if(R=w,r(C,A))return R;var E=h(A);return f!==void 0&&f(R,E)?R:(C=A,w=E)}var y=!1,C,w,I=d===void 0?null:d;return[function(){return g(u())},I===null?void 0:function(){return g(I())}]},[u,d,h,f]);var v=o(c,p[0],p[1]);return s(function(){m.hasValue=!0,m.value=v},[v]),l(v),v},kh}SA.exports=v2();var C2=SA.exports;const S2=typeof window<"u"?S.useLayoutEffect:S.useEffect;class w2{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(o=>o())},r=this.editor;return r.on("transaction",t),()=>{r.off("transaction",t)}}}}function T2(n){var e;const[t]=S.useState(()=>new w2(n.editor)),r=C2.useSyncExternalStoreWithSelector(t.subscribe,t.getSnapshot,t.getServerSnapshot,n.selector,(e=n.equalityFn)!==null&&e!==void 0?e:y2);return S2(()=>t.watch(n.editor),[n.editor,t]),S.useDebugValue(r),r}const E2=!1,hp=typeof window>"u",k2=hp||!!(typeof window<"u"&&window.next);class Rg{constructor(e){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=e,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(e){this.editor=e,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(t=>t())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?hp||k2?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const e={...this.options.current,onBeforeCreate:(...r)=>{var o,i;return(i=(o=this.options.current).onBeforeCreate)===null||i===void 0?void 0:i.call(o,...r)},onBlur:(...r)=>{var o,i;return(i=(o=this.options.current).onBlur)===null||i===void 0?void 0:i.call(o,...r)},onCreate:(...r)=>{var o,i;return(i=(o=this.options.current).onCreate)===null||i===void 0?void 0:i.call(o,...r)},onDestroy:(...r)=>{var o,i;return(i=(o=this.options.current).onDestroy)===null||i===void 0?void 0:i.call(o,...r)},onFocus:(...r)=>{var o,i;return(i=(o=this.options.current).onFocus)===null||i===void 0?void 0:i.call(o,...r)},onSelectionUpdate:(...r)=>{var o,i;return(i=(o=this.options.current).onSelectionUpdate)===null||i===void 0?void 0:i.call(o,...r)},onTransaction:(...r)=>{var o,i;return(i=(o=this.options.current).onTransaction)===null||i===void 0?void 0:i.call(o,...r)},onUpdate:(...r)=>{var o,i;return(i=(o=this.options.current).onUpdate)===null||i===void 0?void 0:i.call(o,...r)},onContentError:(...r)=>{var o,i;return(i=(o=this.options.current).onContentError)===null||i===void 0?void 0:i.call(o,...r)},onDrop:(...r)=>{var o,i;return(i=(o=this.options.current).onDrop)===null||i===void 0?void 0:i.call(o,...r)},onPaste:(...r)=>{var o,i;return(i=(o=this.options.current).onPaste)===null||i===void 0?void 0:i.call(o,...r)}};return new i2(e)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(e){return this.subscriptions.add(e),()=>{this.subscriptions.delete(e)}}static compareOptions(e,t){return Object.keys(e).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&e.extensions&&t.extensions?e.extensions.length!==t.extensions.length?!1:e.extensions.every((o,i)=>{var s;return o===((s=t.extensions)===null||s===void 0?void 0:s[i])}):e[r]===t[r])}onRender(e){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&e.length===0?Rg.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(e),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(e){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=e;return}if(this.previousDeps.length===e.length&&this.previousDeps.every((r,o)=>r===e[o]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=e}scheduleDestroy(){const e=this.instanceId,t=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===e){t&&t.setOptions(this.options.current);return}t&&!t.isDestroyed&&(t.destroy(),this.instanceId===e&&this.setEditor(null))},1)}}function I2(n={},e=[]){const t=S.useRef(n);t.current=n;const[r]=S.useState(()=>new Rg(t)),o=bg.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return S.useDebugValue(o),S.useEffect(r.onRender(e)),T2({editor:o,selector:({transactionNumber:i})=>n.shouldRerenderOnTransaction===!1?null:n.immediatelyRender&&i===0?0:i+1}),o}const A2=S.createContext({editor:null});A2.Consumer;const b2=S.createContext({onDragStart:void 0}),R2=()=>S.useContext(b2);re.forwardRef((n,e)=>{const{onDragStart:t}=R2(),r=n.as||"div";return re.createElement(r,{...n,ref:e,"data-node-view-wrapper":"",onDragStart:t,style:{whiteSpace:"normal",...n.style}})});const N2=/^\s*>\s$/,x2=Zt.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:n}){return["blockquote",Bt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBlockquote:()=>({commands:n})=>n.wrapIn(this.name),toggleBlockquote:()=>({commands:n})=>n.toggleWrap(this.name),unsetBlockquote:()=>({commands:n})=>n.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[tl({find:N2,type:this.type})]}}),O2=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,M2=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,_2=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,P2=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,D2=No.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:n=>n.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:n=>n.type.name===this.name},{style:"font-weight",getAttrs:n=>/^(bold(er)?|[5-9]\d{2,})$/.test(n)&&null}]},renderHTML({HTMLAttributes:n}){return["strong",Bt(this.options.HTMLAttributes,n),0]},addCommands(){return{setBold:()=>({commands:n})=>n.setMark(this.name),toggleBold:()=>({commands:n})=>n.toggleMark(this.name),unsetBold:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Es({find:O2,type:this.type}),Es({find:_2,type:this.type})]},addPasteRules(){return[ks({find:M2,type:this.type}),ks({find:P2,type:this.type})]}}),L2="listItem",$C="textStyle",VC=/^\s*([-+*])\s$/,U2=Zt.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:n}){return["ul",Bt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleBulletList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(L2,this.editor.getAttributes($C)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let n=tl({find:VC,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(n=tl({find:VC,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes($C),editor:this.editor})),[n]}}),F2=/(^|[^`])`([^`]+)`(?!`)/,H2=/(^|[^`])`([^`]+)`(?!`)/g,B2=No.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:n}){return["code",Bt(this.options.HTMLAttributes,n),0]},addCommands(){return{setCode:()=>({commands:n})=>n.setMark(this.name),toggleCode:()=>({commands:n})=>n.toggleMark(this.name),unsetCode:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Es({find:F2,type:this.type})]},addPasteRules(){return[ks({find:H2,type:this.type})]}}),z2=/^```([a-z]+)?[\s\n]$/,K2=/^~~~([a-z]+)?[\s\n]$/,j2=Zt.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:n=>{var e;const{languageClassPrefix:t}=this.options,i=[...((e=n.firstElementChild)===null||e===void 0?void 0:e.classList)||[]].filter(s=>s.startsWith(t)).map(s=>s.replace(t,""))[0];return i||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:n,HTMLAttributes:e}){return["pre",Bt(this.options.HTMLAttributes,e),["code",{class:n.attrs.language?this.options.languageClassPrefix+n.attrs.language:null},0]]},addCommands(){return{setCodeBlock:n=>({commands:e})=>e.setNode(this.name,n),toggleCodeBlock:n=>({commands:e})=>e.toggleNode(this.name,"paragraph",n)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:n,$anchor:e}=this.editor.state.selection,t=e.pos===1;return!n||e.parent.type.name!==this.name?!1:t||!e.parent.textContent.length?this.editor.commands.clearNodes():!1},Enter:({editor:n})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:e}=n,{selection:t}=e,{$from:r,empty:o}=t;if(!o||r.parent.type!==this.type)return!1;const i=r.parentOffset===r.parent.nodeSize-2,s=r.parent.textContent.endsWith(`

`);return!i||!s?!1:n.chain().command(({tr:a})=>(a.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:n})=>{if(!this.options.exitOnArrowDown)return!1;const{state:e}=n,{selection:t,doc:r}=e,{$from:o,empty:i}=t;if(!i||o.parent.type!==this.type||!(o.parentOffset===o.parent.nodeSize-2))return!1;const a=o.after();return a===void 0?!1:r.nodeAt(a)?n.commands.command(({tr:c})=>(c.setSelection(Z.near(r.resolve(a))),!0)):n.commands.exitCode()}}},addInputRules(){return[dp({find:z2,type:this.type,getAttributes:n=>({language:n[1]})}),dp({find:K2,type:this.type,getAttributes:n=>({language:n[1]})})]},addProseMirrorPlugins(){return[new $t({key:new Yn("codeBlockVSCodeHandler"),props:{handlePaste:(n,e)=>{if(!e.clipboardData||this.editor.isActive(this.type.name))return!1;const t=e.clipboardData.getData("text/plain"),r=e.clipboardData.getData("vscode-editor-data"),o=r?JSON.parse(r):void 0,i=o==null?void 0:o.mode;if(!t||!i)return!1;const{tr:s,schema:a}=n.state,l=a.text(t.replace(/\r\n?/g,`
`));return s.replaceSelectionWith(this.type.create({language:i},l)),s.selection.$from.parent.type!==this.type&&s.setSelection(J.near(s.doc.resolve(Math.max(0,s.selection.from-2)))),s.setMeta("paste",!0),n.dispatch(s),!0}}})]}}),$2=Zt.create({name:"doc",topNode:!0,content:"block+"});function V2(n={}){return new $t({view(e){return new W2(e,n)}})}class W2{constructor(e,t){var r;this.editorView=e,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=t.width)!==null&&r!==void 0?r:1,this.color=t.color===!1?void 0:t.color||"black",this.class=t.class,this.handlers=["dragover","dragend","drop","dragleave"].map(o=>{let i=s=>{this[o](s)};return e.dom.addEventListener(o,i),{name:o,handler:i}})}destroy(){this.handlers.forEach(({name:e,handler:t})=>this.editorView.dom.removeEventListener(e,t))}update(e,t){this.cursorPos!=null&&t.doc!=e.state.doc&&(this.cursorPos>e.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(e){e!=this.cursorPos&&(this.cursorPos=e,e==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let e=this.editorView.state.doc.resolve(this.cursorPos),t=!e.parent.inlineContent,r,o=this.editorView.dom,i=o.getBoundingClientRect(),s=i.width/o.offsetWidth,a=i.height/o.offsetHeight;if(t){let d=e.nodeBefore,h=e.nodeAfter;if(d||h){let f=this.editorView.nodeDOM(this.cursorPos-(d?d.nodeSize:0));if(f){let p=f.getBoundingClientRect(),m=d?p.bottom:p.top;d&&h&&(m=(m+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let v=this.width/2*a;r={left:p.left,right:p.right,top:m-v,bottom:m+v}}}}if(!r){let d=this.editorView.coordsAtPos(this.cursorPos),h=this.width/2*s;r={left:d.left-h,right:d.left+h,top:d.top,bottom:d.bottom}}let l=this.editorView.dom.offsetParent;this.element||(this.element=l.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",t),this.element.classList.toggle("prosemirror-dropcursor-inline",!t);let c,u;if(!l||l==document.body&&getComputedStyle(l).position=="static")c=-pageXOffset,u=-pageYOffset;else{let d=l.getBoundingClientRect(),h=d.width/l.offsetWidth,f=d.height/l.offsetHeight;c=d.left-l.scrollLeft*h,u=d.top-l.scrollTop*f}this.element.style.left=(r.left-c)/s+"px",this.element.style.top=(r.top-u)/a+"px",this.element.style.width=(r.right-r.left)/s+"px",this.element.style.height=(r.bottom-r.top)/a+"px"}scheduleRemoval(e){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),e)}dragover(e){if(!this.editorView.editable)return;let t=this.editorView.posAtCoords({left:e.clientX,top:e.clientY}),r=t&&t.inside>=0&&this.editorView.state.doc.nodeAt(t.inside),o=r&&r.type.spec.disableDropCursor,i=typeof o=="function"?o(this.editorView,t,e):o;if(t&&!i){let s=t.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let a=lI(this.editorView.state.doc,s,this.editorView.dragging.slice);a!=null&&(s=a)}this.setCursor(s),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(e){this.editorView.dom.contains(e.relatedTarget)||this.setCursor(null)}}const q2=Ot.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[V2(this.options)]}});class He extends Z{constructor(e){super(e,e)}map(e,t){let r=e.resolve(t.map(this.head));return He.valid(r)?new He(r):Z.near(r)}content(){return L.empty}eq(e){return e instanceof He&&e.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(e,t){if(typeof t.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new He(e.resolve(t.pos))}getBookmark(){return new Ng(this.anchor)}static valid(e){let t=e.parent;if(t.isTextblock||!G2(e)||!Q2(e))return!1;let r=t.type.spec.allowGapCursor;if(r!=null)return r;let o=t.contentMatchAt(e.index()).defaultType;return o&&o.isTextblock}static findGapCursorFrom(e,t,r=!1){e:for(;;){if(!r&&He.valid(e))return e;let o=e.pos,i=null;for(let s=e.depth;;s--){let a=e.node(s);if(t>0?e.indexAfter(s)<a.childCount:e.index(s)>0){i=a.child(t>0?e.indexAfter(s):e.index(s)-1);break}else if(s==0)return null;o+=t;let l=e.doc.resolve(o);if(He.valid(l))return l}for(;;){let s=t>0?i.firstChild:i.lastChild;if(!s){if(i.isAtom&&!i.isText&&!q.isSelectable(i)){e=e.doc.resolve(o+i.nodeSize*t),r=!1;continue e}break}i=s,o+=t;let a=e.doc.resolve(o);if(He.valid(a))return a}return null}}}He.prototype.visible=!1;He.findFrom=He.findGapCursorFrom;Z.jsonID("gapcursor",He);class Ng{constructor(e){this.pos=e}map(e){return new Ng(e.map(this.pos))}resolve(e){let t=e.resolve(this.pos);return He.valid(t)?new He(t):Z.near(t)}}function G2(n){for(let e=n.depth;e>=0;e--){let t=n.index(e),r=n.node(e);if(t==0){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t-1);;o=o.lastChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function Q2(n){for(let e=n.depth;e>=0;e--){let t=n.indexAfter(e),r=n.node(e);if(t==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let o=r.child(t);;o=o.firstChild){if(o.childCount==0&&!o.inlineContent||o.isAtom||o.type.spec.isolating)return!0;if(o.inlineContent)return!1}}return!0}function Y2(){return new $t({props:{decorations:eF,createSelectionBetween(n,e,t){return e.pos==t.pos&&He.valid(t)?new He(t):null},handleClick:X2,handleKeyDown:J2,handleDOMEvents:{beforeinput:Z2}}})}const J2=QI({ArrowLeft:ec("horiz",-1),ArrowRight:ec("horiz",1),ArrowUp:ec("vert",-1),ArrowDown:ec("vert",1)});function ec(n,e){const t=n=="vert"?e>0?"down":"up":e>0?"right":"left";return function(r,o,i){let s=r.selection,a=e>0?s.$to:s.$from,l=s.empty;if(s instanceof J){if(!i.endOfTextblock(t)||a.depth==0)return!1;l=!1,a=r.doc.resolve(e>0?a.after():a.before())}let c=He.findGapCursorFrom(a,e,l);return c?(o&&o(r.tr.setSelection(new He(c))),!0):!1}}function X2(n,e,t){if(!n||!n.editable)return!1;let r=n.state.doc.resolve(e);if(!He.valid(r))return!1;let o=n.posAtCoords({left:t.clientX,top:t.clientY});return o&&o.inside>-1&&q.isSelectable(n.state.doc.nodeAt(o.inside))?!1:(n.dispatch(n.state.tr.setSelection(new He(r))),!0)}function Z2(n,e){if(e.inputType!="insertCompositionText"||!(n.state.selection instanceof He))return!1;let{$from:t}=n.state.selection,r=t.parent.contentMatchAt(t.index()).findWrapping(n.state.schema.nodes.text);if(!r)return!1;let o=N.empty;for(let s=r.length-1;s>=0;s--)o=N.from(r[s].createAndFill(null,o));let i=n.state.tr.replace(t.pos,t.pos,new L(o,0,0));return i.setSelection(J.near(i.doc.resolve(t.pos+1))),n.dispatch(i),!1}function eF(n){if(!(n.selection instanceof He))return null;let e=document.createElement("div");return e.className="ProseMirror-gapcursor",We.create(n.doc,[mn.widget(n.selection.head,e,{key:"gapcursor"})])}const tF=Ot.create({name:"gapCursor",addProseMirrorPlugins(){return[Y2()]},extendNodeSchema(n){var e;const t={name:n.name,options:n.options,storage:n.storage};return{allowGapCursor:(e=ne(K(n,"allowGapCursor",t)))!==null&&e!==void 0?e:null}}}),nF=Zt.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:n}){return["br",Bt(this.options.HTMLAttributes,n)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:n,chain:e,state:t,editor:r})=>n.first([()=>n.exitCode(),()=>n.command(()=>{const{selection:o,storedMarks:i}=t;if(o.$from.parent.type.spec.isolating)return!1;const{keepMarks:s}=this.options,{splittableMarks:a}=r.extensionManager,l=i||o.$to.parentOffset&&o.$from.marks();return e().insertContent({type:this.name}).command(({tr:c,dispatch:u})=>{if(u&&l&&s){const d=l.filter(h=>a.includes(h.type.name));c.ensureMarks(d)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),rF=Zt.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(n=>({tag:`h${n}`,attrs:{level:n}}))},renderHTML({node:n,HTMLAttributes:e}){return[`h${this.options.levels.includes(n.attrs.level)?n.attrs.level:this.options.levels[0]}`,Bt(this.options.HTMLAttributes,e),0]},addCommands(){return{setHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.setNode(this.name,n):!1,toggleHeading:n=>({commands:e})=>this.options.levels.includes(n.level)?e.toggleNode(this.name,"paragraph",n):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((n,e)=>({...n,[`Mod-Alt-${e}`]:()=>this.editor.commands.toggleHeading({level:e})}),{})},addInputRules(){return this.options.levels.map(n=>dp({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${n}})\\s$`),type:this.type,getAttributes:{level:n}}))}});var Tu=200,ut=function(){};ut.prototype.append=function(e){return e.length?(e=ut.from(e),!this.length&&e||e.length<Tu&&this.leafAppend(e)||this.length<Tu&&e.leafPrepend(this)||this.appendInner(e)):this};ut.prototype.prepend=function(e){return e.length?ut.from(e).append(this):this};ut.prototype.appendInner=function(e){return new oF(this,e)};ut.prototype.slice=function(e,t){return e===void 0&&(e=0),t===void 0&&(t=this.length),e>=t?ut.empty:this.sliceInner(Math.max(0,e),Math.min(this.length,t))};ut.prototype.get=function(e){if(!(e<0||e>=this.length))return this.getInner(e)};ut.prototype.forEach=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length),t<=r?this.forEachInner(e,t,r,0):this.forEachInvertedInner(e,t,r,0)};ut.prototype.map=function(e,t,r){t===void 0&&(t=0),r===void 0&&(r=this.length);var o=[];return this.forEach(function(i,s){return o.push(e(i,s))},t,r),o};ut.from=function(e){return e instanceof ut?e:e&&e.length?new wA(e):ut.empty};var wA=function(n){function e(r){n.call(this),this.values=r}n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e;var t={length:{configurable:!0},depth:{configurable:!0}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(o,i){return o==0&&i==this.length?this:new e(this.values.slice(o,i))},e.prototype.getInner=function(o){return this.values[o]},e.prototype.forEachInner=function(o,i,s,a){for(var l=i;l<s;l++)if(o(this.values[l],a+l)===!1)return!1},e.prototype.forEachInvertedInner=function(o,i,s,a){for(var l=i-1;l>=s;l--)if(o(this.values[l],a+l)===!1)return!1},e.prototype.leafAppend=function(o){if(this.length+o.length<=Tu)return new e(this.values.concat(o.flatten()))},e.prototype.leafPrepend=function(o){if(this.length+o.length<=Tu)return new e(o.flatten().concat(this.values))},t.length.get=function(){return this.values.length},t.depth.get=function(){return 0},Object.defineProperties(e.prototype,t),e}(ut);ut.empty=new wA([]);var oF=function(n){function e(t,r){n.call(this),this.left=t,this.right=r,this.length=t.length+r.length,this.depth=Math.max(t.depth,r.depth)+1}return n&&(e.__proto__=n),e.prototype=Object.create(n&&n.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},e.prototype.forEachInner=function(r,o,i,s){var a=this.left.length;if(o<a&&this.left.forEachInner(r,o,Math.min(i,a),s)===!1||i>a&&this.right.forEachInner(r,Math.max(o-a,0),Math.min(this.length,i)-a,s+a)===!1)return!1},e.prototype.forEachInvertedInner=function(r,o,i,s){var a=this.left.length;if(o>a&&this.right.forEachInvertedInner(r,o-a,Math.max(i,a)-a,s+a)===!1||i<a&&this.left.forEachInvertedInner(r,Math.min(o,a),i,s)===!1)return!1},e.prototype.sliceInner=function(r,o){if(r==0&&o==this.length)return this;var i=this.left.length;return o<=i?this.left.slice(r,o):r>=i?this.right.slice(r-i,o-i):this.left.slice(r,i).append(this.right.slice(0,o-i))},e.prototype.leafAppend=function(r){var o=this.right.leafAppend(r);if(o)return new e(this.left,o)},e.prototype.leafPrepend=function(r){var o=this.left.leafPrepend(r);if(o)return new e(o,this.right)},e.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new e(this.left,new e(this.right,r)):new e(this,r)},e}(ut);const iF=500;class Bn{constructor(e,t){this.items=e,this.eventCount=t}popEvent(e,t){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let o,i;t&&(o=this.remapping(r,this.items.length),i=o.maps.length);let s=e.tr,a,l,c=[],u=[];return this.items.forEach((d,h)=>{if(!d.step){o||(o=this.remapping(r,h+1),i=o.maps.length),i--,u.push(d);return}if(o){u.push(new nr(d.map));let f=d.step.map(o.slice(i)),p;f&&s.maybeStep(f).doc&&(p=s.mapping.maps[s.mapping.maps.length-1],c.push(new nr(p,void 0,void 0,c.length+u.length))),i--,p&&o.appendMap(p,i)}else s.maybeStep(d.step);if(d.selection)return a=o?d.selection.map(o.slice(i)):d.selection,l=new Bn(this.items.slice(0,r).append(u.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:l,transform:s,selection:a}}addTransform(e,t,r,o){let i=[],s=this.eventCount,a=this.items,l=!o&&a.length?a.get(a.length-1):null;for(let u=0;u<e.steps.length;u++){let d=e.steps[u].invert(e.docs[u]),h=new nr(e.mapping.maps[u],d,t),f;(f=l&&l.merge(h))&&(h=f,u?i.pop():a=a.slice(0,a.length-1)),i.push(h),t&&(s++,t=void 0),o||(l=h)}let c=s-r.depth;return c>aF&&(a=sF(a,c),s-=c),new Bn(a.append(i),s)}remapping(e,t){let r=new Ga;return this.items.forEach((o,i)=>{let s=o.mirrorOffset!=null&&i-o.mirrorOffset>=e?r.maps.length-o.mirrorOffset:void 0;r.appendMap(o.map,s)},e,t),r}addMaps(e){return this.eventCount==0?this:new Bn(this.items.append(e.map(t=>new nr(t))),this.eventCount)}rebased(e,t){if(!this.eventCount)return this;let r=[],o=Math.max(0,this.items.length-t),i=e.mapping,s=e.steps.length,a=this.eventCount;this.items.forEach(h=>{h.selection&&a--},o);let l=t;this.items.forEach(h=>{let f=i.getMirror(--l);if(f==null)return;s=Math.min(s,f);let p=i.maps[f];if(h.step){let m=e.steps[f].invert(e.docs[f]),v=h.selection&&h.selection.map(i.slice(l+1,f));v&&a++,r.push(new nr(p,m,v))}else r.push(new nr(p))},o);let c=[];for(let h=t;h<s;h++)c.push(new nr(i.maps[h]));let u=this.items.slice(0,o).append(c).append(r),d=new Bn(u,a);return d.emptyItemCount()>iF&&(d=d.compress(this.items.length-r.length)),d}emptyItemCount(){let e=0;return this.items.forEach(t=>{t.step||e++}),e}compress(e=this.items.length){let t=this.remapping(0,e),r=t.maps.length,o=[],i=0;return this.items.forEach((s,a)=>{if(a>=e)o.push(s),s.selection&&i++;else if(s.step){let l=s.step.map(t.slice(r)),c=l&&l.getMap();if(r--,c&&t.appendMap(c,r),l){let u=s.selection&&s.selection.map(t.slice(r));u&&i++;let d=new nr(c.invert(),l,u),h,f=o.length-1;(h=o.length&&o[f].merge(d))?o[f]=h:o.push(d)}}else s.map&&r--},this.items.length,0),new Bn(ut.from(o.reverse()),i)}}Bn.empty=new Bn(ut.empty,0);function sF(n,e){let t;return n.forEach((r,o)=>{if(r.selection&&e--==0)return t=o,!1}),n.slice(t)}class nr{constructor(e,t,r,o){this.map=e,this.step=t,this.selection=r,this.mirrorOffset=o}merge(e){if(this.step&&e.step&&!e.selection){let t=e.step.merge(this.step);if(t)return new nr(t.getMap().invert(),t,this.selection)}}}class Xr{constructor(e,t,r,o,i){this.done=e,this.undone=t,this.prevRanges=r,this.prevTime=o,this.prevComposition=i}}const aF=20;function lF(n,e,t,r){let o=t.getMeta(ei),i;if(o)return o.historyState;t.getMeta(dF)&&(n=new Xr(n.done,n.undone,null,0,-1));let s=t.getMeta("appendedTransaction");if(t.steps.length==0)return n;if(s&&s.getMeta(ei))return s.getMeta(ei).redo?new Xr(n.done.addTransform(t,void 0,r,vc(e)),n.undone,WC(t.mapping.maps),n.prevTime,n.prevComposition):new Xr(n.done,n.undone.addTransform(t,void 0,r,vc(e)),null,n.prevTime,n.prevComposition);if(t.getMeta("addToHistory")!==!1&&!(s&&s.getMeta("addToHistory")===!1)){let a=t.getMeta("composition"),l=n.prevTime==0||!s&&n.prevComposition!=a&&(n.prevTime<(t.time||0)-r.newGroupDelay||!cF(t,n.prevRanges)),c=s?Ih(n.prevRanges,t.mapping):WC(t.mapping.maps);return new Xr(n.done.addTransform(t,l?e.selection.getBookmark():void 0,r,vc(e)),Bn.empty,c,t.time,a??n.prevComposition)}else return(i=t.getMeta("rebased"))?new Xr(n.done.rebased(t,i),n.undone.rebased(t,i),Ih(n.prevRanges,t.mapping),n.prevTime,n.prevComposition):new Xr(n.done.addMaps(t.mapping.maps),n.undone.addMaps(t.mapping.maps),Ih(n.prevRanges,t.mapping),n.prevTime,n.prevComposition)}function cF(n,e){if(!e)return!1;if(!n.docChanged)return!0;let t=!1;return n.mapping.maps[0].forEach((r,o)=>{for(let i=0;i<e.length;i+=2)r<=e[i+1]&&o>=e[i]&&(t=!0)}),t}function WC(n){let e=[];for(let t=n.length-1;t>=0&&e.length==0;t--)n[t].forEach((r,o,i,s)=>e.push(i,s));return e}function Ih(n,e){if(!n)return null;let t=[];for(let r=0;r<n.length;r+=2){let o=e.map(n[r],1),i=e.map(n[r+1],-1);o<=i&&t.push(o,i)}return t}function uF(n,e,t){let r=vc(e),o=ei.get(e).spec.config,i=(t?n.undone:n.done).popEvent(e,r);if(!i)return null;let s=i.selection.resolve(i.transform.doc),a=(t?n.done:n.undone).addTransform(i.transform,e.selection.getBookmark(),o,r),l=new Xr(t?a:i.remaining,t?i.remaining:a,null,0,-1);return i.transform.setSelection(s).setMeta(ei,{redo:t,historyState:l})}let Ah=!1,qC=null;function vc(n){let e=n.plugins;if(qC!=e){Ah=!1,qC=e;for(let t=0;t<e.length;t++)if(e[t].spec.historyPreserveItems){Ah=!0;break}}return Ah}const ei=new Yn("history"),dF=new Yn("closeHistory");function hF(n={}){return n={depth:n.depth||100,newGroupDelay:n.newGroupDelay||500},new $t({key:ei,state:{init(){return new Xr(Bn.empty,Bn.empty,null,0,-1)},apply(e,t,r){return lF(t,r,e,n)}},config:n,props:{handleDOMEvents:{beforeinput(e,t){let r=t.inputType,o=r=="historyUndo"?EA:r=="historyRedo"?kA:null;return o?(t.preventDefault(),o(e.state,e.dispatch)):!1}}}})}function TA(n,e){return(t,r)=>{let o=ei.getState(t);if(!o||(n?o.undone:o.done).eventCount==0)return!1;if(r){let i=uF(o,t,n);i&&r(e?i.scrollIntoView():i)}return!0}}const EA=TA(!1,!0),kA=TA(!0,!0),fF=Ot.create({name:"history",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:n,dispatch:e})=>EA(n,e),redo:()=>({state:n,dispatch:e})=>kA(n,e)}},addProseMirrorPlugins(){return[hF(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),pF=Zt.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:n}){return["hr",Bt(this.options.HTMLAttributes,n)]},addCommands(){return{setHorizontalRule:()=>({chain:n,state:e})=>{if(!a2(e,e.schema.nodes[this.name]))return!1;const{selection:t}=e,{$from:r,$to:o}=t,i=n();return r.parentOffset===0?i.insertContentAt({from:Math.max(r.pos-1,0),to:o.pos},{type:this.name}):RU(t)?i.insertContentAt(o.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:a})=>{var l;if(a){const{$to:c}=s.selection,u=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(J.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(q.create(s.doc,c.pos)):s.setSelection(J.create(s.doc,c.pos));else{const d=(l=c.parent.type.contentMatch.defaultType)===null||l===void 0?void 0:l.create();d&&(s.insert(u,d),s.setSelection(J.create(s.doc,u+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[s2({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),mF=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,gF=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,yF=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,vF=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,CF=No.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:n=>n.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:n=>n.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:n}){return["em",Bt(this.options.HTMLAttributes,n),0]},addCommands(){return{setItalic:()=>({commands:n})=>n.setMark(this.name),toggleItalic:()=>({commands:n})=>n.toggleMark(this.name),unsetItalic:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Es({find:mF,type:this.type}),Es({find:yF,type:this.type})]},addPasteRules(){return[ks({find:gF,type:this.type}),ks({find:vF,type:this.type})]}}),SF=Zt.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:n}){return["li",Bt(this.options.HTMLAttributes,n),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),wF="listItem",GC="textStyle",QC=/^(\d+)\.\s$/,TF=Zt.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:n=>n.hasAttribute("start")?parseInt(n.getAttribute("start")||"",10):1},type:{default:null,parseHTML:n=>n.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:n}){const{start:e,...t}=n;return e===1?["ol",Bt(this.options.HTMLAttributes,t),0]:["ol",Bt(this.options.HTMLAttributes,n),0]},addCommands(){return{toggleOrderedList:()=>({commands:n,chain:e})=>this.options.keepAttributes?e().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(wF,this.editor.getAttributes(GC)).run():n.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let n=tl({find:QC,type:this.type,getAttributes:e=>({start:+e[1]}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(n=tl({find:QC,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:e=>({start:+e[1],...this.editor.getAttributes(GC)}),joinPredicate:(e,t)=>t.childCount+t.attrs.start===+e[1],editor:this.editor})),[n]}}),EF=Zt.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:n}){return["p",Bt(this.options.HTMLAttributes,n),0]},addCommands(){return{setParagraph:()=>({commands:n})=>n.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),kF=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,IF=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,AF=No.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:n=>n.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:n}){return["s",Bt(this.options.HTMLAttributes,n),0]},addCommands(){return{setStrike:()=>({commands:n})=>n.setMark(this.name),toggleStrike:()=>({commands:n})=>n.toggleMark(this.name),unsetStrike:()=>({commands:n})=>n.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Es({find:kF,type:this.type})]},addPasteRules(){return[ks({find:IF,type:this.type})]}}),bF=Zt.create({name:"text",group:"inline"}),RF=Ot.create({name:"starterKit",addExtensions(){const n=[];return this.options.bold!==!1&&n.push(D2.configure(this.options.bold)),this.options.blockquote!==!1&&n.push(x2.configure(this.options.blockquote)),this.options.bulletList!==!1&&n.push(U2.configure(this.options.bulletList)),this.options.code!==!1&&n.push(B2.configure(this.options.code)),this.options.codeBlock!==!1&&n.push(j2.configure(this.options.codeBlock)),this.options.document!==!1&&n.push($2.configure(this.options.document)),this.options.dropcursor!==!1&&n.push(q2.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&n.push(tF.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&n.push(nF.configure(this.options.hardBreak)),this.options.heading!==!1&&n.push(rF.configure(this.options.heading)),this.options.history!==!1&&n.push(fF.configure(this.options.history)),this.options.horizontalRule!==!1&&n.push(pF.configure(this.options.horizontalRule)),this.options.italic!==!1&&n.push(CF.configure(this.options.italic)),this.options.listItem!==!1&&n.push(SF.configure(this.options.listItem)),this.options.orderedList!==!1&&n.push(TF.configure(this.options.orderedList)),this.options.paragraph!==!1&&n.push(EF.configure(this.options.paragraph)),this.options.strike!==!1&&n.push(AF.configure(this.options.strike)),this.options.text!==!1&&n.push(bF.configure(this.options.text)),n}}),NF=Ot.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new $t({key:new Yn("placeholder"),props:{decorations:({doc:n,selection:e})=>{const t=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=e,o=[];if(!t)return null;const i=this.editor.isEmpty;return n.descendants((s,a)=>{const l=r>=a&&r<=a+s.nodeSize,c=!s.isLeaf&&vd(s);if((l||!this.options.showOnlyCurrent)&&c){const u=[this.options.emptyNodeClass];i&&u.push(this.options.emptyEditorClass);const d=mn.node(a,a+s.nodeSize,{class:u.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:s,pos:a,hasAnchor:l}):this.options.placeholder});o.push(d)}return this.options.includeChildren}),We.create(n,o)}}})]}}),xF=({isOpen:n,onClose:e})=>{const t=I2({extensions:[RF,NF.configure({placeholder:"Write your notes here..."})],content:localStorage.getItem("userNotes")||"",onUpdate:({editor:o})=>{localStorage.setItem("userNotes",o.getHTML())}});if(!n)return null;const r=({onClick:o,children:i,isActive:s=!1})=>k.jsx("button",{onClick:o,className:`p-2 rounded hover:bg-[#2D3139] transition-colors duration-200 ${s?"bg-[#2D3139] text-rose-500":"text-white"}`,children:i});return k.jsx("div",{className:"fixed inset-0 flex items-center justify-center z-50 bg-black bg-opacity-50",children:k.jsxs("div",{className:"w-[800px] h-[80vh] flex flex-col bg-[#181b21] bg-opacity-70 backdrop-blur-md rounded-lg shadow-xl border border-[#2D3139]",children:[k.jsxs("div",{className:"flex items-center justify-between p-3 border-b border-[#2D3139]",children:[k.jsx("h2",{className:"text-lg font-semibold text-white",children:"Notes"}),k.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors duration-200",children:k.jsx(Kf,{size:16})})]}),k.jsxs("div",{className:"p-2 border-b border-[#2D3139] flex gap-2",children:[k.jsx(r,{onClick:()=>t==null?void 0:t.chain().focus().toggleBold().run(),isActive:t==null?void 0:t.isActive("bold"),children:k.jsx(BM,{size:18})}),k.jsx(r,{onClick:()=>t==null?void 0:t.chain().focus().toggleItalic().run(),isActive:t==null?void 0:t.isActive("italic"),children:k.jsx(KM,{size:18})}),k.jsx(r,{onClick:()=>t==null?void 0:t.chain().focus().toggleBulletList().run(),isActive:t==null?void 0:t.isActive("bulletList"),children:k.jsx(WM,{size:18})}),k.jsx(r,{onClick:()=>t==null?void 0:t.chain().focus().toggleOrderedList().run(),isActive:t==null?void 0:t.isActive("orderedList"),children:k.jsx($M,{size:18})})]}),k.jsx("div",{className:"flex-1 overflow-y-auto p-4",children:k.jsx(m2,{editor:t,className:"prose prose-invert max-w-none focus:outline-none"})})]})})},IA="kanban_sprint_name",YC="DAP - 25",OF="kanban_search_value",MF=()=>{try{return localStorage.getItem(IA)||YC}catch(n){return console.error("Error loading sprint name from localStorage:",n),YC}},_F=n=>{try{localStorage.setItem(IA,n)}catch(e){console.error("Error saving sprint name to localStorage:",e)}},PF=n=>{try{localStorage.setItem(OF,n)}catch(e){console.error("Error saving search value to localStorage:",e)}};function DF(n){switch(n){case 1:return"bg-yellow-500 hover:bg-yellow-600";case 2:return"bg-rose-500 hover:bg-rose-600";default:return"bg-[#181b21] hover:bg-[#1C1F26]"}}function LF({tasks:n,selectedIssueTypes:e,selectedAssignees:t,onIssueTypeChange:r,onAssigneeChange:o,bookmarkFilter:i,onBookmarkFilterChange:s,onRefresh:a,searchValue:l,onSearchChange:c,filteredTasksCount:u}){const[d,h]=S.useState(!1),[f,p]=S.useState(!1),[m,v]=S.useState(""),[g,y]=S.useState(!1),[C,w]=S.useState(!1),[I,A]=S.useState(null),[R,E]=S.useState(!1),[_,O]=S.useState(()=>MF()),[W,ce]=S.useState(!1),[ue,ve]=S.useState(""),[ht,en]=S.useState(()=>Dv()),[Ue,D]=S.useState(null),$=S.useRef(null),G=S.useRef(null),fe=S.useRef(null),[oe,Qe]=S.useState(!1),[Be,ee]=S.useState(!1),[V,Y]=S.useState(!1),[X,se]=S.useState(!1),[H,$e]=S.useState(!1),[de,Re]=S.useState(l),Ee=S.useCallback((()=>{let F;return ke=>{clearTimeout(F),F=setTimeout(()=>{c(ke),PF(ke)},300)}})(),[c]);S.useEffect(()=>{Re(l)},[l]);const Ye=Array.from(new Set(n.map(F=>{if(F.rowData&&typeof F.rowData=="object"){const ke=F.rowData["Issue Type"];return ke&&typeof ke=="string"?ke:null}return null}).filter(F=>F!==null))).sort((F,ke)=>F.localeCompare(ke)),pe=Array.from(new Set(n.map(F=>{if(F.rowData&&typeof F.rowData=="object"){const ke=F.rowData.Assignee;return ke&&typeof ke=="string"?ke:null}return null}).filter(F=>F!==null))).sort((F,ke)=>F.localeCompare(ke)),wt=pe.filter(F=>F.toLowerCase().includes(m.toLowerCase()));S.useEffect(()=>{function F(ke){$.current&&!$.current.contains(ke.target)&&h(!1),G.current&&!G.current.contains(ke.target)&&p(!1)}return document.addEventListener("mousedown",F),()=>document.removeEventListener("mousedown",F)},[]),S.useEffect(()=>{de.trim()&&Y(!0)},[]);const Vt=F=>{O(F),_F(F)},Ne=async()=>{w(!0),A(null),E(!1);try{await a(_),E(!0),setTimeout(()=>E(!1),2e3)}catch(F){A(F instanceof Error?F.message:"Failed to refresh")}finally{w(!1)}},ze=()=>{ht.hasKey&&ve(""),ce(!0),D(null)},_n=()=>{if(!ue.trim()){D("Please enter an API key");return}if(!XM(ue.trim())){D("Invalid API key format");return}try{QM(ue.trim()),en(Dv()),ve(""),ce(!1),D(null),console.log("API key saved successfully")}catch(F){D(F instanceof Error?F.message:"Failed to save API key")}},wi=F=>{F.key==="Enter"?_n():F.key==="Escape"&&(ce(!1),ve(""),D(null))},yl=()=>{setTimeout(()=>{ue.trim()||(ce(!1),D(null))},150)},vl=()=>{e.length===Ye.length?r([]):r([...Ye])},Cd=()=>{t.length===pe.length?o([]):o([...pe])},Sd=()=>{s((i+1)%3)};S.useEffect(()=>{if(!X&&!H&&!de.trim()&&V){const ke=setTimeout(()=>{Y(!1)},150);return()=>clearTimeout(ke)}},[X,H,de,V]);const Hr=()=>{$e(!0),Y(!0)},Br=()=>{$e(!1)},Lo=()=>{se(!0),Y(!0)},Cl=()=>{se(!1)},Pn=F=>{Re(F),Ee(F),F.trim()&&Y(!0)};return k.jsxs(k.Fragment,{children:[k.jsxs("div",{className:"flex gap-4 items-center justify-end py-2 px-4 bg-[#000] border-b border-[#181b21]",children:[k.jsxs("div",{className:"flex items-center gap-2 mr-auto",children:[k.jsx("span",{className:"text-white text-sm",children:de.trim()||e.length>0||t.length>0||i>0?"Filtered Tasks:":"Total Tasks:"}),k.jsx("span",{className:"flex h-5 min-w-[20px] items-center justify-center rounded-full bg-[#181b21] px-2 text-xs text-white border border-[#2D3139]",children:u}),(de.trim()||e.length>0||t.length>0||i>0)&&k.jsxs("span",{className:"text-gray-400 text-xs",children:["of ",n.length]}),k.jsx("input",{type:"text",value:_,onChange:F=>Vt(F.target.value),className:"bg-[#181b21] text-white px-3 py-1 rounded-lg border border-[#2D3139] text-sm focus:outline-none focus:border-rose-500 w-20",placeholder:"Sprint Name"}),k.jsxs("button",{onClick:Ne,disabled:C,className:`
              p-2 rounded-full transition-colors duration-200 relative group
              ${I?"bg-rose-500 hover:bg-rose-600":"bg-[#181b21] hover:bg-[#1C1F26]"}
              text-white
            `,title:I||"Refresh tasks",children:[C?k.jsx(zf,{className:"w-4 h-4 animate-spin"}):R?k.jsx(_k,{className:"w-4 h-4 text-green-500"}):I?k.jsx(GM,{className:"w-4 h-4"}):k.jsx(VM,{className:"w-4 h-4"}),I&&k.jsx("div",{className:"absolute left-1/2 -translate-x-1/2 -bottom-2 transform translate-y-full w-48 bg-rose-500 text-white text-xs rounded-lg py-1 px-2 opacity-0 group-hover:opacity-100 transition-opacity duration-200 z-50",children:I})]}),k.jsxs("div",{className:"relative flex items-center",children:[k.jsxs("div",{className:`
              flex items-center rounded-full transition-all duration-300 ease-in-out
              ${W?"bg-[#181b21] border border-[#2D3139] px-3 py-1":"bg-[#181b21] hover:bg-[#1C1F26]"}
              ${ht.hasKey?"ring-1 ring-green-500/30":""}
            `,children:[k.jsx("button",{onClick:ze,className:`
                  p-2 rounded-full transition-colors duration-200 text-white
                  ${W?"":"hover:bg-[#1C1F26]"}
                  ${ht.hasKey?"text-green-400":""}
                `,title:ht.hasKey?`API Key: ${ht.maskedKey}`:"Set API Key",children:k.jsx(jM,{className:"w-4 h-4"})}),W&&k.jsx("input",{type:"password",value:ue,onChange:F=>ve(F.target.value),onKeyDown:wi,onBlur:yl,placeholder:ht.hasKey?"Enter new API key...":"Enter your API key...",className:"flex-1 bg-transparent text-white text-sm placeholder-gray-400 focus:outline-none min-w-[200px]",autoFocus:!0})]}),Ue&&k.jsx("div",{className:"absolute top-full left-0 mt-1 px-2 py-1 bg-rose-500 text-white text-xs rounded shadow-lg whitespace-nowrap z-30",children:Ue})]})]}),k.jsx("div",{className:"relative flex items-center",onMouseEnter:Hr,onMouseLeave:Br,children:k.jsxs("div",{className:`
              flex items-center transition-all duration-300 ease-in-out
              ${V?"w-[300px] h-[32px]":"w-8 h-8"}
              bg-[#181b21] hover:bg-[#1C1F26] rounded-full
              border border-transparent hover:border-[#2D3139]
            `,children:[k.jsx("div",{className:"p-2 flex-shrink-0",children:k.jsx(Pv,{size:16,className:"transition-transform duration-200 hover:scale-110"})}),V&&k.jsx("input",{ref:fe,type:"text",value:de,onChange:F=>Pn(F.target.value),onFocus:Lo,onBlur:Cl,placeholder:"Search by Issue ID, Summary, Assignee...",className:`
                  flex-1 bg-transparent text-white text-sm placeholder-gray-400
                  focus:outline-none transition-all duration-300 ease-in-out
                  ${de.trim()?"pr-8":"pr-4"}
                `,style:{transition:"opacity 300ms ease-in-out, width 300ms ease-in-out"}}),de.trim()&&V&&k.jsx("button",{type:"button",onClick:()=>Pn(""),className:"absolute right-2 p-1 text-gray-400 hover:text-white transition-colors duration-200",title:"Clear search",children:k.jsx(Kf,{size:14})})]})}),k.jsx("button",{onClick:()=>y(!0),className:"p-2 rounded-full transition-colors duration-200 text-white bg-[#181b21] hover:bg-[#1C1F26]",title:"Open Notes",children:k.jsx(qM,{size:16,className:"transition-transform duration-200 hover:scale-110"})}),k.jsx("button",{onClick:Sd,className:`
            p-2 rounded-full transition-colors duration-200
            text-white ${DF(i)}
          `,title:i===0?"Filter bookmarks":i===1?"Show yellow bookmarks":"Show red bookmarks",children:k.jsx(Mk,{size:16,className:`${i>0?"fill-white":""} transition-transform duration-200 hover:scale-110`})}),k.jsxs("div",{ref:$,className:"relative",onMouseEnter:()=>Qe(!0),onMouseLeave:()=>{Qe(!1),d||setTimeout(()=>{oe||h(!1)},100)},children:[k.jsxs("button",{onClick:()=>h(!d),className:`
              px-3 py-1.5 rounded-full text-sm font-medium transition-colors duration-200
              ${e.length>0?"bg-rose-500 text-white hover:bg-rose-600":"bg-[#181b21] text-white hover:bg-[#1C1F26]"}
            `,children:["Issue Type ",e.length>0&&`(${e.length})`]}),k.jsxs("div",{className:`absolute top-full right-0 mt-2 w-48 rounded-lg shadow-lg z-20 bg-[#181b21] bg-opacity-70 backdrop-blur-md
            transition-all duration-300 ease-in-out ${d||oe?"opacity-100 max-h-screen":"opacity-0 max-h-0 overflow-hidden"}`,style:{transitionProperty:"opacity, max-height"},children:[k.jsx("div",{className:"p-2",children:k.jsxs("label",{className:"flex items-center p-2 hover:bg-[#2D3139] rounded cursor-pointer border-b border-[#2D3139]",children:[k.jsx("input",{type:"checkbox",checked:e.length===Ye.length,onChange:vl,className:"mr-2"}),k.jsx("span",{className:"text-sm text-white font-medium",children:"Select All"})]})}),k.jsx("div",{className:"p-2 max-h-60 overflow-y-auto column-scroll",children:Ye.map(F=>k.jsxs("label",{className:"flex items-center p-2 hover:bg-[#2D3139] rounded cursor-pointer",children:[k.jsx("input",{type:"checkbox",checked:e.includes(F),onChange:()=>{const ke=e.includes(F)?e.filter(Ps=>Ps!==F):[...e,F];r(ke)},className:"mr-2"}),k.jsx("span",{className:"text-sm text-white",children:F})]},F))})]})]}),k.jsxs("div",{ref:G,className:"relative",onMouseEnter:()=>ee(!0),onMouseLeave:()=>{ee(!1),f||setTimeout(()=>{Be||p(!1)},100)},children:[k.jsxs("button",{onClick:()=>p(!f),className:`
              px-3 py-1.5 rounded-full text-sm font-medium transition-colors duration-200
              ${t.length>0?"bg-rose-500 text-white hover:bg-rose-600":"bg-[#181b21] text-white hover:bg-[#1C1F26]"}
            `,children:["Assignee ",t.length>0&&`(${t.length})`]}),k.jsxs("div",{className:`absolute top-full right-0 mt-2 w-80 rounded-lg shadow-lg z-20 bg-[#181b21] bg-opacity-70 backdrop-blur-md
            transition-all duration-300 ease-in-out ${f||Be?"opacity-100 max-h-screen":"opacity-0 max-h-0 overflow-hidden"}`,style:{transitionProperty:"opacity, max-height"},children:[k.jsxs("div",{className:"p-2",children:[k.jsxs("div",{className:"relative mb-2",children:[k.jsx("input",{type:"text",placeholder:"Search assignees...",value:m,onChange:F=>v(F.target.value),className:"w-full bg-[#0c1015] border border-[#2D3139] rounded-full px-3 py-1.5 pl-8 text-sm text-white placeholder-gray-400 focus:outline-none focus:border-rose-500"}),k.jsx(Pv,{className:"absolute left-2 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),m&&k.jsx("button",{type:"button",onClick:()=>v(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-white",children:k.jsx(Kf,{className:"h-4 w-4"})})]}),k.jsxs("label",{className:"flex items-center p-2 hover:bg-[#2D3139] rounded cursor-pointer border-b border-[#2D3139]",children:[k.jsx("input",{type:"checkbox",checked:t.length===pe.length,onChange:Cd,className:"mr-2"}),k.jsx("span",{className:"text-sm text-white font-medium",children:"Select All"})]})]}),k.jsx("div",{className:"p-2 max-h-60 overflow-y-auto column-scroll",children:wt.map(F=>k.jsxs("label",{className:"flex items-center p-2 hover:bg-[#2D3139] rounded cursor-pointer",children:[k.jsx("input",{type:"checkbox",checked:t.includes(F),onChange:()=>{const ke=t.includes(F)?t.filter(Ps=>Ps!==F):[...t,F];o(ke)},className:"mr-2"}),k.jsx("span",{className:"text-sm text-white",children:F})]},F))})]})]}),k.jsx(d_,{})]}),k.jsx(xF,{isOpen:g,onClose:()=>y(!1)})]})}const UF="kanban_sprint_name",JC="DAP - 25",FF="kanban_search_value",HF=()=>{try{return localStorage.getItem(UF)||JC}catch(n){return console.error("Error loading sprint name from localStorage:",n),JC}},BF=()=>{try{return localStorage.getItem(FF)||""}catch(n){return console.error("Error loading search value from localStorage:",n),""}};function zF(){const{instance:n}=qm(),[e,t]=S.useState([]),[r,o]=S.useState([]),[i,s]=S.useState(null),[a,l]=S.useState([]),[c,u]=S.useState([]),[d,h]=S.useState(0),[f,p]=S.useState(()=>BF()),[m,v]=S.useState(!0),[g,y]=S.useState(null),[C,w]=S.useState(!1),[I,A]=S.useState(!1),[R,E]=S.useState(null),[_,O]=S.useState(null),[W,ce]=S.useState(null),[ue,ve]=S.useState(null);S.useEffect(()=>{ht(HF())},[]);const ht=async ee=>{try{y(null),w(!1),E(null),O(null),t(se=>se.map(H=>({...H,isHighlighted:!1})));const V=await t_(ee),X=[...Array.from(new Set(V.map(se=>{var H;return(H=se.rowData)==null?void 0:H.Status}))).filter(se=>$f.includes(se)).map(se=>({id:se,title:se,isHighlighted:!1})),{id:"Other Status",title:"Other Status",isHighlighted:!1}].sort((se,H)=>Wl(se.id)-Wl(H.id));t(X),o(V)}catch(V){console.error("Error loading task data:",V),y("Failed to load tasks. Please try again later."),w(!0)}finally{v(!1)}},en=(ee,V)=>{console.log("handleStatusCheckResult called with:",{taskId:ee,targetStatuses:V}),console.log("Current columns before processing:",e.map(Y=>({id:Y.id,title:Y.title,isHighlighted:Y.isHighlighted}))),E(null),O(null),t(Y=>Y.map(X=>({...X,isHighlighted:!1}))),setTimeout(()=>{E(ee),console.log("Set highlighted task ID to:",ee),t(Y=>{const X=[...Y],se=new Set(X.map(H=>H.id));return console.log("Existing column IDs:",Array.from(se)),V.forEach(H=>{if(console.log("Processing target status:",H),se.has(H))console.log("Column already exists for status:",H);else{console.log("Creating new column for status:",H);const $e={id:H,title:H,isHighlighted:!0},de=X.findIndex(Re=>Wl(H)<Wl(Re.id));de===-1?X.push($e):X.splice(de,0,$e),se.add(H)}}),X.forEach(H=>{const $e=H.id,de=V.includes($e);console.log(`Column comparison - ID: "${$e}", Target statuses: [${V.map(Re=>`"${Re}"`).join(", ")}], shouldHighlight: ${de}`),H.isHighlighted=de}),console.log("Final columns after processing:",X.map(H=>({id:H.id,title:H.title,isHighlighted:H.isHighlighted}))),X})},10)},Ue=()=>{console.log("clearHighlighting called"),E(null),O(null),t(ee=>{const V=ee.map(Y=>({...Y,isHighlighted:!1}));return console.log("Cleared highlighting for columns:",V.map(Y=>({id:Y.id,isHighlighted:Y.isHighlighted}))),V})},D=()=>{n.loginPopup(eu).then(()=>{A(!1),console.log("Login successful")}).catch(ee=>{console.error("Login failed:",ee),A(!1)})},$=()=>{A(!1)},G=cO(lO(eg,{activationConstraint:{distance:3}}));function fe(ee){var V,Y;if(((V=ee.active.data.current)==null?void 0:V.type)==="Task"){const X=ee.active.data.current.task;s(X),ve(X.columnId),console.log("Drag started - Task:",(Y=X.rowData)==null?void 0:Y["Issue Id"],"Original Column:",X.columnId)}}function oe(ee){var Re,Ee,Ye;const{active:V,over:Y}=ee;if(!Y)return;const X=V.id,se=Y.id;if(X===se)return;const H=((Re=V.data.current)==null?void 0:Re.type)==="Task",$e=((Ee=Y.data.current)==null?void 0:Ee.type)==="Task";if(!H)return;H&&$e&&o(pe=>{const wt=pe.findIndex(Ne=>Ne.id===X),Vt=pe.findIndex(Ne=>Ne.id===se);return pe[wt].columnId!==pe[Vt].columnId&&(pe[wt].columnId=pe[Vt].columnId),va(pe,wt,Vt)});const de=((Ye=Y.data.current)==null?void 0:Ye.type)==="Column";H&&de&&o(pe=>{const wt=pe.findIndex(Vt=>Vt.id===X);return pe[wt].columnId=se,va(pe,wt,wt)})}async function Qe(ee){var Ye,pe,wt,Vt;const{active:V,over:Y}=ee;if(s(null),!Y){ve(null);return}const X=V.id,se=Y.id;if(X===se){ve(null);return}const H=((Ye=V.data.current)==null?void 0:Ye.type)==="Task",$e=((pe=Y.data.current)==null?void 0:pe.type)==="Task",de=((wt=Y.data.current)==null?void 0:wt.type)==="Column";if(!H){ve(null);return}const Re=r.find(Ne=>Ne.id===X);if(!Re){ve(null);return}let Ee;if($e){const Ne=r.find(ze=>ze.id===se);if(!Ne){ve(null);return}Ee=Ne.columnId}else if(de)Ee=se;else{ve(null);return}if(console.log("Drag end - Original Column:",ue,"New Column:",Ee,"Should update:",ue&&ue!==Ee),ue&&ue!==Ee)try{console.log(`Updating task ${(Vt=Re.rowData)==null?void 0:Vt["Issue Id"]} from ${ue} to ${Ee}`),ce(X),await i_(Re,Ee),console.log("Task status updated successfully"),o(Ne=>Ne.map(ze=>ze.id===X?{...ze,rowData:{...ze.rowData,Status:Ee}}:ze)),E(null),O(X),t(Ne=>Ne.map(ze=>({...ze,isHighlighted:!1})))}catch(Ne){console.error("Failed to update task status:",Ne),o(ze=>ze.map(_n=>_n.id===X?{..._n,columnId:ue,rowData:{..._n.rowData,Status:ue}}:_n)),Ne instanceof Error&&Ne.message==="AUTHENTICATION_REQUIRED"?(console.log("Authentication required - showing login popup"),A(!0)):(y(`Failed to update task status: ${Ne instanceof Error?Ne.message:"Unknown error"}`),w(!0))}finally{ce(null)}ve(null)}const Be=r.filter(ee=>{const V=typeof ee.rowData=="object"?ee.rowData:{},Y=a.length===0||a.includes(V["Issue Type"]),X=c.length===0||c.includes(V.Assignee),H=JSON.parse(localStorage.getItem("taskBookmarks")||"{}")[V["Issue Id"]]||0,$e=d===0||H===d,de=!f.trim()||(()=>{const Re=f.toLowerCase().trim(),Ee=(V["Issue Id"]||"").toLowerCase(),Ye=(V.Summary||"").toLowerCase(),pe=(V.Assignee||"").toLowerCase();return Ee.includes(Re)||Ye.includes(Re)||pe.includes(Re)})();return Y&&X&&$e&&de});return k.jsxs("div",{className:"h-screen flex flex-col",children:[m&&k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:k.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-rose-500"})}),C&&g&&k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:k.jsxs("div",{className:"text-center bg-[#181b21] p-6 rounded-lg shadow-xl border border-[#2D3139]",children:[k.jsx("p",{className:"text-rose-500 mb-4",children:g}),k.jsx("button",{onClick:()=>w(!1),className:"px-4 py-2 bg-rose-500 rounded-lg hover:bg-rose-600 transition-colors",children:"Okay"})]})}),I&&k.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:k.jsxs("div",{className:"text-center bg-[#181b21] p-6 rounded-lg shadow-xl border border-[#2D3139]",children:[k.jsx("p",{className:"text-rose-500 mb-4",children:"Please log in with your Microsoft account to update task status."}),k.jsxs("div",{className:"flex gap-3 justify-center",children:[k.jsx("button",{onClick:D,className:"px-4 py-2 bg-rose-500 rounded-lg hover:bg-rose-600 transition-colors text-white",children:"Login"}),k.jsx("button",{onClick:$,className:"px-4 py-2 bg-gray-600 rounded-lg hover:bg-gray-700 transition-colors text-white",children:"Cancel"})]})]})}),k.jsx(LF,{tasks:r,selectedIssueTypes:a,selectedAssignees:c,onIssueTypeChange:l,onAssigneeChange:u,bookmarkFilter:d,onBookmarkFilterChange:h,onRefresh:ht,searchValue:f,onSearchChange:p,filteredTasksCount:Be.length}),k.jsxs(sM,{sensors:G,onDragStart:fe,onDragOver:oe,onDragEnd:Qe,children:[k.jsx("div",{className:"flex-1 overflow-x-auto overflow-y-hidden p-4 hide-scrollbar",onClick:ee=>{ee.target===ee.currentTarget&&Ue()},children:k.jsx("div",{className:"flex gap-4",children:e.map(ee=>{const V=Be.filter(Y=>Y.columnId===ee.id);return k.jsx("div",{className:"flex flex-col h-[calc(100vh-5.5rem)] min-h-[400px] w-[350px]",children:k.jsx(u_,{column:ee,tasks:V,onStatusCheckResult:en,highlightedTaskId:R,successTaskId:_,updatingTaskId:W})},ee.id)})})}),oo.createPortal(k.jsx(IM,{children:i&&k.jsx(Dk,{task:i,onStatusCheckResult:en,isHighlighted:R===i.id,isSuccess:_===i.id,isUpdating:W===i.id})}),document.body)]})]})}function KF(){return k.jsx("div",{className:"h-screen bg-[#000] text-white overflow-hidden",children:k.jsx(zF,{})})}const jF=new Zu(XE);dT(document.getElementById("root")).render(k.jsx(S.StrictMode,{children:k.jsx(x1,{instance:jF,children:k.jsx(W1,{children:k.jsx(KF,{})})})}));
